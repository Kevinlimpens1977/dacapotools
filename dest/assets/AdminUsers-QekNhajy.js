import{u,k as b,r as i,j as e,p as j,n as y,q as N}from"./index-BJVU1ABf.js";function v(){const{isSupervisor:a,user:x}=u(),m=b(),[r,h]=i.useState([]),[p,d]=i.useState(!0);i.useEffect(()=>{(async()=>{try{d(!0);const t=j(y,"users"),o=(await N(t)).docs.map(l=>{const n=l.data();return{id:l.id,...n}});o.sort((l,n)=>(l.email||"").localeCompare(n.email||"")),h(o)}catch(t){console.error("Error fetching users:",t)}finally{d(!1)}})()},[]);const g=s=>s==="supervisor"?{label:"Supervisor",class:"bg-purple-500/10 text-purple-600 dark:text-purple-400"}:{label:"Gebruiker",class:"bg-gray-500/10 text-gray-600 dark:text-gray-400"};return p?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):e.jsxs("div",{className:"space-y-6 max-w-7xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gebruikers"}),e.jsx("p",{className:"text-secondary mt-1",children:"Beheer alle gebruikers en hun app-instellingen"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-sm text-secondary",children:"Totaal Gebruikers"})]})]})}),e.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"shield_person"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r.filter(s=>s.role==="supervisor").length}),e.jsx("p",{className:"text-sm text-secondary",children:"Supervisors"})]})]})})]}),e.jsx("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Globale Rol"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Laatste Login"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Aangemaakt"}),a&&e.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:a?5:4,className:"px-4 py-12 text-center text-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"group"}),e.jsx("p",{children:"Geen gebruikers gevonden"})]})}):r.map(s=>{const t=g(s.role),c=s.id===x?.uid;return e.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-full bg-[#2860E0] flex items-center justify-center text-white font-medium shrink-0",children:(s.displayName||s.email||"?").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[s.displayName||"Onbekend",c&&e.jsx("span",{className:"text-xs text-secondary",children:"(jij)"})]}),e.jsx("p",{className:"text-sm text-secondary",children:s.email})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${t.class}`,children:t.label})}),e.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:s.lastLogin?new Date(s.lastLogin.toDate?.()||s.lastLogin).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:s.createdAt?new Date(s.createdAt.toDate?.()||s.createdAt).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"}):"-"}),a&&e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{onClick:()=>m(`/admin/users/${s.id}`),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 hover:text-gray-900 dark:hover:text-gray-100",title:"App-instellingen beheren",children:e.jsx("span",{className:"material-symbols-outlined",children:"settings"})})})})]},s.id)})})]})}),!a&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"material-symbols-outlined",children:"info"}),e.jsx("p",{className:"text-sm",children:"Als admin heb je alleen-lezen toegang. Neem contact op met een supervisor voor het wijzigen van gebruikersinstellingen."})]})]})}export{v as default};

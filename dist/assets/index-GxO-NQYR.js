(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Qm={exports:{}},rc={};var kb;function DS(){if(kb)return rc;kb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:u,ref:o!==void 0?o:null,props:c}}return rc.Fragment=e,rc.jsx=n,rc.jsxs=n,rc}var Mb;function jS(){return Mb||(Mb=1,Qm.exports=DS()),Qm.exports}var f=jS(),Ym={exports:{}},we={};var Vb;function OS(){if(Vb)return we;Vb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function C(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,M={};function H(z,se,ce){this.props=z,this.context=se,this.refs=M,this.updater=ce||N}H.prototype.isReactComponent={},H.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},H.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function B(){}B.prototype=H.prototype;function Y(z,se,ce){this.props=z,this.context=se,this.refs=M,this.updater=ce||N}var X=Y.prototype=new B;X.constructor=Y,U(X,H.prototype),X.isPureReactComponent=!0;var ie=Array.isArray;function ae(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(z,se,ce){var de=ce.ref;return{$$typeof:s,type:z,key:se,ref:de!==void 0?de:null,props:ce}}function O(z,se){return I(z.type,se,z.props)}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===s}function L(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ce){return se[ce]})}var j=/\/+/g;function _e(z,se){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):se.toString(36)}function Qe(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ae,ae):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function J(z,se,ce,de,xe){var Ne=typeof z;(Ne==="undefined"||Ne==="boolean")&&(z=null);var Le=!1;if(z===null)Le=!0;else switch(Ne){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(z.$$typeof){case s:case e:Le=!0;break;case b:return Le=z._init,J(Le(z._payload),se,ce,de,xe)}}if(Le)return xe=xe(z),Le=de===""?"."+_e(z,0):de,ie(xe)?(ce="",Le!=null&&(ce=Le.replace(j,"$&/")+"/"),J(xe,se,ce,"",function(Ui){return Ui})):xe!=null&&(D(xe)&&(xe=O(xe,ce+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(j,"$&/")+"/")+Le)),se.push(xe)),1;Le=0;var Vt=de===""?".":de+":";if(ie(z))for(var ct=0;ct<z.length;ct++)de=z[ct],Ne=Vt+_e(de,ct),Le+=J(de,se,ce,Ne,xe);else if(ct=C(z),typeof ct=="function")for(z=ct.call(z),ct=0;!(de=z.next()).done;)de=de.value,Ne=Vt+_e(de,ct++),Le+=J(de,se,ce,Ne,xe);else if(Ne==="object"){if(typeof z.then=="function")return J(Qe(z),se,ce,de,xe);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Le}function le(z,se,ce){if(z==null)return z;var de=[],xe=0;return J(z,de,"","",function(Ne){return se.call(ce,Ne,xe++)}),de}function ye(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=ce)},function(ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=ce)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var ze=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Ye={map:le,forEach:function(z,se,ce){le(z,function(){se.apply(this,arguments)},ce)},count:function(z){var se=0;return le(z,function(){se++}),se},toArray:function(z){return le(z,function(se){return se})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return we.Activity=x,we.Children=Ye,we.Component=H,we.Fragment=n,we.Profiler=o,we.PureComponent=Y,we.StrictMode=i,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,we.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},we.cache=function(z){return function(){return z.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(z,se,ce){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var de=U({},z.props),xe=z.key;if(se!=null)for(Ne in se.key!==void 0&&(xe=""+se.key),se)!A.call(se,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&se.ref===void 0||(de[Ne]=se[Ne]);var Ne=arguments.length-2;if(Ne===1)de.children=ce;else if(1<Ne){for(var Le=Array(Ne),Vt=0;Vt<Ne;Vt++)Le[Vt]=arguments[Vt+2];de.children=Le}return I(z.type,xe,de)},we.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},we.createElement=function(z,se,ce){var de,xe={},Ne=null;if(se!=null)for(de in se.key!==void 0&&(Ne=""+se.key),se)A.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(xe[de]=se[de]);var Le=arguments.length-2;if(Le===1)xe.children=ce;else if(1<Le){for(var Vt=Array(Le),ct=0;ct<Le;ct++)Vt[ct]=arguments[ct+2];xe.children=Vt}if(z&&z.defaultProps)for(de in Le=z.defaultProps,Le)xe[de]===void 0&&(xe[de]=Le[de]);return I(z,Ne,xe)},we.createRef=function(){return{current:null}},we.forwardRef=function(z){return{$$typeof:p,render:z}},we.isValidElement=D,we.lazy=function(z){return{$$typeof:b,_payload:{_status:-1,_result:z},_init:ye}},we.memo=function(z,se){return{$$typeof:y,type:z,compare:se===void 0?null:se}},we.startTransition=function(z){var se=R.T,ce={};R.T=ce;try{var de=z(),xe=R.S;xe!==null&&xe(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ae,ze)}catch(Ne){ze(Ne)}finally{se!==null&&ce.types!==null&&(se.types=ce.types),R.T=se}},we.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},we.use=function(z){return R.H.use(z)},we.useActionState=function(z,se,ce){return R.H.useActionState(z,se,ce)},we.useCallback=function(z,se){return R.H.useCallback(z,se)},we.useContext=function(z){return R.H.useContext(z)},we.useDebugValue=function(){},we.useDeferredValue=function(z,se){return R.H.useDeferredValue(z,se)},we.useEffect=function(z,se){return R.H.useEffect(z,se)},we.useEffectEvent=function(z){return R.H.useEffectEvent(z)},we.useId=function(){return R.H.useId()},we.useImperativeHandle=function(z,se,ce){return R.H.useImperativeHandle(z,se,ce)},we.useInsertionEffect=function(z,se){return R.H.useInsertionEffect(z,se)},we.useLayoutEffect=function(z,se){return R.H.useLayoutEffect(z,se)},we.useMemo=function(z,se){return R.H.useMemo(z,se)},we.useOptimistic=function(z,se){return R.H.useOptimistic(z,se)},we.useReducer=function(z,se,ce){return R.H.useReducer(z,se,ce)},we.useRef=function(z){return R.H.useRef(z)},we.useState=function(z){return R.H.useState(z)},we.useSyncExternalStore=function(z,se,ce){return R.H.useSyncExternalStore(z,se,ce)},we.useTransition=function(){return R.H.useTransition()},we.version="19.2.3",we}var Ub;function Yp(){return Ub||(Ub=1,Ym.exports=OS()),Ym.exports}var V=Yp(),$m={exports:{}},ic={},Xm={exports:{}},Wm={};var Lb;function kS(){return Lb||(Lb=1,(function(s){function e(J,le){var ye=J.length;J.push(le);e:for(;0<ye;){var ze=ye-1>>>1,Ye=J[ze];if(0<o(Ye,le))J[ze]=le,J[ye]=Ye,ye=ze;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var le=J[0],ye=J.pop();if(ye!==le){J[0]=ye;e:for(var ze=0,Ye=J.length,z=Ye>>>1;ze<z;){var se=2*(ze+1)-1,ce=J[se],de=se+1,xe=J[de];if(0>o(ce,ye))de<Ye&&0>o(xe,ce)?(J[ze]=xe,J[de]=ye,ze=de):(J[ze]=ce,J[se]=ye,ze=se);else if(de<Ye&&0>o(xe,ye))J[ze]=xe,J[de]=ye,ze=de;else break e}}return le}function o(J,le){var ye=J.sortIndex-le.sortIndex;return ye!==0?ye:J.id-le.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,x=null,w=3,C=!1,N=!1,U=!1,M=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function X(J){for(var le=n(y);le!==null;){if(le.callback===null)i(y);else if(le.startTime<=J)i(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=n(y)}}function ie(J){if(U=!1,X(J),!N)if(n(g)!==null)N=!0,ae||(ae=!0,L());else{var le=n(y);le!==null&&Qe(ie,le.startTime-J)}}var ae=!1,R=-1,A=5,I=-1;function O(){return M?!0:!(s.unstable_now()-I<A)}function D(){if(M=!1,ae){var J=s.unstable_now();I=J;var le=!0;try{e:{N=!1,U&&(U=!1,B(R),R=-1),C=!0;var ye=w;try{t:{for(X(J),x=n(g);x!==null&&!(x.expirationTime>J&&O());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,w=x.priorityLevel;var Ye=ze(x.expirationTime<=J);if(J=s.unstable_now(),typeof Ye=="function"){x.callback=Ye,X(J),le=!0;break t}x===n(g)&&i(g),X(J)}else i(g);x=n(g)}if(x!==null)le=!0;else{var z=n(y);z!==null&&Qe(ie,z.startTime-J),le=!1}}break e}finally{x=null,w=ye,C=!1}le=void 0}}finally{le?L():ae=!1}}}var L;if(typeof Y=="function")L=function(){Y(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,_e=j.port2;j.port1.onmessage=D,L=function(){_e.postMessage(null)}}else L=function(){H(D,0)};function Qe(J,le){R=H(function(){J(s.unstable_now())},le)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(J){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var ye=w;w=le;try{return J()}finally{w=ye}},s.unstable_requestPaint=function(){M=!0},s.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ye=w;w=J;try{return le()}finally{w=ye}},s.unstable_scheduleCallback=function(J,le,ye){var ze=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,J){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=ye+Ye,J={id:b++,callback:le,priorityLevel:J,startTime:ye,expirationTime:Ye,sortIndex:-1},ye>ze?(J.sortIndex=ye,e(y,J),n(g)===null&&J===n(y)&&(U?(B(R),R=-1):U=!0,Qe(ie,ye-ze))):(J.sortIndex=Ye,e(g,J),N||C||(N=!0,ae||(ae=!0,L()))),J},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(J){var le=w;return function(){var ye=w;w=le;try{return J.apply(this,arguments)}finally{w=ye}}}})(Wm)),Wm}var Pb;function MS(){return Pb||(Pb=1,Xm.exports=kS()),Xm.exports}var Jm={exports:{}},en={};var zb;function VS(){if(zb)return en;zb=1;var s=Yp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:b}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,b)},en.flushSync=function(g){var y=u.T,b=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=b,i.d.f()}},en.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},en.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},en.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:C}):b==="script"&&i.d.X(g,{crossOrigin:x,integrity:w,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},en.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},en.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},en.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},en.requestFormReset=function(g){i.d.r(g)},en.unstable_batchedUpdates=function(g,y){return g(y)},en.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.3",en}var Bb;function US(){if(Bb)return Jm.exports;Bb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jm.exports=VS(),Jm.exports}var qb;function LS(){if(qb)return ic;qb=1;var s=MS(),e=Yp(),n=US();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return g(d),t;if(m===l)return g(d),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=m;else{for(var v=!1,T=d.child;T;){if(T===a){v=!0,a=d,l=m;break}if(T===l){v=!0,l=d,a=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===a){v=!0,a=m,l=d;break}if(T===l){v=!0,l=m,a=d;break}T=T.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function _e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case H:return"Profiler";case M:return"StrictMode";case ie:return"Suspense";case ae:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case Y:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case X:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:_e(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return _e(t(r))}catch{}}return null}var Qe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ze=[],Ye=-1;function z(t){return{current:t}}function se(t){0>Ye||(t.current=ze[Ye],ze[Ye]=null,Ye--)}function ce(t,r){Ye++,ze[Ye]=t.current,t.current=r}var de=z(null),xe=z(null),Ne=z(null),Le=z(null);function Vt(t,r){switch(ce(Ne,r),ce(xe,t),ce(de,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?sb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=sb(r),t=rb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}se(de),ce(de,t)}function ct(){se(de),se(xe),se(Ne)}function Ui(t){t.memoizedState!==null&&ce(Le,t);var r=de.current,a=rb(r,t.type);r!==a&&(ce(xe,t),ce(de,a))}function ka(t){xe.current===t&&(se(de),se(xe)),Le.current===t&&(se(Le),ec._currentValue=ye)}var Ma,Va;function gs(t){if(Ma===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ma=r&&r[1]||"",Va=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ma+t+Va}var el=!1;function Li(t,r){if(!t||el)return"";el=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Q=W}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(W){Q=W}t.call(ne.prototype)}}else{try{throw Error()}catch(W){Q=W}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var k=v.split(`
`),K=T.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===K.length)for(l=k.length-1,d=K.length-1;1<=l&&0<=d&&k[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==K[d]){var Z=`
`+k[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=d);break}}}finally{el=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?gs(a):""}function tl(t,r){switch(t.tag){case 26:case 27:case 5:return gs(t.type);case 16:return gs("Lazy");case 13:return t.child!==r&&r!==null?gs("Suspense Fallback"):gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Li(t.type,!1);case 11:return Li(t.type.render,!1);case 1:return Li(t.type,!0);case 31:return gs("Activity");default:return""}}function nl(t){try{var r="",a=null;do r+=tl(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wt=Object.prototype.hasOwnProperty,Ut=s.unstable_scheduleCallback,jr=s.unstable_cancelCallback,Yd=s.unstable_shouldYield,Jc=s.unstable_requestPaint,an=s.unstable_now,Pi=s.unstable_getCurrentPriorityLevel,sl=s.unstable_ImmediatePriority,rl=s.unstable_UserBlockingPriority,Or=s.unstable_NormalPriority,$d=s.unstable_LowPriority,Zc=s.unstable_IdlePriority,eu=s.log,tu=s.unstable_setDisableYieldValue,Zn=null,Ft=null;function Vn(t){if(typeof eu=="function"&&tu(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Zn,t)}catch{}}var vt=Math.clz32?Math.clz32:su,nu=Math.log,Ua=Math.LN2;function su(t){return t>>>=0,t===0?32:31-(nu(t)/Ua|0)|0}var ys=256,zi=262144,At=4194304;function _s(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function vs(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?d=_s(l):(v&=T,v!==0?d=_s(v):a||(a=T&~t,a!==0&&(d=_s(a))))):(T=l&~m,T!==0?d=_s(T):v!==0?d=_s(v):a||(a=l&~t,a!==0&&(d=_s(a)))),d===0?0:r!==0&&r!==d&&(r&m)===0&&(m=d&-d,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:d}function es(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Xd(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ru(){var t=At;return At<<=1,(At&62914560)===0&&(At=4194304),t}function bs(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Bi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wd(t,r,a,l,d,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,k=t.expirationTimes,K=t.hiddenUpdates;for(a=v&~a;0<a;){var Z=31-vt(a),ne=1<<Z;T[Z]=0,k[Z]=-1;var Q=K[Z];if(Q!==null)for(K[Z]=null,Z=0;Z<Q.length;Z++){var W=Q[Z];W!==null&&(W.lane&=-536870913)}a&=~ne}l!==0&&qi(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~r))}function qi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-vt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function il(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-vt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function al(t,r){var a=r&-r;return a=(a&42)!==0?1:Hi(a),(a&(t.suspendedLanes|r))!==0?0:a}function Hi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function iu(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Rb(t.type))}function ts(t,r){var a=le.p;try{return le.p=t,r()}finally{le.p=a}}var ns=Math.random().toString(36).slice(2),St="__reactFiber$"+ns,zt="__reactProps$"+ns,Es="__reactContainer$"+ns,La="__reactEvents$"+ns,Jd="__reactListeners$"+ns,au="__reactHandles$"+ns,ou="__reactResources$"+ns,xs="__reactMarker$"+ns;function Pa(t){delete t[St],delete t[zt],delete t[La],delete t[Jd],delete t[au]}function Ts(t){var r=t[St];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Es]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=hb(t);t!==null;){if(a=t[St])return a;t=hb(t)}return r}t=a,a=t.parentNode}return null}function Un(t){if(t=t[St]||t[Es]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function xn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function ws(t){var r=t[ou];return r||(r=t[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(t){t[xs]=!0}var ol=new Set,ll={};function As(t,r){Ss(t,r),Ss(t+"Capture",r)}function Ss(t,r){for(ll[t]=r,t=0;t<r.length;t++)ol.add(r[t])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ul={},hl={};function lu(t){return wt.call(hl,t)?!0:wt.call(ul,t)?!1:cl.test(t)?hl[t]=!0:(ul[t]=!0,!1)}function za(t,r,a){if(lu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Tn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Nt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dl(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $e(t){if(!t._valueTracker){var r=kr(t)?"checked":"value";t._valueTracker=dl(t,r,""+t[r])}}function Fi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=kr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Rs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gi=/[\n"\\]/g;function hn(t){return t.replace(Gi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ba(t,r,a,l,d,m,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Bt(r)):t.value!==""+Bt(r)&&(t.value=""+Bt(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?fl(t,v,Bt(r)):a!=null?fl(t,v,Bt(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Bt(T):t.removeAttribute("name")}function cu(t,r,a,l,d,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){$e(t);return}a=a!=null?""+Bt(a):"",r=r!=null?""+Bt(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),$e(t)}function fl(t,r,a){r==="number"&&Rs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Mr(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function uu(t,r,a){if(r!=null&&(r=""+Bt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Bt(a):""}function Vr(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Qe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Bt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),$e(t)}function dn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||hu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function pl(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&ml(t,d,l)}else for(var m in r)r.hasOwnProperty(m)&&ml(t,m,r[m])}function qa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(t){return Ur.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ss(){}var gl=null;function Ln(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lr=null,Ns=null;function Ki(t){var r=Un(t);if(r&&(t=r.stateNode)){var a=t[zt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ba(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[zt]||null;if(!d)throw Error(i(90));Ba(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Fi(l)}break e;case"textarea":uu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Mr(t,!!a.multiple,r,!1)}}}var Fa=!1;function Pr(t,r,a){if(Fa)return t(r,a);Fa=!0;try{var l=t(r);return l}finally{if(Fa=!1,(Lr!==null||Ns!==null)&&(ih(),Lr&&(r=Lr,t=Ns,Ns=Lr=null,Ki(r),t)))for(r=0;r<t.length;r++)Ki(t[r])}}function rs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(Pn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Qi=!1}var Cs=null,yl=null,Yi=null;function _l(){if(Yi)return Yi;var t,r=yl,a=r.length,l,d="value"in Cs?Cs.value:Cs.textContent,m=d.length;for(t=0;t<a&&r[t]===d[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===d[m-l];l++);return Yi=d.slice(t,1<l?1-l:void 0)}function $i(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function is(){return!1}function Gt(t){function r(a,l,d,m,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ws:is,this.isPropagationStopped=is,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),r}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=Gt(Js),zr=x({},Js,{view:0,detail:0}),vl=Gt(zr),Br,Ga,Ds,Ka=x({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(Br=t.screenX-Ds.screenX,Ga=t.screenY-Ds.screenY):Ga=Br=0,Ds=t),Br)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),bl=Gt(Ka),Xi=x({},Ka,{dataTransfer:0}),fu=Gt(Xi),mu=x({},zr,{relatedTarget:0}),Wi=Gt(mu),El=x({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),pu=Gt(El),Qa=x({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gu=Gt(Qa),yu=x({},Js,{data:0}),js=Gt(yu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=bu[t])?!!r[t]:!1}function qr(){return Eu}var on=x({},zr,{key:function(t){if(t.key){var r=_u[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=$i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(t){return t.type==="keypress"?$i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xu=Gt(on),Tu=x({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zs=Gt(Tu),h=x({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),_=Gt(h),E=x({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Gt(E),F=x({},Ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Gt(F),oe=x({},Js,{newState:0,oldState:0}),Se=Gt(oe),bt=[9,13,27,32],He=Pn&&"CompositionEvent"in window,ut=null;Pn&&"documentMode"in document&&(ut=document.documentMode);var zn=Pn&&"TextEvent"in window&&!ut,Os=Pn&&(!He||ut&&8<ut&&11>=ut),as=" ",os=!1;function Ji(t,r){switch(t){case"keyup":return bt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ya(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function tA(t,r){switch(t){case"compositionend":return Ya(r);case"keypress":return r.which!==32?null:(os=!0,as);case"textInput":return t=r.data,t===as&&os?null:t;default:return null}}function nA(t,r){if($a)return t==="compositionend"||!He&&Ji(t,r)?(t=_l(),Yi=yl=Cs=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Os&&r.locale!=="ko"?null:r.data;default:return null}}var sA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function my(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!sA[t.type]:r==="textarea"}function py(t,r,a,l){Lr?Ns?Ns.push(l):Ns=[l]:Lr=l,r=dh(r,"onChange"),0<r.length&&(a=new Is("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var xl=null,Tl=null;function rA(t){Wv(t,0)}function wu(t){var r=xn(t);if(Fi(r))return t}function gy(t,r){if(t==="change")return r}var yy=!1;if(Pn){var Zd;if(Pn){var ef="oninput"in document;if(!ef){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),ef=typeof _y.oninput=="function"}Zd=ef}else Zd=!1;yy=Zd&&(!document.documentMode||9<document.documentMode)}function vy(){xl&&(xl.detachEvent("onpropertychange",by),Tl=xl=null)}function by(t){if(t.propertyName==="value"&&wu(Tl)){var r=[];py(r,Tl,t,Ln(t)),Pr(rA,r)}}function iA(t,r,a){t==="focusin"?(vy(),xl=r,Tl=a,xl.attachEvent("onpropertychange",by)):t==="focusout"&&vy()}function aA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(Tl)}function oA(t,r){if(t==="click")return wu(r)}function lA(t,r){if(t==="input"||t==="change")return wu(r)}function cA(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var wn=typeof Object.is=="function"?Object.is:cA;function wl(t,r){if(wn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!wt.call(r,d)||!wn(t[d],r[d]))return!1}return!0}function Ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xy(t,r){var a=Ey(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ey(a)}}function Ty(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ty(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function wy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Rs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Rs(t.document)}return r}function tf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var uA=Pn&&"documentMode"in document&&11>=document.documentMode,Xa=null,nf=null,Al=null,sf=!1;function Ay(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||Xa==null||Xa!==Rs(l)||(l=Xa,"selectionStart"in l&&tf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Al&&wl(Al,l)||(Al=l,l=dh(nf,"onSelect"),0<l.length&&(r=new Is("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Xa)))}function Zi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Wa={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},rf={},Sy={};Pn&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ea(t){if(rf[t])return rf[t];if(!Wa[t])return t;var r=Wa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Sy)return rf[t]=r[a];return t}var Ry=ea("animationend"),Ny=ea("animationiteration"),Cy=ea("animationstart"),hA=ea("transitionrun"),dA=ea("transitionstart"),fA=ea("transitioncancel"),Iy=ea("transitionend"),Dy=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function ls(t,r){Dy.set(t,r),As(r,[t])}var Au=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Bn=[],Ja=0,of=0;function Su(){for(var t=Ja,r=of=Ja=0;r<t;){var a=Bn[r];Bn[r++]=null;var l=Bn[r];Bn[r++]=null;var d=Bn[r];Bn[r++]=null;var m=Bn[r];if(Bn[r++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}m!==0&&jy(a,d,m)}}function Ru(t,r,a,l){Bn[Ja++]=t,Bn[Ja++]=r,Bn[Ja++]=a,Bn[Ja++]=l,of|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function lf(t,r,a,l){return Ru(t,r,a,l),Nu(t)}function ta(t,r){return Ru(t,null,null,r),Nu(t)}function jy(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&r!==null&&(d=31-vt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),m):null}function Nu(t){if(50<Ql)throw Ql=0,ym=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Za={};function mA(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,r,a,l){return new mA(t,r,a,l)}function cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function er(t,r){var a=t.alternate;return a===null?(a=An(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Oy(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Cu(t,r,a,l,d,m){var v=0;if(l=t,typeof t=="function")cf(t)&&(v=1);else if(typeof t=="string")v=vS(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=An(31,a,r,d),t.elementType=I,t.lanes=m,t;case U:return na(a.children,d,m,r);case M:v=8,d|=24;break;case H:return t=An(12,a,r,d|2),t.elementType=H,t.lanes=m,t;case ie:return t=An(13,a,r,d),t.elementType=ie,t.lanes=m,t;case ae:return t=An(19,a,r,d),t.elementType=ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:v=10;break e;case B:v=9;break e;case X:v=11;break e;case R:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=An(v,a,r,d),r.elementType=t,r.type=l,r.lanes=m,r}function na(t,r,a,l){return t=An(7,t,l,r),t.lanes=a,t}function uf(t,r,a){return t=An(6,t,null,r),t.lanes=a,t}function ky(t){var r=An(18,null,null,0);return r.stateNode=t,r}function hf(t,r,a){return r=An(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var My=new WeakMap;function qn(t,r){if(typeof t=="object"&&t!==null){var a=My.get(t);return a!==void 0?a:(r={value:t,source:r,stack:nl(r)},My.set(t,r),r)}return{value:t,source:r,stack:nl(r)}}var eo=[],to=0,Iu=null,Sl=0,Hn=[],Fn=0,Hr=null,ks=1,Ms="";function tr(t,r){eo[to++]=Sl,eo[to++]=Iu,Iu=t,Sl=r}function Vy(t,r,a){Hn[Fn++]=ks,Hn[Fn++]=Ms,Hn[Fn++]=Hr,Hr=t;var l=ks;t=Ms;var d=32-vt(l)-1;l&=~(1<<d),a+=1;var m=32-vt(r)+d;if(30<m){var v=d-d%5;m=(l&(1<<v)-1).toString(32),l>>=v,d-=v,ks=1<<32-vt(r)+d|a<<d|l,Ms=m+t}else ks=1<<m|a<<d|l,Ms=t}function df(t){t.return!==null&&(tr(t,1),Vy(t,1,0))}function ff(t){for(;t===Iu;)Iu=eo[--to],eo[to]=null,Sl=eo[--to],eo[to]=null;for(;t===Hr;)Hr=Hn[--Fn],Hn[Fn]=null,Ms=Hn[--Fn],Hn[Fn]=null,ks=Hn[--Fn],Hn[Fn]=null}function Uy(t,r){Hn[Fn++]=ks,Hn[Fn++]=Ms,Hn[Fn++]=Hr,ks=r.id,Ms=r.overflow,Hr=t}var Kt=null,rt=null,Ue=!1,Fr=null,Gn=!1,mf=Error(i(519));function Gr(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(qn(r,t)),mf}function Ly(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[St]=t,r[zt]=l,a){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(a=0;a<$l.length;a++)De($l[a],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":De("invalid",r),cu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":De("invalid",r);break;case"textarea":De("invalid",r),Vr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||tb(r.textContent,a)?(l.popover!=null&&(De("beforetoggle",r),De("toggle",r)),l.onScroll!=null&&De("scroll",r),l.onScrollEnd!=null&&De("scrollend",r),l.onClick!=null&&(r.onclick=ss),r=!0):r=!1,r||Gr(t,!0)}function Py(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Kt=Kt.return}}function no(t){if(t!==Kt)return!1;if(!Ue)return Py(t),Ue=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jm(t.type,t.memoizedProps)),a=!a),a&&rt&&Gr(t),Py(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));rt=ub(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));rt=ub(t)}else r===27?(r=rt,ii(t.type)?(t=Um,Um=null,rt=t):rt=r):rt=Kt?Qn(t.stateNode.nextSibling):null;return!0}function sa(){rt=Kt=null,Ue=!1}function pf(){var t=Fr;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Fr=null),t}function Rl(t){Fr===null?Fr=[t]:Fr.push(t)}var gf=z(null),ra=null,nr=null;function Kr(t,r,a){ce(gf,r._currentValue),r._currentValue=a}function sr(t){t._currentValue=gf.current,se(gf)}function yf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function _f(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=d;for(var k=0;k<r.length;k++)if(T.context===r[k]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),yf(m.return,a,t),l||(v=null);break e}m=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),yf(v,a,t),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===t){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function so(t,r,a,l){t=null;for(var d=r,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=d.type;wn(d.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(d===Le.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ec):t=[ec])}d=d.return}t!==null&&_f(r,t,a,l),r.flags|=262144}function Du(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){ra=t,nr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return zy(ra,t)}function ju(t,r){return ra===null&&ia(t),zy(t,r)}function zy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},nr===null){if(t===null)throw Error(i(308));nr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else nr=nr.next=r;return a}var pA=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},gA=s.unstable_scheduleCallback,yA=s.unstable_NormalPriority,Ct={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new pA,data:new Map,refCount:0}}function Nl(t){t.refCount--,t.refCount===0&&gA(yA,function(){t.controller.abort()})}var Cl=null,bf=0,ro=0,io=null;function _A(t,r){if(Cl===null){var a=Cl=[];bf=0,ro=Tm(),io={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bf++,r.then(By,By),r}function By(){if(--bf===0&&Cl!==null){io!==null&&(io.status="fulfilled");var t=Cl;Cl=null,ro=0,io=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function vA(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var qy=J.S;J.S=function(t,r){Av=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_A(t,r),qy!==null&&qy(t,r)};var aa=z(null);function Ef(){var t=aa.current;return t!==null?t:nt.pooledCache}function Ou(t,r){r===null?ce(aa,aa.current):ce(aa,r.pool)}function Hy(){var t=Ef();return t===null?null:{parent:Ct._currentValue,pool:t}}var ao=Error(i(460)),xf=Error(i(474)),ku=Error(i(542)),Mu={then:function(){}};function Fy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ss,ss),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Qy(t),t;default:if(typeof r.status=="string")r.then(ss,ss);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Qy(t),t}throw la=r,ao}}function oa(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(la=a,ao):a}}var la=null;function Ky(){if(la===null)throw Error(i(459));var t=la;return la=null,t}function Qy(t){if(t===ao||t===ku)throw Error(i(483))}var oo=null,Il=0;function Vu(t){var r=Il;return Il+=1,oo===null&&(oo=[]),Gy(oo,t,r)}function Dl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Uu(t,r){throw r.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Yy(t){function r(q,P){if(t){var G=q.deletions;G===null?(q.deletions=[P],q.flags|=16):G.push(P)}}function a(q,P){if(!t)return null;for(;P!==null;)r(q,P),P=P.sibling;return null}function l(q){for(var P=new Map;q!==null;)q.key!==null?P.set(q.key,q):P.set(q.index,q),q=q.sibling;return P}function d(q,P){return q=er(q,P),q.index=0,q.sibling=null,q}function m(q,P,G){return q.index=G,t?(G=q.alternate,G!==null?(G=G.index,G<P?(q.flags|=67108866,P):G):(q.flags|=67108866,P)):(q.flags|=1048576,P)}function v(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,P,G,ee){return P===null||P.tag!==6?(P=uf(G,q.mode,ee),P.return=q,P):(P=d(P,G),P.return=q,P)}function k(q,P,G,ee){var pe=G.type;return pe===U?Z(q,P,G.props.children,ee,G.key):P!==null&&(P.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===A&&oa(pe)===P.type)?(P=d(P,G.props),Dl(P,G),P.return=q,P):(P=Cu(G.type,G.key,G.props,null,q.mode,ee),Dl(P,G),P.return=q,P)}function K(q,P,G,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=hf(G,q.mode,ee),P.return=q,P):(P=d(P,G.children||[]),P.return=q,P)}function Z(q,P,G,ee,pe){return P===null||P.tag!==7?(P=na(G,q.mode,ee,pe),P.return=q,P):(P=d(P,G),P.return=q,P)}function ne(q,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=uf(""+P,q.mode,G),P.return=q,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return G=Cu(P.type,P.key,P.props,null,q.mode,G),Dl(G,P),G.return=q,G;case N:return P=hf(P,q.mode,G),P.return=q,P;case A:return P=oa(P),ne(q,P,G)}if(Qe(P)||L(P))return P=na(P,q.mode,G,null),P.return=q,P;if(typeof P.then=="function")return ne(q,Vu(P),G);if(P.$$typeof===Y)return ne(q,ju(q,P),G);Uu(q,P)}return null}function Q(q,P,G,ee){var pe=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return pe!==null?null:T(q,P,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return G.key===pe?k(q,P,G,ee):null;case N:return G.key===pe?K(q,P,G,ee):null;case A:return G=oa(G),Q(q,P,G,ee)}if(Qe(G)||L(G))return pe!==null?null:Z(q,P,G,ee,null);if(typeof G.then=="function")return Q(q,P,Vu(G),ee);if(G.$$typeof===Y)return Q(q,P,ju(q,G),ee);Uu(q,G)}return null}function W(q,P,G,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return q=q.get(G)||null,T(P,q,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case C:return q=q.get(ee.key===null?G:ee.key)||null,k(P,q,ee,pe);case N:return q=q.get(ee.key===null?G:ee.key)||null,K(P,q,ee,pe);case A:return ee=oa(ee),W(q,P,G,ee,pe)}if(Qe(ee)||L(ee))return q=q.get(G)||null,Z(P,q,ee,pe,null);if(typeof ee.then=="function")return W(q,P,G,Vu(ee),pe);if(ee.$$typeof===Y)return W(q,P,G,ju(P,ee),pe);Uu(P,ee)}return null}function fe(q,P,G,ee){for(var pe=null,Be=null,me=P,Ce=P=0,Oe=null;me!==null&&Ce<G.length;Ce++){me.index>Ce?(Oe=me,me=null):Oe=me.sibling;var qe=Q(q,me,G[Ce],ee);if(qe===null){me===null&&(me=Oe);break}t&&me&&qe.alternate===null&&r(q,me),P=m(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe,me=Oe}if(Ce===G.length)return a(q,me),Ue&&tr(q,Ce),pe;if(me===null){for(;Ce<G.length;Ce++)me=ne(q,G[Ce],ee),me!==null&&(P=m(me,P,Ce),Be===null?pe=me:Be.sibling=me,Be=me);return Ue&&tr(q,Ce),pe}for(me=l(me);Ce<G.length;Ce++)Oe=W(me,q,Ce,G[Ce],ee),Oe!==null&&(t&&Oe.alternate!==null&&me.delete(Oe.key===null?Ce:Oe.key),P=m(Oe,P,Ce),Be===null?pe=Oe:Be.sibling=Oe,Be=Oe);return t&&me.forEach(function(ui){return r(q,ui)}),Ue&&tr(q,Ce),pe}function ve(q,P,G,ee){if(G==null)throw Error(i(151));for(var pe=null,Be=null,me=P,Ce=P=0,Oe=null,qe=G.next();me!==null&&!qe.done;Ce++,qe=G.next()){me.index>Ce?(Oe=me,me=null):Oe=me.sibling;var ui=Q(q,me,qe.value,ee);if(ui===null){me===null&&(me=Oe);break}t&&me&&ui.alternate===null&&r(q,me),P=m(ui,P,Ce),Be===null?pe=ui:Be.sibling=ui,Be=ui,me=Oe}if(qe.done)return a(q,me),Ue&&tr(q,Ce),pe;if(me===null){for(;!qe.done;Ce++,qe=G.next())qe=ne(q,qe.value,ee),qe!==null&&(P=m(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe);return Ue&&tr(q,Ce),pe}for(me=l(me);!qe.done;Ce++,qe=G.next())qe=W(me,q,Ce,qe.value,ee),qe!==null&&(t&&qe.alternate!==null&&me.delete(qe.key===null?Ce:qe.key),P=m(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe);return t&&me.forEach(function(IS){return r(q,IS)}),Ue&&tr(q,Ce),pe}function tt(q,P,G,ee){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case C:e:{for(var pe=G.key;P!==null;){if(P.key===pe){if(pe=G.type,pe===U){if(P.tag===7){a(q,P.sibling),ee=d(P,G.props.children),ee.return=q,q=ee;break e}}else if(P.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===A&&oa(pe)===P.type){a(q,P.sibling),ee=d(P,G.props),Dl(ee,G),ee.return=q,q=ee;break e}a(q,P);break}else r(q,P);P=P.sibling}G.type===U?(ee=na(G.props.children,q.mode,ee,G.key),ee.return=q,q=ee):(ee=Cu(G.type,G.key,G.props,null,q.mode,ee),Dl(ee,G),ee.return=q,q=ee)}return v(q);case N:e:{for(pe=G.key;P!==null;){if(P.key===pe)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){a(q,P.sibling),ee=d(P,G.children||[]),ee.return=q,q=ee;break e}else{a(q,P);break}else r(q,P);P=P.sibling}ee=hf(G,q.mode,ee),ee.return=q,q=ee}return v(q);case A:return G=oa(G),tt(q,P,G,ee)}if(Qe(G))return fe(q,P,G,ee);if(L(G)){if(pe=L(G),typeof pe!="function")throw Error(i(150));return G=pe.call(G),ve(q,P,G,ee)}if(typeof G.then=="function")return tt(q,P,Vu(G),ee);if(G.$$typeof===Y)return tt(q,P,ju(q,G),ee);Uu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(a(q,P.sibling),ee=d(P,G),ee.return=q,q=ee):(a(q,P),ee=uf(G,q.mode,ee),ee.return=q,q=ee),v(q)):a(q,P)}return function(q,P,G,ee){try{Il=0;var pe=tt(q,P,G,ee);return oo=null,pe}catch(me){if(me===ao||me===ku)throw me;var Be=An(29,me,null,q.mode);return Be.lanes=ee,Be.return=q,Be}}}var ca=Yy(!0),$y=Yy(!1),Qr=!1;function Tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Yr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Nu(t),jy(t,null,a),r}return Ru(t,l,r,a),Nu(t)}function jl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,il(t,a)}}function Af(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Sf=!1;function Ol(){if(Sf){var t=io;if(t!==null)throw t}}function kl(t,r,a,l){Sf=!1;var d=t.updateQueue;Qr=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var k=T,K=k.next;k.next=null,v===null?m=K:v.next=K,v=k;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==v&&(T===null?Z.firstBaseUpdate=K:T.next=K,Z.lastBaseUpdate=k))}if(m!==null){var ne=d.baseState;v=0,Z=K=k=null,T=m;do{var Q=T.lane&-536870913,W=Q!==T.lane;if(W?(je&Q)===Q:(l&Q)===Q){Q!==0&&Q===ro&&(Sf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=t,ve=T;Q=r;var tt=a;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){ne=fe.call(tt,ne,Q);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,Q=typeof fe=="function"?fe.call(tt,ne,Q):fe,Q==null)break e;ne=x({},ne,Q);break e;case 2:Qr=!0}}Q=T.callback,Q!==null&&(t.flags|=64,W&&(t.flags|=8192),W=d.callbacks,W===null?d.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(K=Z=W,k=ne):Z=Z.next=W,v|=Q;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;W=T,T=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);Z===null&&(k=ne),d.baseState=k,d.firstBaseUpdate=K,d.lastBaseUpdate=Z,m===null&&(d.shared.lanes=0),ei|=v,t.lanes=v,t.memoizedState=ne}}function Xy(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Wy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xy(a[t],r)}var lo=z(null),Lu=z(0);function Jy(t,r){t=dr,ce(Lu,t),ce(lo,r),dr=t|r.baseLanes}function Rf(){ce(Lu,dr),ce(lo,lo.current)}function Nf(){dr=Lu.current,se(lo),se(Lu)}var Sn=z(null),Kn=null;function Xr(t){var r=t.alternate;ce(Et,Et.current&1),ce(Sn,t),Kn===null&&(r===null||lo.current!==null||r.memoizedState!==null)&&(Kn=t)}function Cf(t){ce(Et,Et.current),ce(Sn,t),Kn===null&&(Kn=t)}function Zy(t){t.tag===22?(ce(Et,Et.current),ce(Sn,t),Kn===null&&(Kn=t)):Wr()}function Wr(){ce(Et,Et.current),ce(Sn,Sn.current)}function Rn(t){se(Sn),Kn===t&&(Kn=null),se(Et)}var Et=z(0);function Pu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Mm(a)||Vm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var rr=0,Re=null,Ze=null,It=null,zu=!1,co=!1,ua=!1,Bu=0,Ml=0,uo=null,bA=0;function pt(){throw Error(i(321))}function If(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!wn(t[a],r[a]))return!1;return!0}function Df(t,r,a,l,d,m){return rr=m,Re=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=t===null||t.memoizedState===null?V_:Kf,ua=!1,m=a(l,d),ua=!1,co&&(m=t_(r,a,l,d)),e_(t),m}function e_(t){J.H=Ll;var r=Ze!==null&&Ze.next!==null;if(rr=0,It=Ze=Re=null,zu=!1,Ml=0,uo=null,r)throw Error(i(300));t===null||Dt||(t=t.dependencies,t!==null&&Du(t)&&(Dt=!0))}function t_(t,r,a,l){Re=t;var d=0;do{if(co&&(uo=null),Ml=0,co=!1,25<=d)throw Error(i(301));if(d+=1,It=Ze=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=U_,m=r(a,l)}while(co);return m}function EA(){var t=J.H,r=t.useState()[0];return r=typeof r.then=="function"?Vl(r):r,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Re.flags|=1024),r}function jf(){var t=Bu!==0;return Bu=0,t}function Of(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function kf(t){if(zu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}zu=!1}rr=0,It=Ze=Re=null,co=!1,Ml=Bu=0,uo=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Re.memoizedState=It=t:It=It.next=t,It}function xt(){if(Ze===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var r=It===null?Re.memoizedState:It.next;if(r!==null)It=r,Ze=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},It===null?Re.memoizedState=It=t:It=It.next=t}return It}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var r=Ml;return Ml+=1,uo===null&&(uo=[]),t=Gy(uo,t,r),r=Re,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?V_:Kf),t}function Hu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===Y)return Qt(t)}throw Error(i(438,String(t)))}function Mf(t){var r=null,a=Re.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=qu(),Re.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=O;return r.index++,a}function ir(t,r){return typeof r=="function"?r(t):r}function Fu(t){var r=xt();return Vf(r,Ze,t)}function Vf(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}r.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{r=d.next;var T=v=null,k=null,K=r,Z=!1;do{var ne=K.lane&-536870913;if(ne!==K.lane?(je&ne)===ne:(rr&ne)===ne){var Q=K.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ne===ro&&(Z=!0);else if((rr&Q)===Q){K=K.next,Q===ro&&(Z=!0);continue}else ne={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(T=k=ne,v=m):k=k.next=ne,Re.lanes|=Q,ei|=Q;ne=K.action,ua&&a(m,ne),m=K.hasEagerState?K.eagerState:a(m,ne)}else Q={lane:ne,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(T=k=Q,v=m):k=k.next=Q,Re.lanes|=ne,ei|=ne;K=K.next}while(K!==null&&K!==r);if(k===null?v=m:k.next=T,!wn(m,t.memoizedState)&&(Dt=!0,Z&&(a=io,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=k,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Uf(t){var r=xt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=t(m,v.action),v=v.next;while(v!==d);wn(m,r.memoizedState)||(Dt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function n_(t,r,a){var l=Re,d=xt(),m=Ue;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var v=!wn((Ze||d).memoizedState,a);if(v&&(d.memoizedState=a,Dt=!0),d=d.queue,zf(i_.bind(null,l,d,t),[t]),d.getSnapshot!==r||v||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,ho(9,{destroy:void 0},r_.bind(null,l,d,a,r),null),nt===null)throw Error(i(349));m||(rr&127)!==0||s_(l,r,a)}return a}function s_(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Re.updateQueue,r===null?(r=qu(),Re.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function r_(t,r,a,l){r.value=a,r.getSnapshot=l,a_(r)&&o_(t)}function i_(t,r,a){return a(function(){a_(r)&&o_(t)})}function a_(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!wn(t,a)}catch{return!0}}function o_(t){var r=ta(t,2);r!==null&&yn(r,t,2)}function Lf(t){var r=ln();if(typeof t=="function"){var a=t;if(t=a(),ua){Vn(!0);try{a()}finally{Vn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:t},r}function l_(t,r,a,l){return t.baseState=a,Vf(t,Ze,typeof l=="function"?l:ir)}function xA(t,r,a,l,d){if(Qu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};J.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,c_(r,m)):(m.next=a.next,r.pending=a.next=m)}}function c_(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var m=J.T,v={};J.T=v;try{var T=a(d,l),k=J.S;k!==null&&k(v,T),u_(t,r,T)}catch(K){Pf(t,r,K)}finally{m!==null&&v.types!==null&&(m.types=v.types),J.T=m}}else try{m=a(d,l),u_(t,r,m)}catch(K){Pf(t,r,K)}}function u_(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){h_(t,r,l)},function(l){return Pf(t,r,l)}):h_(t,r,a)}function h_(t,r,a){r.status="fulfilled",r.value=a,d_(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,c_(t,a)))}function Pf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,d_(r),r=r.next;while(r!==l)}t.action=null}function d_(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function f_(t,r){return r}function m_(t,r){if(Ue){var a=nt.formState;if(a!==null){e:{var l=Re;if(Ue){if(rt){t:{for(var d=rt,m=Gn;d.nodeType!==8;){if(!m){d=null;break t}if(d=Qn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){rt=Qn(d.nextSibling),l=d.data==="F!";break e}}Gr(l)}l=!1}l&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f_,lastRenderedState:r},a.queue=l,a=O_.bind(null,Re,l),l.dispatch=a,l=Lf(!1),m=Gf.bind(null,Re,!1,l.queue),l=ln(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=xA.bind(null,Re,d,m,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function p_(t){var r=xt();return g_(r,Ze,t)}function g_(t,r,a){if(r=Vf(t,r,f_)[0],t=Fu(ir)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Vl(r)}catch(v){throw v===ao?ku:v}else l=r;r=xt();var d=r.queue,m=d.dispatch;return a!==r.memoizedState&&(Re.flags|=2048,ho(9,{destroy:void 0},TA.bind(null,d,a),null)),[l,m,t]}function TA(t,r){t.action=r}function y_(t){var r=xt(),a=Ze;if(a!==null)return g_(r,a,t);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ho(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Re.updateQueue,r===null&&(r=qu(),Re.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function __(){return xt().memoizedState}function Gu(t,r,a,l){var d=ln();Re.flags|=t,d.memoizedState=ho(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ku(t,r,a,l){var d=xt();l=l===void 0?null:l;var m=d.memoizedState.inst;Ze!==null&&l!==null&&If(l,Ze.memoizedState.deps)?d.memoizedState=ho(r,m,a,l):(Re.flags|=t,d.memoizedState=ho(1|r,m,a,l))}function v_(t,r){Gu(8390656,8,t,r)}function zf(t,r){Ku(2048,8,t,r)}function wA(t){Re.flags|=4;var r=Re.updateQueue;if(r===null)r=qu(),Re.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function b_(t){var r=xt().memoizedState;return wA({ref:r,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function E_(t,r){return Ku(4,2,t,r)}function x_(t,r){return Ku(4,4,t,r)}function T_(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function w_(t,r,a){a=a!=null?a.concat([t]):null,Ku(4,4,T_.bind(null,r,t),a)}function Bf(){}function A_(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&If(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function S_(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&If(r,l[1]))return l[0];if(l=t(),ua){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l}function qf(t,r,a){return a===void 0||(rr&1073741824)!==0&&(je&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Rv(),Re.lanes|=t,ei|=t,a)}function R_(t,r,a,l){return wn(a,r)?a:lo.current!==null?(t=qf(t,a,l),wn(t,r)||(Dt=!0),t):(rr&42)===0||(rr&1073741824)!==0&&(je&261930)===0?(Dt=!0,t.memoizedState=a):(t=Rv(),Re.lanes|=t,ei|=t,r)}function N_(t,r,a,l,d){var m=le.p;le.p=m!==0&&8>m?m:8;var v=J.T,T={};J.T=T,Gf(t,!1,r,a);try{var k=d(),K=J.S;if(K!==null&&K(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=vA(k,l);Ul(t,r,Z,In(t))}else Ul(t,r,l,In(t))}catch(ne){Ul(t,r,{then:function(){},status:"rejected",reason:ne},In())}finally{le.p=m,v!==null&&T.types!==null&&(v.types=T.types),J.T=v}}function AA(){}function Hf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var d=C_(t).queue;N_(t,d,r,ye,a===null?AA:function(){return I_(t),a(l)})}function C_(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function I_(t){var r=C_(t);r.next===null&&(r=t.alternate.memoizedState),Ul(t,r.next.queue,{},In())}function Ff(){return Qt(ec)}function D_(){return xt().memoizedState}function j_(){return xt().memoizedState}function SA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=In();t=Yr(a);var l=$r(r,t,a);l!==null&&(yn(l,r,a),jl(l,r,a)),r={cache:vf()},t.payload=r;return}r=r.return}}function RA(t,r,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Qu(t)?k_(r,a):(a=lf(t,r,a,l),a!==null&&(yn(a,t,l),M_(a,r,l)))}function O_(t,r,a){var l=In();Ul(t,r,a,l)}function Ul(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qu(t))k_(r,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,T=m(v,a);if(d.hasEagerState=!0,d.eagerState=T,wn(T,v))return Ru(t,r,d,0),nt===null&&Su(),!1}catch{}if(a=lf(t,r,d,l),a!==null)return yn(a,t,l),M_(a,r,l),!0}return!1}function Gf(t,r,a,l){if(l={lane:2,revertLane:Tm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qu(t)){if(r)throw Error(i(479))}else r=lf(t,a,l,2),r!==null&&yn(r,t,2)}function Qu(t){var r=t.alternate;return t===Re||r!==null&&r===Re}function k_(t,r){co=zu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function M_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,il(t,a)}}var Ll={readContext:Qt,use:Hu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Ll.useEffectEvent=pt;var V_={readContext:Qt,use:Hu,useCallback:function(t,r){return ln().memoizedState=[t,r===void 0?null:r],t},useContext:Qt,useEffect:v_,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Gu(4194308,4,T_.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Gu(4194308,4,t,r)},useInsertionEffect:function(t,r){Gu(4,2,t,r)},useMemo:function(t,r){var a=ln();r=r===void 0?null:r;var l=t();if(ua){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=ln();if(a!==void 0){var d=a(r);if(ua){Vn(!0);try{a(r)}finally{Vn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=RA.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var r=ln();return t={current:t},r.memoizedState=t},useState:function(t){t=Lf(t);var r=t.queue,a=O_.bind(null,Re,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(t,r){var a=ln();return qf(a,t,r)},useTransition:function(){var t=Lf(!1);return t=N_.bind(null,Re,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Re,d=ln();if(Ue){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),nt===null)throw Error(i(349));(je&127)!==0||s_(l,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,v_(i_.bind(null,l,m,t),[t]),l.flags|=2048,ho(9,{destroy:void 0},r_.bind(null,l,m,a,r),null),a},useId:function(){var t=ln(),r=nt.identifierPrefix;if(Ue){var a=Ms,l=ks;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Bu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=bA++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Ff,useFormState:m_,useActionState:m_,useOptimistic:function(t){var r=ln();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Gf.bind(null,Re,!0,a),a.dispatch=r,[t,r]},useMemoCache:Mf,useCacheRefresh:function(){return ln().memoizedState=SA.bind(null,Re)},useEffectEvent:function(t){var r=ln(),a={impl:t};return r.memoizedState=a,function(){if((Fe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Kf={readContext:Qt,use:Hu,useCallback:A_,useContext:Qt,useEffect:zf,useImperativeHandle:w_,useInsertionEffect:E_,useLayoutEffect:x_,useMemo:S_,useReducer:Fu,useRef:__,useState:function(){return Fu(ir)},useDebugValue:Bf,useDeferredValue:function(t,r){var a=xt();return R_(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Fu(ir)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:Vl(t),r]},useSyncExternalStore:n_,useId:D_,useHostTransitionStatus:Ff,useFormState:p_,useActionState:p_,useOptimistic:function(t,r){var a=xt();return l_(a,Ze,t,r)},useMemoCache:Mf,useCacheRefresh:j_};Kf.useEffectEvent=b_;var U_={readContext:Qt,use:Hu,useCallback:A_,useContext:Qt,useEffect:zf,useImperativeHandle:w_,useInsertionEffect:E_,useLayoutEffect:x_,useMemo:S_,useReducer:Uf,useRef:__,useState:function(){return Uf(ir)},useDebugValue:Bf,useDeferredValue:function(t,r){var a=xt();return Ze===null?qf(a,t,r):R_(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Uf(ir)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:Vl(t),r]},useSyncExternalStore:n_,useId:D_,useHostTransitionStatus:Ff,useFormState:y_,useActionState:y_,useOptimistic:function(t,r){var a=xt();return Ze!==null?l_(a,Ze,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:j_};U_.useEffectEvent=b_;function Qf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Yf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=In(),d=Yr(l);d.payload=r,a!=null&&(d.callback=a),r=$r(t,d,l),r!==null&&(yn(r,t,l),jl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=In(),d=Yr(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=$r(t,d,l),r!==null&&(yn(r,t,l),jl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=In(),l=Yr(a);l.tag=2,r!=null&&(l.callback=r),r=$r(t,l,a),r!==null&&(yn(r,t,a),jl(r,t,a))}};function L_(t,r,a,l,d,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):r.prototype&&r.prototype.isPureReactComponent?!wl(a,l)||!wl(d,m):!0}function P_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Yf.enqueueReplaceState(r,r.state,null)}function ha(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=x({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function z_(t){Au(t)}function B_(t){console.error(t)}function q_(t){Au(t)}function Yu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function H_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $f(t,r,a){return a=Yr(a),a.tag=3,a.payload={element:null},a.callback=function(){Yu(t,r)},a}function F_(t){return t=Yr(t),t.tag=3,t}function G_(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){H_(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){H_(r,a,l),typeof d!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function NA(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&so(r,a,d,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return Kn===null?ah():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Mu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),bm(t,l,d)),!1;case 22:return a.flags|=65536,l===Mu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),bm(t,l,d)),!1}throw Error(i(435,a.tag))}return bm(t,l,d),ah(),!1}if(Ue)return r=Sn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==mf&&(t=Error(i(422),{cause:l}),Rl(qn(t,a)))):(l!==mf&&(r=Error(i(423),{cause:l}),Rl(qn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=qn(l,a),d=$f(t.stateNode,l,d),Af(t,d),gt!==4&&(gt=2)),!1;var m=Error(i(520),{cause:l});if(m=qn(m,a),Kl===null?Kl=[m]:Kl.push(m),gt!==4&&(gt=2),r===null)return!0;l=qn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=$f(a.stateNode,l,t),Af(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ti===null||!ti.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=F_(d),G_(d,t,a,l),Af(a,d),!1}a=a.return}while(a!==null);return!1}var Xf=Error(i(461)),Dt=!1;function Yt(t,r,a,l){r.child=t===null?$y(r,null,a,l):ca(r,t.child,a,l)}function K_(t,r,a,l,d){a=a.render;var m=r.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return ia(r),l=Df(t,r,a,v,m,d),T=jf(),t!==null&&!Dt?(Of(t,r,d),ar(t,r,d)):(Ue&&T&&df(r),r.flags|=1,Yt(t,r,l,d),r.child)}function Q_(t,r,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!cf(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Y_(t,r,m,l,d)):(t=Cu(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!rm(t,d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(v,l)&&t.ref===r.ref)return ar(t,r,d)}return r.flags|=1,t=er(m,l),t.ref=r.ref,t.return=r,r.child=t}function Y_(t,r,a,l,d){if(t!==null){var m=t.memoizedProps;if(wl(m,l)&&t.ref===r.ref)if(Dt=!1,r.pendingProps=l=m,rm(t,d))(t.flags&131072)!==0&&(Dt=!0);else return r.lanes=t.lanes,ar(t,r,d)}return Wf(t,r,a,l,d)}function $_(t,r,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,r.child=null;return X_(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ou(r,m!==null?m.cachePool:null),m!==null?Jy(r,m):Rf(),Zy(r);else return l=r.lanes=536870912,X_(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Ou(r,m.cachePool),Jy(r,m),Wr(),r.memoizedState=null):(t!==null&&Ou(r,null),Rf(),Wr());return Yt(t,r,d,a),r.child}function Pl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function X_(t,r,a,l,d){var m=Ef();return m=m===null?null:{parent:Ct._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&Ou(r,null),Rf(),Zy(r),t!==null&&so(t,r,l,!0),r.childLanes=d,null}function $u(t,r){return r=Wu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function W_(t,r,a){return ca(r,t.child,null,a),t=$u(r,r.pendingProps),t.flags|=2,Rn(r),r.memoizedState=null,t}function CA(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ue){if(l.mode==="hidden")return t=$u(r,l),r.lanes=536870912,Pl(null,t);if(Cf(r),(t=rt)?(t=cb(t,Gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hr!==null?{id:ks,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},a=ky(t),a.return=r,r.child=a,Kt=r,rt=null)):t=null,t===null)throw Gr(r);return r.lanes=536870912,null}return $u(r,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Cf(r),d)if(r.flags&256)r.flags&=-257,r=W_(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(Dt||so(t,r,a,!1),d=(a&t.childLanes)!==0,Dt||d){if(l=nt,l!==null&&(v=al(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ta(t,v),yn(l,t,v),Xf;ah(),r=W_(t,r,a)}else t=m.treeContext,rt=Qn(v.nextSibling),Kt=r,Ue=!0,Fr=null,Gn=!1,t!==null&&Uy(r,t),r=$u(r,l),r.flags|=4096;return r}return t=er(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Xu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Wf(t,r,a,l,d){return ia(r),a=Df(t,r,a,l,void 0,d),l=jf(),t!==null&&!Dt?(Of(t,r,d),ar(t,r,d)):(Ue&&l&&df(r),r.flags|=1,Yt(t,r,a,d),r.child)}function J_(t,r,a,l,d,m){return ia(r),r.updateQueue=null,a=t_(r,l,a,d),e_(t),l=jf(),t!==null&&!Dt?(Of(t,r,m),ar(t,r,m)):(Ue&&l&&df(r),r.flags|=1,Yt(t,r,a,m),r.child)}function Z_(t,r,a,l,d){if(ia(r),r.stateNode===null){var m=Za,v=a.contextType;typeof v=="object"&&v!==null&&(m=Qt(v)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Yf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Tf(r),v=a.contextType,m.context=typeof v=="object"&&v!==null?Qt(v):Za,m.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Qf(r,a,v,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Yf.enqueueReplaceState(m,m.state,null),kl(r,l,m,d),Ol(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var T=r.memoizedProps,k=ha(a,T);m.props=k;var K=m.context,Z=a.contextType;v=Za,typeof Z=="object"&&Z!==null&&(v=Qt(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||K!==v)&&P_(r,m,l,v),Qr=!1;var Q=r.memoizedState;m.state=Q,kl(r,l,m,d),Ol(),K=r.memoizedState,T||Q!==K||Qr?(typeof ne=="function"&&(Qf(r,a,ne,l),K=r.memoizedState),(k=Qr||L_(r,a,k,l,Q,K,v))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=K),m.props=l,m.state=K,m.context=v,l=k):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,wf(t,r),v=r.memoizedProps,Z=ha(a,v),m.props=Z,ne=r.pendingProps,Q=m.context,K=a.contextType,k=Za,typeof K=="object"&&K!==null&&(k=Qt(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ne||Q!==k)&&P_(r,m,l,k),Qr=!1,Q=r.memoizedState,m.state=Q,kl(r,l,m,d),Ol();var W=r.memoizedState;v!==ne||Q!==W||Qr||t!==null&&t.dependencies!==null&&Du(t.dependencies)?(typeof T=="function"&&(Qf(r,a,T,l),W=r.memoizedState),(Z=Qr||L_(r,a,Z,l,Q,W,k)||t!==null&&t.dependencies!==null&&Du(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,W,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,W,k)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=W),m.props=l,m.state=W,m.context=k,l=Z):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Xu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=ca(r,t.child,null,d),r.child=ca(r,null,a,d)):Yt(t,r,a,d),r.memoizedState=m.state,t=r.child):t=ar(t,r,d),t}function ev(t,r,a,l){return sa(),r.flags|=256,Yt(t,r,a,l),r.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zf(t){return{baseLanes:t,cachePool:Hy()}}function em(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Cn),t}function tv(t,r,a){var l=r.pendingProps,d=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),v&&(d=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ue){if(d?Xr(r):Wr(),(t=rt)?(t=cb(t,Gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hr!==null?{id:ks,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},a=ky(t),a.return=r,r.child=a,Kt=r,rt=null)):t=null,t===null)throw Gr(r);return Vm(t)?r.lanes=32:r.lanes=536870912,null}var T=l.children;return l=l.fallback,d?(Wr(),d=r.mode,T=Wu({mode:"hidden",children:T},d),l=na(l,d,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,l=r.child,l.memoizedState=Zf(a),l.childLanes=em(t,v,a),r.memoizedState=Jf,Pl(null,l)):(Xr(r),tm(r,T))}var k=t.memoizedState;if(k!==null&&(T=k.dehydrated,T!==null)){if(m)r.flags&256?(Xr(r),r.flags&=-257,r=nm(t,r,a)):r.memoizedState!==null?(Wr(),r.child=t.child,r.flags|=128,r=null):(Wr(),T=l.fallback,d=r.mode,l=Wu({mode:"visible",children:l.children},d),T=na(T,d,a,null),T.flags|=2,l.return=r,T.return=r,l.sibling=T,r.child=l,ca(r,t.child,null,a),l=r.child,l.memoizedState=Zf(a),l.childLanes=em(t,v,a),r.memoizedState=Jf,r=Pl(null,l));else if(Xr(r),Vm(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var K=v.dgst;v=K,l=Error(i(419)),l.stack="",l.digest=v,Rl({value:l,source:null,stack:null}),r=nm(t,r,a)}else if(Dt||so(t,r,a,!1),v=(a&t.childLanes)!==0,Dt||v){if(v=nt,v!==null&&(l=al(v,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,ta(t,l),yn(v,t,l),Xf;Mm(T)||ah(),r=nm(t,r,a)}else Mm(T)?(r.flags|=192,r.child=t.child,r=null):(t=k.treeContext,rt=Qn(T.nextSibling),Kt=r,Ue=!0,Fr=null,Gn=!1,t!==null&&Uy(r,t),r=tm(r,l.children),r.flags|=4096);return r}return d?(Wr(),T=l.fallback,d=r.mode,k=t.child,K=k.sibling,l=er(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,K!==null?T=er(K,T):(T=na(T,d,a,null),T.flags|=2),T.return=r,l.return=r,l.sibling=T,r.child=l,Pl(null,l),l=r.child,T=t.child.memoizedState,T===null?T=Zf(a):(d=T.cachePool,d!==null?(k=Ct._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Hy(),T={baseLanes:T.baseLanes|a,cachePool:d}),l.memoizedState=T,l.childLanes=em(t,v,a),r.memoizedState=Jf,Pl(t.child,l)):(Xr(r),a=t.child,t=a.sibling,a=er(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function tm(t,r){return r=Wu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Wu(t,r){return t=An(22,t,null,r),t.lanes=0,t}function nm(t,r,a){return ca(r,t.child,null,a),t=tm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function nv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),yf(t.return,r,a)}function sm(t,r,a,l,d,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=d,v.treeForkCount=m)}function sv(t,r,a){var l=r.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var v=Et.current,T=(v&2)!==0;if(T?(v=v&1|2,r.flags|=128):v&=1,ce(Et,v),Yt(t,r,l,a),l=Ue?Sl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nv(t,a,r);else if(t.tag===19)nv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Pu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),sm(r,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Pu(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}sm(r,!0,a,null,m,l);break;case"together":sm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ar(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ei|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(so(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=er(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=er(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function rm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Du(t)))}function IA(t,r,a){switch(r.tag){case 3:Vt(r,r.stateNode.containerInfo),Kr(r,Ct,t.memoizedState.cache),sa();break;case 27:case 5:Ui(r);break;case 4:Vt(r,r.stateNode.containerInfo);break;case 10:Kr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Cf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Xr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?tv(t,r,a):(Xr(r),t=ar(t,r,a),t!==null?t.sibling:null);Xr(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(so(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return sv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ce(Et,Et.current),l)break;return null;case 22:return r.lanes=0,$_(t,r,a,r.pendingProps);case 24:Kr(r,Ct,t.memoizedState.cache)}return ar(t,r,a)}function rv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Dt=!0;else{if(!rm(t,a)&&(r.flags&128)===0)return Dt=!1,IA(t,r,a);Dt=(t.flags&131072)!==0}else Dt=!1,Ue&&(r.flags&1048576)!==0&&Vy(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=oa(r.elementType),r.type=t,typeof t=="function")cf(t)?(l=ha(t,l),r.tag=1,r=Z_(null,r,t,l,a)):(r.tag=0,r=Wf(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===X){r.tag=11,r=K_(null,r,t,l,a);break e}else if(d===R){r.tag=14,r=Q_(null,r,t,l,a);break e}}throw r=_e(t)||t,Error(i(306,r,""))}}return r;case 0:return Wf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ha(l,r.pendingProps),Z_(t,r,l,d,a);case 3:e:{if(Vt(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;d=m.element,wf(t,r),kl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Kr(r,Ct,l),l!==m.cache&&_f(r,[Ct],a,!0),Ol(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=ev(t,r,l,a);break e}else if(l!==d){d=qn(Error(i(424)),r),Rl(d),r=ev(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,rt=Qn(t.firstChild),Kt=r,Ue=!0,Fr=null,Gn=!0,a=$y(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(sa(),l===d){r=ar(t,r,a);break e}Yt(t,r,l,a)}r=r.child}return r;case 26:return Xu(t,r),t===null?(a=pb(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ue||(a=r.type,t=r.pendingProps,l=fh(Ne.current).createElement(a),l[St]=r,l[zt]=t,$t(l,a,t),Rt(l),r.stateNode=l):r.memoizedState=pb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ui(r),t===null&&Ue&&(l=r.stateNode=db(r.type,r.pendingProps,Ne.current),Kt=r,Gn=!0,d=rt,ii(r.type)?(Um=d,rt=Qn(l.firstChild)):rt=d),Yt(t,r,r.pendingProps.children,a),Xu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ue&&((d=l=rt)&&(l=aS(l,r.type,r.pendingProps,Gn),l!==null?(r.stateNode=l,Kt=r,rt=Qn(l.firstChild),Gn=!1,d=!0):d=!1),d||Gr(r)),Ui(r),d=r.type,m=r.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,jm(d,m)?l=null:v!==null&&jm(d,v)&&(r.flags|=32),r.memoizedState!==null&&(d=Df(t,r,EA,null,null,a),ec._currentValue=d),Xu(t,r),Yt(t,r,l,a),r.child;case 6:return t===null&&Ue&&((t=a=rt)&&(a=oS(a,r.pendingProps,Gn),a!==null?(r.stateNode=a,Kt=r,rt=null,t=!0):t=!1),t||Gr(r)),null;case 13:return tv(t,r,a);case 4:return Vt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ca(r,null,l,a):Yt(t,r,l,a),r.child;case 11:return K_(t,r,r.type,r.pendingProps,a);case 7:return Yt(t,r,r.pendingProps,a),r.child;case 8:return Yt(t,r,r.pendingProps.children,a),r.child;case 12:return Yt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Kr(r,r.type,l.value),Yt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,ia(r),d=Qt(d),l=l(d),r.flags|=1,Yt(t,r,l,a),r.child;case 14:return Q_(t,r,r.type,r.pendingProps,a);case 15:return Y_(t,r,r.type,r.pendingProps,a);case 19:return sv(t,r,a);case 31:return CA(t,r,a);case 22:return $_(t,r,a,r.pendingProps);case 24:return ia(r),l=Qt(Ct),t===null?(d=Ef(),d===null&&(d=nt,m=vf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),r.memoizedState={parent:l,cache:d},Tf(r),Kr(r,Ct,d)):((t.lanes&a)!==0&&(wf(t,r),kl(r,null,null,a),Ol()),d=t.memoizedState,m=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Kr(r,Ct,l)):(l=m.cache,Kr(r,Ct,l),l!==d.cache&&_f(r,[Ct],a,!0))),Yt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function or(t){t.flags|=4}function im(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Dv())t.flags|=8192;else throw la=Mu,xf}else t.flags&=-16777217}function iv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!bb(r))if(Dv())t.flags|=8192;else throw la=Mu,xf}function Ju(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ru():536870912,t.lanes|=r,go|=r)}function zl(t,r){if(!Ue)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function DA(t,r,a){var l=r.pendingProps;switch(ff(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(r),null;case 1:return it(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),sr(Ct),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(no(r)?or(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,pf())),it(r),null;case 26:var d=r.type,m=r.memoizedState;return t===null?(or(r),m!==null?(it(r),iv(r,m)):(it(r),im(r,d,null,l,a))):m?m!==t.memoizedState?(or(r),it(r),iv(r,m)):(it(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&or(r),it(r),im(r,d,t,l,a)),null;case 27:if(ka(r),a=Ne.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}t=de.current,no(r)?Ly(r):(t=db(d,l,a),r.stateNode=t,or(r))}return it(r),null;case 5:if(ka(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}if(m=de.current,no(r))Ly(r);else{var v=fh(Ne.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}m[St]=r,m[zt]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch($t(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&or(r)}}return it(r),im(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=Ne.current,no(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[St]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tb(t.nodeValue,a)),t||Gr(r,!0)}else t=fh(t).createTextNode(l),t[St]=r,r.stateNode=t}return it(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=no(r),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[St]=r}else sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Rn(r),r):(Rn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return it(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=no(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[St]=r}else sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),d=!1}else d=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Rn(r),r):(Rn(r),null)}return Rn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Ju(r,r.updateQueue),it(r),null);case 4:return ct(),t===null&&Rm(r.stateNode.containerInfo),it(r),null;case 10:return sr(r.type),it(r),null;case 19:if(se(Et),l=r.memoizedState,l===null)return it(r),null;if(d=(r.flags&128)!==0,m=l.rendering,m===null)if(d)zl(l,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Pu(t),m!==null){for(r.flags|=128,zl(l,!1),t=m.updateQueue,r.updateQueue=t,Ju(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Oy(a,t),a=a.sibling;return ce(Et,Et.current&1|2),Ue&&tr(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&an()>sh&&(r.flags|=128,d=!0,zl(l,!1),r.lanes=4194304)}else{if(!d)if(t=Pu(m),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Ju(r,t),zl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ue)return it(r),null}else 2*an()-l.renderingStartTime>sh&&a!==536870912&&(r.flags|=128,d=!0,zl(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=an(),t.sibling=null,a=Et.current,ce(Et,d?a&1|2:a&1),Ue&&tr(r,l.treeForkCount),t):(it(r),null);case 22:case 23:return Rn(r),Nf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(it(r),r.subtreeFlags&6&&(r.flags|=8192)):it(r),a=r.updateQueue,a!==null&&Ju(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&se(aa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),sr(Ct),it(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function jA(t,r){switch(ff(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return sr(Ct),ct(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return ka(r),null;case 31:if(r.memoizedState!==null){if(Rn(r),r.alternate===null)throw Error(i(340));sa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Rn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));sa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return se(Et),null;case 4:return ct(),null;case 10:return sr(r.type),null;case 22:case 23:return Rn(r),Nf(),t!==null&&se(aa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return sr(Ct),null;case 25:return null;default:return null}}function av(t,r){switch(ff(r),r.tag){case 3:sr(Ct),ct();break;case 26:case 27:case 5:ka(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&Rn(r);break;case 13:Rn(r);break;case 19:se(Et);break;case 10:sr(r.type);break;case 22:case 23:Rn(r),Nf(),t!==null&&se(aa);break;case 24:sr(Ct)}}function Bl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==d)}}catch(T){We(r,r.return,T)}}function Jr(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=r;var k=a,K=T;try{K()}catch(Z){We(d,k,Z)}}}l=l.next}while(l!==m)}}catch(Z){We(r,r.return,Z)}}function ov(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Wy(r,a)}catch(l){We(t,t.return,l)}}}function lv(t,r,a){a.props=ha(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,r,l)}}function ql(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){We(t,r,d)}}function Vs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){We(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){We(t,r,d)}else a.current=null}function cv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){We(t,t.return,d)}}function am(t,r,a){try{var l=t.stateNode;eS(l,t.type,a,r),l[zt]=r}catch(d){We(t,t.return,d)}}function uv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ii(t.type)||t.tag===4}function om(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ii(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lm(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ss));else if(l!==4&&(l===27&&ii(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(lm(t,r,a),t=t.sibling;t!==null;)lm(t,r,a),t=t.sibling}function Zu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ii(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Zu(t,r,a),t=t.sibling;t!==null;)Zu(t,r,a),t=t.sibling}function hv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);$t(r,l,a),r[St]=t,r[zt]=a}catch(m){We(t,t.return,m)}}var lr=!1,jt=!1,cm=!1,dv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function OA(t,r){if(t=t.containerInfo,Im=bh,t=wy(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,T=-1,k=-1,K=0,Z=0,ne=t,Q=null;t:for(;;){for(var W;ne!==a||d!==0&&ne.nodeType!==3||(T=v+d),ne!==m||l!==0&&ne.nodeType!==3||(k=v+l),ne.nodeType===3&&(v+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Q=ne,ne=W;for(;;){if(ne===t)break t;if(Q===a&&++K===d&&(T=v),Q===m&&++Z===l&&(k=v),(W=ne.nextSibling)!==null)break;ne=Q,Q=ne.parentNode}ne=W}a=T===-1||k===-1?null:{start:T,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dm={focusedElem:t,selectionRange:a},bh=!1,qt=r;qt!==null;)if(r=qt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,qt=t;else for(;qt!==null;){switch(r=qt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var fe=ha(a.type,d);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){We(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)km(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":km(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,qt=t;break}qt=r.return}}function fv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ur(t,a),l&4&&Bl(5,a);break;case 1:if(ur(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){We(a,a.return,v)}else{var d=ha(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}l&64&&ov(a),l&512&&ql(a,a.return);break;case 3:if(ur(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wy(t,r)}catch(v){We(a,a.return,v)}}break;case 27:r===null&&l&4&&hv(a);case 26:case 5:ur(t,a),r===null&&l&4&&cv(a),l&512&&ql(a,a.return);break;case 12:ur(t,a);break;case 31:ur(t,a),l&4&&gv(t,a);break;case 13:ur(t,a),l&4&&yv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=qA.bind(null,a),lS(t,a))));break;case 22:if(l=a.memoizedState!==null||lr,!l){r=r!==null&&r.memoizedState!==null||jt,d=lr;var m=jt;lr=l,(jt=r)&&!m?hr(t,a,(a.subtreeFlags&8772)!==0):ur(t,a),lr=d,jt=m}break;case 30:break;default:ur(t,a)}}function mv(t){var r=t.alternate;r!==null&&(t.alternate=null,mv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Pa(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,fn=!1;function cr(t,r,a){for(a=a.child;a!==null;)pv(t,r,a),a=a.sibling}function pv(t,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:jt||Vs(a,r),cr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||Vs(a,r);var l=ht,d=fn;ii(a.type)&&(ht=a.stateNode,fn=!1),cr(t,r,a),Wl(a.stateNode),ht=l,fn=d;break;case 5:jt||Vs(a,r);case 6:if(l=ht,d=fn,ht=null,cr(t,r,a),ht=l,fn=d,ht!==null)if(fn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(m){We(a,r,m)}else try{ht.removeChild(a.stateNode)}catch(m){We(a,r,m)}break;case 18:ht!==null&&(fn?(t=ht,ob(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),wo(t)):ob(ht,a.stateNode));break;case 4:l=ht,d=fn,ht=a.stateNode.containerInfo,fn=!0,cr(t,r,a),ht=l,fn=d;break;case 0:case 11:case 14:case 15:Jr(2,a,r),jt||Jr(4,a,r),cr(t,r,a);break;case 1:jt||(Vs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&lv(a,r,l)),cr(t,r,a);break;case 21:cr(t,r,a);break;case 22:jt=(l=jt)||a.memoizedState!==null,cr(t,r,a),jt=l;break;default:cr(t,r,a)}}function gv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{wo(t)}catch(a){We(r,r.return,a)}}}function yv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wo(t)}catch(a){We(r,r.return,a)}}function kA(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new dv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new dv),r;default:throw Error(i(435,t.tag))}}function eh(t,r){var a=kA(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=HA.bind(null,t,l);l.then(d,d)}})}function mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ii(T.type)){ht=T.stateNode,fn=!1;break e}break;case 5:ht=T.stateNode,fn=!1;break e;case 3:case 4:ht=T.stateNode.containerInfo,fn=!0;break e}T=T.return}if(ht===null)throw Error(i(160));pv(m,v,d),ht=null,fn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)_v(r,t),r=r.sibling}var cs=null;function _v(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(r,t),pn(t),l&4&&(Jr(3,t,t.return),Bl(3,t),Jr(5,t,t.return));break;case 1:mn(r,t),pn(t),l&512&&(jt||a===null||Vs(a,a.return)),l&64&&lr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=cs;if(mn(r,t),pn(t),l&512&&(jt||a===null||Vs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[xs]||m[St]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),$t(m,l,a),m[St]=t,Rt(m),l=m;break e;case"link":var v=_b("link","href",d).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}m=d.createElement(l),$t(m,l,a),d.head.appendChild(m);break;case"meta":if(v=_b("meta","content",d).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}m=d.createElement(l),$t(m,l,a),d.head.appendChild(m);break;default:throw Error(i(468,l))}m[St]=t,Rt(m),l=m}t.stateNode=l}else vb(d,t.type,t.stateNode);else t.stateNode=yb(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?vb(d,t.type,t.stateNode):yb(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&am(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(r,t),pn(t),l&512&&(jt||a===null||Vs(a,a.return)),a!==null&&l&4&&am(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,t),pn(t),l&512&&(jt||a===null||Vs(a,a.return)),t.flags&32){d=t.stateNode;try{dn(d,"")}catch(fe){We(t,t.return,fe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,am(t,d,a!==null?a.memoizedProps:d)),l&1024&&(cm=!0);break;case 6:if(mn(r,t),pn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){We(t,t.return,fe)}}break;case 3:if(gh=null,d=cs,cs=mh(r.containerInfo),mn(r,t),cs=d,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{wo(r.containerInfo)}catch(fe){We(t,t.return,fe)}cm&&(cm=!1,vv(t));break;case 4:l=cs,cs=mh(t.stateNode.containerInfo),mn(r,t),pn(t),cs=l;break;case 12:mn(r,t),pn(t);break;case 31:mn(r,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,eh(t,l)));break;case 13:mn(r,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(nh=an()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,eh(t,l)));break;case 22:d=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,K=lr,Z=jt;if(lr=K||d,jt=Z||k,mn(r,t),jt=Z,lr=K,pn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||k||lr||jt||da(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(m=k.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=k.stateNode;var ne=k.memoizedProps.style,Q=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(fe){We(k,k.return,fe)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(fe){We(k,k.return,fe)}}}else if(r.tag===18){if(a===null){k=r;try{var W=k.stateNode;d?lb(W,!0):lb(k.stateNode,!1)}catch(fe){We(k,k.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,eh(t,a))));break;case 19:mn(r,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,eh(t,l)));break;case 30:break;case 21:break;default:mn(r,t),pn(t)}}function pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(uv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,m=om(t);Zu(t,m,d);break;case 5:var v=a.stateNode;a.flags&32&&(dn(v,""),a.flags&=-33);var T=om(t);Zu(t,T,v);break;case 3:case 4:var k=a.stateNode.containerInfo,K=om(t);lm(t,K,k);break;default:throw Error(i(161))}}catch(Z){We(t,t.return,Z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function vv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;vv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ur(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)fv(t,r.alternate,r),r=r.sibling}function da(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Jr(4,r,r.return),da(r);break;case 1:Vs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&lv(r,r.return,a),da(r);break;case 27:Wl(r.stateNode);case 26:case 5:Vs(r,r.return),da(r);break;case 22:r.memoizedState===null&&da(r);break;case 30:da(r);break;default:da(r)}t=t.sibling}}function hr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:hr(d,m,a),Bl(4,m);break;case 1:if(hr(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){We(l,l.return,K)}if(l=m,d=l.updateQueue,d!==null){var T=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Xy(k[d],T)}catch(K){We(l,l.return,K)}}a&&v&64&&ov(m),ql(m,m.return);break;case 27:hv(m);case 26:case 5:hr(d,m,a),a&&l===null&&v&4&&cv(m),ql(m,m.return);break;case 12:hr(d,m,a);break;case 31:hr(d,m,a),a&&v&4&&gv(d,m);break;case 13:hr(d,m,a),a&&v&4&&yv(d,m);break;case 22:m.memoizedState===null&&hr(d,m,a),ql(m,m.return);break;case 30:break;default:hr(d,m,a)}r=r.sibling}}function um(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Nl(a))}function hm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Nl(t))}function us(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bv(t,r,a,l),r=r.sibling}function bv(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:us(t,r,a,l),d&2048&&Bl(9,r);break;case 1:us(t,r,a,l);break;case 3:us(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Nl(t)));break;case 12:if(d&2048){us(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){We(r,r.return,k)}}else us(t,r,a,l);break;case 31:us(t,r,a,l);break;case 13:us(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?us(t,r,a,l):Hl(t,r):m._visibility&2?us(t,r,a,l):(m._visibility|=2,fo(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&um(v,r);break;case 24:us(t,r,a,l),d&2048&&hm(r.alternate,r);break;default:us(t,r,a,l)}}function fo(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,v=r,T=a,k=l,K=v.flags;switch(v.tag){case 0:case 11:case 15:fo(m,v,T,k,d),Bl(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?fo(m,v,T,k,d):Hl(m,v):(Z._visibility|=2,fo(m,v,T,k,d)),d&&K&2048&&um(v.alternate,v);break;case 24:fo(m,v,T,k,d),d&&K&2048&&hm(v.alternate,v);break;default:fo(m,v,T,k,d)}r=r.sibling}}function Hl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Hl(a,l),d&2048&&um(l.alternate,l);break;case 24:Hl(a,l),d&2048&&hm(l.alternate,l);break;default:Hl(a,l)}r=r.sibling}}var Fl=8192;function mo(t,r,a){if(t.subtreeFlags&Fl)for(t=t.child;t!==null;)Ev(t,r,a),t=t.sibling}function Ev(t,r,a){switch(t.tag){case 26:mo(t,r,a),t.flags&Fl&&t.memoizedState!==null&&bS(a,cs,t.memoizedState,t.memoizedProps);break;case 5:mo(t,r,a);break;case 3:case 4:var l=cs;cs=mh(t.stateNode.containerInfo),mo(t,r,a),cs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Fl,Fl=16777216,mo(t,r,a),Fl=l):mo(t,r,a));break;default:mo(t,r,a)}}function xv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Gl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,wv(l,t)}xv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tv(t),t=t.sibling}function Tv(t){switch(t.tag){case 0:case 11:case 15:Gl(t),t.flags&2048&&Jr(9,t,t.return);break;case 3:Gl(t);break;case 12:Gl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,th(t)):Gl(t);break;default:Gl(t)}}function th(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,wv(l,t)}xv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Jr(8,r,r.return),th(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,th(r));break;default:th(r)}t=t.sibling}}function wv(t,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Jr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=t;qt!==null;){l=qt;var d=l.sibling,m=l.return;if(mv(l),l===a){qt=null;break e}if(d!==null){d.return=m,qt=d;break e}qt=m}}}var MA={getCacheForType:function(t){var r=Qt(Ct),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Qt(Ct).controller.signal}},VA=typeof WeakMap=="function"?WeakMap:Map,Fe=0,nt=null,Ie=null,je=0,Xe=0,Nn=null,Zr=!1,po=!1,dm=!1,dr=0,gt=0,ei=0,fa=0,fm=0,Cn=0,go=0,Kl=null,gn=null,mm=!1,nh=0,Av=0,sh=1/0,rh=null,ti=null,Lt=0,ni=null,yo=null,fr=0,pm=0,gm=null,Sv=null,Ql=0,ym=null;function In(){return(Fe&2)!==0&&je!==0?je&-je:J.T!==null?Tm():iu()}function Rv(){if(Cn===0)if((je&536870912)===0||Ue){var t=zi;zi<<=1,(zi&3932160)===0&&(zi=262144),Cn=t}else Cn=536870912;return t=Sn.current,t!==null&&(t.flags|=32),Cn}function yn(t,r,a){(t===nt&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(_o(t,0),si(t,je,Cn,!1)),Bi(t,a),((Fe&2)===0||t!==nt)&&(t===nt&&((Fe&2)===0&&(fa|=a),gt===4&&si(t,je,Cn,!1)),Us(t))}function Nv(t,r,a){if((Fe&6)!==0)throw Error(i(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||es(t,r),d=l?PA(t,r):vm(t,r,!0),m=l;do{if(d===0){po&&!l&&si(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!UA(a)){d=vm(t,r,!1),m=!1;continue}if(d===2){if(m=r,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=t;d=Kl;var k=T.current.memoizedState.isDehydrated;if(k&&(_o(T,v).flags|=256),v=vm(T,v,!1),v!==2){if(dm&&!k){T.errorRecoveryDisabledLanes|=m,fa|=m,d=4;break e}m=gn,gn=d,m!==null&&(gn===null?gn=m:gn.push.apply(gn,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){_o(t,0),si(t,r,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:si(l,r,Cn,!Zr);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=nh+300-an(),10<d)){if(si(l,r,Cn,!Zr),vs(l,0,!0)!==0)break e;fr=r,l.timeoutHandle=ib(Cv.bind(null,l,a,gn,rh,mm,r,Cn,fa,go,Zr,m,"Throttled",-0,0),d);break e}Cv(l,a,gn,rh,mm,r,Cn,fa,go,Zr,m,null,-0,0)}}break}while(!0);Us(t)}function Cv(t,r,a,l,d,m,v,T,k,K,Z,ne,Q,W){if(t.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},Ev(r,m,ne);var fe=(m&62914560)===m?nh-an():(m&4194048)===m?Av-an():0;if(fe=ES(ne,fe),fe!==null){fr=m,t.cancelPendingCommit=fe(Uv.bind(null,t,r,m,a,l,d,v,T,k,Z,ne,null,Q,W)),si(t,m,v,!K);return}}Uv(t,r,m,a,l,d,v,T,k)}function UA(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!wn(m(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function si(t,r,a,l){r&=~fm,r&=~fa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var m=31-vt(d),v=1<<m;l[m]=-1,d&=~v}a!==0&&qi(t,a,r)}function ih(){return(Fe&6)===0?(Yl(0),!1):!0}function _m(){if(Ie!==null){if(Xe===0)var t=Ie.return;else t=Ie,nr=ra=null,kf(t),oo=null,Il=0,t=Ie;for(;t!==null;)av(t.alternate,t),t=t.return;Ie=null}}function _o(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,sS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fr=0,_m(),nt=t,Ie=a=er(t.current,null),je=r,Xe=0,Nn=null,Zr=!1,po=es(t,r),dm=!1,go=Cn=fm=fa=ei=gt=0,gn=Kl=null,mm=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-vt(l),m=1<<d;r|=t[d],l&=~m}return dr=r,Su(),a}function Iv(t,r){Re=null,J.H=Ll,r===ao||r===ku?(r=Ky(),Xe=3):r===xf?(r=Ky(),Xe=4):Xe=r===Xf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Nn=r,Ie===null&&(gt=1,Yu(t,qn(r,t.current)))}function Dv(){var t=Sn.current;return t===null?!0:(je&4194048)===je?Kn===null:(je&62914560)===je||(je&536870912)!==0?t===Kn:!1}function jv(){var t=J.H;return J.H=Ll,t===null?Ll:t}function Ov(){var t=J.A;return J.A=MA,t}function ah(){gt=4,Zr||(je&4194048)!==je&&Sn.current!==null||(po=!0),(ei&134217727)===0&&(fa&134217727)===0||nt===null||si(nt,je,Cn,!1)}function vm(t,r,a){var l=Fe;Fe|=2;var d=jv(),m=Ov();(nt!==t||je!==r)&&(rh=null,_o(t,r)),r=!1;var v=gt;e:do try{if(Xe!==0&&Ie!==null){var T=Ie,k=Nn;switch(Xe){case 8:_m(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(r=!0);var K=Xe;if(Xe=0,Nn=null,vo(t,T,k,K),a&&po){v=0;break e}break;default:K=Xe,Xe=0,Nn=null,vo(t,T,k,K)}}LA(),v=gt;break}catch(Z){Iv(t,Z)}while(!0);return r&&t.shellSuspendCounter++,nr=ra=null,Fe=l,J.H=d,J.A=m,Ie===null&&(nt=null,je=0,Su()),v}function LA(){for(;Ie!==null;)kv(Ie)}function PA(t,r){var a=Fe;Fe|=2;var l=jv(),d=Ov();nt!==t||je!==r?(rh=null,sh=an()+500,_o(t,r)):po=es(t,r);e:do try{if(Xe!==0&&Ie!==null){r=Ie;var m=Nn;t:switch(Xe){case 1:Xe=0,Nn=null,vo(t,r,m,1);break;case 2:case 9:if(Fy(m)){Xe=0,Nn=null,Mv(r);break}r=function(){Xe!==2&&Xe!==9||nt!==t||(Xe=7),Us(t)},m.then(r,r);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Fy(m)?(Xe=0,Nn=null,Mv(r)):(Xe=0,Nn=null,vo(t,r,m,7));break;case 5:var v=null;switch(Ie.tag){case 26:v=Ie.memoizedState;case 5:case 27:var T=Ie;if(v?bb(v):T.stateNode.complete){Xe=0,Nn=null;var k=T.sibling;if(k!==null)Ie=k;else{var K=T.return;K!==null?(Ie=K,oh(K)):Ie=null}break t}}Xe=0,Nn=null,vo(t,r,m,5);break;case 6:Xe=0,Nn=null,vo(t,r,m,6);break;case 8:_m(),gt=6;break e;default:throw Error(i(462))}}zA();break}catch(Z){Iv(t,Z)}while(!0);return nr=ra=null,J.H=l,J.A=d,Fe=a,Ie!==null?0:(nt=null,je=0,Su(),gt)}function zA(){for(;Ie!==null&&!Yd();)kv(Ie)}function kv(t){var r=rv(t.alternate,t,dr);t.memoizedProps=t.pendingProps,r===null?oh(t):Ie=r}function Mv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=J_(a,r,r.pendingProps,r.type,void 0,je);break;case 11:r=J_(a,r,r.pendingProps,r.type.render,r.ref,je);break;case 5:kf(r);default:av(a,r),r=Ie=Oy(r,dr),r=rv(a,r,dr)}t.memoizedProps=t.pendingProps,r===null?oh(t):Ie=r}function vo(t,r,a,l){nr=ra=null,kf(r),oo=null,Il=0;var d=r.return;try{if(NA(t,d,r,a,je)){gt=1,Yu(t,qn(a,t.current)),Ie=null;return}}catch(m){if(d!==null)throw Ie=d,m;gt=1,Yu(t,qn(a,t.current)),Ie=null;return}r.flags&32768?(Ue||l===1?t=!0:po||(je&536870912)!==0?t=!1:(Zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vv(r,t)):oh(r)}function oh(t){var r=t;do{if((r.flags&32768)!==0){Vv(r,Zr);return}t=r.return;var a=DA(r.alternate,r,dr);if(a!==null){Ie=a;return}if(r=r.sibling,r!==null){Ie=r;return}Ie=r=t}while(r!==null);gt===0&&(gt=5)}function Vv(t,r){do{var a=jA(t.alternate,t);if(a!==null){a.flags&=32767,Ie=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=a}while(t!==null);gt=6,Ie=null}function Uv(t,r,a,l,d,m,v,T,k){t.cancelPendingCommit=null;do lh();while(Lt!==0);if((Fe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=of,Wd(t,a,m,v,T,k),t===nt&&(Ie=nt=null,je=0),yo=r,ni=t,fr=a,pm=m,gm=d,Sv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,FA(Or,function(){return qv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,d=le.p,le.p=2,v=Fe,Fe|=4;try{OA(t,r,a)}finally{Fe=v,le.p=d,J.T=l}}Lt=1,Lv(),Pv(),zv()}}function Lv(){if(Lt===1){Lt=0;var t=ni,r=yo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=le.p;le.p=2;var d=Fe;Fe|=4;try{_v(r,t);var m=Dm,v=wy(t.containerInfo),T=m.focusedElem,k=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&Ty(T.ownerDocument.documentElement,T)){if(k!==null&&tf(T)){var K=k.start,Z=k.end;if(Z===void 0&&(Z=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(Z,T.value.length);else{var ne=T.ownerDocument||document,Q=ne&&ne.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),fe=T.textContent.length,ve=Math.min(k.start,fe),tt=k.end===void 0?ve:Math.min(k.end,fe);!W.extend&&ve>tt&&(v=tt,tt=ve,ve=v);var q=xy(T,ve),P=xy(T,tt);if(q&&P&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var G=ne.createRange();G.setStart(q.node,q.offset),W.removeAllRanges(),ve>tt?(W.addRange(G),W.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),W.addRange(G))}}}}for(ne=[],W=T;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var ee=ne[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}bh=!!Im,Dm=Im=null}finally{Fe=d,le.p=l,J.T=a}}t.current=r,Lt=2}}function Pv(){if(Lt===2){Lt=0;var t=ni,r=yo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=le.p;le.p=2;var d=Fe;Fe|=4;try{fv(t,r.alternate,r)}finally{Fe=d,le.p=l,J.T=a}}Lt=3}}function zv(){if(Lt===4||Lt===3){Lt=0,Jc();var t=ni,r=yo,a=fr,l=Sv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,yo=ni=null,Bv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(ti=null),Xs(a),r=r.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Zn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=J.T,d=le.p,le.p=2,J.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];m(T.value,{componentStack:T.stack})}}finally{J.T=r,le.p=d}}(fr&3)!==0&&lh(),Us(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===ym?Ql++:(Ql=0,ym=t):Ql=0,Yl(0)}}function Bv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Nl(r)))}function lh(){return Lv(),Pv(),zv(),qv()}function qv(){if(Lt!==5)return!1;var t=ni,r=pm;pm=0;var a=Xs(fr),l=J.T,d=le.p;try{le.p=32>a?32:a,J.T=null,a=gm,gm=null;var m=ni,v=fr;if(Lt=0,yo=ni=null,fr=0,(Fe&6)!==0)throw Error(i(331));var T=Fe;if(Fe|=4,Tv(m.current),bv(m,m.current,v,a),Fe=T,Yl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Zn,m)}catch{}return!0}finally{le.p=d,J.T=l,Bv(t,r)}}function Hv(t,r,a){r=qn(a,r),r=$f(t.stateNode,r,2),t=$r(t,r,2),t!==null&&(Bi(t,2),Us(t))}function We(t,r,a){if(t.tag===3)Hv(t,t,a);else for(;r!==null;){if(r.tag===3){Hv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ti===null||!ti.has(l))){t=qn(a,t),a=F_(2),l=$r(r,a,2),l!==null&&(G_(a,l,r,t),Bi(l,2),Us(l));break}}r=r.return}}function bm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new VA;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(dm=!0,d.add(a),t=BA.bind(null,t,r,a),r.then(t,t))}function BA(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(je&a)===a&&(gt===4||gt===3&&(je&62914560)===je&&300>an()-nh?(Fe&2)===0&&_o(t,0):fm|=a,go===je&&(go=0)),Us(t)}function Fv(t,r){r===0&&(r=ru()),t=ta(t,r),t!==null&&(Bi(t,r),Us(t))}function qA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Fv(t,a)}function HA(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Fv(t,a)}function FA(t,r){return Ut(t,r)}var ch=null,bo=null,Em=!1,uh=!1,xm=!1,ri=0;function Us(t){t!==bo&&t.next===null&&(bo===null?ch=bo=t:bo=bo.next=t),uh=!0,Em||(Em=!0,KA())}function Yl(t,r){if(!xm&&uh){xm=!0;do for(var a=!1,l=ch;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var v=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-vt(42|t)+1)-1,m&=d&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Yv(l,m))}else m=je,m=vs(l,l===nt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||es(l,m)||(a=!0,Yv(l,m));l=l.next}while(a);xm=!1}}function GA(){Gv()}function Gv(){uh=Em=!1;var t=0;ri!==0&&nS()&&(t=ri);for(var r=an(),a=null,l=ch;l!==null;){var d=l.next,m=Kv(l,r);m===0?(l.next=null,a===null?ch=d:a.next=d,d===null&&(bo=a)):(a=l,(t!==0||(m&3)!==0)&&(uh=!0)),l=d}Lt!==0&&Lt!==5||Yl(t),ri!==0&&(ri=0)}function Kv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-vt(m),T=1<<v,k=d[v];k===-1?((T&a)===0||(T&l)!==0)&&(d[v]=Xd(T,r)):k<=r&&(t.expiredLanes|=T),m&=~T}if(r=nt,a=je,a=vs(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||es(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&jr(l),Xs(a)){case 2:case 8:a=rl;break;case 32:a=Or;break;case 268435456:a=Zc;break;default:a=Or}return l=Qv.bind(null,t),a=Ut(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&jr(l),t.callbackPriority=2,t.callbackNode=null,2}function Qv(t,r){if(Lt!==0&&Lt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(lh()&&t.callbackNode!==a)return null;var l=je;return l=vs(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Nv(t,l,r),Kv(t,an()),t.callbackNode!=null&&t.callbackNode===a?Qv.bind(null,t):null)}function Yv(t,r){if(lh())return null;Nv(t,r,!0)}function KA(){rS(function(){(Fe&6)!==0?Ut(sl,GA):Gv()})}function Tm(){if(ri===0){var t=ro;t===0&&(t=ys,ys<<=1,(ys&261888)===0&&(ys=256)),ri=t}return ri}function $v(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ha(""+t)}function Xv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function QA(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var m=$v((d[zt]||null).action),v=l.submitter;v&&(r=(r=v[zt]||null)?$v(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var T=new Is("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ri!==0){var k=v?Xv(d,v):new FormData(d);Hf(a,{pending:!0,data:k,method:d.method,action:m},null,k)}}else typeof m=="function"&&(T.preventDefault(),k=v?Xv(d,v):new FormData(d),Hf(a,{pending:!0,data:k,method:d.method,action:m},m,k))},currentTarget:d}]})}}for(var wm=0;wm<af.length;wm++){var Am=af[wm],YA=Am.toLowerCase(),$A=Am[0].toUpperCase()+Am.slice(1);ls(YA,"on"+$A)}ls(Ry,"onAnimationEnd"),ls(Ny,"onAnimationIteration"),ls(Cy,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(hA,"onTransitionRun"),ls(dA,"onTransitionStart"),ls(fA,"onTransitionCancel"),ls(Iy,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function Wv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var v=l.length-1;0<=v;v--){var T=l[v],k=T.instance,K=T.currentTarget;if(T=T.listener,k!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=K;try{m(d)}catch(Z){Au(Z)}d.currentTarget=null,m=k}else for(v=0;v<l.length;v++){if(T=l[v],k=T.instance,K=T.currentTarget,T=T.listener,k!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=K;try{m(d)}catch(Z){Au(Z)}d.currentTarget=null,m=k}}}}function De(t,r){var a=r[La];a===void 0&&(a=r[La]=new Set);var l=t+"__bubble";a.has(l)||(Jv(r,t,2,!1),a.add(l))}function Sm(t,r,a){var l=0;r&&(l|=4),Jv(a,t,l,r)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Rm(t){if(!t[hh]){t[hh]=!0,ol.forEach(function(a){a!=="selectionchange"&&(XA.has(a)||Sm(a,!1,t),Sm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[hh]||(r[hh]=!0,Sm("selectionchange",!1,r))}}function Jv(t,r,a,l){switch(Rb(r)){case 2:var d=wS;break;case 8:d=AS;break;default:d=qm}a=d.bind(null,r,a,t),d=void 0,!Qi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Nm(t,r,a,l,d){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=l.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=Ts(T),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){l=m=v;continue e}T=T.parentNode}}l=l.return}Pr(function(){var K=m,Z=Ln(a),ne=[];e:{var Q=Dy.get(t);if(Q!==void 0){var W=Is,fe=t;switch(t){case"keypress":if($i(a)===0)break e;case"keydown":case"keyup":W=xu;break;case"focusin":fe="focus",W=Wi;break;case"focusout":fe="blur",W=Wi;break;case"beforeblur":case"afterblur":W=Wi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case Ry:case Ny:case Cy:W=pu;break;case Iy:W=S;break;case"scroll":case"scrollend":W=vl;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Zs;break;case"toggle":case"beforetoggle":W=Se}var ve=(r&4)!==0,tt=!ve&&(t==="scroll"||t==="scrollend"),q=ve?Q!==null?Q+"Capture":null:Q;ve=[];for(var P=K,G;P!==null;){var ee=P;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||q===null||(ee=rs(P,q),ee!=null&&ve.push(Xl(P,ee,G))),tt)break;P=P.return}0<ve.length&&(Q=new W(Q,fe,null,a,Z),ne.push({event:Q,listeners:ve}))}}if((r&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",Q&&a!==gl&&(fe=a.relatedTarget||a.fromElement)&&(Ts(fe)||fe[Es]))break e;if((W||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(fe=a.relatedTarget||a.toElement,W=K,fe=fe?Ts(fe):null,fe!==null&&(tt=c(fe),ve=fe.tag,fe!==tt||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(W=null,fe=K),W!==fe)){if(ve=bl,ee="onMouseLeave",q="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Zs,ee="onPointerLeave",q="onPointerEnter",P="pointer"),tt=W==null?Q:xn(W),G=fe==null?Q:xn(fe),Q=new ve(ee,P+"leave",W,a,Z),Q.target=tt,Q.relatedTarget=G,ee=null,Ts(Z)===K&&(ve=new ve(q,P+"enter",fe,a,Z),ve.target=G,ve.relatedTarget=tt,ee=ve),tt=ee,W&&fe)t:{for(ve=WA,q=W,P=fe,G=0,ee=q;ee;ee=ve(ee))G++;ee=0;for(var pe=P;pe;pe=ve(pe))ee++;for(;0<G-ee;)q=ve(q),G--;for(;0<ee-G;)P=ve(P),ee--;for(;G--;){if(q===P||P!==null&&q===P.alternate){ve=q;break t}q=ve(q),P=ve(P)}ve=null}else ve=null;W!==null&&Zv(ne,Q,W,ve,!1),fe!==null&&tt!==null&&Zv(ne,tt,fe,ve,!0)}}e:{if(Q=K?xn(K):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var Be=gy;else if(my(Q))if(yy)Be=lA;else{Be=aA;var me=iA}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&qa(K.elementType)&&(Be=gy):Be=oA;if(Be&&(Be=Be(t,K))){py(ne,Be,a,Z);break e}me&&me(t,Q,K),t==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&fl(Q,"number",Q.value)}switch(me=K?xn(K):window,t){case"focusin":(my(me)||me.contentEditable==="true")&&(Xa=me,nf=K,Al=null);break;case"focusout":Al=nf=Xa=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Ay(ne,a,Z);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Ay(ne,a,Z)}var Ce;if(He)e:{switch(t){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else $a?Ji(t,a)&&(Oe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Os&&a.locale!=="ko"&&($a||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&$a&&(Ce=_l()):(Cs=Z,yl="value"in Cs?Cs.value:Cs.textContent,$a=!0)),me=dh(K,Oe),0<me.length&&(Oe=new js(Oe,t,null,a,Z),ne.push({event:Oe,listeners:me}),Ce?Oe.data=Ce:(Ce=Ya(a),Ce!==null&&(Oe.data=Ce)))),(Ce=zn?tA(t,a):nA(t,a))&&(Oe=dh(K,"onBeforeInput"),0<Oe.length&&(me=new js("onBeforeInput","beforeinput",null,a,Z),ne.push({event:me,listeners:Oe}),me.data=Ce)),QA(ne,t,K,a,Z)}Wv(ne,r)})}function Xl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function dh(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=rs(t,a),d!=null&&l.unshift(Xl(t,d,m)),d=rs(t,r),d!=null&&l.push(Xl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function WA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zv(t,r,a,l,d){for(var m=r._reactName,v=[];a!==null&&a!==l;){var T=a,k=T.alternate,K=T.stateNode;if(T=T.tag,k!==null&&k===l)break;T!==5&&T!==26&&T!==27||K===null||(k=K,d?(K=rs(a,m),K!=null&&v.unshift(Xl(a,K,k))):d||(K=rs(a,m),K!=null&&v.push(Xl(a,K,k)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var JA=/\r\n?/g,ZA=/\u0000|\uFFFD/g;function eb(t){return(typeof t=="string"?t:""+t).replace(JA,`
`).replace(ZA,"")}function tb(t,r){return r=eb(r),eb(t)===r}function et(t,r,a,l,d,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||dn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&dn(t,""+l);break;case"className":Tn(t,"class",l);break;case"tabIndex":Tn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(t,a,l);break;case"style":pl(t,l,m);break;case"data":if(r!=="object"){Tn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ha(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",d.name,d,null),et(t,r,"formEncType",d.formEncType,d,null),et(t,r,"formMethod",d.formMethod,d,null),et(t,r,"formTarget",d.formTarget,d,null)):(et(t,r,"encType",d.encType,d,null),et(t,r,"method",d.method,d,null),et(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ha(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ss);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ha(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),za(t,"popover",l);break;case"xlinkActuate":Nt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=du.get(a)||a,za(t,a,l))}}function Cm(t,r,a,l,d,m){switch(a){case"style":pl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?dn(t,l):(typeof l=="number"||typeof l=="bigint")&&dn(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),m=t[zt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):za(t,a,l)}}}function $t(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,m,v,a,null)}}d&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":De("invalid",t);var T=m=v=d=null,k=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":d=Z;break;case"type":v=Z;break;case"checked":k=Z;break;case"defaultChecked":K=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:et(t,r,l,Z,a,null)}}cu(t,m,T,k,K,v,d,!1);return;case"select":De("invalid",t),l=v=m=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:et(t,r,d,T,a,null)}r=m,a=v,t.multiple=!!l,r!=null?Mr(t,!!l,r,!1):a!=null&&Mr(t,!!l,a,!0);return;case"textarea":De("invalid",t),m=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":d=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:et(t,r,v,T,a,null)}Vr(t,l,d,m);return;case"option":for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!=null)&&(k==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":et(t,r,k,l,a,null));return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<$l.length;l++)De($l[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,K,l,a,null)}return;default:if(qa(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Cm(t,r,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&et(t,r,T,l,a,null))}function eS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,T=null,k=null,K=null,Z=null;for(W in a){var ne=a[W];if(a.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ne;default:l.hasOwnProperty(W)||et(t,r,W,null,l,ne)}}for(var Q in l){var W=l[Q];if(ne=a[Q],l.hasOwnProperty(Q)&&(W!=null||ne!=null))switch(Q){case"type":m=W;break;case"name":d=W;break;case"checked":K=W;break;case"defaultChecked":Z=W;break;case"value":v=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ne&&et(t,r,Q,W,l,ne)}}Ba(t,v,T,k,K,Z,m,d);return;case"select":W=v=T=Q=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":W=k;default:l.hasOwnProperty(m)||et(t,r,m,null,l,k)}for(d in l)if(m=l[d],k=a[d],l.hasOwnProperty(d)&&(m!=null||k!=null))switch(d){case"value":Q=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==k&&et(t,r,d,m,l,k)}r=T,a=v,l=W,Q!=null?Mr(t,!!a,Q,!1):!!l!=!!a&&(r!=null?Mr(t,!!a,r,!0):Mr(t,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(t,r,T,null,l,d)}for(v in l)if(d=l[v],m=a[v],l.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":Q=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&et(t,r,v,d,l,m)}uu(t,Q,W);return;case"option":for(var fe in a)Q=a[fe],a.hasOwnProperty(fe)&&Q!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?t.selected=!1:et(t,r,fe,null,l,Q));for(k in l)Q=l[k],W=a[k],l.hasOwnProperty(k)&&Q!==W&&(Q!=null||W!=null)&&(k==="selected"?t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":et(t,r,k,Q,l,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)Q=a[ve],a.hasOwnProperty(ve)&&Q!=null&&!l.hasOwnProperty(ve)&&et(t,r,ve,null,l,Q);for(K in l)if(Q=l[K],W=a[K],l.hasOwnProperty(K)&&Q!==W&&(Q!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:et(t,r,K,Q,l,W)}return;default:if(qa(r)){for(var tt in a)Q=a[tt],a.hasOwnProperty(tt)&&Q!==void 0&&!l.hasOwnProperty(tt)&&Cm(t,r,tt,void 0,l,Q);for(Z in l)Q=l[Z],W=a[Z],!l.hasOwnProperty(Z)||Q===W||Q===void 0&&W===void 0||Cm(t,r,Z,Q,l,W);return}}for(var q in a)Q=a[q],a.hasOwnProperty(q)&&Q!=null&&!l.hasOwnProperty(q)&&et(t,r,q,null,l,Q);for(ne in l)Q=l[ne],W=a[ne],!l.hasOwnProperty(ne)||Q===W||Q==null&&W==null||et(t,r,ne,Q,l,W)}function nb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,v=d.initiatorType,T=d.duration;if(m&&T&&nb(v)){for(v=0,T=d.responseEnd,l+=1;l<a.length;l++){var k=a[l],K=k.startTime;if(K>T)break;var Z=k.transferSize,ne=k.initiatorType;Z&&nb(ne)&&(k=k.responseEnd,v+=Z*(k<T?1:(T-K)/(k-K)))}if(--l,r+=8*(m+v)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Im=null,Dm=null;function fh(t){return t.nodeType===9?t:t.ownerDocument}function sb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function jm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Om=null;function nS(){var t=window.event;return t&&t.type==="popstate"?t===Om?!1:(Om=t,!0):(Om=null,!1)}var ib=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,rS=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(t){return ab.resolve(null).then(t).catch(iS)}:ib;function iS(t){setTimeout(function(){throw t})}function ii(t){return t==="head"}function ob(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),wo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Wl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Wl(a);for(var m=a.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[xs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Wl(t.ownerDocument.body);a=d}while(a);wo(r)}function lb(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function km(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":km(a),Pa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function aS(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[xs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function oS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function cb(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Qn(t.nextSibling),t===null))return null;return t}function Mm(t){return t.data==="$?"||t.data==="$~"}function Vm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function lS(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Qn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Um=null;function ub(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Qn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function hb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function db(t,r,a){switch(r=fh(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Wl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Pa(t)}var Yn=new Map,fb=new Set;function mh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mr=le.d;le.d={f:cS,r:uS,D:hS,C:dS,L:fS,m:mS,X:gS,S:pS,M:yS};function cS(){var t=mr.f(),r=ih();return t||r}function uS(t){var r=Un(t);r!==null&&r.tag===5&&r.type==="form"?I_(r):mr.r(t)}var Eo=typeof document>"u"?null:document;function mb(t,r,a){var l=Eo;if(l&&typeof r=="string"&&r){var d=hn(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),fb.has(d)||(fb.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),$t(r,"link",t),Rt(r),l.head.appendChild(r)))}}function hS(t){mr.D(t),mb("dns-prefetch",t,null)}function dS(t,r){mr.C(t,r),mb("preconnect",t,r)}function fS(t,r,a){mr.L(t,r,a);var l=Eo;if(l&&t&&r){var d='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+hn(a.imageSizes)+'"]')):d+='[href="'+hn(t)+'"]';var m=d;switch(r){case"style":m=xo(t);break;case"script":m=To(t)}Yn.has(m)||(t=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Yn.set(m,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Jl(m))||r==="script"&&l.querySelector(Zl(m))||(r=l.createElement("link"),$t(r,"link",t),Rt(r),l.head.appendChild(r)))}}function mS(t,r){mr.m(t,r);var a=Eo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=To(t)}if(!Yn.has(m)&&(t=x({rel:"modulepreload",href:t},r),Yn.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zl(m)))return}l=a.createElement("link"),$t(l,"link",t),Rt(l),a.head.appendChild(l)}}}function pS(t,r,a){mr.S(t,r,a);var l=Eo;if(l&&t){var d=ws(l).hoistableStyles,m=xo(t);r=r||"default";var v=d.get(m);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(Jl(m)))T.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Yn.get(m))&&Lm(t,a);var k=v=l.createElement("link");Rt(k),$t(k,"link",t),k._p=new Promise(function(K,Z){k.onload=K,k.onerror=Z}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ph(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(m,v)}}}function gS(t,r){mr.X(t,r);var a=Eo;if(a&&t){var l=ws(a).hoistableScripts,d=To(t),m=l.get(d);m||(m=a.querySelector(Zl(d)),m||(t=x({src:t,async:!0},r),(r=Yn.get(d))&&Pm(t,r),m=a.createElement("script"),Rt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function yS(t,r){mr.M(t,r);var a=Eo;if(a&&t){var l=ws(a).hoistableScripts,d=To(t),m=l.get(d);m||(m=a.querySelector(Zl(d)),m||(t=x({src:t,async:!0,type:"module"},r),(r=Yn.get(d))&&Pm(t,r),m=a.createElement("script"),Rt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function pb(t,r,a,l){var d=(d=Ne.current)?mh(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=xo(a.href),a=ws(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=xo(a.href);var m=ws(d).hoistableStyles,v=m.get(t);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=d.querySelector(Jl(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Yn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(t,a),m||_S(d,t,a,v.state))),r&&l===null)throw Error(i(528,""));return v}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=To(a),a=ws(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function xo(t){return'href="'+hn(t)+'"'}function Jl(t){return'link[rel="stylesheet"]['+t+"]"}function gb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function _S(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),$t(r,"link",a),Rt(r),t.head.appendChild(r))}function To(t){return'[src="'+hn(t)+'"]'}function Zl(t){return"script[async]"+t}function yb(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return r.instance=l,Rt(l),l;var d=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Rt(l),$t(l,"style",d),ph(l,a.precedence,t),r.instance=l;case"stylesheet":d=xo(a.href);var m=t.querySelector(Jl(d));if(m)return r.state.loading|=4,r.instance=m,Rt(m),m;l=gb(a),(d=Yn.get(d))&&Lm(l,d),m=(t.ownerDocument||t).createElement("link"),Rt(m);var v=m;return v._p=new Promise(function(T,k){v.onload=T,v.onerror=k}),$t(m,"link",l),r.state.loading|=4,ph(m,a.precedence,t),r.instance=m;case"script":return m=To(a.src),(d=t.querySelector(Zl(m)))?(r.instance=d,Rt(d),d):(l=a,(d=Yn.get(m))&&(l=x({},a),Pm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Rt(d),$t(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,ph(l,a.precedence,t));return r.instance}function ph(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===r)m=T;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Pm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var gh=null;function _b(t,r,a){if(gh===null){var l=new Map,d=gh=new Map;d.set(a,l)}else d=gh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[xs]||m[St]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=t+v;var T=l.get(v);T?T.push(m):l.set(v,[m])}}return l}function vb(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function vS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function bb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function bS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=xo(l.href),m=r.querySelector(Jl(d));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=yh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,Rt(m);return}m=r.ownerDocument||r,l=gb(l),(d=Yn.get(d))&&Lm(l,d),m=m.createElement("link"),Rt(m);var v=m;v._p=new Promise(function(T,k){v.onload=T,v.onerror=k}),$t(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=yh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var zm=0;function ES(t,r){return t.stylesheets&&t.count===0&&vh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&vh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&zm===0&&(zm=62500*tS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&vh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>zm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _h=null;function vh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_h=new Map,r.forEach(xS,t),_h=null,yh.call(t))}function xS(t,r){if(!(r.state.loading&4)){var a=_h.get(t);if(a)var l=a.get(null);else{a=new Map,_h.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=r.instance,v=d.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,d),a.set(v,d),this.count++,l=yh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var ec={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function TS(t,r,a,l,d,m,v,T,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Eb(t,r,a,l,d,m,v,T,k,K,Z,ne){return t=new TS(t,r,a,v,k,K,Z,ne,T),r=1,m===!0&&(r|=24),m=An(3,null,null,r),t.current=m,m.stateNode=t,r=vf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Tf(m),t}function xb(t){return t?(t=Za,t):Za}function Tb(t,r,a,l,d,m){d=xb(d),l.context===null?l.context=d:l.pendingContext=d,l=Yr(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=$r(t,l,r),a!==null&&(yn(a,t,r),jl(a,t,r))}function wb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Bm(t,r){wb(t,r),(t=t.alternate)&&wb(t,r)}function Ab(t){if(t.tag===13||t.tag===31){var r=ta(t,67108864);r!==null&&yn(r,t,67108864),Bm(t,67108864)}}function Sb(t){if(t.tag===13||t.tag===31){var r=In();r=Hi(r);var a=ta(t,r);a!==null&&yn(a,t,r),Bm(t,r)}}var bh=!0;function wS(t,r,a,l){var d=J.T;J.T=null;var m=le.p;try{le.p=2,qm(t,r,a,l)}finally{le.p=m,J.T=d}}function AS(t,r,a,l){var d=J.T;J.T=null;var m=le.p;try{le.p=8,qm(t,r,a,l)}finally{le.p=m,J.T=d}}function qm(t,r,a,l){if(bh){var d=Hm(l);if(d===null)Nm(t,r,l,Eh,a),Nb(t,l);else if(RS(d,t,r,a,l))l.stopPropagation();else if(Nb(t,l),r&4&&-1<SS.indexOf(t)){for(;d!==null;){var m=Un(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=_s(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var k=1<<31-vt(v);T.entanglements[1]|=k,v&=~k}Us(m),(Fe&6)===0&&(sh=an()+500,Yl(0))}}break;case 31:case 13:T=ta(m,2),T!==null&&yn(T,m,2),ih(),Bm(m,2)}if(m=Hm(l),m===null&&Nm(t,r,l,Eh,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Nm(t,r,l,null,a)}}function Hm(t){return t=Ln(t),Fm(t)}var Eh=null;function Fm(t){if(Eh=null,t=Ts(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=u(r),t!==null)return t;t=null}else if(a===31){if(t=p(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Eh=t,null}function Rb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pi()){case sl:return 2;case rl:return 8;case Or:case $d:return 32;case Zc:return 268435456;default:return 32}default:return 32}}var Gm=!1,ai=null,oi=null,li=null,tc=new Map,nc=new Map,ci=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nb(t,r){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":tc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(r.pointerId)}}function sc(t,r,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},r!==null&&(r=Un(r),r!==null&&Ab(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function RS(t,r,a,l,d){switch(r){case"focusin":return ai=sc(ai,t,r,a,l,d),!0;case"dragenter":return oi=sc(oi,t,r,a,l,d),!0;case"mouseover":return li=sc(li,t,r,a,l,d),!0;case"pointerover":var m=d.pointerId;return tc.set(m,sc(tc.get(m)||null,t,r,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,nc.set(m,sc(nc.get(m)||null,t,r,a,l,d)),!0}return!1}function Cb(t){var r=Ts(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){t.blockedOn=r,ts(t.priority,function(){Sb(a)});return}}else if(r===31){if(r=p(a),r!==null){t.blockedOn=r,ts(t.priority,function(){Sb(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);gl=l,a.target.dispatchEvent(l),gl=null}else return r=Un(a),r!==null&&Ab(r),t.blockedOn=a,!1;r.shift()}return!0}function Ib(t,r,a){xh(t)&&a.delete(r)}function NS(){Gm=!1,ai!==null&&xh(ai)&&(ai=null),oi!==null&&xh(oi)&&(oi=null),li!==null&&xh(li)&&(li=null),tc.forEach(Ib),nc.forEach(Ib)}function Th(t,r){t.blockedOn===r&&(t.blockedOn=null,Gm||(Gm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,NS)))}var wh=null;function Db(t){wh!==t&&(wh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){wh===t&&(wh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(Fm(l||a)===null)continue;break}var m=Un(a);m!==null&&(t.splice(r,3),r-=3,Hf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function wo(t){function r(k){return Th(k,t)}ai!==null&&Th(ai,t),oi!==null&&Th(oi,t),li!==null&&Th(li,t),tc.forEach(r),nc.forEach(r);for(var a=0;a<ci.length;a++){var l=ci[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ci.length&&(a=ci[0],a.blockedOn===null);)Cb(a),a.blockedOn===null&&ci.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],v=d[zt]||null;if(typeof m=="function")v||Db(a);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[zt]||null)T=v.formAction;else if(Fm(d)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Db(a)}}}function jb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Km(t){this._internalRoot=t}Ah.prototype.render=Km.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=In();Tb(a,l,t,r,null,null)},Ah.prototype.unmount=Km.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Tb(t.current,2,null,t,null,null),ih(),r[Es]=null}};function Ah(t){this._internalRoot=t}Ah.prototype.unstable_scheduleHydration=function(t){if(t){var r=iu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ci.length&&r!==0&&r<ci[a].priority;a++);ci.splice(a,0,t),a===0&&Cb(t)}};var Ob=e.version;if(Ob!=="19.2.3")throw Error(i(527,Ob,"19.2.3"));le.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var CS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Zn=Sh.inject(CS),Ft=Sh}catch{}}return ic.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",d=z_,m=B_,v=q_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Eb(t,1,!1,null,null,a,l,null,d,m,v,jb),t[Es]=r.current,Rm(t),new Km(r)},ic.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,d="",m=z_,v=B_,T=q_,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=Eb(t,1,!0,r,a??null,l,d,k,m,v,T,jb),r.context=xb(null),a=r.current,l=In(),l=Hi(l),d=Yr(l),d.callback=null,$r(a,d,l),a=l,r.current.lanes=a,Bi(r,a),Us(r),t[Es]=r.current,Rm(t),new Ah(r)},ic.version="19.2.3",ic}var Hb;function PS(){if(Hb)return $m.exports;Hb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),$m.exports=LS(),$m.exports}var zS=PS();var Fb="popstate";function BS(s={}){function e(i,o){let{pathname:c,search:u,hash:p}=i.location;return vp("",{pathname:c,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:wc(o)}return HS(e,n,null,s)}function dt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Wn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qS(){return Math.random().toString(36).substring(2,10)}function Gb(s,e){return{usr:s.state,key:s.key,idx:e}}function vp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:n,key:e&&e.key||i||qS()}}function wc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Fo(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function HS(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,u=o.history,p="POP",g=null,y=b();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function b(){return(u.state||{idx:null}).idx}function x(){p="POP";let M=b(),H=M==null?null:M-y;y=M,g&&g({action:p,location:U.location,delta:H})}function w(M,H){p="PUSH";let B=vp(U.location,M,H);y=b()+1;let Y=Gb(B,y),X=U.createHref(B);try{u.pushState(Y,"",X)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(X)}c&&g&&g({action:p,location:U.location,delta:1})}function C(M,H){p="REPLACE";let B=vp(U.location,M,H);y=b();let Y=Gb(B,y),X=U.createHref(B);u.replaceState(Y,"",X),c&&g&&g({action:p,location:U.location,delta:0})}function N(M){return FS(M)}let U={get action(){return p},get location(){return s(o,u)},listen(M){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Fb,x),g=M,()=>{o.removeEventListener(Fb,x),g=null}},createHref(M){return e(o,M)},createURL:N,encodeLocation(M){let H=N(M);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:w,replace:C,go(M){return u.go(M)}};return U}function FS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:wc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function PE(s,e,n="/"){return GS(s,e,n,!1)}function GS(s,e,n,i){let o=typeof e=="string"?Fo(e):e,c=Tr(o.pathname||"/",n);if(c==null)return null;let u=zE(s);KS(u);let p=null;for(let g=0;p==null&&g<u.length;++g){let y=sR(c);p=tR(u[g],y,i)}return p}function zE(s,e=[],n=[],i="",o=!1){let c=(u,p,g=o,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;dt(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let x=vr([i,b.relativePath]),w=n.concat(b);u.children&&u.children.length>0&&(dt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),zE(u.children,e,w,x,g)),!(u.path==null&&!u.index)&&e.push({path:x,score:ZS(x,u.index),routesMeta:w})};return s.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))c(u,p);else for(let g of BE(u.path))c(u,p,!0,g)}),e}function BE(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let u=BE(i.join("/")),p=[];return p.push(...u.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...u),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function KS(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:eR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var QS=/^:[\w-]+$/,YS=3,$S=2,XS=1,WS=10,JS=-2,Kb=s=>s==="*";function ZS(s,e){let n=s.split("/"),i=n.length;return n.some(Kb)&&(i+=JS),e&&(i+=$S),n.filter(o=>!Kb(o)).reduce((o,c)=>o+(QS.test(c)?YS:c===""?XS:WS),i)}function eR(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function tR(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",u=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",x=Xh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),w=g.route;if(!x&&y&&n&&!i[i.length-1].route.index&&(x=Xh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!x)return null;Object.assign(o,x.params),u.push({params:o,pathname:vr([c,x.pathname]),pathnameBase:oR(vr([c,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(c=vr([c,x.pathnameBase]))}return u}function Xh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=nR(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:x},w)=>{if(b==="*"){let N=p[w]||"";u=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const C=p[w];return x&&!C?y[b]=void 0:y[b]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:u,pattern:s}}function nR(s,e=!1,n=!0){Wn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function sR(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Tr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var qE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rR=s=>qE.test(s);function iR(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?Fo(s):s,c;if(n)if(rR(n))c=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Wn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?c=Qb(n.substring(1),"/"):c=Qb(n,e)}else c=e;return{pathname:c,search:lR(i),hash:cR(o)}}function Qb(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Zm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aR(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $p(s){let e=aR(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Xp(s,e,n,i=!1){let o;typeof s=="string"?o=Fo(s):(o={...s},dt(!o.pathname||!o.pathname.includes("?"),Zm("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Zm("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Zm("#","search","hash",o)));let c=s===""||o.pathname==="",u=c?"/":o.pathname,p;if(u==null)p=n;else{let x=e.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),x-=1;o.pathname=w.join("/")}p=x>=0?e[x]:"/"}let g=iR(o,p),y=u&&u!=="/"&&u.endsWith("/"),b=(c||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var vr=s=>s.join("/").replace(/\/\/+/g,"/"),oR=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),lR=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,cR=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,uR=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function hR(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function dR(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var HE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FE(s,e){let n=s;if(typeof n!="string"||!qE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,o=!1;if(HE)try{let c=new URL(window.location.href),u=n.startsWith("//")?new URL(c.protocol+n):new URL(n),p=Tr(u.pathname,e);u.origin===c.origin&&p!=null?n=p+u.search+u.hash:o=!0}catch{Wn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var GE=["POST","PUT","PATCH","DELETE"];new Set(GE);var fR=["GET",...GE];new Set(fR);var Go=V.createContext(null);Go.displayName="DataRouter";var _d=V.createContext(null);_d.displayName="DataRouterState";var mR=V.createContext(!1),KE=V.createContext({isTransitioning:!1});KE.displayName="ViewTransition";var pR=V.createContext(new Map);pR.displayName="Fetchers";var gR=V.createContext(null);gR.displayName="Await";var Mn=V.createContext(null);Mn.displayName="Navigation";var Lc=V.createContext(null);Lc.displayName="Location";var Jn=V.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var Wp=V.createContext(null);Wp.displayName="RouteError";var QE="REACT_ROUTER_ERROR",yR="REDIRECT",_R="ROUTE_ERROR_RESPONSE";function vR(s){if(s.startsWith(`${QE}:${yR}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function bR(s){if(s.startsWith(`${QE}:${_R}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new uR(e.status,e.statusText,e.data)}catch{}}function ER(s,{relative:e}={}){dt(Ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=V.useContext(Mn),{hash:o,pathname:c,search:u}=Pc(s,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:vr([n,c])),i.createHref({pathname:p,search:u,hash:o})}function Ko(){return V.useContext(Lc)!=null}function Ys(){return dt(Ko(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Lc).location}var YE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $E(s){V.useContext(Mn).static||V.useLayoutEffect(s)}function vd(){let{isDataRoute:s}=V.useContext(Jn);return s?UR():xR()}function xR(){dt(Ko(),"useNavigate() may be used only in the context of a <Router> component.");let s=V.useContext(Go),{basename:e,navigator:n}=V.useContext(Mn),{matches:i}=V.useContext(Jn),{pathname:o}=Ys(),c=JSON.stringify($p(i)),u=V.useRef(!1);return $E(()=>{u.current=!0}),V.useCallback((g,y={})=>{if(Wn(u.current,YE),!u.current)return;if(typeof g=="number"){n.go(g);return}let b=Xp(g,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:vr([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,s])}var TR=V.createContext(null);function wR(s){let e=V.useContext(Jn).outlet;return V.useMemo(()=>e&&V.createElement(TR.Provider,{value:s},e),[e,s])}function AR(){let{matches:s}=V.useContext(Jn),e=s[s.length-1];return e?e.params:{}}function Pc(s,{relative:e}={}){let{matches:n}=V.useContext(Jn),{pathname:i}=Ys(),o=JSON.stringify($p(n));return V.useMemo(()=>Xp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function SR(s,e){return XE(s,e)}function XE(s,e,n,i,o){dt(Ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=V.useContext(Mn),{matches:u}=V.useContext(Jn),p=u[u.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",x=p&&p.route;{let B=x&&x.path||"";JE(y,!x||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let w=Ys(),C;if(e){let B=typeof e=="string"?Fo(e):e;dt(b==="/"||B.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${B.pathname}" was given in the \`location\` prop.`),C=B}else C=w;let N=C.pathname||"/",U=N;if(b!=="/"){let B=b.replace(/^\//,"").split("/");U="/"+N.replace(/^\//,"").split("/").slice(B.length).join("/")}let M=PE(s,{pathname:U});Wn(x||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Wn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=DR(M&&M.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:vr([b,c.encodeLocation?c.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?b:vr([b,c.encodeLocation?c.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),u,n,i,o);return e&&H?V.createElement(Lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},H):H}function RR(){let s=VR(),e=hR(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:c},"ErrorBoundary")," or"," ",V.createElement("code",{style:c},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,u)}var NR=V.createElement(RR,null),WE=class extends V.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=bR(s.digest);n&&(s=n)}let e=s!==void 0?V.createElement(Jn.Provider,{value:this.props.routeContext},V.createElement(Wp.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?V.createElement(CR,{error:s},e):e}};WE.contextType=mR;var ep=new WeakMap;function CR({children:s,error:e}){let{basename:n}=V.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=vR(e.digest);if(i){let o=ep.get(e);if(o)throw o;let c=FE(i.location,n);if(HE&&!ep.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw ep.set(e,u),u}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function IR({routeContext:s,match:e,children:n}){let i=V.useContext(Go);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Jn.Provider,{value:s},n)}function DR(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,u=n?.errors;if(u!=null){let b=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);dt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<c.length;b++){let x=c[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=b),x.route.id){let{loaderData:w,errors:C}=n,N=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!C||C[x.route.id]===void 0);if(x.route.lazy||N){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&i?(b,x)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:dR(n.matches),errorInfo:x})}:void 0;return c.reduceRight((b,x,w)=>{let C,N=!1,U=null,M=null;n&&(C=u&&x.route.id?u[x.route.id]:void 0,U=x.route.errorElement||NR,p&&(g<0&&w===0?(JE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):g===w&&(N=!0,M=x.route.hydrateFallbackElement||null)));let H=e.concat(c.slice(0,w+1)),B=()=>{let Y;return C?Y=U:N?Y=M:x.route.Component?Y=V.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=b,V.createElement(IR,{match:x,routeContext:{outlet:b,matches:H,isDataRoute:n!=null},children:Y})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?V.createElement(WE,{location:n.location,revalidation:n.revalidation,component:U,error:C,children:B(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:y}):B()},null)}function Jp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jR(s){let e=V.useContext(Go);return dt(e,Jp(s)),e}function OR(s){let e=V.useContext(_d);return dt(e,Jp(s)),e}function kR(s){let e=V.useContext(Jn);return dt(e,Jp(s)),e}function Zp(s){let e=kR(s),n=e.matches[e.matches.length-1];return dt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function MR(){return Zp("useRouteId")}function VR(){let s=V.useContext(Wp),e=OR("useRouteError"),n=Zp("useRouteError");return s!==void 0?s:e.errors?.[n]}function UR(){let{router:s}=jR("useNavigate"),e=Zp("useNavigate"),n=V.useRef(!1);return $E(()=>{n.current=!0}),V.useCallback(async(o,c={})=>{Wn(n.current,YE),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Yb={};function JE(s,e,n){!e&&!Yb[s]&&(Yb[s]=!0,Wn(!1,n))}V.memo(LR);function LR({routes:s,future:e,state:n,onError:i}){return XE(s,void 0,n,i,e)}function PR({to:s,replace:e,state:n,relative:i}){dt(Ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(Mn);Wn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=V.useContext(Jn),{pathname:u}=Ys(),p=vd(),g=Xp(s,$p(c),u,i==="path"),y=JSON.stringify(g);return V.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function zR(s){return wR(s.context)}function Dn(s){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BR({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1,unstable_useTransitions:u}){dt(!Ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=V.useMemo(()=>({basename:p,navigator:o,static:c,unstable_useTransitions:u,future:{}}),[p,o,c,u]);typeof n=="string"&&(n=Fo(n));let{pathname:y="/",search:b="",hash:x="",state:w=null,key:C="default"}=n,N=V.useMemo(()=>{let U=Tr(y,p);return U==null?null:{location:{pathname:U,search:b,hash:x,state:w,key:C},navigationType:i}},[p,y,b,x,w,C,i]);return Wn(N!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:V.createElement(Mn.Provider,{value:g},V.createElement(Lc.Provider,{children:e,value:N}))}function qR({children:s,location:e}){return SR(bp(s),e)}function bp(s,e=[]){let n=[];return V.Children.forEach(s,(i,o)=>{if(!V.isValidElement(i))return;let c=[...e,o];if(i.type===V.Fragment){n.push.apply(n,bp(i.props.children,c));return}dt(i.type===Dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=bp(i.props.children,c)),n.push(u)}),n}var Lh="get",Ph="application/x-www-form-urlencoded";function bd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function HR(s){return bd(s)&&s.tagName.toLowerCase()==="button"}function FR(s){return bd(s)&&s.tagName.toLowerCase()==="form"}function GR(s){return bd(s)&&s.tagName.toLowerCase()==="input"}function KR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function QR(s,e){return s.button===0&&(!e||e==="_self")&&!KR(s)}var Rh=null;function YR(){if(Rh===null)try{new FormData(document.createElement("form"),0),Rh=!1}catch{Rh=!0}return Rh}var $R=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tp(s){return s!=null&&!$R.has(s)?(Wn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ph}"`),null):s}function XR(s,e){let n,i,o,c,u;if(FR(s)){let p=s.getAttribute("action");i=p?Tr(p,e):null,n=s.getAttribute("method")||Lh,o=tp(s.getAttribute("enctype"))||Ph,c=new FormData(s)}else if(HR(s)||GR(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Tr(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Lh,o=tp(s.getAttribute("formenctype"))||tp(p.getAttribute("enctype"))||Ph,c=new FormData(p,s),!YR()){let{name:y,type:b,value:x}=s;if(b==="image"){let w=y?`${y}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else y&&c.append(y,x)}}else{if(bd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lh,i=null,o=Ph,u=s}return c&&o==="text/plain"&&(u=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function eg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function WR(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Tr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function JR(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function e1(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await JR(c,n);return u.links?u.links():[]}return[]}));return r1(i.flat(1).filter(ZR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function $b(s,e,n,i,o,c){let u=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>u(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(u(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function t1(s,e,{includeHydrateFallback:n}={}){return n1(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function n1(s){return[...new Set(s)]}function s1(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function r1(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(s1(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function ZE(){let s=V.useContext(Go);return eg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function i1(){let s=V.useContext(_d);return eg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var tg=V.createContext(void 0);tg.displayName="FrameworkContext";function ex(){let s=V.useContext(tg);return eg(s,"You must render this element inside a <HydratedRouter> element"),s}function a1(s,e){let n=V.useContext(tg),[i,o]=V.useState(!1),[c,u]=V.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:x}=e,w=V.useRef(null);V.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let U=H=>{H.forEach(B=>{u(B.isIntersecting)})},M=new IntersectionObserver(U,{threshold:.5});return w.current&&M.observe(w.current),()=>{M.disconnect()}}},[s]),V.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let C=()=>{o(!0)},N=()=>{o(!1),u(!1)};return n?s!=="intent"?[c,w,{}]:[c,w,{onFocus:ac(p,C),onBlur:ac(g,N),onMouseEnter:ac(y,C),onMouseLeave:ac(b,N),onTouchStart:ac(x,C)}]:[!1,w,{}]}function ac(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function o1({page:s,...e}){let{router:n}=ZE(),i=V.useMemo(()=>PE(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?V.createElement(c1,{page:s,matches:i,...e}):null}function l1(s){let{manifest:e,routeModules:n}=ex(),[i,o]=V.useState([]);return V.useEffect(()=>{let c=!1;return e1(s,e,n).then(u=>{c||o(u)}),()=>{c=!0}},[s,e,n]),i}function c1({page:s,matches:e,...n}){let i=Ys(),{manifest:o,routeModules:c}=ex(),{basename:u}=ZE(),{loaderData:p,matches:g}=i1(),y=V.useMemo(()=>$b(s,e,g,o,i,"data"),[s,e,g,o,i]),b=V.useMemo(()=>$b(s,e,g,o,i,"assets"),[s,e,g,o,i]),x=V.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let N=new Set,U=!1;if(e.forEach(H=>{let B=o.routes[H.route.id];!B||!B.hasLoader||(!y.some(Y=>Y.route.id===H.route.id)&&H.route.id in p&&c[H.route.id]?.shouldRevalidate||B.hasClientLoader?U=!0:N.add(H.route.id))}),N.size===0)return[];let M=WR(s,u,"data");return U&&N.size>0&&M.searchParams.set("_routes",e.filter(H=>N.has(H.route.id)).map(H=>H.route.id).join(",")),[M.pathname+M.search]},[u,p,i,o,y,e,s,c]),w=V.useMemo(()=>t1(b,o),[b,o]),C=l1(b);return V.createElement(V.Fragment,null,x.map(N=>V.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),w.map(N=>V.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),C.map(({key:N,link:U})=>V.createElement("link",{key:N,nonce:n.nonce,...U})))}function u1(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var h1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{h1&&(window.__reactRouterVersion="7.11.0")}catch{}function d1({basename:s,children:e,unstable_useTransitions:n,window:i}){let o=V.useRef();o.current==null&&(o.current=BS({window:i,v5Compat:!0}));let c=o.current,[u,p]=V.useState({action:c.action,location:c.location}),g=V.useCallback(y=>{n===!1?p(y):V.startTransition(()=>p(y))},[n]);return V.useLayoutEffect(()=>c.listen(g),[c,g]),V.createElement(BR,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:n})}var tx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ds=V.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:u,state:p,target:g,to:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:w,...C},N){let{basename:U,unstable_useTransitions:M}=V.useContext(Mn),H=typeof y=="string"&&tx.test(y),B=FE(y,U);y=B.to;let Y=ER(y,{relative:o}),[X,ie,ae]=a1(i,C),R=p1(y,{replace:u,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:x,unstable_defaultShouldRevalidate:w,unstable_useTransitions:M});function A(O){e&&e(O),O.defaultPrevented||R(O)}let I=V.createElement("a",{...C,...ae,href:B.absoluteURL||Y,onClick:B.isExternal||c?e:A,ref:u1(N,ie),target:g,"data-discover":!H&&n==="render"?"true":void 0});return X&&!H?V.createElement(V.Fragment,null,I,V.createElement(o1,{page:Y})):I});ds.displayName="Link";var nx=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:p,children:g,...y},b){let x=Pc(u,{relative:y.relative}),w=Ys(),C=V.useContext(_d),{navigator:N,basename:U}=V.useContext(Mn),M=C!=null&&b1(x)&&p===!0,H=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,B=w.pathname,Y=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(B=B.toLowerCase(),Y=Y?Y.toLowerCase():null,H=H.toLowerCase()),Y&&U&&(Y=Tr(Y,U)||Y);const X=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ie=B===H||!o&&B.startsWith(H)&&B.charAt(X)==="/",ae=Y!=null&&(Y===H||!o&&Y.startsWith(H)&&Y.charAt(H.length)==="/"),R={isActive:ie,isPending:ae,isTransitioning:M},A=ie?e:void 0,I;typeof i=="function"?I=i(R):I=[i,ie?"active":null,ae?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(R):c;return V.createElement(ds,{...y,"aria-current":A,className:I,ref:b,style:O,to:u,viewTransition:p},typeof g=="function"?g(R):g)});nx.displayName="NavLink";var f1=V.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:u=Lh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:w,...C},N)=>{let{unstable_useTransitions:U}=V.useContext(Mn),M=_1(),H=v1(p,{relative:y}),B=u.toLowerCase()==="get"?"get":"post",Y=typeof p=="string"&&tx.test(p),X=ie=>{if(g&&g(ie),ie.defaultPrevented)return;ie.preventDefault();let ae=ie.nativeEvent.submitter,R=ae?.getAttribute("formmethod")||u,A=()=>M(ae||ie.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:w});U&&n!==!1?V.startTransition(()=>A()):A()};return V.createElement("form",{ref:N,method:B,action:H,onSubmit:i?g:X,...C,"data-discover":!Y&&s==="render"?"true":void 0})});f1.displayName="Form";function m1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sx(s){let e=V.useContext(Go);return dt(e,m1(s)),e}function p1(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=vd(),b=Ys(),x=Pc(s,{relative:c});return V.useCallback(w=>{if(QR(w,e)){w.preventDefault();let C=n!==void 0?n:wc(b)===wc(x),N=()=>y(s,{replace:C,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:p});g?V.startTransition(()=>N()):N()}},[b,y,x,n,i,e,s,o,c,u,p,g])}var g1=0,y1=()=>`__${String(++g1)}__`;function _1(){let{router:s}=sx("useSubmit"),{basename:e}=V.useContext(Mn),n=MR(),i=s.fetch,o=s.navigate;return V.useCallback(async(c,u={})=>{let{action:p,method:g,encType:y,formData:b,body:x}=XR(c,e);if(u.navigate===!1){let w=u.fetcherKey||y1();await i(w,n,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:x,formMethod:u.method||g,formEncType:u.encType||y,flushSync:u.flushSync})}else await o(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:x,formMethod:u.method||g,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,e,n])}function v1(s,{relative:e}={}){let{basename:n}=V.useContext(Mn),i=V.useContext(Jn);dt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Pc(s||".",{relative:e})},u=Ys();if(s==null){c.search=u.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let b=p.toString();c.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:vr([n,c.pathname])),wc(c)}function b1(s,{relative:e}={}){let n=V.useContext(KE);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sx("useViewTransitionState"),o=Pc(s,{relative:e});if(!n.isTransitioning)return!1;let c=Tr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Tr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Xh(o.pathname,u)!=null||Xh(o.pathname,c)!=null}const rx=V.createContext();function E1({children:s}){const[e,n]=V.useState(()=>localStorage.getItem("dacapo-theme")==="dark");V.useEffect(()=>{e?(document.body.classList.add("dark"),localStorage.setItem("dacapo-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("dacapo-theme","light"))},[e]);const i=V.useCallback(()=>{n(u=>!u)},[]),o=V.useCallback(u=>{n(u==="dark")},[]),c=V.useCallback(()=>e?"dark":"light",[e]);return f.jsx(rx.Provider,{value:{isDarkMode:e,toggleTheme:i,setThemeFromPreference:o,getThemePreference:c},children:s})}function ng(){const s=V.useContext(rx);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s}const x1=()=>{};var Xb={};const ix=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},T1=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],u=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],u=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},ax={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],u=o+1<s.length,p=u?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,b=c>>2,x=(c&3)<<4|p>>4;let w=(p&15)<<2|y>>6,C=y&63;g||(C=64,u||(w=64)),i.push(n[b],n[x],n[w],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ix(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):T1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||y==null||x==null)throw new w1;const w=c<<2|p>>4;if(i.push(w),y!==64){const C=p<<4&240|y>>2;if(i.push(C),x!==64){const N=y<<6&192|x;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class w1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A1=function(s){const e=ix(s);return ax.encodeByteArray(e,!0)},Wh=function(s){return A1(s).replace(/\./g,"")},ox=function(s){try{return ax.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const R1=()=>S1().__FIREBASE_DEFAULTS__,N1=()=>{if(typeof process>"u"||typeof Xb>"u")return;const s=Xb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},C1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&ox(s[1]);return e&&JSON.parse(e)},Ed=()=>{try{return x1()||R1()||N1()||C1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},lx=s=>Ed()?.emulatorHosts?.[s],cx=s=>{const e=lx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ux=()=>Ed()?.config,hx=s=>Ed()?.[`_${s}`];class I1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function ji(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sg(s){return(await fetch(s,{credentials:"include"})).ok}function dx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Wh(JSON.stringify(n)),Wh(JSON.stringify(u)),""].join(".")}const gc={};function D1(){const s={prod:[],emulator:[]};for(const e of Object.keys(gc))gc[e]?s.emulator.push(e):s.prod.push(e);return s}function j1(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Wb=!1;function rg(s,e){if(typeof window>"u"||typeof document>"u"||!ji(window.location.host)||gc[s]===e||gc[s]||Wb)return;gc[s]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",c=D1().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Wb=!0,u()},w}function b(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=j1(i),C=n("text"),N=document.getElementById(C)||document.createElement("span"),U=n("learnmore"),M=document.getElementById(U)||document.createElement("a"),H=n("preprendIcon"),B=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Y=w.element;p(Y),b(M,U);const X=y();g(B,H),Y.append(B,N,M,X),document.body.appendChild(Y)}c?(N.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function k1(){const s=Ed()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function U1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L1(){const s=rn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function P1(){return!k1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z1(){try{return typeof indexedDB=="object"}catch{return!1}}function B1(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const q1="FirebaseError";class $s extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=q1,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?H1(c,i):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new $s(o,p,i)}}function H1(s,e){return s.replace(F1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const F1=/\{\$([^}]+)}/g;function G1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function wr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],u=e[o];if(Jb(c)&&Jb(u)){if(!wr(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Jb(s){return s!==null&&typeof s=="object"}function Bc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function uc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function hc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function K1(s,e){const n=new Q1(s,e);return n.subscribe.bind(n)}class Q1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Y1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=np),o.error===void 0&&(o.error=np),o.complete===void 0&&(o.complete=np);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y1(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function np(){}function ot(s){return s&&s._delegate?s._delegate:s}class Ai{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ma="[DEFAULT]";class $1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new I1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W1(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:X1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X1(s){return s===ma?void 0:s}function W1(s){return s.instantiationMode==="EAGER"}class J1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const Z1={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},eN=ke.INFO,tN={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},nN=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=tN[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=eN,this._logHandler=nN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const sN=(s,e)=>e.some(n=>s instanceof n);let Zb,e0;function rN(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iN(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fx=new WeakMap,Ep=new WeakMap,mx=new WeakMap,sp=new WeakMap,ag=new WeakMap;function aN(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{n(vi(s.result)),o()},u=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&fx.set(n,s)}).catch(()=>{}),ag.set(e,s),e}function oN(s){if(Ep.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});Ep.set(s,e)}let xp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Ep.get(s);if(e==="objectStoreNames")return s.objectStoreNames||mx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function lN(s){xp=s(xp)}function cN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(rp(this),e,...n);return mx.set(i,e.sort?e.sort():[e]),vi(i)}:iN().includes(s)?function(...e){return s.apply(rp(this),e),vi(fx.get(this))}:function(...e){return vi(s.apply(rp(this),e))}}function uN(s){return typeof s=="function"?cN(s):(s instanceof IDBTransaction&&oN(s),sN(s,rN())?new Proxy(s,xp):s)}function vi(s){if(s instanceof IDBRequest)return aN(s);if(sp.has(s))return sp.get(s);const e=uN(s);return e!==s&&(sp.set(s,e),ag.set(e,s)),e}const rp=s=>ag.get(s);function hN(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(s,e),p=vi(u);return i&&u.addEventListener("upgradeneeded",g=>{i(vi(u.result),g.oldVersion,g.newVersion,vi(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const dN=["get","getKey","getAll","getAllKeys","count"],fN=["put","add","delete","clear"],ip=new Map;function t0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=fN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dN.includes(n)))return;const c=async function(u,...p){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return ip.set(e,c),c}lN(s=>({...s,get:(e,n,i)=>t0(e,n)||s.get(e,n,i),has:(e,n)=>!!t0(e,n)||s.has(e,n)}));class mN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pN(s){return s.getComponent()?.type==="VERSION"}const Tp="@firebase/app",n0="0.14.6";const Ar=new ig("@firebase/app"),gN="@firebase/app-compat",yN="@firebase/analytics-compat",_N="@firebase/analytics",vN="@firebase/app-check-compat",bN="@firebase/app-check",EN="@firebase/auth",xN="@firebase/auth-compat",TN="@firebase/database",wN="@firebase/data-connect",AN="@firebase/database-compat",SN="@firebase/functions",RN="@firebase/functions-compat",NN="@firebase/installations",CN="@firebase/installations-compat",IN="@firebase/messaging",DN="@firebase/messaging-compat",jN="@firebase/performance",ON="@firebase/performance-compat",kN="@firebase/remote-config",MN="@firebase/remote-config-compat",VN="@firebase/storage",UN="@firebase/storage-compat",LN="@firebase/firestore",PN="@firebase/ai",zN="@firebase/firestore-compat",BN="firebase",qN="12.6.0";const wp="[DEFAULT]",HN={[Tp]:"fire-core",[gN]:"fire-core-compat",[_N]:"fire-analytics",[yN]:"fire-analytics-compat",[bN]:"fire-app-check",[vN]:"fire-app-check-compat",[EN]:"fire-auth",[xN]:"fire-auth-compat",[TN]:"fire-rtdb",[wN]:"fire-data-connect",[AN]:"fire-rtdb-compat",[SN]:"fire-fn",[RN]:"fire-fn-compat",[NN]:"fire-iid",[CN]:"fire-iid-compat",[IN]:"fire-fcm",[DN]:"fire-fcm-compat",[jN]:"fire-perf",[ON]:"fire-perf-compat",[kN]:"fire-rc",[MN]:"fire-rc-compat",[VN]:"fire-gcs",[UN]:"fire-gcs-compat",[LN]:"fire-fst",[zN]:"fire-fst-compat",[PN]:"fire-vertex","fire-js":"fire-js",[BN]:"fire-js-all"};const Jh=new Map,FN=new Map,Ap=new Map;function s0(s,e){try{s.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ba(s){const e=s.name;if(Ap.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Ap.set(e,s);for(const n of Jh.values())s0(n,s);for(const n of FN.values())s0(n,s);return!0}function xd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function jn(s){return s==null?!1:s.settings!==void 0}const GN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new zc("app","Firebase",GN);class KN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}const Ra=qN;function px(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:wp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(n||(n=ux()),!n)throw bi.create("no-options");const c=Jh.get(o);if(c){if(wr(n,c.options)&&wr(i,c.config))return c;throw bi.create("duplicate-app",{appName:o})}const u=new J1(o);for(const g of Ap.values())u.addComponent(g);const p=new KN(n,i,u);return Jh.set(o,p),p}function og(s=wp){const e=Jh.get(s);if(!e&&s===wp&&ux())return px();if(!e)throw bi.create("no-app",{appName:s});return e}function zs(s,e,n){let i=HN[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(u.join(" "));return}ba(new Ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const QN="firebase-heartbeat-database",YN=1,Ac="firebase-heartbeat-store";let ap=null;function gx(){return ap||(ap=hN(QN,YN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ac)}catch(n){console.warn(n)}}}}).catch(s=>{throw bi.create("idb-open",{originalErrorMessage:s.message})})),ap}async function $N(s){try{const n=(await gx()).transaction(Ac),i=await n.objectStore(Ac).get(yx(s));return await n.done,i}catch(e){if(e instanceof $s)Ar.warn(e.message);else{const n=bi.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(n.message)}}}async function r0(s,e){try{const i=(await gx()).transaction(Ac,"readwrite");await i.objectStore(Ac).put(e,yx(s)),await i.done}catch(n){if(n instanceof $s)Ar.warn(n.message);else{const i=bi.create("idb-set",{originalErrorMessage:n?.message});Ar.warn(i.message)}}}function yx(s){return`${s.name}!${s.options.appId}`}const XN=1024,WN=30;class JN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=i0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>WN){const o=tC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ar.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=i0(),{heartbeatsToSend:n,unsentEntries:i}=ZN(this._heartbeatsCache.heartbeats),o=Wh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ar.warn(e),""}}}function i0(){return new Date().toISOString().substring(0,10)}function ZN(s,e=XN){const n=[];let i=s.slice();for(const o of s){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),a0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z1()?B1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $N(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function a0(s){return Wh(JSON.stringify({version:2,heartbeats:s})).length}function tC(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function nC(s){ba(new Ai("platform-logger",e=>new mN(e),"PRIVATE")),ba(new Ai("heartbeat",e=>new JN(e),"PRIVATE")),zs(Tp,n0,s),zs(Tp,n0,"esm2020"),zs("fire-js","")}nC("");function _x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sC=_x,vx=new zc("auth","Firebase",_x());const Zh=new ig("@firebase/auth");function rC(s,...e){Zh.logLevel<=ke.WARN&&Zh.warn(`Auth (${Ra}): ${s}`,...e)}function zh(s,...e){Zh.logLevel<=ke.ERROR&&Zh.error(`Auth (${Ra}): ${s}`,...e)}function ms(s,...e){throw lg(s,...e)}function Bs(s,...e){return lg(s,...e)}function bx(s,e,n){const i={...sC(),[e]:n};return new zc("auth","Firebase",i).create(e,{appName:s.name})}function br(s){return bx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return vx.create(s,...e)}function be(s,e,...n){if(!s)throw lg(e,...n)}function yr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw zh(e),new Error(e)}function Sr(s,e){s||yr(e)}function Sp(){return typeof self<"u"&&self.location?.href||""}function iC(){return o0()==="http:"||o0()==="https:"}function o0(){return typeof self<"u"&&self.location?.protocol||null}function aC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iC()||V1()||"connection"in navigator)?navigator.onLine:!0}function oC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class qc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=O1()||U1()}get(){return aC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cg(s,e){Sr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Ex{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const cC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uC=new qc(3e4,6e4);function Ir(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Dr(s,e,n,i,o={}){return xx(s,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const p=Bc({key:s.config.apiKey,...u}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...c};return M1()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&ji(s.emulatorConfig.host)&&(y.credentials="include"),Ex.fetch()(await Tx(s,s.config.apiHost,n,p),y)})}async function xx(s,e,n){s._canInitEmulator=!1;const i={...lC,...e};try{const o=new dC(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Nh(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(s,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Nh(s,"email-already-in-use",u);if(g==="USER_DISABLED")throw Nh(s,"user-disabled",u);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw bx(s,b,y);ms(s,b)}}catch(o){if(o instanceof $s)throw o;ms(s,"network-request-failed",{message:String(o)})}}async function Hc(s,e,n,i,o={}){const c=await Dr(s,e,n,i,o);return"mfaPendingCredential"in c&&ms(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Tx(s,e,n,i){const o=`${e}${n}?${i}`,c=s,u=c.config.emulator?cg(s.config,o):`${s.config.apiScheme}://${o}`;return cC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function hC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Bs(this.auth,"network-request-failed")),uC.get())})}}function Nh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Bs(s,e,i);return o.customData._tokenResponse=n,o}function l0(s){return s!==void 0&&s.enterprise!==void 0}class fC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mC(s,e){return Dr(s,"GET","/v2/recaptchaConfig",Ir(s,e))}async function pC(s,e){return Dr(s,"POST","/v1/accounts:delete",e)}async function ed(s,e){return Dr(s,"POST","/v1/accounts:lookup",e)}function yc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gC(s,e=!1){const n=ot(s),i=await n.getIdToken(e),o=ug(i);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:i,authTime:yc(op(o.auth_time)),issuedAtTime:yc(op(o.iat)),expirationTime:yc(op(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function op(s){return Number(s)*1e3}function ug(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ox(n);return o?JSON.parse(o):(zh("Failed to decode base64 JWT payload"),null)}catch(o){return zh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function c0(s){const e=ug(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Sc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof $s&&yC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function yC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class _C{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function td(s){const e=s.auth,n=await s.getIdToken(),i=await Sc(s,ed(e,{idToken:n}));be(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?wx(o.providerUserInfo):[],u=bC(s.providerData,c),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!u?.length,y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function vC(s){const e=ot(s);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function wx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function EC(s,e){const n=await xx(s,{},async()=>{const i=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,u=await Tx(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&ji(s.emulatorConfig.host)&&(g.credentials="include"),Ex.fetch()(u,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xC(s,e){return Dr(s,"POST","/v2/accounts:revokeToken",Ir(s,e))}class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=c0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await EC(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,u=new jo;return i&&(be(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(be(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(be(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return yr("not implemented")}}function hi(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new _C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Sc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gC(this,e)}reload(){return vC(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await td(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Sc(this,pC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:x,emailVerified:w,isAnonymous:C,providerData:N,stsTokenManager:U}=n;be(x&&U,e,"internal-error");const M=jo.fromJSON(this.name,U);be(typeof x=="string",e,"internal-error"),hi(i,e.name),hi(o,e.name),be(typeof w=="boolean",e,"internal-error"),be(typeof C=="boolean",e,"internal-error"),hi(c,e.name),hi(u,e.name),hi(p,e.name),hi(g,e.name),hi(y,e.name),hi(b,e.name);const H=new fs({uid:x,auth:e,email:o,emailVerified:w,displayName:i,isAnonymous:C,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:M,createdAt:y,lastLoginAt:b});return N&&Array.isArray(N)&&(H.providerData=N.map(B=>({...B}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,n,i=!1){const o=new jo;o.updateFromServerResponse(n);const c=new fs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await td(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];be(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?wx(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,p=new jo;p.updateFromIdToken(i);const g=new fs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const u0=new Map;function _r(s){Sr(s instanceof Function,"Expected a class definition");let e=u0.get(s);return e?(Sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,u0.set(s,e),e)}class Ax{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ax.type="NONE";const h0=Ax;function Bh(s,e,n){return`firebase:${s}:${e}:${n}`}class Oo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Bh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Bh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ed(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oo(_r(h0),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||_r(h0);const u=Bh(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(u);if(b){let x;if(typeof b=="string"){const w=await ed(e,{idToken:b}).catch(()=>{});if(!w)break;x=await fs._fromGetAccountInfoResponse(e,w,b)}else x=fs._fromJSON(e,b);y!==c&&(p=x),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Oo(c,e,i):(c=g[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new Oo(c,e,i))}}function d0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dx(e))return"Blackberry";if(jx(e))return"Webos";if(Rx(e))return"Safari";if((e.includes("chrome/")||Nx(e))&&!e.includes("edge/"))return"Chrome";if(Ix(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Sx(s=rn()){return/firefox\//i.test(s)}function Rx(s=rn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nx(s=rn()){return/crios\//i.test(s)}function Cx(s=rn()){return/iemobile/i.test(s)}function Ix(s=rn()){return/android/i.test(s)}function Dx(s=rn()){return/blackberry/i.test(s)}function jx(s=rn()){return/webos/i.test(s)}function hg(s=rn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function TC(s=rn()){return hg(s)&&!!window.navigator?.standalone}function wC(){return L1()&&document.documentMode===10}function Ox(s=rn()){return hg(s)||Ix(s)||jx(s)||Dx(s)||/windows phone/i.test(s)||Cx(s)}function kx(s,e=[]){let n;switch(s){case"Browser":n=d0(rn());break;case"Worker":n=`${d0(rn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ra}/${i}`}class AC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((u,p)=>{try{const g=e(c);u(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function SC(s,e={}){return Dr(s,"GET","/v2/passwordPolicy",Ir(s,e))}const RC=6;class NC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??RC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class CC{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new AC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ed(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===u)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(br(this));const n=e?ot(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SC(this),n=new NC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await xC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(n);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Oi(s){return ot(s)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=K1(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IC(s){Td=s}function Mx(s){return Td.loadJS(s)}function DC(){return Td.recaptchaEnterpriseScript}function jC(){return Td.gapiScript}function OC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class kC{constructor(){this.enterprise=new MC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VC="recaptcha-enterprise",Vx="NO_RECAPTCHA";class UC{constructor(e){this.type=VC,this.auth=Oi(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,p)=>{mC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new fC(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,u,p){const g=window.grecaptcha;l0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(Vx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kC().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(p=>{if(!n&&l0(window.grecaptcha))o(p,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=DC();g.length!==0&&(g+=p),Mx(g).then(()=>{o(p,c,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function m0(s,e,n,i=!1,o=!1){const c=new UC(s);let u;if(o)u=Vx;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nd(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await m0(s,e,n,n==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await m0(s,e,n,n==="getOobCode");return i(s,u)}else return Promise.reject(c)})}function LC(s,e){const n=xd(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(wr(c,e??{}))return o;ms(o,"already-initialized")}return n.initialize({options:e})}function PC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(_r);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function zC(s,e,n){const i=Oi(s);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Ux(e),{host:u,port:p}=BC(e),g=p===null?"":`:${p}`,y={url:`${c}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(wr(y,i.config.emulator)&&wr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,ji(u)?(sg(`${c}//${u}${g}`),rg("Auth",!0)):qC()}function Ux(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function BC(s){const e=Ux(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:p0(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:p0(u)}}}function p0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function qC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function HC(s,e){return Dr(s,"POST","/v1/accounts:signUp",e)}async function FC(s,e){return Hc(s,"POST","/v1/accounts:signInWithPassword",Ir(s,e))}async function Lx(s,e){return Dr(s,"POST","/v1/accounts:sendOobCode",Ir(s,e))}async function GC(s,e){return Lx(s,e)}async function KC(s,e){return Lx(s,e)}async function QC(s,e){return Hc(s,"POST","/v1/accounts:signInWithEmailLink",Ir(s,e))}async function YC(s,e){return Hc(s,"POST","/v1/accounts:signInWithEmailLink",Ir(s,e))}class Rc extends dg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Rc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Rc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,n,"signInWithPassword",FC);case"emailLink":return QC(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,i,"signUpPassword",HC);case"emailLink":return YC(e,{idToken:n,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ko(s,e){return Hc(s,"POST","/v1/accounts:signInWithIdp",Ir(s,e))}const $C="http://localhost";class Ea extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const u=new Ea(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ko(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:$C,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bc(n)}return e}}function XC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WC(s){const e=uc(hc(s)).link,n=e?uc(hc(e)).deep_link_id:null,i=uc(hc(s)).deep_link_id;return(i?uc(hc(i)).link:null)||i||n||e||s}class fg{constructor(e){const n=uc(hc(e)),i=n.apiKey??null,o=n.oobCode??null,c=XC(n.mode??null);be(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WC(e);try{return new fg(n)}catch{return null}}}class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=fg.parseLink(n);return be(i,"argument-error"),Rc._fromEmailAndCode(e,i.code,i.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Px{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fc extends Px{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends Fc{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";class mi extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";class pi extends Fc{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";class gi extends Fc{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";async function JC(s,e){return Hc(s,"POST","/v1/accounts:signUp",Ir(s,e))}class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await fs._fromIdTokenResponse(e,i,o),u=g0(i);return new xa({user:c,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=g0(i);return new xa({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function g0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class sd extends $s{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new sd(e,n,i,o)}}function zx(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(s,c,e,i):c})}async function ZC(s,e,n=!1){const i=await Sc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return xa._forOperation(s,"link",i)}async function eI(s,e,n=!1){const{auth:i}=s;if(jn(i.app))return Promise.reject(br(i));const o="reauthenticate";try{const c=await Sc(s,zx(i,o,e,s),n);be(c.idToken,i,"internal-error");const u=ug(c.idToken);be(u,i,"internal-error");const{sub:p}=u;return be(s.uid===p,i,"user-mismatch"),xa._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ms(i,"user-mismatch"),c}}async function Bx(s,e,n=!1){if(jn(s.app))return Promise.reject(br(s));const i="signIn",o=await zx(s,i,e),c=await xa._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function tI(s,e){return Bx(Oi(s),e)}async function qx(s){const e=Oi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nI(s,e,n){const i=Oi(s);await nd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KC)}async function sI(s,e,n){if(jn(s.app))return Promise.reject(br(s));const i=Oi(s),u=await nd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&qx(s),g}),p=await xa._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(p.user),p}function rI(s,e,n){return jn(s.app)?Promise.reject(br(s)):tI(ot(s),Qo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qx(s),i})}async function y0(s,e){const n=ot(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await GC(n.auth,o);c!==s.email&&await s.reload()}function iI(s,e,n,i){return ot(s).onIdTokenChanged(e,n,i)}function aI(s,e,n){return ot(s).beforeAuthStateChanged(e,n)}function oI(s,e,n,i){return ot(s).onAuthStateChanged(e,n,i)}function lI(s){return ot(s).signOut()}const rd="__sak";class Hx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cI=1e3,uI=10;class Fx extends Hx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ox(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);wC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uI):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},cI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fx.type="LOCAL";const hI=Fx;class Gx extends Hx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gx.type="SESSION";const Kx=Gx;function dI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(u).map(async y=>y(n.origin,c)),g=await dI(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];function mg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class fI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((p,g)=>{const y=mg("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(x){const w=x;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(w.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function qs(){return window}function mI(s){qs().location.href=s}function Qx(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function pI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gI(){return navigator?.serviceWorker?.controller||null}function yI(){return Qx()?self:null}const Yx="firebaseLocalStorageDb",_I=1,id="firebaseLocalStorage",$x="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(s,e){return s.transaction([id],e?"readwrite":"readonly").objectStore(id)}function vI(){const s=indexedDB.deleteDatabase(Yx);return new Gc(s).toPromise()}function Np(){const s=indexedDB.open(Yx,_I);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(id,{keyPath:$x})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(id)?e(i):(i.close(),await vI(),e(await Np()))})})}async function _0(s,e,n){const i=Ad(s,!0).put({[$x]:e,value:n});return new Gc(i).toPromise()}async function bI(s,e){const n=Ad(s,!1).get(e),i=await new Gc(n).toPromise();return i===void 0?null:i.value}function v0(s,e){const n=Ad(s,!0).delete(e);return new Gc(n).toPromise()}const EI=800,xI=3;class Xx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(yI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pI(),!this.activeServiceWorker)return;this.sender=new fI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await _0(e,rd,"1"),await v0(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>bI(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Ad(o,!1).getAll();return new Gc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xx.type="LOCAL";const TI=Xx;new qc(3e4,6e4);function wI(s,e){return e?_r(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class pg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AI(s){return Bx(s.auth,new pg(s),s.bypassAuthState)}function SI(s){const{auth:e,user:n}=s;return be(n,e,"internal-error"),eI(n,new pg(s),s.bypassAuthState)}async function RI(s){const{auth:e,user:n}=s;return be(n,e,"internal-error"),ZC(n,new pg(s),s.bypassAuthState)}class Wx{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AI;case"linkViaPopup":case"linkViaRedirect":return RI;case"reauthViaPopup":case"reauthViaRedirect":return SI;default:ms(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NI=new qc(2e3,1e4);class Do extends Wx{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NI.get())};e()}}Do.currentPopupAction=null;const CI="pendingRedirect",qh=new Map;class II extends Wx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const i=await DI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DI(s,e){const n=kI(e),i=OI(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function jI(s,e){qh.set(s._key(),e)}function OI(s){return _r(s._redirectPersistence)}function kI(s){return Bh(CI,s.config.apiKey,s.name)}async function MI(s,e,n=!1){if(jn(s.app))return Promise.reject(br(s));const i=Oi(s),o=wI(i,e),u=await new II(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const VI=600*1e3;class UI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Jx(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VI&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Jx({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function LI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jx(s);default:return!1}}async function PI(s,e={}){return Dr(s,"GET","/v1/projects",e)}const zI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BI=/^https?/;async function qI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await PI(s);for(const n of e)try{if(HI(n))return}catch{}ms(s,"unauthorized-domain")}function HI(s){const e=Sp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!BI.test(n))return!1;if(zI.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const FI=new qc(3e4,6e4);function E0(){const s=qs().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function GI(s){return new Promise((e,n)=>{function i(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(Bs(s,"network-request-failed"))},timeout:FI.get()})}if(qs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qs().gapi?.load)i();else{const o=OC("iframefcb");return qs()[o]=()=>{gapi.load?i():n(Bs(s,"network-request-failed"))},Mx(`${jC()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function KI(s){return Hh=Hh||GI(s),Hh}const QI=new qc(5e3,15e3),YI="__/auth/iframe",$I="emulator/auth/iframe",XI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JI(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?cg(e,$I):`https://${s.config.authDomain}/${YI}`,i={apiKey:e.apiKey,appName:s.name,v:Ra},o=WI.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Bc(i).slice(1)}`}async function ZI(s){const e=await KI(s),n=qs().gapi;return be(n,s,"internal-error"),e.open({where:document.body,url:JI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XI,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=Bs(s,"network-request-failed"),p=qs().setTimeout(()=>{c(u)},QI.get());function g(){qs().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{c(u)})}))}const e2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t2=500,n2=600,s2="_blank",r2="http://localhost";class x0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i2(s,e,n,i=t2,o=n2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...e2,width:i.toString(),height:o.toString(),top:c,left:u},y=rn().toLowerCase();n&&(p=Nx(y)?s2:n),Sx(y)&&(e=e||r2,g.scrollbars="yes");const b=Object.entries(g).reduce((w,[C,N])=>`${w}${C}=${N},`,"");if(TC(y)&&p!=="_self")return a2(e||"",p),new x0(null);const x=window.open(e||"",p,b);be(x,s,"popup-blocked");try{x.focus()}catch{}return new x0(x)}function a2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const o2="__/auth/handler",l2="emulator/auth/handler",c2=encodeURIComponent("fac");async function T0(s,e,n,i,o,c){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Ra,eventId:o};if(e instanceof Px){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",G1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,x]of Object.entries({}))u[b]=x}if(e instanceof Fc){const b=e.getScopes().filter(x=>x!=="");b.length>0&&(u.scopes=b.join(","))}s.tenantId&&(u.tid=s.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${c2}=${encodeURIComponent(g)}`:"";return`${u2(s)}?${Bc(p).slice(1)}${y}`}function u2({config:s}){return s.emulator?cg(s,l2):`https://${s.authDomain}/${o2}`}const lp="webStorageSupport";class h2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kx,this._completeRedirectFn=MI,this._overrideRedirectResult=jI}async _openPopup(e,n,i,o){Sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await T0(e,n,i,Sp(),o);return i2(e,c,mg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await T0(e,n,i,Sp(),o);return mI(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Sr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ZI(e),i=new UI(e);return n.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},o=>{const c=o?.[0]?.[lp];c!==void 0&&n(!!c),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ox()||Rx()||hg()}}const d2=h2;var w0="@firebase/auth",A0="1.12.0";class f2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function m2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p2(s){ba(new Ai("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;be(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kx(s)},y=new CC(i,o,c,g);return PC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ba(new Ai("auth-internal",e=>{const n=Oi(e.getProvider("auth").getImmediate());return(i=>new f2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(w0,A0,m2(s)),zs(w0,A0,"esm2020")}const g2=300,y2=hx("authIdTokenMaxAge")||g2;let S0=null;const _2=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>y2)return;const o=n?.token;S0!==o&&(S0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function v2(s=og()){const e=xd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=LC(s,{popupRedirectResolver:d2,persistence:[TI,hI,Kx]}),i=hx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=_2(c.toString());aI(n,u,()=>u(n.currentUser)),iI(n,p=>u(p))}}const o=lx("auth");return o&&zC(n,`http://${o}`),n}function b2(){return document.getElementsByTagName("head")?.[0]??document}IC({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Bs("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",b2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p2("Browser");var R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ei,Zx;(function(){var s;function e(R,A){function I(){}I.prototype=A.prototype,R.F=A.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(O,D,L){for(var j=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)j[_e-2]=arguments[_e];return A.prototype[D].apply(O,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,I){I||(I=0);const O=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)O[D]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(D=0;D<16;++D)O[D]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=R.g[0],I=R.g[1],D=R.g[2];let L=R.g[3],j;j=A+(L^I&(D^L))+O[0]+3614090360&4294967295,A=I+(j<<7&4294967295|j>>>25),j=L+(D^A&(I^D))+O[1]+3905402710&4294967295,L=A+(j<<12&4294967295|j>>>20),j=D+(I^L&(A^I))+O[2]+606105819&4294967295,D=L+(j<<17&4294967295|j>>>15),j=I+(A^D&(L^A))+O[3]+3250441966&4294967295,I=D+(j<<22&4294967295|j>>>10),j=A+(L^I&(D^L))+O[4]+4118548399&4294967295,A=I+(j<<7&4294967295|j>>>25),j=L+(D^A&(I^D))+O[5]+1200080426&4294967295,L=A+(j<<12&4294967295|j>>>20),j=D+(I^L&(A^I))+O[6]+2821735955&4294967295,D=L+(j<<17&4294967295|j>>>15),j=I+(A^D&(L^A))+O[7]+4249261313&4294967295,I=D+(j<<22&4294967295|j>>>10),j=A+(L^I&(D^L))+O[8]+1770035416&4294967295,A=I+(j<<7&4294967295|j>>>25),j=L+(D^A&(I^D))+O[9]+2336552879&4294967295,L=A+(j<<12&4294967295|j>>>20),j=D+(I^L&(A^I))+O[10]+4294925233&4294967295,D=L+(j<<17&4294967295|j>>>15),j=I+(A^D&(L^A))+O[11]+2304563134&4294967295,I=D+(j<<22&4294967295|j>>>10),j=A+(L^I&(D^L))+O[12]+1804603682&4294967295,A=I+(j<<7&4294967295|j>>>25),j=L+(D^A&(I^D))+O[13]+4254626195&4294967295,L=A+(j<<12&4294967295|j>>>20),j=D+(I^L&(A^I))+O[14]+2792965006&4294967295,D=L+(j<<17&4294967295|j>>>15),j=I+(A^D&(L^A))+O[15]+1236535329&4294967295,I=D+(j<<22&4294967295|j>>>10),j=A+(D^L&(I^D))+O[1]+4129170786&4294967295,A=I+(j<<5&4294967295|j>>>27),j=L+(I^D&(A^I))+O[6]+3225465664&4294967295,L=A+(j<<9&4294967295|j>>>23),j=D+(A^I&(L^A))+O[11]+643717713&4294967295,D=L+(j<<14&4294967295|j>>>18),j=I+(L^A&(D^L))+O[0]+3921069994&4294967295,I=D+(j<<20&4294967295|j>>>12),j=A+(D^L&(I^D))+O[5]+3593408605&4294967295,A=I+(j<<5&4294967295|j>>>27),j=L+(I^D&(A^I))+O[10]+38016083&4294967295,L=A+(j<<9&4294967295|j>>>23),j=D+(A^I&(L^A))+O[15]+3634488961&4294967295,D=L+(j<<14&4294967295|j>>>18),j=I+(L^A&(D^L))+O[4]+3889429448&4294967295,I=D+(j<<20&4294967295|j>>>12),j=A+(D^L&(I^D))+O[9]+568446438&4294967295,A=I+(j<<5&4294967295|j>>>27),j=L+(I^D&(A^I))+O[14]+3275163606&4294967295,L=A+(j<<9&4294967295|j>>>23),j=D+(A^I&(L^A))+O[3]+4107603335&4294967295,D=L+(j<<14&4294967295|j>>>18),j=I+(L^A&(D^L))+O[8]+1163531501&4294967295,I=D+(j<<20&4294967295|j>>>12),j=A+(D^L&(I^D))+O[13]+2850285829&4294967295,A=I+(j<<5&4294967295|j>>>27),j=L+(I^D&(A^I))+O[2]+4243563512&4294967295,L=A+(j<<9&4294967295|j>>>23),j=D+(A^I&(L^A))+O[7]+1735328473&4294967295,D=L+(j<<14&4294967295|j>>>18),j=I+(L^A&(D^L))+O[12]+2368359562&4294967295,I=D+(j<<20&4294967295|j>>>12),j=A+(I^D^L)+O[5]+4294588738&4294967295,A=I+(j<<4&4294967295|j>>>28),j=L+(A^I^D)+O[8]+2272392833&4294967295,L=A+(j<<11&4294967295|j>>>21),j=D+(L^A^I)+O[11]+1839030562&4294967295,D=L+(j<<16&4294967295|j>>>16),j=I+(D^L^A)+O[14]+4259657740&4294967295,I=D+(j<<23&4294967295|j>>>9),j=A+(I^D^L)+O[1]+2763975236&4294967295,A=I+(j<<4&4294967295|j>>>28),j=L+(A^I^D)+O[4]+1272893353&4294967295,L=A+(j<<11&4294967295|j>>>21),j=D+(L^A^I)+O[7]+4139469664&4294967295,D=L+(j<<16&4294967295|j>>>16),j=I+(D^L^A)+O[10]+3200236656&4294967295,I=D+(j<<23&4294967295|j>>>9),j=A+(I^D^L)+O[13]+681279174&4294967295,A=I+(j<<4&4294967295|j>>>28),j=L+(A^I^D)+O[0]+3936430074&4294967295,L=A+(j<<11&4294967295|j>>>21),j=D+(L^A^I)+O[3]+3572445317&4294967295,D=L+(j<<16&4294967295|j>>>16),j=I+(D^L^A)+O[6]+76029189&4294967295,I=D+(j<<23&4294967295|j>>>9),j=A+(I^D^L)+O[9]+3654602809&4294967295,A=I+(j<<4&4294967295|j>>>28),j=L+(A^I^D)+O[12]+3873151461&4294967295,L=A+(j<<11&4294967295|j>>>21),j=D+(L^A^I)+O[15]+530742520&4294967295,D=L+(j<<16&4294967295|j>>>16),j=I+(D^L^A)+O[2]+3299628645&4294967295,I=D+(j<<23&4294967295|j>>>9),j=A+(D^(I|~L))+O[0]+4096336452&4294967295,A=I+(j<<6&4294967295|j>>>26),j=L+(I^(A|~D))+O[7]+1126891415&4294967295,L=A+(j<<10&4294967295|j>>>22),j=D+(A^(L|~I))+O[14]+2878612391&4294967295,D=L+(j<<15&4294967295|j>>>17),j=I+(L^(D|~A))+O[5]+4237533241&4294967295,I=D+(j<<21&4294967295|j>>>11),j=A+(D^(I|~L))+O[12]+1700485571&4294967295,A=I+(j<<6&4294967295|j>>>26),j=L+(I^(A|~D))+O[3]+2399980690&4294967295,L=A+(j<<10&4294967295|j>>>22),j=D+(A^(L|~I))+O[10]+4293915773&4294967295,D=L+(j<<15&4294967295|j>>>17),j=I+(L^(D|~A))+O[1]+2240044497&4294967295,I=D+(j<<21&4294967295|j>>>11),j=A+(D^(I|~L))+O[8]+1873313359&4294967295,A=I+(j<<6&4294967295|j>>>26),j=L+(I^(A|~D))+O[15]+4264355552&4294967295,L=A+(j<<10&4294967295|j>>>22),j=D+(A^(L|~I))+O[6]+2734768916&4294967295,D=L+(j<<15&4294967295|j>>>17),j=I+(L^(D|~A))+O[13]+1309151649&4294967295,I=D+(j<<21&4294967295|j>>>11),j=A+(D^(I|~L))+O[4]+4149444226&4294967295,A=I+(j<<6&4294967295|j>>>26),j=L+(I^(A|~D))+O[11]+3174756917&4294967295,L=A+(j<<10&4294967295|j>>>22),j=D+(A^(L|~I))+O[2]+718787259&4294967295,D=L+(j<<15&4294967295|j>>>17),j=I+(L^(D|~A))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+L&4294967295}i.prototype.v=function(R,A){A===void 0&&(A=R.length);const I=A-this.blockSize,O=this.C;let D=this.h,L=0;for(;L<A;){if(D==0)for(;L<=I;)o(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<A;)if(O[D++]=R.charCodeAt(L++),D==this.blockSize){o(this,O),D=0;break}}else for(;L<A;)if(O[D++]=R[L++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=A},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,I=0;I<4;++I)for(let O=0;O<32;O+=8)R[A++]=this.g[I]>>>O&255;return R};function c(R,A){var I=p;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=A(R)}function u(R,A){this.h=A;const I=[];let O=!0;for(let D=R.length-1;D>=0;D--){const L=R[D]|0;O&&L==A||(I[D]=L,O=!1)}this.g=I}var p={};function g(R){return-128<=R&&R<128?c(R,function(A){return new u([A|0],A<0?-1:0)}):new u([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return x;if(R<0)return M(y(-R));const A=[];let I=1;for(let O=0;R>=I;O++)A[O]=R/I|0,I*=4294967296;return new u(A,0)}function b(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return M(b(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(A,8));let O=x;for(let L=0;L<R.length;L+=8){var D=Math.min(8,R.length-L);const j=parseInt(R.substring(L,L+D),A);D<8?(D=y(Math.pow(A,D)),O=O.j(D).add(y(j))):(O=O.j(I),O=O.add(y(j)))}return O}var x=g(0),w=g(1),C=g(16777216);s=u.prototype,s.m=function(){if(U(this))return-M(this).m();let R=0,A=1;for(let I=0;I<this.g.length;I++){const O=this.i(I);R+=(O>=0?O:4294967296+O)*A,A*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(U(this))return"-"+M(this).toString(R);const A=y(Math.pow(R,6));var I=this;let O="";for(;;){const D=X(I,A).g;I=H(I,D.j(A));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=D,N(I))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function U(R){return R.h==-1}s.l=function(R){return R=H(this,R),U(R)?-1:N(R)?0:1};function M(R){const A=R.g.length,I=[];for(let O=0;O<A;O++)I[O]=~R.g[O];return new u(I,~R.h).add(w)}s.abs=function(){return U(this)?M(this):this},s.add=function(R){const A=Math.max(this.g.length,R.g.length),I=[];let O=0;for(let D=0;D<=A;D++){let L=O+(this.i(D)&65535)+(R.i(D)&65535),j=(L>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=j>>>16,L&=65535,j&=65535,I[D]=j<<16|L}return new u(I,I[I.length-1]&-2147483648?-1:0)};function H(R,A){return R.add(M(A))}s.j=function(R){if(N(this)||N(R))return x;if(U(this))return U(R)?M(this).j(M(R)):M(M(this).j(R));if(U(R))return M(this.j(M(R)));if(this.l(C)<0&&R.l(C)<0)return y(this.m()*R.m());const A=this.g.length+R.g.length,I=[];for(var O=0;O<2*A;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<R.g.length;D++){const L=this.i(O)>>>16,j=this.i(O)&65535,_e=R.i(D)>>>16,Qe=R.i(D)&65535;I[2*O+2*D]+=j*Qe,B(I,2*O+2*D),I[2*O+2*D+1]+=L*Qe,B(I,2*O+2*D+1),I[2*O+2*D+1]+=j*_e,B(I,2*O+2*D+1),I[2*O+2*D+2]+=L*_e,B(I,2*O+2*D+2)}for(R=0;R<A;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=A;R<2*A;R++)I[R]=0;return new u(I,0)};function B(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function Y(R,A){this.g=R,this.h=A}function X(R,A){if(N(A))throw Error("division by zero");if(N(R))return new Y(x,x);if(U(R))return A=X(M(R),A),new Y(M(A.g),M(A.h));if(U(A))return A=X(R,M(A)),new Y(M(A.g),A.h);if(R.g.length>30){if(U(R)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var I=w,O=A;O.l(R)<=0;)I=ie(I),O=ie(O);var D=ae(I,1),L=ae(O,1);for(O=ae(O,2),I=ae(I,2);!N(O);){var j=L.add(O);j.l(R)<=0&&(D=D.add(I),L=j),O=ae(O,1),I=ae(I,1)}return A=H(R,D.j(A)),new Y(D,A)}for(D=x;R.l(A)>=0;){for(I=Math.max(1,Math.floor(R.m()/A.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=y(I),j=L.j(A);U(j)||j.l(R)>0;)I-=O,L=y(I),j=L.j(A);N(L)&&(L=w),D=D.add(L),R=H(R,j)}return new Y(D,R)}s.B=function(R){return X(this,R).h},s.and=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<A;O++)I[O]=this.i(O)&R.i(O);return new u(I,this.h&R.h)},s.or=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<A;O++)I[O]=this.i(O)|R.i(O);return new u(I,this.h|R.h)},s.xor=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<A;O++)I[O]=this.i(O)^R.i(O);return new u(I,this.h^R.h)};function ie(R){const A=R.g.length+1,I=[];for(let O=0;O<A;O++)I[O]=R.i(O)<<1|R.i(O-1)>>>31;return new u(I,R.h)}function ae(R,A){const I=A>>5;A%=32;const O=R.g.length-I,D=[];for(let L=0;L<O;L++)D[L]=A>0?R.i(L+I)>>>A|R.i(L+I+1)<<32-A:R.i(L+I);return new u(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Zx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,Ei=u}).apply(typeof R0<"u"?R0:typeof self<"u"?self:typeof window<"u"?window:{});var Ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var eT,dc,tT,Fh,Cp,nT,sT,rT;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ch=="object"&&Ch];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,_){if(_)e:{var E=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var F=h[S];if(!(F in E))break e;E=E[F]}h=h[h.length-1],S=E[h],_=_(S),_!=S&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(_){var E=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&E.push([S,_[S]]);return E}});var c=c||{},u=this||self;function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function g(h,_,E){return h.call.apply(h.bind,arguments)}function y(h,_,E){return y=g,y.apply(null,arguments)}function b(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function x(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(S,F,$){for(var oe=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)oe[Se-2]=arguments[Se];return _.prototype[F].apply(S,oe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const _=h.length;if(_>0){const E=Array(_);for(let S=0;S<_;S++)E[S]=h[S];return E}return[]}function N(h,_){for(let S=1;S<arguments.length;S++){const F=arguments[S];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=h.length||0;const $=F.length||0;h.length=E+$;for(let oe=0;oe<$;oe++)h[E+oe]=F[oe]}else h.push(F)}}class U{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(h){u.setTimeout(()=>{throw h},0)}function H(){var h=R;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,E){const S=Y.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var Y=new U(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ae=!1,R=new B,A=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(I)}};function I(){for(var h;h=H();){try{h.h.call(h.g)}catch(E){M(E)}var _=Y;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ae=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return h})();function j(h){return/^[\s\xa0]*$/.test(h)}function _e(h,_){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}x(_e,D),_e.prototype.init=function(h,_){const E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(h,_,E,S,F){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=F,this.key=++J,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,_,E){for(const S in h)_.call(E,h[S],S,h)}function Ye(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function z(h){const _={};for(const E in h)_[E]=h[E];return _}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,_){let E,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(E in S)h[E]=S[E];for(let $=0;$<se.length;$++)E=se[$],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,_,E,S,F){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const oe=Ne(h,_,S,F);return oe>-1?(_=h[oe],E||(_.fa=!1)):(_=new le(_,this.src,$,!!S,F),_.fa=E,h.push(_)),_};function xe(h,_){const E=_.type;if(E in h.g){var S=h.g[E],F=Array.prototype.indexOf.call(S,_,void 0),$;($=F>=0)&&Array.prototype.splice.call(S,F,1),$&&(ye(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ne(h,_,E,S){for(let F=0;F<h.length;++F){const $=h[F];if(!$.da&&$.listener==_&&$.capture==!!E&&$.ha==S)return F}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Vt={};function ct(h,_,E,S,F){if(Array.isArray(_)){for(let $=0;$<_.length;$++)ct(h,_[$],E,S,F);return null}return E=nl(E),h&&h[Qe]?h.J(_,E,p(S)?!!S.capture:!1,F):Ui(h,_,E,!1,S,F)}function Ui(h,_,E,S,F,$){if(!_)throw Error("Invalid event type");const oe=p(F)?!!F.capture:!!F;let Se=Li(h);if(Se||(h[Le]=Se=new de(h)),E=Se.add(_,E,S,oe,$),E.proxy)return E;if(S=ka(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)L||(F=oe),F===void 0&&(F=!1),h.addEventListener(_.toString(),S,F);else if(h.attachEvent)h.attachEvent(gs(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ka(){function h(E){return _.call(h.src,h.listener,E)}const _=el;return h}function Ma(h,_,E,S,F){if(Array.isArray(_))for(var $=0;$<_.length;$++)Ma(h,_[$],E,S,F);else S=p(S)?!!S.capture:!!S,E=nl(E),h&&h[Qe]?(h=h.i,$=String(_).toString(),$ in h.g&&(_=h.g[$],E=Ne(_,E,S,F),E>-1&&(ye(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[$],h.h--)))):h&&(h=Li(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ne(_,E,S,F)),(E=h>-1?_[h]:null)&&Va(E))}function Va(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Qe])xe(_.i,h);else{var E=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(E,S,h.capture):_.detachEvent?_.detachEvent(gs(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Li(_))?(xe(E,h),E.h==0&&(E.src=null,_[Le]=null)):ye(h)}}}function gs(h){return h in Vt?Vt[h]:Vt[h]="on"+h}function el(h,_){if(h.da)h=!0;else{_=new _e(_,this);const E=h.listener,S=h.ha||h.src;h.fa&&Va(h),h=E.call(S,_)}return h}function Li(h){return h=h[Le],h instanceof de?h:null}var tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function nl(h){return typeof h=="function"?h:(h[tl]||(h[tl]=function(_){return h.handleEvent(_)}),h[tl])}function wt(){O.call(this),this.i=new de(this),this.M=this,this.G=null}x(wt,O),wt.prototype[Qe]=!0,wt.prototype.removeEventListener=function(h,_,E,S){Ma(this,h,_,E,S)};function Ut(h,_){var E,S=h.G;if(S)for(E=[];S;S=S.G)E.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var F=_;_=new D(S,h),ce(_,F)}F=!0;let $,oe;if(E)for(oe=E.length-1;oe>=0;oe--)$=_.g=E[oe],F=jr($,S,!0,_)&&F;if($=_.g=h,F=jr($,S,!0,_)&&F,F=jr($,S,!1,_)&&F,E)for(oe=0;oe<E.length;oe++)$=_.g=E[oe],F=jr($,S,!1,_)&&F}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let S=0;S<E.length;S++)ye(E[S]);delete h.g[_],h.h--}}this.G=null},wt.prototype.J=function(h,_,E,S){return this.i.add(String(h),_,!1,E,S)},wt.prototype.K=function(h,_,E,S){return this.i.add(String(h),_,!0,E,S)};function jr(h,_,E,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let $=0;$<_.length;++$){const oe=_[$];if(oe&&!oe.da&&oe.capture==E){const Se=oe.listener,bt=oe.ha||oe.src;oe.fa&&xe(h.i,oe),F=Se.call(bt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Yd(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function Jc(h){h.g=Yd(()=>{h.g=null,h.i&&(h.i=!1,Jc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class an extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Jc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(h){O.call(this),this.h=h,this.g={}}x(Pi,O);var sl=[];function rl(h){ze(h.g,function(_,E){this.g.hasOwnProperty(E)&&Va(_)},h),h.g={}}Pi.prototype.N=function(){Pi.Z.N.call(this),rl(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Or=u.JSON.stringify,$d=u.JSON.parse,Zc=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function eu(){}function tu(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){D.call(this,"d")}x(Ft,D);function Vn(){D.call(this,"c")}x(Vn,D);var vt={},nu=null;function Ua(){return nu=nu||new wt}vt.Ia="serverreachability";function su(h){D.call(this,vt.Ia,h)}x(su,D);function ys(h){const _=Ua();Ut(_,new su(_))}vt.STAT_EVENT="statevent";function zi(h,_){D.call(this,vt.STAT_EVENT,h),this.stat=_}x(zi,D);function At(h){const _=Ua();Ut(_,new zi(_,h))}vt.Ja="timingevent";function _s(h,_){D.call(this,vt.Ja,h),this.size=_}x(_s,D);function vs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function Xd(h,_,E,S,F,$){h.info(function(){if(h.g)if($){var oe="",Se=$.split("&");for(let He=0;He<Se.length;He++){var bt=Se[He].split("=");if(bt.length>1){const ut=bt[0];bt=bt[1];const zn=ut.split("_");oe=zn.length>=2&&zn[1]=="type"?oe+(ut+"="+bt+"&"):oe+(ut+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+E+`
`+oe})}function ru(h,_,E,S,F,$,oe){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+E+`
`+$+" "+oe})}function bs(h,_,E,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Wd(h,E)+(S?" "+S:"")})}function Bi(h,_){h.info(function(){return"TIMEOUT: "+_})}es.prototype.info=function(){};function Wd(h,_){if(!h.g)return _;if(!_)return null;try{const $=JSON.parse(_);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<S.length;oe++)S[oe]=""}}}}return Or($)}catch{return _}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},al;function Hi(){}x(Hi,eu),Hi.prototype.g=function(){return new XMLHttpRequest},al=new Hi;function Xs(h){return encodeURIComponent(String(h))}function iu(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ts(h,_,E,S){this.j=h,this.i=_,this.l=E,this.S=S||1,this.V=new Pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var St={},zt={};function Es(h,_,E){h.M=1,h.A=Fi(Nt(_)),h.u=E,h.R=!0,La(h,null)}function La(h,_){h.F=Date.now(),xs(h),h.B=Nt(h.A);var E=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),qa(E.i,"t",S),h.C=0,E=h.j.L,h.h=new ns,h.g=bu(h.j,E?_:null,!h.u),h.P>0&&(h.O=new an(y(h.Y,h,h.g),h.P)),_=h.V,E=h.g,S=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(sl[0]=F.toString()),F=sl);for(let $=0;$<F.length;$++){const oe=ct(E,F[$],S||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),ys(),Xd(h.i,h.v,h.B,h.l,h.S,h.u)}ts.prototype.ba=function(h){h=h.target;const _=this.O;_&&is(h)==3?_.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const Se=is(this.g),bt=this.g.ya(),He=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Se!=4||bt==7||(bt==8||He<=0?ys(3):ys(2)),Ts(this);var _=this.g.ca();this.X=_;var E=Jd(this);if(this.o=_==200,ru(this.i,this.v,this.B,this.l,this.S,Se,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(S)){var $=S;break t}}$=null}if(h=$)bs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ws(this,h);else{this.o=!1,this.m=3,At(12),xn(this),Un(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<E.length;)if(ut=ou(this,E),ut==zt){Se==4&&(this.m=4,At(14),h=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==St){this.m=4,At(15),bs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else bs(this.i,this.l,ut,null),ws(this,ut);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||E.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)bs(this.i,this.l,E,"[Invalid Chunked Response]"),xn(this),Un(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),El(oe),oe.P=!0,At(11))}}else bs(this.i,this.l,E,null),ws(this,E);Se==4&&xn(this),this.o&&!this.K&&(Se==4?gu(this.j,this):(this.o=!1,xs(this)))}else Js(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),xn(this),Un(this)}}}catch{}};function Jd(h){if(!au(h))return h.g.la();const _=Gt(h.g);if(_==="")return"";let E="";const S=_.length,F=is(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),Un(h),"";h.h.i=new u.TextDecoder}for(let $=0;$<S;$++)h.h.h=!0,E+=h.h.i.decode(_[$],{stream:!(F&&$==S-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function au(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ou(h,_){var E=h.C,S=_.indexOf(`
`,E);return S==-1?zt:(E=Number(_.substring(E,S)),isNaN(E)?St:(S+=1,S+E>_.length?zt:(_=_.slice(S,S+E),h.C=S+E,_)))}ts.prototype.cancel=function(){this.K=!0,xn(this)};function xs(h){h.T=Date.now()+h.H,Pa(h,h.H)}function Pa(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vs(y(h.aa,h),_)}function Ts(h){h.D&&(u.clearTimeout(h.D),h.D=null)}ts.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Bi(this.i,this.B),this.M!=2&&(ys(),At(17)),xn(this),this.m=2,Un(this)):Pa(this,this.T-h)};function Un(h){h.j.I==0||h.K||gu(h.j,h)}function xn(h){Ts(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,rl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function ws(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||Ss(E.h,h))){if(!h.L&&Ss(E.h,h)&&E.I==3){try{var S=E.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Qa(E),Br(E);else break e;Wi(E),At(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=vs(y(E.Va,E),6e3));As(E.h)<=1&&E.ta&&(E.ta=void 0)}else js(E,11)}else if((h.L||E.g==h)&&Qa(E),!j(_))for(F=E.Ba.g.parse(_),_=0;_<F.length;_++){let He=F[_];const ut=He[0];if(!(ut<=E.K))if(E.K=ut,He=He[1],E.I==2)if(He[0]=="c"){E.M=He[1],E.ba=He[2];const zn=He[3];zn!=null&&(E.ka=zn,E.j.info("VER="+E.ka));const Os=He[4];Os!=null&&(E.za=Os,E.j.info("SVER="+E.za));const as=He[5];as!=null&&typeof as=="number"&&as>0&&(S=1.5*as,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const os=h.g;if(os){const Ji=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var $=S.h;$.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(cl($,$.h),$.h=null))}if(S.G){const Ya=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ya&&(S.wa=Ya,$e(S.J,S.G,Ya))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var oe=h;if(S.na=vu(S,S.L?S.ba:null,S.W),oe.L){ul(S.h,oe);var Se=oe,bt=S.O;bt&&(Se.H=bt),Se.D&&(Ts(Se),xs(Se)),S.g=oe}else mu(S);E.i.length>0&&Ds(E)}else He[0]!="stop"&&He[0]!="close"||js(E,7);else E.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?js(E,7):vl(E):He[0]!="noop"&&E.l&&E.l.qa(He),E.A=0)}}ys(4)}catch{}}var Rt=class{constructor(h,_){this.g=h,this.map=_}};function ol(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function As(h){return h.h?1:h.g?h.g.size:0}function Ss(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function cl(h,_){h.g?h.g.add(_):h.h=_}function ul(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ol.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function hl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return C(h.i)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function za(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const S=h[E].indexOf("=");let F,$=null;S>=0?(F=h[E].substring(0,S),$=h[E].substring(S+1)):F=h[E],_(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Tn?(this.l=h.l,Bt(this,h.j),this.o=h.o,this.g=h.g,kr(this,h.u),this.h=h.h,dl(this,du(h.i)),this.m=h.m):h&&(_=String(h).match(lu))?(this.l=!1,Bt(this,_[1]||"",!0),this.o=Rs(_[2]||""),this.g=Rs(_[3]||"",!0),kr(this,_[4]),this.h=Rs(_[5]||"",!0),dl(this,_[6]||"",!0),this.m=Rs(_[7]||"")):(this.l=!1,this.i=new Vr(null,this.l))}Tn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Gi(_,Ba,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Gi(_,Ba,!0),"@"),h.push(Xs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gi(E,E.charAt(0)=="/"?fl:cu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gi(E,uu)),h.join("")},Tn.prototype.resolve=function(h){const _=Nt(this);let E=!!h.j;E?Bt(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var S=h.h;if(E)kr(_,h.u);else if(E=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=_.h.lastIndexOf("/");F!=-1&&(S=_.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let oe=0;oe<F.length;){const Se=F[oe++];Se=="."?S&&oe==F.length&&$.push(""):Se==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),S&&oe==F.length&&$.push("")):($.push(Se),S=!0)}S=$.join("/")}else S=F}return E?_.h=S:E=h.i.toString()!=="",E?dl(_,du(h.i)):E=!!h.m,E&&(_.m=h.m),_};function Nt(h){return new Tn(h)}function Bt(h,_,E){h.j=E?Rs(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function kr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function dl(h,_,E){_ instanceof Vr?(h.i=_,Ha(h.i,h.l)):(E||(_=Gi(_,Mr)),h.i=new Vr(_,h.l))}function $e(h,_,E){h.i.set(_,E)}function Fi(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Rs(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gi(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,hn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ba=/[#\/\?@]/g,cu=/[#\?:]/g,fl=/[#\?]/g,Mr=/[#\?@]/g,uu=/#/g;function Vr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&za(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}s=Vr.prototype,s.add=function(h,_){dn(this),this.i=null,h=Ur(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function hu(h,_){dn(h),_=Ur(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ml(h,_){return dn(h),_=Ur(h,_),h.g.has(_)}s.forEach=function(h,_){dn(this),this.g.forEach(function(E,S){E.forEach(function(F){h.call(_,F,S,this)},this)},this)};function pl(h,_){dn(h);let E=[];if(typeof _=="string")ml(h,_)&&(E=E.concat(h.g.get(Ur(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}s.set=function(h,_){return dn(this),this.i=null,h=Ur(this,h),ml(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=pl(this,h),h.length>0?String(h[0]):_):_};function qa(h,_,E){hu(h,_),E.length>0&&(h.i=null,h.g.set(Ur(h,_),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var E=_[S];const F=Xs(E);E=pl(this,E);for(let $=0;$<E.length;$++){let oe=F;E[$]!==""&&(oe+="="+Xs(E[$])),h.push(oe)}}return this.i=h.join("&")};function du(h){const _=new Vr;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ur(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ha(h,_){_&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(E,S){const F=S.toLowerCase();S!=F&&(hu(this,S),qa(this,F,E))},h)),h.j=_}function ss(h,_){const E=new es;if(u.Image){const S=new Image;S.onload=b(Ln,E,"TestLoadImage: loaded",!0,_,S),S.onerror=b(Ln,E,"TestLoadImage: error",!1,_,S),S.onabort=b(Ln,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=b(Ln,E,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function gl(h,_){const E=new es,S=new AbortController,F=setTimeout(()=>{S.abort(),Ln(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then($=>{clearTimeout(F),$.ok?Ln(E,"TestPingServer: ok",!0,_):Ln(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Ln(E,"TestPingServer: error",!1,_)})}function Ln(h,_,E,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(E)}catch{}}function Lr(){this.g=new Zc}function Ns(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Ns,eu),Ns.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(h,_){wt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ki,wt),s=Ki.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,rs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Pr(this):rs(this),this.readyState==3&&Fa(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Pr(this))},s.Na=function(h){this.g&&(this.response=h,Pr(this))},s.ga=function(){this.g&&Pr(this)};function Pr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,rs(h)}s.setRequestHeader=function(h,_){this.A.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function rs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pn(h){let _="";return ze(h,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function Qi(h,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Pn(E),typeof h=="string"?E!=null&&Xs(E):$e(h,_,E))}function Je(h){wt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Je,wt);var Cs=/^https?$/i,yl=["POST","PUT"];s=Je.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():al.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch($){Yi(this,$);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)E.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())E.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),F=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(yl,_,void 0)>=0)||S||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of E)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Yi(this,$)}};function Yi(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,_l(h),Ws(h)}function _l(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Ws(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ws(this,!0)),Je.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?$i(this):this.Xa())},s.Xa=function(){$i(this)};function $i(h){if(h.h&&typeof c<"u"){if(h.v&&is(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),is(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=$===0){let oe=String(h.D).match(lu)[1]||null;!oe&&u.self&&u.self.location&&(oe=u.self.location.protocol.slice(0,-1)),S=!Cs.test(oe?oe.toLowerCase():"")}E=S}if(E)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var F=is(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",_l(h)}}finally{Ws(h)}}}}function Ws(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||Ut(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function is(h){return h.g?h.g.readyState:0}s.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),$d(_)}};function Gt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(h){const _={};h=(h.g&&is(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(j(h[S]))continue;var E=iu(h[S]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=_[F]||[];_[F]=$,$.push(E)}Ye(_,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function zr(h){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Is("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Is("baseRetryDelayMs",5e3,h),this.Za=Is("retryDelaySeedMs",1e4,h),this.Ta=Is("forwardChannelMaxRetries",2,h),this.va=Is("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(h&&h.concurrentRequestLimit),this.Ba=new Lr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=zr.prototype,s.ka=8,s.I=1,s.connect=function(h,_,E,S){At(0),this.W=h,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=vu(this,null,this.W),Ds(this)};function vl(h){if(Ga(h),h.I==3){var _=h.V++,E=Nt(h.J);if($e(E,"SID",h.M),$e(E,"RID",_),$e(E,"TYPE","terminate"),Xi(h,E),_=new ts(h,h.j,_),_.M=2,_.A=Fi(Nt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.A,E=!0),E||(_.g=bu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),xs(_)}_u(h)}function Br(h){h.g&&(El(h),h.g.cancel(),h.g=null)}function Ga(h){Br(h),h.v&&(u.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Ds(h){if(!ll(h.h)&&!h.m){h.m=!0;var _=h.Ea;ie||A(),ae||(ie(),ae=!0),R.add(_,h),h.D=0}}function Ka(h,_){return As(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vs(y(h.Ea,h,_),yu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new ts(this,this.j,h);let $=this.o;if(this.U&&($?($=z($),ce($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=fu(this,F,_),E=Nt(this.J),$e(E,"RID",h),$e(E,"CVER",22),this.G&&$e(E,"X-HTTP-Session-Id",this.G),Xi(this,E),$&&(this.R?_="headers="+Xs(Pn($))+"&"+_:this.u&&Qi(E,this.u,$)),cl(this.h,F),this.Ra&&$e(E,"TYPE","init"),this.S?($e(E,"$req",_),$e(E,"SID","null"),F.U=!0,Es(F,E,null)):Es(F,E,_),this.I=2}}else this.I==3&&(h?bl(this,h):this.i.length==0||ll(this.h)||bl(this))};function bl(h,_){var E;_?E=_.l:E=h.V++;const S=Nt(h.J);$e(S,"SID",h.M),$e(S,"RID",E),$e(S,"AID",h.K),Xi(h,S),h.u&&h.o&&Qi(S,h.u,h.o),E=new ts(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=fu(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),cl(h.h,E),Es(E,S,_)}function Xi(h,_){h.H&&ze(h.H,function(E,S){$e(_,S,E)}),h.l&&ze({},function(E,S){$e(_,S,E)})}function fu(h,_,E){E=Math.min(h.i.length,E);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var F=h.i;let Se=-1;for(;;){const bt=["count="+E];Se==-1?E>0?(Se=F[0].g,bt.push("ofs="+Se)):Se=0:bt.push("ofs="+Se);let He=!0;for(let ut=0;ut<E;ut++){var $=F[ut].g;const zn=F[ut].map;if($-=Se,$<0)Se=Math.max(0,F[ut].g-100),He=!1;else try{$="req"+$+"_"||"";try{var oe=zn instanceof Map?zn:Object.entries(zn);for(const[Os,as]of oe){let os=as;p(as)&&(os=Or(as)),bt.push($+Os+"="+encodeURIComponent(os))}}catch(Os){throw bt.push($+"type="+encodeURIComponent("_badmap")),Os}}catch{S&&S(zn)}}if(He){oe=bt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),_.G=h,oe}function mu(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ie||A(),ae||(ie(),ae=!0),R.add(_,h),h.A=0}}function Wi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vs(y(h.Da,h),yu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vs(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Br(this),pu(this))};function El(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function pu(h){h.g=new ts(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Nt(h.na);$e(_,"RID","rpc"),$e(_,"SID",h.M),$e(_,"AID",h.K),$e(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(_,"TO",h.ia),$e(_,"TYPE","xmlhttp"),Xi(h,_),h.u&&h.o&&Qi(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Fi(Nt(_)),E.u=null,E.R=!0,La(E,h)}s.Va=function(){this.C!=null&&(this.C=null,Br(this),Wi(this),At(19))};function Qa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function gu(h,_){var E=null;if(h.g==_){Qa(h),El(h),h.g=null;var S=2}else if(Ss(h.h,_))E=_.G,ul(h.h,_),S=1;else return;if(h.I!=0){if(_.o)if(S==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var F=h.D;S=Ua(),Ut(S,new _s(S,E)),Ds(h)}else mu(h);else if(F=_.m,F==3||F==0&&_.X>0||!(S==1&&Ka(h,_)||S==2&&Wi(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),F){case 1:js(h,5);break;case 4:js(h,10);break;case 3:js(h,6);break;default:js(h,2)}}}function yu(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function js(h,_){if(h.j.info("Error code "+_),_==2){var E=y(h.bb,h),S=h.Ua;const F=!S;S=new Tn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(S,"https"),Fi(S),F?ss(S.toString(),E):gl(S.toString(),E)}else At(2);h.I=0,h.l&&h.l.pa(_),_u(h),Ga(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function _u(h){if(h.I=0,h.ja=[],h.l){const _=hl(h.h);(_.length!=0||h.i.length!=0)&&(N(h.ja,_),N(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function vu(h,_,E){var S=E instanceof Tn?Nt(E):new Tn(E);if(S.g!="")_&&(S.g=_+"."+S.g),kr(S,S.u);else{var F=u.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const $=new Tn(null);S&&Bt($,S),_&&($.g=_),F&&kr($,F),E&&($.h=E),S=$}return E=h.G,_=h.wa,E&&_&&$e(S,E,_),$e(S,"VER",h.ka),Xi(h,S),S}function bu(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Je(new Ns({ab:E})):new Je(h.ma),_.Fa(h.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}s=Eu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qr(){}qr.prototype.g=function(h,_){return new on(h,_)};function on(h,_){wt.call(this),this.g=new zr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!j(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zs(this)}x(on,wt),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){vl(this.g)},on.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Or(h),h=E);_.i.push(new Rt(_.Ya++,h)),_.I==3&&Ds(_)},on.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,on.Z.N.call(this)};function xu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(xu,Ft);function Tu(){Vn.call(this),this.status=1}x(Tu,Vn);function Zs(h){this.g=h}x(Zs,Eu),Zs.prototype.ra=function(){Ut(this.g,"a")},Zs.prototype.qa=function(h){Ut(this.g,new xu(h))},Zs.prototype.pa=function(h){Ut(this.g,new Tu)},Zs.prototype.oa=function(){Ut(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,rT=function(){return new qr},sT=function(){return Ua()},nT=vt,Cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Fh=qi,il.COMPLETE="complete",tT=il,tu.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,dc=tu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,eT=Je}).apply(typeof Ch<"u"?Ch:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",C0="4.9.3";class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let Yo="12.7.0";const Ta=new ig("@firebase/firestore");function Ro(){return Ta.logLevel}function he(s,...e){if(Ta.logLevel<=ke.DEBUG){const n=e.map(gg);Ta.debug(`Firestore (${Yo}): ${s}`,...n)}}function Rr(s,...e){if(Ta.logLevel<=ke.ERROR){const n=e.map(gg);Ta.error(`Firestore (${Yo}): ${s}`,...n)}}function Vo(s,...e){if(Ta.logLevel<=ke.WARN){const n=e.map(gg);Ta.warn(`Firestore (${Yo}): ${s}`,...n)}}function gg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ee(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,iT(s,i,n)}function iT(s,e,n){let i=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Rr(i),new Error(i)}function Ke(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||iT(e,o,i)}function Ae(s,e){return s}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class x2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class T2{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Er,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Er)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new aT(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class w2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new w2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class I0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function R2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=R2(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Me(s,e){return s<e?-1:s>e?1:0}function Ip(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return cp(o)===cp(c)?Me(o,c):cp(o)?1:-1}return Me(s.length,e.length)}const N2=55296,C2=57343;function cp(s){const e=s.charCodeAt(0);return e>=N2&&e<=C2}function Uo(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}const D0="__name__";class Ls{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ee(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Ls.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Me(e.length,n.length)}static compareSegments(e,n){const i=Ls.isNumericId(e),o=Ls.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Ls.extractNumericId(e).compare(Ls.extractNumericId(n)):Ip(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class st extends Ls{construct(e,n,i){return new st(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const I2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ls{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return I2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D0}static keyField(){return new Wt([D0])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ue(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(u=!u,o++):p!=="."||u?(i+=p,o++):(c(),o++)}if(c(),u)throw new ue(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(st.fromString(e))}static fromName(e){return new ge(st.fromString(e).popFirst(5))}static empty(){return new ge(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new st(e.slice()))}}function oT(s,e,n){if(!n)throw new ue(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function D2(s,e,n,i){if(e===!0&&i===!0)throw new ue(te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function j0(s){if(!ge.isDocumentKey(s))throw new ue(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function O0(s){if(ge.isDocumentKey(s))throw new ue(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function lT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Sd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee(12329,{type:typeof s})}function En(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ue(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sd(s);throw new ue(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Mt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Kc(s,e){if(!lT(s))throw new ue(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const u=s[i];if(o&&typeof u!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ue(te.INVALID_ARGUMENT,n);return!0}const k0=-62135596800,M0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*M0);return new at(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k0)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M0}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Mt("string",at._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new at(0,0))}static max(){return new Te(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nc=-1;function j2(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new at(n+1,0):new at(n,i));return new Si(o,ge.empty(),e)}function O2(s){return new Si(s.readTime,s.key,Nc)}class Si{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Si(Te.min(),ge.empty(),Nc)}static max(){return new Si(Te.max(),ge.empty(),Nc)}}function k2(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(s.documentKey,e.documentKey),n!==0?n:Me(s.largestBatchId,e.largestBatchId))}const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $o(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==M2)throw s;he("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,i)=>{n(e)}))}static reject(e){return new re(((n,i)=>{i(e)}))}static waitFor(e){return new re(((n,i)=>{let o=0,c=0,u=!1;e.forEach((p=>{++o,p.next((()=>{++c,u&&c===o&&n()}),(g=>i(g)))})),u=!0,c===o&&n()}))}static or(e){let n=re.resolve(!1);for(const i of e)n=n.next((o=>o?re.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new re(((i,o)=>{const c=e.length,u=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((b=>{u[y]=b,++p,p===c&&i(u)}),(b=>o(b)))}}))}static doWhile(e,n){return new re(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function U2(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xo(s){return s.name==="IndexedDbTransactionError"}class Rd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rd.ce=-1;const _g=-1;function Nd(s){return s==null}function ad(s){return s===0&&1/s==-1/0}function L2(s){return typeof s=="number"&&Number.isInteger(s)&&!ad(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const cT="";function P2(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=V0(e)),e=z2(s.get(n),e);return V0(e)}function z2(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case cT:n+="";break;default:n+=c}}return n}function V0(s){return s+cT+""}function U0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ki(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function uT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ft{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L0(this.data.getIterator())}getIteratorFrom(e){return new L0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class L0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class On{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Pt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hT("Invalid base64 string: "+c):c}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const B2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=B2.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(s.seconds),nanos:Tt(s.nanos)}}function Tt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ni(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}const dT="server_timestamp",fT="__type__",mT="__previous_value__",pT="__local_write_time__";function vg(s){return(s?.mapValue?.fields||{})[fT]?.stringValue===dT}function Cd(s){const e=s.mapValue.fields[mT];return vg(e)?Cd(e):e}function Cc(s){const e=Ri(s.mapValue.fields[pT].timestampValue);return new at(e.seconds,e.nanos)}class q2{constructor(e,n,i,o,c,u,p,g,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const od="(default)";class Ic{constructor(e,n){this.projectId=e,this.database=n||od}static empty(){return new Ic("","")}get isDefaultDatabase(){return this.database===od}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}const gT="__type__",H2="__max__",Dh={mapValue:{}},yT="__vector__",ld="value";function Ci(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?vg(s)?4:G2(s)?9007199254740991:F2(s)?10:11:Ee(28295,{value:s})}function Qs(s,e){if(s===e)return!0;const n=Ci(s);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Cc(s).isEqual(Cc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Ri(o.timestampValue),p=Ri(c.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Ni(o.bytesValue).isEqual(Ni(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Tt(o.geoPointValue.latitude)===Tt(c.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Tt(o.integerValue)===Tt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Tt(o.doubleValue),p=Tt(c.doubleValue);return u===p?ad(u)===ad(p):isNaN(u)&&isNaN(p)}return!1})(s,e);case 9:return Uo(s.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},p=c.mapValue.fields||{};if(U0(u)!==U0(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Qs(u[g],p[g])))return!1;return!0})(s,e);default:return Ee(52216,{left:s})}}function Dc(s,e){return(s.values||[]).find((n=>Qs(n,e)))!==void 0}function Lo(s,e){if(s===e)return 0;const n=Ci(s),i=Ci(e);if(n!==i)return Me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const p=Tt(c.integerValue||c.doubleValue),g=Tt(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return P0(s.timestampValue,e.timestampValue);case 4:return P0(Cc(s),Cc(e));case 5:return Ip(s.stringValue,e.stringValue);case 6:return(function(c,u){const p=Ni(c),g=Ni(u);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const p=c.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Me(p[y],g[y]);if(b!==0)return b}return Me(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const p=Me(Tt(c.latitude),Tt(u.latitude));return p!==0?p:Me(Tt(c.longitude),Tt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return z0(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const p=c.fields||{},g=u.fields||{},y=p[ld]?.arrayValue,b=g[ld]?.arrayValue,x=Me(y?.values?.length||0,b?.values?.length||0);return x!==0?x:z0(y,b)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Dh.mapValue&&u===Dh.mapValue)return 0;if(c===Dh.mapValue)return 1;if(u===Dh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let x=0;x<g.length&&x<b.length;++x){const w=Ip(g[x],b[x]);if(w!==0)return w;const C=Lo(p[g[x]],y[b[x]]);if(C!==0)return C}return Me(g.length,b.length)})(s.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function P0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const n=Ri(s),i=Ri(e),o=Me(n.seconds,i.seconds);return o!==0?o:Me(n.nanos,i.nanos)}function z0(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Lo(n[o],i[o]);if(c)return c}return Me(n.length,i.length)}function Po(s){return Dp(s)}function Dp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Ri(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ni(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ge.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=Dp(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of i)c?c=!1:o+=",",o+=`${u}:${Dp(n.fields[u])}`;return o+"}"})(s.mapValue):Ee(61005,{value:s})}function Gh(s){switch(Ci(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cd(s);return e?16+Gh(e):16;case 5:return 2*s.stringValue.length;case 6:return Ni(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Gh(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return ki(i.fields,((c,u)=>{o+=c.length+Gh(u)})),o})(s.mapValue);default:throw Ee(13486,{value:s})}}function B0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function jp(s){return!!s&&"integerValue"in s}function bg(s){return!!s&&"arrayValue"in s}function q0(s){return!!s&&"nullValue"in s}function H0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kh(s){return!!s&&"mapValue"in s}function F2(s){return(s?.mapValue?.fields||{})[gT]?.stringValue===yT}function _c(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ki(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=_c(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_c(s.arrayValue.values[n]);return e}return{...s}}function G2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===H2}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(n)}setAll(e){let n=Wt.emptyPath(),i={},o=[];e.forEach(((u,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}u?i[p.lastSegment()]=_c(u):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){ki(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new bn(_c(this.value))}}function _T(s){const e=[];return ki(s.fields,((n,i)=>{const o=new Wt([n]);if(Kh(i)){const c=_T(i.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new On(e)}class sn{constructor(e,n,i,o,c,u,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=u,this.documentState=p}static newInvalidDocument(e){return new sn(e,0,Te.min(),Te.min(),Te.min(),bn.empty(),0)}static newFoundDocument(e,n,i,o){return new sn(e,1,n,Te.min(),i,o,0)}static newNoDocument(e,n){return new sn(e,2,n,Te.min(),Te.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,Te.min(),Te.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cd{constructor(e,n){this.position=e,this.inclusive=n}}function F0(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],u=s.position[o];if(c.field.isKeyField()?i=ge.comparator(ge.fromName(u.referenceValue),n.key):i=Lo(u,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function G0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Qs(s.position[n],e.position[n]))return!1;return!0}class jc{constructor(e,n="asc"){this.field=e,this.dir=n}}function K2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class vT{}class kt extends vT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Y2(e,n,i):n==="array-contains"?new W2(e,i):n==="in"?new J2(e,i):n==="not-in"?new Z2(e,i):n==="array-contains-any"?new eD(e,i):new kt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new $2(e,i):new X2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lo(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends vT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ps(e,n)}matches(e){return bT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bT(s){return s.op==="and"}function ET(s){return Q2(s)&&bT(s)}function Q2(s){for(const e of s.filters)if(e instanceof ps)return!1;return!0}function Op(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+Po(s.value);if(ET(s))return s.filters.map((e=>Op(e))).join(",");{const e=s.filters.map((n=>Op(n))).join(",");return`${s.op}(${e})`}}function xT(s,e){return s instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Qs(i.value,o.value)})(s,e):s instanceof ps?(function(i,o){return o instanceof ps&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,u,p)=>c&&xT(u,o.filters[p])),!0):!1})(s,e):void Ee(19439)}function TT(s){return s instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`})(s):s instanceof ps?(function(n){return n.op.toString()+" {"+n.getFilters().map(TT).join(" ,")+"}"})(s):"Filter"}class Y2 extends kt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class $2 extends kt{constructor(e,n){super(e,"in",n),this.keys=wT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class X2 extends kt{constructor(e,n){super(e,"not-in",n),this.keys=wT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function wT(s,e){return(e.arrayValue?.values||[]).map((n=>ge.fromName(n.referenceValue)))}class W2 extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bg(n)&&Dc(n.arrayValue,this.value)}}class J2 extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class Z2 extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class eD extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Dc(this.value.arrayValue,i)))}}class tD{constructor(e,n=null,i=[],o=[],c=null,u=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=u,this.endAt=p,this.Te=null}}function K0(s,e=null,n=[],i=[],o=null,c=null,u=null){return new tD(s,e,n,i,o,c,u)}function Eg(s){const e=Ae(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Op(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Po(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Po(i))).join(",")),e.Te=n}return e.Te}function xg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!K2(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!xT(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!G0(s.startAt,e.startAt)&&G0(s.endAt,e.endAt)}function kp(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Wo{constructor(e,n=null,i=[],o=[],c=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nD(s,e,n,i,o,c,u,p){return new Wo(s,e,n,i,o,c,u,p)}function Id(s){return new Wo(s)}function Q0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function AT(s){return s.collectionGroup!==null}function vc(s){const e=Ae(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Pt(Wt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new jc(c,i))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new jc(Wt.keyField(),i))}return e.Ie}function Hs(s){const e=Ae(s);return e.Ee||(e.Ee=sD(e,vc(s))),e.Ee}function sD(s,e){if(s.limitType==="F")return K0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new jc(o.field,c)}));const n=s.endAt?new cd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new cd(s.startAt.position,s.startAt.inclusive):null;return K0(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Mp(s,e){const n=s.filters.concat([e]);return new Wo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Vp(s,e,n){return new Wo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Dd(s,e){return xg(Hs(s),Hs(e))&&s.limitType===e.limitType}function ST(s){return`${Eg(Hs(s))}|lt:${s.limitType}`}function No(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>TT(o))).join(", ")}]`),Nd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Po(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Po(o))).join(",")),`Target(${i})`})(Hs(s))}; limitType=${s.limitType})`}function jd(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ge.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of vc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(u,p,g){const y=F0(u,p,g);return u.inclusive?y<=0:y<0})(i.startAt,vc(i),o)||i.endAt&&!(function(u,p,g){const y=F0(u,p,g);return u.inclusive?y>=0:y>0})(i.endAt,vc(i),o))})(s,e)}function rD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function RT(s){return(e,n)=>{let i=!1;for(const o of vc(s)){const c=iD(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function iD(s,e,n){const i=s.field.isKeyField()?ge.comparator(e.key,n.key):(function(c,u,p){const g=u.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Lo(g,y):Ee(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:s.dir})}}class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}const aD=new ft(ge.comparator);function Nr(){return aD}const NT=new ft(ge.comparator);function fc(...s){let e=NT;for(const n of s)e=e.insert(n.key,n);return e}function CT(s){let e=NT;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ga(){return bc()}function IT(){return bc()}function bc(){return new Na((s=>s.toString()),((s,e)=>s.isEqual(e)))}const oD=new ft(ge.comparator),lD=new Pt(ge.comparator);function Ve(...s){let e=lD;for(const n of s)e=e.add(n);return e}const cD=new Pt(Me);function uD(){return cD}function Tg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function DT(s){return{integerValue:""+s}}function jT(s,e){return L2(e)?DT(e):Tg(s,e)}class Od{constructor(){this._=void 0}}function hD(s,e,n){return s instanceof Oc?(function(o,c){const u={fields:{[fT]:{stringValue:dT},[pT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&vg(c)&&(c=Cd(c)),c&&(u.fields[mT]=c),{mapValue:u}})(n,e):s instanceof zo?kT(s,e):s instanceof Bo?MT(s,e):(function(o,c){const u=OT(o,c),p=Y0(u)+Y0(o.Ae);return jp(u)&&jp(o.Ae)?DT(p):Tg(o.serializer,p)})(s,e)}function dD(s,e,n){return s instanceof zo?kT(s,e):s instanceof Bo?MT(s,e):n}function OT(s,e){return s instanceof kc?(function(i){return jp(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Oc extends Od{}class zo extends Od{constructor(e){super(),this.elements=e}}function kT(s,e){const n=VT(e);for(const i of s.elements)n.some((o=>Qs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Bo extends Od{constructor(e){super(),this.elements=e}}function MT(s,e){let n=VT(e);for(const i of s.elements)n=n.filter((o=>!Qs(o,i)));return{arrayValue:{values:n}}}class kc extends Od{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Y0(s){return Tt(s.integerValue||s.doubleValue)}function VT(s){return bg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class kd{constructor(e,n){this.field=e,this.transform=n}}function fD(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof zo&&o instanceof zo||i instanceof Bo&&o instanceof Bo?Uo(i.elements,o.elements,Qs):i instanceof kc&&o instanceof kc?Qs(i.Ae,o.Ae):i instanceof Oc&&o instanceof Oc})(s.transform,e.transform)}class mD{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Md{}function UT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new wg(s.key,Xn.none()):new Qc(s.key,s.data,Xn.none());{const n=s.data,i=bn.empty();let o=new Pt(Wt.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?i.delete(c):i.set(c,u),o=o.add(c)}return new Mi(s.key,i,new On(o.toArray()),Xn.none())}}function pD(s,e,n){s instanceof Qc?(function(o,c,u){const p=o.value.clone(),g=X0(o.fieldTransforms,c,u.transformResults);p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Mi?(function(o,c,u){if(!Qh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const p=X0(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(LT(o)),g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ec(s,e,n,i){return s instanceof Qc?(function(c,u,p,g){if(!Qh(c.precondition,u))return p;const y=c.value.clone(),b=W0(c.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Mi?(function(c,u,p,g){if(!Qh(c.precondition,u))return p;const y=W0(c.fieldTransforms,g,u),b=u.data;return b.setAll(LT(c)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(s,e,n,i):(function(c,u,p){return Qh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(s,e,n)}function gD(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=OT(i.transform,o||null);c!=null&&(n===null&&(n=bn.empty()),n.set(i.field,c))}return n||null}function $0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Uo(i,o,((c,u)=>fD(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Qc extends Md{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mi extends Md{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function LT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function X0(s,e,n){const i=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],u=c.transform,p=e.data.field(c.field);i.set(c.field,dD(u,p,n[o]))}return i}function W0(s,e,n){const i=new Map;for(const o of s){const c=o.transform,u=n.data.field(o.field);i.set(o.field,hD(c,u,e))}return i}class wg extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yD extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _D{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pD(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ec(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ec(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=IT();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let p=this.applyToLocalView(u,c.mutatedFields);p=n.has(o.key)?null:p;const g=UT(u,p);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((n,i)=>$0(n,i)))&&Uo(this.baseMutations,e.baseMutations,((n,i)=>$0(n,i)))}}class Ag{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return oD})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,i[u].version);return new Ag(e,n,i,o)}}class vD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bD{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ot,Pe;function ED(s){switch(s){case te.OK:return Ee(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee(15467,{code:s})}}function PT(s){if(s===void 0)return Rr("GRPC error has no .code"),te.UNKNOWN;switch(s){case Ot.OK:return te.OK;case Ot.CANCELLED:return te.CANCELLED;case Ot.UNKNOWN:return te.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return te.INTERNAL;case Ot.UNAVAILABLE:return te.UNAVAILABLE;case Ot.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ot.NOT_FOUND:return te.NOT_FOUND;case Ot.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ot.ABORTED:return te.ABORTED;case Ot.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ot.DATA_LOSS:return te.DATA_LOSS;default:return Ee(39323,{code:s})}}(Pe=Ot||(Ot={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";function xD(){return new TextEncoder}const TD=new Ei([4294967295,4294967295],0);function J0(s){const e=xD().encode(s),n=new Zx;return n.update(e),new Uint8Array(n.digest())}function Z0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ei([n,i],0),new Ei([o,c],0)]}class Sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new mc(`Invalid padding: ${n}`);if(i<0)throw new mc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new mc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ei.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Ei.fromNumber(i)));return o.compare(TD)===1&&(o=new Ei([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J0(e),[i,o]=Z0(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);if(!this.we(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Sg(c,o,n);return i.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const n=J0(e),[i,o]=Z0(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vd{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Yc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Vd(Te.min(),o,new ft(Me),Nr(),Ve())}}class Yc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Yc(i,n,Ve(),Ve(),Ve())}}class Yh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class zT{constructor(e,n){this.targetId=e,this.Ce=n}}class BT{constructor(e,n,i=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class eE{constructor(){this.ve=0,this.Fe=tE(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),i=Ve();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ee(38017,{changeType:c})}})),new Yc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=tE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=jh(),this.He=jh(),this.Ye=new ft(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(kp(c))if(i===0){const u=new ge(c.path);this.et(n,u,sn.newNoDocument(u,Te.min()))}else Ke(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let u,p;try{u=Ni(i).toUint8Array()}catch(g){if(g instanceof hT)return Vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Sg(u,o,c)}catch(g){return Vo(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const p=this.ot(u);if(p){if(c.current&&kp(p.target)){const g=new ge(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,sn.newNoDocument(g,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let i=Ve();this.He.forEach(((c,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Vd(e,n,this.Ye,this.je,i);return this.je=Nr(),this.Je=jh(),this.He=jh(),this.Ye=new ft(Me),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jh(){return new ft(ge.comparator)}function tE(){return new ft(ge.comparator)}const AD={asc:"ASCENDING",desc:"DESCENDING"},SD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RD={and:"AND",or:"OR"};class ND{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Up(s,e){return s.useProto3Json||Nd(e)?e:{value:e}}function ud(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function CD(s,e){return ud(s,e.toTimestamp())}function Fs(s){return Ke(!!s,49232),Te.fromTimestamp((function(n){const i=Ri(n);return new at(i.seconds,i.nanos)})(s))}function Rg(s,e){return Lp(s,e).canonicalString()}function Lp(s,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function HT(s){const e=st.fromString(s);return Ke(YT(e),10190,{key:e.toString()}),e}function Pp(s,e){return Rg(s.databaseId,e.path)}function up(s,e){const n=HT(e);if(n.get(1)!==s.databaseId.projectId)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ge(GT(n))}function FT(s,e){return Rg(s.databaseId,e)}function ID(s){const e=HT(s);return e.length===4?st.emptyPath():GT(e)}function zp(s){return new st(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function GT(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nE(s,e,n){return{name:Pp(s,e),fields:n.value.mapValue.fields}}function DD(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Ke(b===void 0||typeof b=="string",58123),Jt.fromBase64String(b||"")):(Ke(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Jt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?te.UNKNOWN:PT(y.code);return new ue(b,y.message||"")})(u);n=new BT(i,o,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=up(s,i.document.name),c=Fs(i.document.updateTime),u=i.document.createTime?Fs(i.document.createTime):Te.min(),p=new bn({mapValue:{fields:i.document.fields}}),g=sn.newFoundDocument(o,c,u,p),y=i.targetIds||[],b=i.removedTargetIds||[];n=new Yh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=up(s,i.document),c=i.readTime?Fs(i.readTime):Te.min(),u=sn.newNoDocument(o,c),p=i.removedTargetIds||[];n=new Yh([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=up(s,i.document),c=i.removedTargetIds||[];n=new Yh([],c,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,u=new bD(o,c),p=i.targetId;n=new zT(p,u)}}return n}function jD(s,e){let n;if(e instanceof Qc)n={update:nE(s,e.key,e.value)};else if(e instanceof wg)n={delete:Pp(s,e.key)};else if(e instanceof Mi)n={update:nE(s,e.key,e.data),updateMask:BD(e.fieldMask)};else{if(!(e instanceof yD))return Ee(16599,{Vt:e.type});n={verify:Pp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const p=u.transform;if(p instanceof Oc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof zo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Bo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof kc)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw Ee(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:CD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)})(s,e.precondition)),n}function OD(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,c){let u=o.updateTime?Fs(o.updateTime):Fs(c);return u.isEqual(Te.min())&&(u=Fs(c)),new mD(u,o.transformResults||[])})(n,e)))):[]}function kD(s,e){return{documents:[FT(s,e.path)]}}function MD(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=FT(s,o);const c=(function(y){if(y.length!==0)return QT(ps.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((b=>(function(w){return{field:Co(w.field),direction:LD(w.dir)}})(b)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const p=Up(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function VD(s){let e=ID(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(x){const w=KT(x);return w instanceof ps&&ET(w)?w.getFilters():[w]})(n.where));let u=[];n.orderBy&&(u=(function(x){return x.map((w=>(function(N){return new jc(Io(N.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(w)))})(n.orderBy));let p=null;n.limit&&(p=(function(x){let w;return w=typeof x=="object"?x.value:x,Nd(w)?null:w})(n.limit));let g=null;n.startAt&&(g=(function(x){const w=!!x.before,C=x.values||[];return new cd(C,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(x){const w=!x.before,C=x.values||[];return new cd(C,w)})(n.endAt)),nD(e,o,u,c,p,"F",g,y)}function UD(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Io(n.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Io(n.unaryFilter.field);return kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Io(n.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(s):s.fieldFilter!==void 0?(function(n){return kt.create(Io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ps.create(n.compositeFilter.filters.map((i=>KT(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(s):Ee(30097,{filter:s})}function LD(s){return AD[s]}function PD(s){return SD[s]}function zD(s){return RD[s]}function Co(s){return{fieldPath:s.canonicalString()}}function Io(s){return Wt.fromServerFormat(s.fieldPath)}function QT(s){return s instanceof kt?(function(n){if(n.op==="=="){if(H0(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(q0(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H0(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(q0(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:PD(n.op),value:n.value}}})(s):s instanceof ps?(function(n){const i=n.getFilters().map((o=>QT(o)));return i.length===1?i[0]:{compositeFilter:{op:zD(n.op),filters:i}}})(s):Ee(54877,{filter:s})}function BD(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function YT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class _i{constructor(e,n,i,o,c=Te.min(),u=Te.min(),p=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qD{constructor(e){this.yt=e}}function HD(s){const e=VD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Vp(e,e.limit,"L"):e}class FD{constructor(){this.Cn=new GD}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Si.min())}updateCollectionGroup(e,n,i){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class GD{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Pt(st.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Pt(st.comparator)).toArray()}}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n($T,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qo(0)}static cr(){return new qo(-1)}}const rE="LruGarbageCollector",KD=1048576;function iE([s,e],[n,i]){const o=Me(s,n);return o===0?Me(e,i):o}class QD{constructor(e){this.Ir=e,this.buffer=new Pt(iE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();iE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YD{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(rE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?he(rE,"Ignoring IndexedDB error during garbage collection: ",n):await $o(n)}await this.Vr(3e5)}))}}class $D{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Rd.ce);const i=new QD(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(sE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,u=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,n)))).next((x=>(c=x,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(y=Date.now(),Ro()<=ke.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${o} in `+(p-u)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x}))))}}function XD(s,e){return new $D(s,e)}class WD{constructor(){this.changes=new Na((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?re.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ZD{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Ec(i.mutation,o,On.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ve()){const o=ga();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let u=fc();return c.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=ga();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ve())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,p)=>{n.set(u,p)}))}))}computeViews(e,n,i,o){let c=Nr();const u=bc(),p=(function(){return bc()})();return n.forEach(((g,y)=>{const b=i.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof Mi)?c=c.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),Ec(b.mutation,y,b.mutation.getFieldMask(),at.now())):u.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,b)=>u.set(y,b))),n.forEach(((y,b)=>p.set(y,new JD(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=bc();let o=new ft(((u,p)=>u-p)),c=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=i.get(g)||On.empty();b=p.applyToLocalView(y,b),i.set(g,b);const x=(o.get(p.batchId)||Ve()).add(g);o=o.insert(p.batchId,x)}))})).next((()=>{const u=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,x=IT();b.forEach((w=>{if(!c.has(w)){const C=UT(n.get(w),i.get(w));C!==null&&x.set(w,C),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return re.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return ge.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):re.resolve(ga());let p=Nc,g=c;return u.next((y=>re.forEach(y,((b,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),c.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next((w=>{g=g.insert(b,w)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ve()))).next((b=>({batchId:p,changes:CT(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next((i=>{let o=fc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let u=fc();return this.indexManager.getCollectionParents(e,c).next((p=>re.forEach(p,(g=>{const y=(function(x,w){return new Wo(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((b=>{b.forEach(((x,w)=>{u=u.insert(x,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((u=>{c.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,sn.newInvalidDocument(b)))}));let p=fc();return u.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&Ec(b.mutation,y,On.empty(),at.now()),jd(n,y)&&(p=p.insert(g,y))})),p}))}}class ej{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Fs(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:HD(o.bundledQuery),readTime:Fs(o.readTime)}})(n)),re.resolve()}}class tj{constructor(){this.overlays=new ft(ge.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ga();return re.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.St(e,n,c)})),re.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),re.resolve()}getOverlaysForCollection(e,n,i){const o=ga(),c=n.length+1,u=new ge(n.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new ft(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=ga(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=ga(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return re.resolve(p)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new vD(n,i));let c=this.qr.get(n);c===void 0&&(c=Ve(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}class nj{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class Ng{constructor(){this.Qr=new Pt(Ht.$r),this.Ur=new Pt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ht(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new ge(new st([])),i=new Ht(n,e),o=new Ht(n,e+1),c=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new st([])),i=new Ht(n,e),o=new Ht(n,e+1);let c=Ve();return this.Ur.forEachInRange([i,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new Ht(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}class sj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ht.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new _D(c,n,i,o);this.mutationQueue.push(u);for(const p of o)this.Zr=this.Zr.add(new Ht(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?_g:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ht(n,0),o=new Ht(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(u=>{const p=this.Xr(u.Yr);c.push(p)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pt(Me);return n.forEach((o=>{const c=new Ht(o,0),u=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(p=>{i=i.add(p.Yr)}))})),re.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;ge.isDocumentKey(c)||(c=c.child(""));const u=new Ht(new ge(c),0);let p=new Pt(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),u),re.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return re.forEach(n.mutations,(o=>{const c=new Ht(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Ht(n,0),o=this.Zr.firstAfterOrEqual(i);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class rj{constructor(e){this.ri=e,this.docs=(function(){return new ft(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return re.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let i=Nr();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():sn.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=Nr();const u=n.path,p=new ge(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||k2(O2(b),i)<=0||(o.has(b.key)||jd(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ee(9500)}ii(e,n){return re.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new ij(this)}getSize(e){return re.resolve(this.size)}}class ij extends WD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class aj{constructor(e){this.persistence=e,this.si=new Na((n=>Eg(n)),xg),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Ng,this.targetCount=0,this.ai=qo.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),re.waitFor(c).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return re.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),re.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return re.resolve(i)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}class XT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rd(0),this.li=!1,this.li=!0,this.hi=new nj,this.referenceDelegate=e(this),this.Pi=new aj(this),this.indexManager=new FD,this.remoteDocumentCache=(function(o){return new rj(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new qD(n),this.Ii=new ej(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new sj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){he("MemoryPersistence","Starting transaction:",e);const o=new oj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return re.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class oj extends V2{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.Ri=new Ng,this.Vi=null}static mi(e){return new Cg(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),re.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hd{constructor(e,n){this.persistence=e,this.pi=new Na((i=>P2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=XD(this,n)}static mi(e,n){return new hd(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?re.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((p=>{p||(i++,c.removeEntry(u,Te.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gh(e.data.value)),n}br(e,n,i){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ig{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ve(),o=Ve();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ig(e,n.fromCache,i,o)}}class lj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return P1()?8:U2(rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,o,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new lj;return this.Ss(e,n,u).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,u,p.size)}))})).next((()=>c.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(Ro()<=ke.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",No(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Ro()<=ke.DEBUG&&he("QueryEngine","Query:",No(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ro()<=ke.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",No(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hs(n))):re.resolve())}ys(e,n){if(Q0(n))return re.resolve(null);let i=Hs(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Vp(n,null,"F"),i=Hs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Ve(...c);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,u,g.readTime)?this.ys(e,Vp(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,i,o){return Q0(n)||o.isEqual(Te.min())?re.resolve(null):this.ps.getDocuments(e,i).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,i,o)?re.resolve(null):(Ro()<=ke.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(n)),this.vs(e,u,n,j2(o,Nc)).next((p=>p)))}))}Ds(e,n){let i=new Pt(RT(e));return n.forEach(((o,c)=>{jd(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return Ro()<=ke.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",No(n)),this.ps.getDocumentsMatchingQuery(e,n,Si.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Dg="LocalStore",uj=3e8;class hj{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ft(Me),this.xs=new Na((c=>Eg(c)),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function dj(s,e,n,i){return new hj(s,e,n,i)}async function WT(s,e){const n=Ae(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],p=[];let g=Ve();for(const y of o){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function fj(s,e){const n=Ae(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const x=y.batch,w=x.keys();let C=re.resolve();return w.forEach((N=>{C=C.next((()=>b.getEntry(g,N))).next((U=>{const M=y.docVersions.get(N);Ke(M!==null,48541),U.version.compareTo(M)<0&&(x.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),b.addEntry(U)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,x)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ve();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function JT(s){const e=Ae(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function mj(s,e){const n=Ae(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((b,x)=>{const w=o.get(x);if(!w)return;p.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,x))));let C=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?C=C.withResumeToken(Jt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,i)),o=o.insert(x,C),(function(U,M,H){return U.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=uj?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(w,C,b)&&p.push(n.Pi.updateTargetData(c,C))}));let g=Nr(),y=Ve();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(pj(c,u,e.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!i.isEqual(Te.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((x=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(b)}return re.waitFor(p).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function pj(s,e,n){let i=Ve(),o=Ve();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let u=Nr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):he(Dg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function gj(s,e){const n=Ae(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_g),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yj(s,e){const n=Ae(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((c=>c?(o=c,re.resolve(o)):n.Pi.allocateTargetId(i).next((u=>(o=new _i(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Bp(s,e,n){const i=Ae(s),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Xo(u))throw u;he(Dg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function aE(s,e,n){const i=Ae(s);let o=Te.min(),c=Ve();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const x=Ae(g),w=x.xs.get(b);return w!==void 0?re.resolve(x.Ms.get(w)):x.Pi.getTargetData(y,b)})(i,u,Hs(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,p.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?o:Te.min(),n?c:Ve()))).next((p=>(_j(i,rD(e),p),{documents:p,Qs:c})))))}function _j(s,e,n){let i=s.Os.get(e)||Te.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class oE{constructor(){this.activeTargetIds=uD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vj{constructor(){this.Mo=new oE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bj{Oo(e){}shutdown(){}}const lE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(lE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Oh=null;function qp(){return Oh===null?Oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oh++,"0x"+Oh.toString(16)}const hp="RestConnection",Ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===od?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const u=qp(),p=this.zo(e,n.toUriEncodedString());he(hp,`Sending RPC '${e}' ${u}:`,p,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),b=ji(y);return this.Jo(e,p,g,i,b).then((x=>(he(hp,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw Vo(hp,`RPC '${e}' ${u} failed with error: `,x,"url: ",p,"request:",i),x}))}Ho(e,n,i,o,c,u){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const i=Ej[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class Tj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const tn="WebChannelConnection";class wj extends xj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const u=qp();return new Promise(((p,g)=>{const y=new eT;y.setWithCredentials(!0),y.listenOnce(tT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Fh.NO_ERROR:const x=y.getResponseJson();he(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),p(x);break;case Fh.TIMEOUT:he(tn,`RPC '${e}' ${u} timed out`),g(new ue(te.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const w=y.getStatus();if(he(tn,`RPC '${e}' ${u} failed with status:`,w,"response text:",y.getResponseText()),w>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const N=C?.error;if(N&&N.status&&N.message){const U=(function(H){const B=H.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(B)>=0?B:te.UNKNOWN})(N.status);g(new ue(U,N.message))}else g(new ue(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ue(te.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(tn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(o);he(tn,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const o=qp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rT(),p=sT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const b=c.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${b}`,g);const x=u.createWebChannel(b,g);this.I_(x);let w=!1,C=!1;const N=new Tj({Yo:M=>{C?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(w||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),w=!0),he(tn,`RPC '${e}' stream ${o} sending:`,M),x.send(M))},Zo:()=>x.close()}),U=(M,H,B)=>{M.listen(H,(Y=>{try{B(Y)}catch(X){setTimeout((()=>{throw X}),0)}}))};return U(x,dc.EventType.OPEN,(()=>{C||(he(tn,`RPC '${e}' stream ${o} transport opened.`),N.o_())})),U(x,dc.EventType.CLOSE,(()=>{C||(C=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),N.a_(),this.E_(x))})),U(x,dc.EventType.ERROR,(M=>{C||(C=!0,Vo(tn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),N.a_(new ue(te.UNAVAILABLE,"The operation could not be completed")))})),U(x,dc.EventType.MESSAGE,(M=>{if(!C){const H=M.data[0];Ke(!!H,16349);const B=H,Y=B?.error||B[0]?.error;if(Y){he(tn,`RPC '${e}' stream ${o} received error:`,Y);const X=Y.status;let ie=(function(A){const I=Ot[A];if(I!==void 0)return PT(I)})(X),ae=Y.message;ie===void 0&&(ie=te.INTERNAL,ae="Unknown error status: "+X+" with message "+Y.message),C=!0,N.a_(new ue(ie,ae)),x.close()}else he(tn,`RPC '${e}' stream ${o} received:`,H),N.u_(H)}})),U(p,nT.STAT_EVENT,(M=>{M.stat===Cp.PROXY?he(tn,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Cp.NOPROXY&&he(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function dp(){return typeof document<"u"?document:null}function Ud(s){return new ND(s,!0)}class ZT{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const uE="PersistentStream";class ew{constructor(e,n,i,o,c,u,p,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new ue(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Aj extends ew{constructor(e,n,i,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=DD(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Te.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Te.min():u.readTime?Fs(u.readTime):Te.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=zp(this.serializer),n.addTarget=(function(c,u){let p;const g=u.target;if(p=kp(g)?{documents:kD(c,g)}:{query:MD(c,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=qT(c,u.resumeToken);const y=Up(c,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Te.min())>0){p.readTime=ud(c,u.snapshotVersion.toTimestamp());const y=Up(c,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=UD(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=zp(this.serializer),n.removeTarget=e,this.q_(n)}}class Sj extends ew{constructor(e,n,i,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OD(e.writeResults,e.commitTime),i=Fs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=zp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>jD(this.serializer,i)))};this.q_(n)}}class Rj{}class Nj extends Rj{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Lp(n,i),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(te.UNKNOWN,c.toString())}))}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,Lp(n,i),o,u,p,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Cj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wa="RemoteStore";class Ij{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Ca(this)&&(he(wa,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await $c(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ld(y)})(this))}))})),this.Ra=new Cj(i,o)}}async function Ld(s){if(Ca(s))for(const e of s.da)await e(!0)}async function $c(s){for(const e of s.da)await e(!1)}function tw(s,e){const n=Ae(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mg(n)?kg(n):Jo(n).O_()&&Og(n,e))}function jg(s,e){const n=Ae(s),i=Jo(n);n.Ia.delete(e),i.O_()&&nw(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ca(n)&&n.Ra.set("Unknown"))}function Og(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jo(s).Y_(e)}function nw(s,e){s.Va.Ue(e),Jo(s).Z_(e)}function kg(s){s.Va=new wD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Jo(s).start(),s.Ra.ua()}function Mg(s){return Ca(s)&&!Jo(s).x_()&&s.Ia.size>0}function Ca(s){return Ae(s).Ea.size===0}function sw(s){s.Va=void 0}async function Dj(s){s.Ra.set("Online")}async function jj(s){s.Ia.forEach(((e,n)=>{Og(s,e)}))}async function Oj(s,e){sw(s),Mg(s)?(s.Ra.ha(e),kg(s)):s.Ra.set("Unknown")}async function kj(s,e,n){if(s.Ra.set("Online"),e instanceof BT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,u),o.Ia.delete(p),o.Va.removeTarget(p))})(s,e)}catch(i){he(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dd(s,i)}else if(e instanceof Yh?s.Va.Ze(e):e instanceof zT?s.Va.st(e):s.Va.tt(e),!n.isEqual(Te.min()))try{const i=await JT(s.localStore);n.compareTo(i)>=0&&await(function(c,u){const p=c.Va.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(Jt.EMPTY_BYTE_STRING,b.snapshotVersion)),nw(c,g);const x=new _i(b.target,g,y,b.sequenceNumber);Og(c,x)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){he(wa,"Failed to raise snapshot:",i),await dd(s,i)}}async function dd(s,e,n){if(!Xo(e))throw e;s.Ea.add(1),await $c(s),s.Ra.set("Offline"),n||(n=()=>JT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{he(wa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ld(s)}))}function rw(s,e){return e().catch((n=>dd(s,n,e)))}async function Pd(s){const e=Ae(s),n=Ii(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_g;for(;Mj(e);)try{const o=await gj(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,Vj(e,o)}catch(o){await dd(e,o)}iw(e)&&aw(e)}function Mj(s){return Ca(s)&&s.Ta.length<10}function Vj(s,e){s.Ta.push(e);const n=Ii(s);n.O_()&&n.X_&&n.ea(e.mutations)}function iw(s){return Ca(s)&&!Ii(s).x_()&&s.Ta.length>0}function aw(s){Ii(s).start()}async function Uj(s){Ii(s).ra()}async function Lj(s){const e=Ii(s);for(const n of s.Ta)e.ea(n.mutations)}async function Pj(s,e,n){const i=s.Ta.shift(),o=Ag.from(i,e,n);await rw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Pd(s)}async function zj(s,e){e&&Ii(s).X_&&await(async function(i,o){if((function(u){return ED(u)&&u!==te.ABORTED})(o.code)){const c=i.Ta.shift();Ii(i).B_(),await rw(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Pd(i)}})(s,e),iw(s)&&aw(s)}async function hE(s,e){const n=Ae(s);n.asyncQueue.verifyOperationInProgress(),he(wa,"RemoteStore received new credentials");const i=Ca(n);n.Ea.add(3),await $c(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ld(n)}async function Bj(s,e){const n=Ae(s);e?(n.Ea.delete(2),await Ld(n)):e||(n.Ea.add(2),await $c(n),n.Ra.set("Unknown"))}function Jo(s){return s.ma||(s.ma=(function(n,i,o){const c=Ae(n);return c.sa(),new Aj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:Dj.bind(null,s),t_:jj.bind(null,s),r_:Oj.bind(null,s),H_:kj.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Mg(s)?kg(s):s.Ra.set("Unknown")):(await s.ma.stop(),sw(s))}))),s.ma}function Ii(s){return s.fa||(s.fa=(function(n,i,o){const c=Ae(n);return c.sa(),new Sj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Uj.bind(null,s),r_:zj.bind(null,s),ta:Lj.bind(null,s),na:Pj.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Pd(s)):(await s.fa.stop(),s.Ta.length>0&&(he(wa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Vg{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const u=Date.now()+i,p=new Vg(e,n,u,o,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(s,e){if(Rr("AsyncQueue",`${e}: ${s}`),Xo(s))return new ue(te.UNAVAILABLE,`${e}: ${s}`);throw s}class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=fc(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class dE{constructor(){this.ga=new ft(ge.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ho{constructor(e,n,i,o,c,u,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const u=[];return n.forEach((p=>{u.push({type:0,doc:p})})),new Ho(e,n,Mo.emptySet(n),u,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class qj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Hj{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ae(n),c=o.queries;o.queries=fE(),c.forEach(((u,p)=>{for(const g of p.Sa)g.onError(i)}))})(this,new ue(te.ABORTED,"Firestore shutting down"))}}function fE(){return new Na((s=>ST(s)),Dd)}async function Lg(s,e){const n=Ae(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new qj,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const p=Ug(u,`Initialization of query '${No(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&zg(n)}async function Pg(s,e){const n=Ae(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Fj(s,e){const n=Ae(s);let i=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const p of u.Sa)p.Fa(o)&&(i=!0);u.wa=o}}i&&zg(n)}function Gj(s,e,n){const i=Ae(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function zg(s){s.Ca.forEach((e=>{e.next()}))}var Hp,mE;(mE=Hp||(Hp={})).Ma="default",mE.Cache="cache";class Bg{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hp.Cache}}class ow{constructor(e){this.key=e}}class lw{constructor(e){this.key=e}}class Kj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=RT(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new dE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,x)=>{const w=o.get(b),C=jd(this.query,x)?x:null,N=!!w&&this.mutatedKeys.has(w.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;w&&C?w.data.isEqual(C.data)?N!==U&&(i.track({type:3,doc:C}),M=!0):this.su(w,C)||(i.track({type:2,doc:C}),M=!0,(g&&this.eu(C,g)>0||y&&this.eu(C,y)<0)&&(p=!0)):!w&&C?(i.track({type:0,doc:C}),M=!0):w&&!C&&(i.track({type:1,doc:w}),M=!0,(g||y)&&(p=!0)),M&&(C?(u=u.add(C),c=U?c.add(b):c.delete(b)):(u=u.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:u,iu:i,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,x)=>(function(C,N){const U=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:M})}};return U(C)-U(N)})(b.type,x.type)||this.eu(b.doc,x.doc))),this.ou(i),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new Ho(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new lw(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new ow(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qg="SyncEngine";class Qj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Yj{constructor(e){this.key=e,this.hu=!1}}class $j{constructor(e,n,i,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Na((p=>ST(p)),Dd),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ge.comparator),this.Au=new Map,this.Ru=new Ng,this.Vu={},this.mu=new Map,this.fu=qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xj(s,e,n=!0){const i=mw(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await cw(i,e,n,!0),o}async function Wj(s,e){const n=mw(s);await cw(n,e,!0,!1)}async function cw(s,e,n,i){const o=await yj(s.localStore,Hs(e)),c=o.targetId,u=s.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await Jj(s,e,c,u==="current",o.resumeToken)),s.isPrimaryClient&&n&&tw(s.remoteStore,o),p}async function Jj(s,e,n,i,o){s.pu=(x,w,C)=>(async function(U,M,H,B){let Y=M.view.ru(H);Y.Cs&&(Y=await aE(U.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,Y))));const X=B&&B.targetChanges.get(M.targetId),ie=B&&B.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(Y,U.isPrimaryClient,X,ie);return gE(U,M.targetId,ae.au),ae.snapshot})(s,x,w,C);const c=await aE(s.localStore,e,!0),u=new Kj(e,c.Qs),p=u.ru(c.documents),g=Yc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=u.applyChanges(p,s.isPrimaryClient,g);gE(s,n,y.au);const b=new Qj(e,n,u);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function Zj(s,e,n){const i=Ae(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((u=>!Dd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Bp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&jg(i.remoteStore,o.targetId),Fp(i,o.targetId)})).catch($o)):(Fp(i,o.targetId),await Bp(i.localStore,o.targetId,!0))}async function eO(s,e){const n=Ae(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),jg(n.remoteStore,i.targetId))}async function tO(s,e,n){const i=lO(s);try{const o=await(function(u,p){const g=Ae(u),y=at.now(),b=p.reduce(((C,N)=>C.add(N.key)),Ve());let x,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let N=Nr(),U=Ve();return g.Ns.getEntries(C,b).next((M=>{N=M,N.forEach(((H,B)=>{B.isValidDocument()||(U=U.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,N))).next((M=>{x=M;const H=[];for(const B of p){const Y=gD(B,x.get(B.key).overlayedDocument);Y!=null&&H.push(new Mi(B.key,Y,_T(Y.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,y,H,p)})).next((M=>{w=M;const H=M.applyToLocalDocumentSet(x,U);return g.documentOverlayCache.saveOverlays(C,M.batchId,H)}))})).then((()=>({batchId:w.batchId,changes:CT(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,p,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new ft(Me)),y=y.insert(p,g),u.Vu[u.currentUser.toKey()]=y})(i,o.batchId,n),await Xc(i,o.changes),await Pd(i.remoteStore)}catch(o){const c=Ug(o,"Failed to persist write");n.reject(c)}}async function uw(s,e){const n=Ae(s);try{const i=await mj(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ke(u.hu,14607):o.removedDocuments.size>0&&(Ke(u.hu,42227),u.hu=!1))})),await Xc(n,i,e)}catch(i){await $o(i)}}function pE(s,e,n){const i=Ae(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((c,u)=>{const p=u.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(u,p){const g=Ae(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,x)=>{for(const w of x.Sa)w.va(p)&&(y=!0)})),y&&zg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nO(s,e,n){const i=Ae(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let u=new ft(ge.comparator);u=u.insert(c,sn.newNoDocument(c,Te.min()));const p=Ve().add(c),g=new Vd(Te.min(),new Map,new ft(Me),u,p);await uw(i,g),i.du=i.du.remove(c),i.Au.delete(e),Hg(i)}else await Bp(i.localStore,e,!1).then((()=>Fp(i,e,n))).catch($o)}async function sO(s,e){const n=Ae(s),i=e.batch.batchId;try{const o=await fj(n.localStore,e);dw(n,i,null),hw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xc(n,o)}catch(o){await $o(o)}}async function rO(s,e,n){const i=Ae(s);try{const o=await(function(u,p){const g=Ae(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((x=>(Ke(x!==null,37113),b=x.keys(),g.mutationQueue.removeMutationBatch(y,x)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);dw(i,e,n),hw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xc(i,o)}catch(o){await $o(o)}}function hw(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function dw(s,e,n){const i=Ae(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Fp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||fw(s,i)}))}function fw(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(jg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Hg(s))}function gE(s,e,n){for(const i of n)i instanceof ow?(s.Ru.addReference(i.key,e),iO(s,i)):i instanceof lw?(he(qg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||fw(s,i.key)):Ee(19791,{wu:i})}function iO(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(he(qg,"New document in limbo: "+n),s.Eu.add(i),Hg(s))}function Hg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new ge(st.fromString(e)),i=s.fu.next();s.Au.set(i,new Yj(n)),s.du=s.du.insert(n,i),tw(s.remoteStore,new _i(Hs(Id(n.path)),i,"TargetPurposeLimboResolution",Rd.ce))}}async function Xc(s,e,n){const i=Ae(s),o=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{u.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=Ig.As(g.targetId,y);c.push(b)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(g,y){const b=Ae(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>re.forEach(y,(w=>re.forEach(w.Es,(C=>b.persistence.referenceDelegate.addReference(x,w.targetId,C))).next((()=>re.forEach(w.ds,(C=>b.persistence.referenceDelegate.removeReference(x,w.targetId,C)))))))))}catch(x){if(!Xo(x))throw x;he(Dg,"Failed to update sequence numbers: "+x)}for(const x of y){const w=x.targetId;if(!x.fromCache){const C=b.Ms.get(w),N=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(N);b.Ms=b.Ms.insert(w,U)}}})(i.localStore,c))}async function aO(s,e){const n=Ae(s);if(!n.currentUser.isEqual(e)){he(qg,"User change. New user:",e.toKey());const i=await WT(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new ue(te.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xc(n,i.Ls)}}function oO(s,e){const n=Ae(s),i=n.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let o=Ve();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const p=n.Tu.get(u);o=o.unionWith(p.view.nu)}return o}}function mw(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=uw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nO.bind(null,e),e.Pu.H_=Fj.bind(null,e.eventManager),e.Pu.yu=Gj.bind(null,e.eventManager),e}function lO(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rO.bind(null,e),e}class fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dj(this.persistence,new cj,e.initialUser,this.serializer)}Cu(e){return new XT(Cg.mi,this.serializer)}Du(e){return new vj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fd.provider={build:()=>new fd};class cO extends fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YD(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new XT((i=>hd.mi(i,n)),this.serializer)}}class Gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aO.bind(null,this.syncEngine),await Bj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Hj})()}createDatastore(e){const n=Ud(e.databaseInfo.databaseId),i=(function(c){return new wj(c)})(e.databaseInfo);return(function(c,u,p,g){return new Nj(c,u,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,u,p){return new Ij(i,o,c,u,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>pE(this.syncEngine,n,0)),(function(){return cE.v()?new cE:new bj})())}createSyncEngine(e,n){return(function(o,c,u,p,g,y,b){const x=new $j(o,c,u,p,g,y);return b&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ae(n);he(wa,"RemoteStore shutting down."),i.Ea.add(5),await $c(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gp.provider={build:()=>new Gp};class Fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Di="FirestoreClient";class uO{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{he(Di,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(Di,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ug(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function fp(s,e){s.asyncQueue.verifyOperationInProgress(),he(Di,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await WT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function yE(s,e){s.asyncQueue.verifyOperationInProgress();const n=await hO(s);he(Di,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>hE(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>hE(e.remoteStore,o))),s._onlineComponents=e}async function hO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(Di,"Using user provided OfflineComponentProvider");try{await fp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Vo("Error using user provided cache. Falling back to memory cache: "+n),await fp(s,new fd)}}else he(Di,"Using default OfflineComponentProvider"),await fp(s,new cO(void 0));return s._offlineComponents}async function pw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(Di,"Using user provided OnlineComponentProvider"),await yE(s,s._uninitializedComponentsProvider._online)):(he(Di,"Using default OnlineComponentProvider"),await yE(s,new Gp))),s._onlineComponents}function dO(s){return pw(s).then((e=>e.syncEngine))}async function md(s){const e=await pw(s),n=e.eventManager;return n.onListen=Xj.bind(null,e.syncEngine),n.onUnlisten=Zj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eO.bind(null,e.syncEngine),n}function fO(s,e,n={}){const i=new Er;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new Fg({next:w=>{b.Nu(),u.enqueueAndForget((()=>Pg(c,x)));const C=w.docs.has(p);!C&&w.fromCache?y.reject(new ue(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&g&&g.source==="server"?y.reject(new ue(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),x=new Bg(Id(p.path),b,{includeMetadataChanges:!0,qa:!0});return Lg(c,x)})(await md(s),s.asyncQueue,e,n,i))),i.promise}function mO(s,e,n={}){const i=new Er;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new Fg({next:w=>{b.Nu(),u.enqueueAndForget((()=>Pg(c,x))),w.fromCache&&g.source==="server"?y.reject(new ue(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),x=new Bg(p,b,{includeMetadataChanges:!0,qa:!0});return Lg(c,x)})(await md(s),s.asyncQueue,e,n,i))),i.promise}function gw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const _E=new Map;const yw="firestore.googleapis.com",vE=!0;class bE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yw,this.ssl=vE}else this.host=e.host,this.ssl=e.ssl??vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KD)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E2;switch(i.type){case"firstParty":return new A2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=_E.get(n);i&&(he("ComponentProvider","Removing Datastore"),_E.delete(n),i.terminate())})(this),Promise.resolve()}}function pO(s,e,n,i={}){s=En(s,zd);const o=ji(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(sg(`https://${p}`),rg("Firestore",!0)),c.host!==yw&&c.host!==p&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:i};if(!wr(g,u)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=nn.MOCK_USER;else{y=dx(i.mockUserToken,s._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new ue(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new nn(x)}s._authCredentials=new x2(new aT(y,b))}}class Vi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class _t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Kc(n,_t._jsonSchema))return new _t(e,i||null,new ge(st.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Mt("string",_t._jsonSchemaVersion),referencePath:Mt("string")};class xi extends Vi{constructor(e,n,i){super(e,n,Id(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new ge(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Ti(s,e,...n){if(s=ot(s),oT("collection","path",e),s instanceof zd){const i=st.fromString(e,...n);return O0(i),new xi(s,null,i)}{if(!(s instanceof _t||s instanceof xi))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(st.fromString(e,...n));return O0(i),new xi(s.firestore,null,i)}}function un(s,e,...n){if(s=ot(s),arguments.length===1&&(e=yg.newId()),oT("doc","path",e),s instanceof zd){const i=st.fromString(e,...n);return j0(i),new _t(s,null,new ge(i))}{if(!(s instanceof _t||s instanceof xi))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(st.fromString(e,...n));return j0(i),new _t(s.firestore,s instanceof xi?s.converter:null,new ge(i))}}const EE="AsyncQueue";class xE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZT(this,"async_queue_retry"),this._c=()=>{const i=dp();i&&he(EE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;he(EE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",TE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Vg.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:TE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function wE(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Cr extends zd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new xE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}}function gO(s,e){const n=typeof s=="object"?s:og(),i=typeof s=="string"?s:od,o=xd(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=cx("firestore");c&&pO(o,...c)}return o}function Bd(s){if(s._terminated)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||yO(s),s._firestoreClient}function yO(s){const e=s._freezeSettings(),n=(function(o,c,u,p){return new q2(o,c,u,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,gw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new uO(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Jt.fromBase64String(e))}catch(n){throw new ue(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Mt("string",$n._jsonSchemaVersion),bytes:Mt("string")};class qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ia{constructor(e){this._methodName=e}}class Gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gs._jsonSchemaVersion}}static fromJSON(e){if(Kc(e,Gs._jsonSchema))return new Gs(e.latitude,e.longitude)}}Gs._jsonSchemaVersion="firestore/geoPoint/1.0",Gs._jsonSchema={type:Mt("string",Gs._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};class Ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kc(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ks(e.vectorValues);throw new ue(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:Mt("string",Ks._jsonSchemaVersion),vectorValues:Mt("object")};const _O=/^__.*__$/;class vO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(e,this.data,n,this.fieldTransforms)}}class _w{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:s})}}class Hd{constructor(e,n,i,o,c,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vw(this.Ac)&&_O.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ud(e)}Cc(e,n,i,o=!1){return new Hd({Ac:e,methodName:n,Dc:i,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fd(s){const e=s._freezeSettings(),n=Ud(s._databaseId);return new bO(s._databaseId,!!e.ignoreUndefinedProperties,n)}function bw(s,e,n,i,o,c={}){const u=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);$g("Data must be an object, but it was:",u,i);const p=xw(i,u);let g,y;if(c.merge)g=new On(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const b=[];for(const x of c.mergeFields){const w=Kp(e,x,n);if(!u.contains(w))throw new ue(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ww(b,w)||b.push(w)}g=new On(b),y=u.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,y=u.fieldTransforms;return new vO(new bn(p),g,y)}class Gd extends Ia{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}function Ew(s,e,n){return new Hd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Gg extends Ia{_toFieldTransform(e){return new kd(e.path,new Oc)}isEqual(e){return e instanceof Gg}}class Kg extends Ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ew(this,e,!0),i=this.vc.map((c=>Da(c,n))),o=new zo(i);return new kd(e.path,o)}isEqual(e){return e instanceof Kg&&wr(this.vc,e.vc)}}class Qg extends Ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ew(this,e,!0),i=this.vc.map((c=>Da(c,n))),o=new Bo(i);return new kd(e.path,o)}isEqual(e){return e instanceof Qg&&wr(this.vc,e.vc)}}class Yg extends Ia{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new kc(e.serializer,jT(e.serializer,this.Fc));return new kd(e.path,n)}isEqual(e){return e instanceof Yg&&this.Fc===e.Fc}}function EO(s,e,n,i){const o=s.Cc(1,e,n);$g("Data must be an object, but it was:",o,i);const c=[],u=bn.empty();ki(i,((g,y)=>{const b=Xg(e,g,n);y=ot(y);const x=o.yc(b);if(y instanceof Gd)c.push(b);else{const w=Da(y,x);w!=null&&(c.push(b),u.set(b,w))}}));const p=new On(c);return new _w(u,p,o.fieldTransforms)}function xO(s,e,n,i,o,c){const u=s.Cc(1,e,n),p=[Kp(e,i,n)],g=[o];if(c.length%2!=0)throw new ue(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)p.push(Kp(e,c[w])),g.push(c[w+1]);const y=[],b=bn.empty();for(let w=p.length-1;w>=0;--w)if(!ww(y,p[w])){const C=p[w];let N=g[w];N=ot(N);const U=u.yc(C);if(N instanceof Gd)y.push(C);else{const M=Da(N,U);M!=null&&(y.push(C),b.set(C,M))}}const x=new On(y);return new _w(b,x,u.fieldTransforms)}function TO(s,e,n,i=!1){return Da(n,s.Cc(i?4:3,e))}function Da(s,e){if(Tw(s=ot(s)))return $g("Unsupported field value:",e,s),xw(s,e);if(s instanceof Ia)return(function(i,o){if(!vw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let u=0;for(const p of i){let g=Da(p,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jT(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=at.fromDate(i);return{timestampValue:ud(o.serializer,c)}}if(i instanceof at){const c=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(o.serializer,c)}}if(i instanceof Gs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $n)return{bytesValue:qT(o.serializer,i._byteString)};if(i instanceof _t){const c=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ks)return(function(u,p){return{mapValue:{fields:{[gT]:{stringValue:yT},[ld]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Tg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Sd(i)}`)})(s,e)}function xw(s,e){const n={};return uT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(s,((i,o)=>{const c=Da(o,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Tw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof at||s instanceof Gs||s instanceof $n||s instanceof _t||s instanceof Ia||s instanceof Ks)}function $g(s,e,n){if(!Tw(n)||!lT(n)){const i=Sd(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Kp(s,e,n){if((e=ot(e))instanceof qd)return e._internalPath;if(typeof e=="string")return Xg(s,e);throw pd("Field path arguments must be of type string or ",s,!1,void 0,n)}const wO=new RegExp("[~\\*/\\[\\]]");function Xg(s,e,n){if(e.search(wO)>=0)throw pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new qd(...e.split("."))._internalPath}catch{throw pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function pd(s,e,n,i,o){const c=i&&!i.isEmpty(),u=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new ue(te.INVALID_ARGUMENT,p+s+g)}function ww(s,e){return s.some((n=>n.isEqual(e)))}class Aw{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AO extends Aw{data(){return super.data()}}function Wg(s,e){return typeof e=="string"?Xg(s,e):e instanceof qd?e._internalPath:e._delegate._internalPath}function Sw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ue(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jg{}class Rw extends Jg{}function Nw(s,e,...n){let i=[];e instanceof Jg&&i.push(e),i=i.concat(n),(function(c){const u=c.filter((g=>g instanceof ey)).length,p=c.filter((g=>g instanceof Zg)).length;if(u>1||u>0&&p>0)throw new ue(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class Zg extends Rw{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Zg(e,n,i)}_apply(e){const n=this._parse(e);return Iw(e._query,n),new Vi(e.firestore,e.converter,Mp(e._query,n))}_parse(e){const n=Fd(e.firestore);return(function(c,u,p,g,y,b,x){let w;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ue(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){SE(x,b);const N=[];for(const U of x)N.push(AE(g,c,U));w={arrayValue:{values:N}}}else w=AE(g,c,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||SE(x,b),w=TO(p,u,x,b==="in"||b==="not-in");return kt.create(y,b,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ey extends Jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ey(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let u=o;const p=c.getFlattenedFilters();for(const g of p)Iw(u,g),u=Mp(u,g)})(e._query,n),new Vi(e.firestore,e.converter,Mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends Rw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ty(e,n)}_apply(e){const n=(function(o,c,u){if(o.startAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jc(c,u)})(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,(function(o,c){const u=o.explicitOrderBy.concat([c]);return new Wo(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Cw(s,e="asc"){const n=e,i=Wg("orderBy",s);return ty._create(i,n)}function AE(s,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new ue(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AT(e)&&n.indexOf("/")!==-1)throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(st.fromString(n));if(!ge.isDocumentKey(i))throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return B0(s,new ge(i))}if(n instanceof _t)return B0(s,n._key);throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(n)}.`)}function SE(s,e){if(!Array.isArray(s)||s.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Iw(s,e){const n=(function(o,c){for(const u of o)for(const p of u.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SO{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ki(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){const n=e.fields?.[ld].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new Ks(n)}convertGeoPoint(e){return new Gs(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Cd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){const n=Ri(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=st.fromString(e);Ke(YT(i),9688,{name:e});const o=new Ic(i.get(1),i.get(3)),c=new ge(i.popFirst(5));return o.isEqual(n)||Rr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Dw(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends Aw{constructor(e,n,i,o,c,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Mt("string",ya._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class $h extends ya{data(e={}){return super.data(e)}}class _a{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new pc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new $h(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((p=>{const g=new $h(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new $h(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:RO(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:s})}}function Aa(s){s=En(s,_t);const e=En(s.firestore,Cr);return fO(Bd(e),s._key).then((n=>jw(e,s,n)))}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:Mt("string",_a._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class ny extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Mc(s){s=En(s,Vi);const e=En(s.firestore,Cr),n=Bd(e),i=new ny(e);return Sw(s._query),mO(n,s._query).then((o=>new _a(e,i,s,o)))}function sy(s,e,n){s=En(s,_t);const i=En(s.firestore,Cr),o=Dw(s.converter,e,n);return Kd(i,[bw(Fd(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Xn.none())])}function hs(s,e,n,...i){s=En(s,_t);const o=En(s.firestore,Cr),c=Fd(o);let u;return u=typeof(e=ot(e))=="string"||e instanceof qd?xO(c,"updateDoc",s._key,e,n,i):EO(c,"updateDoc",s._key,e),Kd(o,[u.toMutation(s._key,Xn.exists(!0))])}function NO(s){return Kd(En(s.firestore,Cr),[new wg(s._key,Xn.none())])}function RE(s,e){const n=En(s.firestore,Cr),i=un(s),o=Dw(s.converter,e);return Kd(n,[bw(Fd(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Xn.exists(!1))]).then((()=>i))}function CO(s,...e){s=ot(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||wE(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wE(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let c,u,p;if(s instanceof _t)u=En(s.firestore,Cr),p=Id(s._key.path),c={next:g=>{e[i]&&e[i](jw(u,s,g))},error:e[i+1],complete:e[i+2]};else{const g=En(s,Vi);u=En(g.firestore,Cr),p=g._query;const y=new ny(u);c={next:b=>{e[i]&&e[i](new _a(u,y,g,b))},error:e[i+1],complete:e[i+2]},Sw(s._query)}return(function(y,b,x,w){const C=new Fg(w),N=new Bg(b,C,x);return y.asyncQueue.enqueueAndForget((async()=>Lg(await md(y),N))),()=>{C.Nu(),y.asyncQueue.enqueueAndForget((async()=>Pg(await md(y),N)))}})(Bd(u),p,o,c)}function Kd(s,e){return(function(i,o){const c=new Er;return i.asyncQueue.enqueueAndForget((async()=>tO(await dO(i),o,c))),c.promise})(Bd(s),e)}function jw(s,e,n){const i=n.docs.get(e._key),o=new ny(s);return new ya(s,o,e._key,i,new pc(n.hasPendingWrites,n.fromCache),e.converter)}function Ao(){return new Gg("serverTimestamp")}function IO(...s){return new Kg("arrayUnion",s)}function DO(...s){return new Qg("arrayRemove",s)}function NE(s){return new Yg("increment",s)}(function(e,n=!0){(function(o){Yo=o})(Ra),ba(new Ai("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),p=new Cr(new T2(i.getProvider("auth-internal")),new S2(u,i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(y.options.projectId,b)})(u,o),u);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),zs(N0,C0,e),zs(N0,C0,"esm2020")})();var jO="firebase",OO="12.7.0";zs(jO,OO,"app");const Ow="firebasestorage.googleapis.com",kw="storageBucket",kO=120*1e3,MO=600*1e3,VO=1e3;class mt extends $s{constructor(e,n,i=0){super(mp(e),`Firebase Storage: ${n} (${mp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function mp(s){return"storage/"+s}function ry(){const s="An unknown error occurred, please check the error payload for server response.";return new mt(lt.UNKNOWN,s)}function UO(s){return new mt(lt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function LO(s){return new mt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PO(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(lt.UNAUTHENTICATED,s)}function zO(){return new mt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BO(s){return new mt(lt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Mw(){return new mt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vw(){return new mt(lt.CANCELED,"User canceled the upload/download.")}function qO(s){return new mt(lt.INVALID_URL,"Invalid URL '"+s+"'.")}function HO(s){return new mt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function FO(){return new mt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kw+"' property when initializing the app?")}function Uw(){return new mt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GO(){return new mt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function KO(){return new mt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QO(s){return new mt(lt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qp(s){return new mt(lt.INVALID_ARGUMENT,s)}function Lw(){return new mt(lt.APP_DELETED,"The Firebase app was deleted.")}function YO(s){return new mt(lt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xc(s,e){return new mt(lt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function oc(s){throw new mt(lt.INTERNAL_ERROR,"Internal error: "+s)}class kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=kn.makeFromUrl(e,n)}catch{return new kn(e,"")}if(i.path==="")return i;throw HO(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const u="(/(.*))?$",p=new RegExp("^gs://"+o+u,"i"),g={bucket:1,path:3};function y(X){X.path_=decodeURIComponent(X.path)}const b="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${x}/${b}/b/${o}/o${w}`,"i"),N={bucket:1,path:3},U=n===Ow?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",H=new RegExp(`^https?://${U}/${o}/${M}`,"i"),Y=[{regex:p,indices:g,postModify:c},{regex:C,indices:N,postModify:y},{regex:H,indices:{bucket:1,path:2},postModify:y}];for(let X=0;X<Y.length;X++){const ie=Y[X],ae=ie.regex.exec(e);if(ae){const R=ae[ie.indices.bucket];let A=ae[ie.indices.path];A||(A=""),i=new kn(R,A),ie.postModify(i);break}}if(i==null)throw qO(e);return i}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function XO(s,e,n){let i=1,o=null,c=null,u=!1,p=0;function g(){return p===2}let y=!1;function b(...M){y||(y=!0,e.apply(null,M))}function x(M){o=setTimeout(()=>{o=null,s(C,g())},M)}function w(){c&&clearTimeout(c)}function C(M,...H){if(y){w();return}if(M){w(),b.call(null,M,...H);return}if(g()||u){w(),b.call(null,M,...H);return}i<64&&(i*=2);let Y;p===1?(p=2,Y=0):Y=(i+Math.random())*1e3,x(Y)}let N=!1;function U(M){N||(N=!0,w(),!y&&(o!==null?(M||(p=2),clearTimeout(o),x(0)):M||(p=1)))}return x(0),c=setTimeout(()=>{u=!0,U(!0)},n),U}function WO(s){s(!1)}function JO(s){return s!==void 0}function ZO(s){return typeof s=="function"}function ek(s){return typeof s=="object"&&!Array.isArray(s)}function Qd(s){return typeof s=="string"||s instanceof String}function CE(s){return iy()&&s instanceof Blob}function iy(){return typeof Blob<"u"}function IE(s,e,n,i){if(i<e)throw Qp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Qp(`Invalid value for '${s}'. Expected ${n} or less.`)}function Zo(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function Pw(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var va;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(va||(va={}));function zw(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}class tk{constructor(e,n,i,o,c,u,p,g,y,b,x,w=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=x,this.retry=w,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new kh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const p=c.getErrorCode()===va.NO_ERROR,g=c.getStatus();if(!p||zw(g,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===va.ABORT;i(!1,new kh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new kh(y,c))})},n=(i,o)=>{const c=this.resolve_,u=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());JO(g)?c(g):c()}catch(g){u(g)}else if(p!==null){const g=ry();g.serverResponse=p.getErrorText(),this.errorCallback_?u(this.errorCallback_(p,g)):u(g)}else if(o.canceled){const g=this.appDelete_?Lw():Vw();u(g)}else{const g=Mw();u(g)}};this.canceled_?n(!1,new kh(!1,null,!0)):this.backoffId_=XO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function nk(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function sk(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function ik(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function ak(s,e,n,i,o,c,u=!0,p=!1){const g=Pw(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return rk(b,e),nk(b,n),sk(b,c),ik(b,i),new tk(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,u,p)}function ok(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lk(...s){const e=ok();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(iy())return new Blob(s);throw new mt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ck(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function uk(s){if(typeof atob>"u")throw QO("base-64");return atob(s)}const Ps={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,n){this.data=e,this.contentType=n||null}}function hk(s,e){switch(s){case Ps.RAW:return new pp(Bw(e));case Ps.BASE64:case Ps.BASE64URL:return new pp(qw(s,e));case Ps.DATA_URL:return new pp(fk(e),mk(e))}throw ry()}function Bw(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=i,u=s.charCodeAt(++n);i=65536|(c&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function dk(s){let e;try{e=decodeURIComponent(s)}catch{throw xc(Ps.DATA_URL,"Malformed data URL.")}return Bw(e)}function qw(s,e){switch(s){case Ps.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw xc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ps.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw xc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uk(e)}catch(o){throw o.message.includes("polyfill")?o:xc(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class Hw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xc(Ps.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=pk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function fk(s){const e=new Hw(s);return e.base64?qw(Ps.BASE64,e.rest):dk(e.rest)}function mk(s){return new Hw(s).contentType}function pk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class yi{constructor(e,n){let i=0,o="";CE(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(CE(this.data_)){const i=this.data_,o=ck(i,e,n);return o===null?null:new yi(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new yi(i,!0)}}static getBlob(...e){if(iy()){const n=e.map(i=>i instanceof yi?i.data_:i);return new yi(lk.apply(null,n))}else{const n=e.map(u=>Qd(u)?hk(Ps.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let c=0;return n.forEach(u=>{for(let p=0;p<u.length;p++)o[c++]=u[p]}),new yi(o,!0)}}uploadData(){return this.data_}}function Fw(s){let e;try{e=JSON.parse(s)}catch{return null}return ek(e)?e:null}function gk(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function yk(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function Gw(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function _k(s,e){return e}class cn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||_k}}let Mh=null;function vk(s){return!Qd(s)||s.length<2?s:Gw(s)}function Kw(){if(Mh)return Mh;const s=[];s.push(new cn("bucket")),s.push(new cn("generation")),s.push(new cn("metageneration")),s.push(new cn("name","fullPath",!0));function e(c,u){return vk(u)}const n=new cn("name");n.xform=e,s.push(n);function i(c,u){return u!==void 0?Number(u):u}const o=new cn("size");return o.xform=i,s.push(o),s.push(new cn("timeCreated")),s.push(new cn("updated")),s.push(new cn("md5Hash",null,!0)),s.push(new cn("cacheControl",null,!0)),s.push(new cn("contentDisposition",null,!0)),s.push(new cn("contentEncoding",null,!0)),s.push(new cn("contentLanguage",null,!0)),s.push(new cn("contentType",null,!0)),s.push(new cn("metadata","customMetadata",!0)),Mh=s,Mh}function bk(s,e){function n(){const i=s.bucket,o=s.fullPath,c=new kn(i,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function Ek(s,e,n){const i={};i.type="file";const o=n.length;for(let c=0;c<o;c++){const u=n[c];i[u.local]=u.xform(i,e[u.server])}return bk(i,s),i}function Qw(s,e,n){const i=Fw(e);return i===null?null:Ek(s,i,n)}function xk(s,e,n,i){const o=Fw(e);if(o===null||!Qd(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(y=>{const b=s.bucket,x=s.fullPath,w="/b/"+u(b)+"/o/"+u(x),C=Zo(w,n,i),N=Pw({alt:"media",token:y});return C+N})[0]}function Yw(s,e){const n={},i=e.length;for(let o=0;o<i;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class ja{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xr(s){if(!s)throw ry()}function ay(s,e){function n(i,o){const c=Qw(s,o,e);return xr(c!==null),c}return n}function Tk(s,e){function n(i,o){const c=Qw(s,o,e);return xr(c!==null),xk(c,o,s.host,s._protocol)}return n}function Wc(s){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=zO():o=PO():n.getStatus()===402?o=LO(s.bucket):n.getStatus()===403?o=BO(s.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function oy(s){const e=Wc(s);function n(i,o){let c=e(i,o);return i.getStatus()===404&&(c=UO(s.path)),c.serverResponse=o.serverResponse,c}return n}function wk(s,e,n){const i=e.fullServerUrl(),o=Zo(i,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new ja(o,c,ay(s,n),u);return p.errorHandler=oy(e),p}function Ak(s,e,n){const i=e.fullServerUrl(),o=Zo(i,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new ja(o,c,Tk(s,n),u);return p.errorHandler=oy(e),p}function Sk(s,e){const n=e.fullServerUrl(),i=Zo(n,s.host,s._protocol),o="DELETE",c=s.maxOperationRetryTime;function u(g,y){}const p=new ja(i,o,u,c);return p.successCodes=[200,204],p.errorHandler=oy(e),p}function Rk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function $w(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Rk(null,e)),i}function Nk(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function p(){let Y="";for(let X=0;X<2;X++)Y=Y+Math.random().toString().slice(2);return Y}const g=p();u["Content-Type"]="multipart/related; boundary="+g;const y=$w(e,i,o),b=Yw(y,n),x="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,w=`\r
--`+g+"--",C=yi.getBlob(x,i,w);if(C===null)throw Uw();const N={name:y.fullPath},U=Zo(c,s.host,s._protocol),M="POST",H=s.maxUploadRetryTime,B=new ja(U,M,ay(s,n),H);return B.urlParams=N,B.headers=u,B.body=C.uploadData(),B.errorHandler=Wc(e),B}class gd{constructor(e,n,i,o){this.current=e,this.total=n,this.finalized=!!i,this.metadata=o||null}}function ly(s,e){let n=null;try{n=s.getResponseHeader("X-Goog-Upload-Status")}catch{xr(!1)}return xr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Ck(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),u=$w(e,i,o),p={name:u.fullPath},g=Zo(c,s.host,s._protocol),y="POST",b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=Yw(u,n),w=s.maxUploadRetryTime;function C(U){ly(U);let M;try{M=U.getResponseHeader("X-Goog-Upload-URL")}catch{xr(!1)}return xr(Qd(M)),M}const N=new ja(g,y,C,w);return N.urlParams=p,N.headers=b,N.body=x,N.errorHandler=Wc(e),N}function Ik(s,e,n,i){const o={"X-Goog-Upload-Command":"query"};function c(y){const b=ly(y,["active","final"]);let x=null;try{x=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xr(!1)}x||xr(!1);const w=Number(x);return xr(!isNaN(w)),new gd(w,i.size(),b==="final")}const u="POST",p=s.maxUploadRetryTime,g=new ja(n,u,c,p);return g.headers=o,g.errorHandler=Wc(e),g}const DE=256*1024;function Dk(s,e,n,i,o,c,u,p){const g=new gd(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw GO();const y=g.total-g.current;let b=y;o>0&&(b=Math.min(b,o));const x=g.current,w=x+b;let C="";b===0?C="finalize":y===b?C="upload, finalize":C="upload";const N={"X-Goog-Upload-Command":C,"X-Goog-Upload-Offset":`${g.current}`},U=i.slice(x,w);if(U===null)throw Uw();function M(X,ie){const ae=ly(X,["active","final"]),R=g.current+b,A=i.size();let I;return ae==="final"?I=ay(e,c)(X,ie):I=null,new gd(R,A,ae==="final",I)}const H="POST",B=e.maxUploadRetryTime,Y=new ja(n,H,M,B);return Y.headers=N,Y.body=U.uploadData(),Y.progressCallback=p||null,Y.errorHandler=Wc(s),Y}const vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gp(s){switch(s){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}class jk{constructor(e,n,i){if(ZO(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function So(s){return(...e)=>{Promise.resolve().then(()=>s(...e))}}class Ok{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=va.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=va.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=va.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,c){if(this.sent_)throw oc("cannot .send() more than once");if(ji(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kk extends Ok{initXhr(){this.xhr_.responseType="text"}}function pa(){return new kk}class Mk{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Kw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(zw(o.status,[]))if(c)o=Mw();else{this.sleepTime=Math.max(this.sleepTime*2,VO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=Ck(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,pa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const o=Ik(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(o,pa,n,i);this._request=c,c.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=DE*this._chunkMultiplier,n=new gd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((o,c)=>{let u;try{u=Dk(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const p=this._ref.storage._makeRequest(u,pa,o,c,!1);this._request=p,p.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){DE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=wk(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(i,pa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=Nk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,pa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Vw(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=gp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,o){const c=new jk(n||void 0,i||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(gp(this._state)){case vn.SUCCESS:So(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:const n=this._reject;So(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gp(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&So(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&So(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&So(e.error.bind(e,this._error))();break;default:e.error&&So(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class Sa{constructor(e,n){this._service=e,n instanceof kn?this._location=n:this._location=kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sa(e,n)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gw(this._location.path)}get storage(){return this._service}get parent(){const e=gk(this._location.path);if(e===null)return null;const n=new kn(this._location.bucket,e);return new Sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YO(e)}}function Vk(s,e,n){return s._throwIfRoot("uploadBytesResumable"),new Mk(s,new yi(e),n)}function Uk(s){s._throwIfRoot("getDownloadURL");const e=Ak(s.storage,s._location,Kw());return s.storage.makeRequestWithTokens(e,pa).then(n=>{if(n===null)throw KO();return n})}function Lk(s){s._throwIfRoot("deleteObject");const e=Sk(s.storage,s._location);return s.storage.makeRequestWithTokens(e,pa)}function Pk(s,e){const n=yk(s._location.path,e),i=new kn(s._location.bucket,n);return new Sa(s.storage,i)}function zk(s){return/^[A-Za-z]+:\/\//.test(s)}function Bk(s,e){return new Sa(s,e)}function Xw(s,e){if(s instanceof cy){const n=s;if(n._bucket==null)throw FO();const i=new Sa(n,n._bucket);return e!=null?Xw(i,e):i}else return e!==void 0?Pk(s,e):s}function qk(s,e){if(e&&zk(e)){if(s instanceof cy)return Bk(s,e);throw Qp("To use ref(service, url), the first argument must be a Storage instance.")}else return Xw(s,e)}function jE(s,e){const n=e?.[kw];return n==null?null:kn.makeFromBucketSpec(n,s)}function Hk(s,e,n,i={}){s.host=`${e}:${n}`;const o=ji(e);o&&(sg(`https://${s.host}/b`),rg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=i;c&&(s._overrideAuthToken=typeof c=="string"?c:dx(c,s.app.options.projectId))}class cy{constructor(e,n,i,o,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=Ow,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kO,this._maxUploadRetryTime=MO,this._requests=new Set,o!=null?this._bucket=kn.makeFromBucketSpec(o,this._host):this._bucket=jE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=jE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sa(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new $O(Lw());{const u=ak(e,this._appId,i,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const OE="@firebase/storage",kE="0.14.0";const Ww="storage";function yp(s,e,n){return s=ot(s),Vk(s,e,n)}function _p(s){return s=ot(s),Uk(s)}function ME(s){return s=ot(s),Lk(s)}function lc(s,e){return s=ot(s),qk(s,e)}function Fk(s=og(),e){s=ot(s);const i=xd(s,Ww).getImmediate({identifier:e}),o=cx("storage");return o&&Gk(i,...o),i}function Gk(s,e,n,i={}){Hk(s,e,n,i)}function Kk(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new cy(n,i,o,e,Ra)}function Qk(){ba(new Ai(Ww,Kk,"PUBLIC").setMultipleInstances(!0)),zs(OE,kE,""),zs(OE,kE,"esm2020")}Qk();const Yk={apiKey:"AIzaSyCoAdmx5m3jPuVg9VdQzBzhSv2GBQGdlyA",authDomain:"dacapo-toolbox.firebaseapp.com",projectId:"dacapo-toolbox",storageBucket:"dacapo-toolbox.firebasestorage.app",messagingSenderId:"544244716086",appId:"1:544244716086:web:1bff2cc13a3f95cf063e97"},uy=px(Yk),di=v2(uy),yt=gO(uy),cc=Fk(uy),$k="kevlimpens@gmail.com",Ge={USER:"user",ADMIN:"admin",SUPERVISOR:"supervisor"},Xk={CREDITS_VIEW_OWN:[Ge.USER,Ge.ADMIN,Ge.SUPERVISOR],CREDITS_VIEW_ALL:[Ge.ADMIN,Ge.SUPERVISOR],CREDITS_MODIFY:[Ge.SUPERVISOR],ADMIN_DASHBOARD:[Ge.ADMIN,Ge.SUPERVISOR],MANAGE_TOOLS:[Ge.ADMIN,Ge.SUPERVISOR],MANAGE_LABELS:[Ge.ADMIN,Ge.SUPERVISOR],VIEW_STATS:[Ge.ADMIN,Ge.SUPERVISOR]},Wk=["kevlimpens@gmail.com"],Jk=["kevlimpens@gmail.com"];function Zk(s,e){const n=Xk[e];return n?n.includes(s):!1}function e4(s){const e=s?.toLowerCase();return e?Wk.includes(e)?Ge.SUPERVISOR:Jk.includes(e)?Ge.ADMIN:Ge.USER:Ge.USER}function t4(s,e){return s&&Object.values(Ge).includes(s)?s:e4(e)}const Jw=V.createContext();function n4({children:s}){const[e,n]=V.useState(null),[i,o]=V.useState(null),[c,u]=V.useState(!0),[p,g]=V.useState(null),{setThemeFromPreference:y,getThemePreference:b}=ng(),x=t4(i?.role,e?.email),w=x===Ge.ADMIN||x===Ge.SUPERVISOR,C=x===Ge.SUPERVISOR,N=R=>Zk(x,R);V.useEffect(()=>{const R=oI(di,async A=>{if(n(A),A){const I=un(yt,"users",A.uid),O=await Aa(I);if(O.exists()){const D=O.data();o(D),y(D.themePreference||"light"),await hs(I,{lastLogin:new Date})}else{const D={email:A.email,displayName:A.displayName||A.email?.split("@")[0]||"",photoURL:A.photoURL||"",favorites:[],isAdmin:A.email?.toLowerCase()===$k.toLowerCase(),createdAt:new Date,lastLogin:new Date};await sy(I,D),o(D)}}else o(null);u(!1)});return()=>R()},[]);const U=async(R,A)=>{try{return g(null),(await rI(di,R,A)).user.emailVerified?{success:!0}:{success:!1,message:"Verifieer eerst je email voordat je inlogt.",needsVerification:!0}}catch(I){console.error("Error signing in with email:",I);const O=Vh(I.code);return g(O),{success:!1,message:O}}},M=async(R,A,I="")=>{try{g(null);const O=await sI(di,R,A);if(await y0(O.user),console.log("[Auth] Verification email sent to:",R),I){const D=un(yt,"users",O.user.uid);await hs(D,{displayName:I})}return{success:!0,message:"Account aangemaakt! Controleer je email voor de verificatielink."}}catch(O){console.error("Error registering:",O);const D=Vh(O.code);return g(D),{success:!1,message:D}}},H=async R=>{try{return g(null),await nI(di,R),{success:!0,message:"Wachtwoord reset link is verstuurd naar je email."}}catch(A){console.error("Error sending password reset:",A);const I=Vh(A.code);return g(I),{success:!1,message:I}}},B=async()=>{try{return di.currentUser&&!di.currentUser.emailVerified?(await y0(di.currentUser),{success:!0,message:"Verificatie email opnieuw verstuurd!"}):{success:!1,message:"Geen gebruiker om te verifiren."}}catch(R){return console.error("Error resending verification:",R),{success:!1,message:Vh(R.code)}}},Y=async()=>{try{if(e){const R=un(yt,"users",e.uid);await hs(R,{themePreference:b()})}await lI(di)}catch(R){throw console.error("Error signing out:",R),R}},X=async R=>{if(!e)return;const A=un(yt,"users",e.uid),I=i?.favorites?.includes(R);try{I?(await hs(A,{favorites:DO(R)}),o(O=>({...O,favorites:O.favorites.filter(D=>D!==R)}))):(await hs(A,{favorites:IO(R)}),o(O=>({...O,favorites:[...O.favorites||[],R]})))}catch(O){console.error("Error toggling favorite:",O)}},ie=R=>i?.favorites?.includes(R)||!1,ae=()=>g(null);return f.jsx(Jw.Provider,{value:{user:e,userData:i,loading:c,userRole:x,isAdmin:w,isSupervisor:C,hasPermission:N,authError:p,signInWithEmail:U,registerWithEmail:M,resetPassword:H,resendVerification:B,signOut:Y,toggleFavorite:X,isFavorite:ie,clearError:ae},children:s})}function Zt(){const s=V.useContext(Jw);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}function Vh(s){return{"auth/email-already-in-use":"Dit emailadres is al in gebruik.","auth/invalid-email":"Ongeldig emailadres.","auth/operation-not-allowed":"Deze inlogmethode is niet toegestaan.","auth/weak-password":"Wachtwoord is te zwak. Gebruik minimaal 6 karakters.","auth/user-disabled":"Dit account is uitgeschakeld.","auth/user-not-found":"Geen account gevonden met dit emailadres.","auth/wrong-password":"Onjuist wachtwoord.","auth/invalid-credential":"Ongeldige inloggegevens.","auth/too-many-requests":"Te veel pogingen. Probeer het later opnieuw.","auth/network-request-failed":"Netwerkfout. Controleer je internetverbinding.","auth/popup-closed-by-user":"Login popup gesloten.","auth/cancelled-popup-request":"Login geannuleerd."}[s]||"Er ging iets mis. Probeer het opnieuw."}function Oa(){const[s,e]=V.useState([]),[n,i]=V.useState(!0),[o,c]=V.useState(null);V.useEffect(()=>{const C=Nw(Ti(yt,"tools"),Cw("name")),N=CO(C,U=>{const M=U.docs.map(H=>({id:H.id,...H.data()}));e(M),i(!1)},U=>{console.error("Error fetching tools:",U),c(U),i(!1)});return()=>N()},[]);const u=s.filter(C=>C.isActive!==!1);return{tools:s,activeTools:u,loading:n,error:o,addTool:async C=>{try{return(await RE(Ti(yt,"tools"),{...C,slug:C.slug||"",shortDescription:C.shortDescription||C.description||"",fullDescription:C.fullDescription||"",tags:C.tags||[],status:C.status||"draft",isActive:!0,clickCount:0,favoriteCount:0,createdAt:Ao(),updatedAt:Ao()})).id}catch(N){throw console.error("Error adding tool:",N),N}},updateTool:async(C,N)=>{try{const U=un(yt,"tools",C);await hs(U,{...N,updatedAt:Ao()})}catch(U){throw console.error("Error updating tool:",U),U}},deleteTool:async C=>{try{await NO(un(yt,"tools",C))}catch(N){throw console.error("Error deleting tool:",N),N}},updateFavoriteCount:async(C,N)=>{try{const U=un(yt,"tools",C);await hs(U,{favoriteCount:NE(N)})}catch(U){console.error("Error updating favorite count:",U)}},trackToolClick:async(C,N="anonymous")=>{try{const U=un(yt,"tools",C);await hs(U,{clickCount:NE(1),lastClickedAt:Ao()}),await RE(Ti(yt,"toolClicks"),{toolId:C,userId:N,clickedAt:Ao()}),console.log("[Tools] Click tracked for tool:",C)}catch(U){console.error("Error tracking tool click:",U)}},toggleToolActive:async(C,N)=>{try{const U=un(yt,"tools",C);await hs(U,{isActive:N,updatedAt:Ao()})}catch(U){throw console.error("Error toggling tool active status:",U),U}}}}const Vc=[{id:"lesgeven",name:"Lesgeven",icon:"school",color:"#2860E0"},{id:"toetsing",name:"Toetsing",icon:"quiz",color:"#22C55E"},{id:"leerlingbegeleiding",name:"Leerlingbegeleiding",icon:"support",color:"#A855F7"},{id:"administratie",name:"Administratie",icon:"folder",color:"#F97316"},{id:"planning",name:"Planning",icon:"calendar_month",color:"#14B8A6"},{id:"communicatie",name:"Communicatie",icon:"chat",color:"#EC4899"},{id:"ai-automatisering",name:"AI & Automatisering",icon:"smart_toy",color:"#6366F1"},{id:"overig",name:"Overig",icon:"more_horiz",color:"#6B7280"}],gr={id:"extern",name:"Extern",icon:"open_in_new",color:"#EF4444"},hy=[...Vc,gr];function s4(s){return hy.find(e=>e.id===s)}function dy(s){return s?.includes("extern")||!1}function Tc(s){return!s||s.length===0?null:s.find(e=>e!=="extern")||null}function Zw(s){const e=Tc(s);return e?s4(e):null}function r4(s){if(!s||s.length===0)return{valid:!1,error:"Een primair label is verplicht"};const e=Tc(s);return e?Vc.map(i=>i.id).includes(e)?s.length>2?{valid:!1,error:"Maximaal 2 labels toegestaan"}:s.length===2&&!s.includes("extern")?{valid:!1,error:"Alleen primair label + Extern toegestaan"}:{valid:!0}:{valid:!1,error:"Ongeldig primair label"}:{valid:!1,error:"Een primair label is verplicht (niet alleen Extern)"}}function eA(){return{labels:hy,loading:!1,error:null,addLabel:async()=>{console.warn("Labels are now read-only")},updateLabel:async()=>{console.warn("Labels are now read-only")},deleteLabel:async()=>{console.warn("Labels are now read-only")}}}function i4({isOpen:s,onClose:e}){const{signInWithEmail:n,registerWithEmail:i,resetPassword:o,authError:c,clearError:u}=Zt(),[p,g]=V.useState("login"),[y,b]=V.useState(""),[x,w]=V.useState(""),[C,N]=V.useState(""),[U,M]=V.useState(""),[H,B]=V.useState(!1),[Y,X]=V.useState(null);if(!s)return null;const ie=()=>{g("login"),b(""),w(""),N(""),M(""),X(null),u(),e()},ae=async O=>{if(O.preventDefault(),!y||!x){X({type:"error",text:"Vul alle velden in."});return}B(!0),X(null);const D=await n(y,x);B(!1),D.success?ie():D.needsVerification?X({type:"warning",text:D.message}):X({type:"error",text:D.message})},R=async O=>{if(O.preventDefault(),!y||!x||!C){X({type:"error",text:"Vul alle velden in."});return}if(x!==C){X({type:"error",text:"Wachtwoorden komen niet overeen."});return}if(x.length<6){X({type:"error",text:"Wachtwoord moet minimaal 6 karakters zijn."});return}B(!0),X(null);const D=await i(y,x,U);B(!1),D.success?X({type:"success",text:D.message}):X({type:"error",text:D.message})},A=async O=>{if(O.preventDefault(),!y){X({type:"error",text:"Voer je emailadres in."});return}B(!0),X(null);const D=await o(y);B(!1),D.success?X({type:"success",text:D.message}):X({type:"error",text:D.message})},I=O=>{g(O),X(null),u()};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:f.jsxs("div",{className:"relative w-full max-w-md bg-card rounded-2xl border border-theme shadow-xl overflow-hidden",children:[f.jsx("button",{onClick:ie,className:"absolute top-4 right-4 size-10 flex items-center justify-center rounded-full hover:bg-gray-500/10 transition-colors z-10",children:f.jsx("span",{className:"material-symbols-outlined",children:"close"})}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6",children:[f.jsx("div",{className:"size-14 bg-[#2860E0] rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg mb-3",children:"DC"}),f.jsxs("h2",{className:"text-xl font-bold",children:[p==="login"&&"Inloggen",p==="register"&&"Account aanmaken",p==="forgot"&&"Wachtwoord vergeten"]})]}),(Y||c)&&f.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${Y?.type==="success"?"bg-green-500/10 border border-green-500 text-green-600 dark:text-green-400":Y?.type==="warning"?"bg-yellow-500/10 border border-yellow-500 text-yellow-600 dark:text-yellow-400":"bg-red-500/10 border border-red-500 text-red-600 dark:text-red-400"}`,children:Y?.text||c}),p==="login"&&f.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),f.jsx("input",{type:"email",id:"email",value:y,onChange:O=>b(O.target.value),placeholder:"naam@dacapocollege.nl",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Wachtwoord"}),f.jsx("input",{type:"password",id:"password",value:x,onChange:O=>w(O.target.value),placeholder:"",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsx("button",{type:"button",onClick:()=>I("forgot"),className:"text-sm text-[#2860E0] hover:underline",children:"Wachtwoord vergeten?"}),f.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Inloggen"})]}),p==="register"&&f.jsxs("form",{onSubmit:R,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium mb-1",children:"Naam (optioneel)"}),f.jsx("input",{type:"text",id:"displayName",value:U,onChange:O=>M(O.target.value),placeholder:"Je naam",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"regEmail",className:"block text-sm font-medium mb-1",children:"Email *"}),f.jsx("input",{type:"email",id:"regEmail",value:y,onChange:O=>b(O.target.value),placeholder:"naam@dacapocollege.nl",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"regPassword",className:"block text-sm font-medium mb-1",children:"Wachtwoord *"}),f.jsx("input",{type:"password",id:"regPassword",value:x,onChange:O=>w(O.target.value),placeholder:"Minimaal 6 karakters",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-1",children:"Bevestig wachtwoord *"}),f.jsx("input",{type:"password",id:"confirmPassword",value:C,onChange:O=>N(O.target.value),placeholder:"Herhaal wachtwoord",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Registreren"})]}),p==="forgot"&&f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-secondary mb-4",children:"Voer je emailadres in en we sturen je een link om je wachtwoord te resetten."}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"forgotEmail",className:"block text-sm font-medium mb-1",children:"Email"}),f.jsx("input",{type:"email",id:"forgotEmail",value:y,onChange:O=>b(O.target.value),placeholder:"naam@dacapocollege.nl",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),f.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Verstuur reset link"}),f.jsx("button",{type:"button",onClick:()=>I("login"),className:"w-full text-sm text-[#2860E0] hover:underline",children:" Terug naar inloggen"})]}),p!=="forgot"&&f.jsx("p",{className:"text-center text-sm mt-6",children:p==="login"?f.jsxs(f.Fragment,{children:["Nog geen account?"," ",f.jsx("button",{onClick:()=>I("register"),className:"text-[#2860E0] font-medium hover:underline",children:"Registreer"})]}):f.jsxs(f.Fragment,{children:["Heb je al een account?"," ",f.jsx("button",{onClick:()=>I("login"),className:"text-[#2860E0] font-medium hover:underline",children:"Inloggen"})]})})]})]})})}function a4({onSearchClick:s}){const{isDarkMode:e,toggleTheme:n}=ng(),{user:i,userData:o,userRole:c,signOut:u}=Zt(),[p,g]=V.useState(!1);return f.jsxs(f.Fragment,{children:[f.jsx("header",{className:"sticky top-0 z-50 w-full bg-card/95 backdrop-blur-md border-b border-theme shadow-sm transition-colors duration-200",children:f.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[f.jsxs(ds,{to:"/",className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-9 bg-[#2860E0] rounded-lg flex items-center justify-center text-white font-bold shadow-sm",children:"DC"}),f.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"DaCapo Tools"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:s,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-500/10 transition-colors","aria-label":"Zoeken",children:f.jsx("span",{className:"material-symbols-outlined",children:"search"})}),f.jsx("button",{onClick:n,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-500/10 transition-colors","aria-label":e?"Schakel naar light mode":"Schakel naar dark mode",children:f.jsx("span",{className:"material-symbols-outlined",children:e?"light_mode":"dark_mode"})}),c&&c!=="user"&&f.jsxs(ds,{to:"/admin",className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-amber-500 text-white hover:bg-amber-600 transition-colors font-bold","aria-label":"Admin Dashboard",children:[f.jsx("span",{className:"material-symbols-outlined",children:"admin_panel_settings"}),f.jsx("span",{children:"ADMIN"})]}),i?f.jsxs("div",{className:"relative group",children:[f.jsx("button",{className:"size-9 rounded-full bg-[#2860E0] flex items-center justify-center text-white font-semibold text-sm border border-theme shadow-sm overflow-hidden",children:i.photoURL?f.jsx("img",{src:i.photoURL,alt:i.displayName||"Profiel",className:"w-full h-full object-cover"}):f.jsx("span",{children:(o?.displayName||i.email||"?").charAt(0).toUpperCase()})}),f.jsxs("div",{className:"absolute right-0 mt-2 w-48 max-w-[90vw] bg-card border border-theme rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 overflow-hidden",children:[f.jsxs("div",{className:"p-3 border-b border-theme",children:[f.jsx("p",{className:"font-medium truncate",children:o?.displayName||i.displayName||i.email?.split("@")[0]}),f.jsx("p",{className:"text-sm text-secondary truncate",children:i.email})]}),f.jsxs("button",{onClick:u,className:"w-full px-3 py-2 text-left hover:bg-gray-500/10 transition-colors flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"}),"Uitloggen"]})]})]}):f.jsx("button",{onClick:()=>g(!0),className:"flex items-center justify-center size-9 rounded-full bg-[#2860E0] text-white hover:bg-[#1C4DAB] transition-colors shadow-sm","aria-label":"Inloggen",children:f.jsx("span",{className:"material-symbols-outlined text-xl",children:"login"})})]})]})}),f.jsx(i4,{isOpen:p,onClose:()=>g(!1)})]})}function o4({value:s,onChange:e,placeholder:n="Zoek tools..."}){return f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-secondary",children:"search"}),f.jsx("input",{type:"text",value:s,onChange:i=>e(i.target.value),placeholder:n,className:"w-full h-11 pl-10 pr-4 rounded-lg border border-theme bg-card text-inherit placeholder:text-secondary focus:outline-none focus:ring-2 focus:ring-[#2860E0] focus:border-transparent transition-shadow"}),s&&f.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-secondary hover:text-inherit transition-colors","aria-label":"Wis zoekopdracht",children:f.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]})}function l4({labels:s,selectedLabels:e,onToggleLabel:n}){return f.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:[f.jsxs("button",{onClick:()=>n(null),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full pl-3 pr-4 shadow-sm transition-all ${e.length===0?"bg-[#2860E0] text-white":"bg-card text-inherit border border-theme hover:bg-gray-500/10"}`,children:[f.jsx("span",{className:"material-symbols-outlined text-lg",children:"apps"}),f.jsx("span",{className:"text-sm font-semibold",children:"Alles"})]}),s.map(i=>{const o=e.includes(i.id);return f.jsxs("button",{onClick:()=>n(i.id),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full pl-3 pr-4 shadow-sm transition-all ${o?"bg-[#2860E0] text-white":"bg-card text-inherit border border-theme hover:bg-gray-500/10"}`,children:[i.icon&&f.jsx("span",{className:"material-symbols-outlined text-lg",children:i.icon}),f.jsx("span",{className:"text-sm font-medium",children:i.name})]},i.id)})]})}function c4({tool:s}){const e=vd(),{user:n,isFavorite:i,toggleFavorite:o}=Zt(),{updateFavoriteCount:c,trackToolClick:u}=Oa(),p=V.useRef(null),g=V.useRef(null),[y,b]=V.useState(!1),[x,w]=V.useState(0),C=i(s.id),N=Zw(s.labels),U=dy(s.labels);V.useEffect(()=>{const Y=()=>{if(p.current&&g.current){const ie=p.current.scrollHeight,ae=g.current.clientHeight,R=ie-ae;w(Math.max(0,R))}},X=setTimeout(Y,100);return window.addEventListener("resize",Y),()=>{clearTimeout(X),window.removeEventListener("resize",Y)}},[s.shortDescription,s.description]);const M=async Y=>{Y.preventDefault(),Y.stopPropagation(),n&&(await o(s.id),await c(s.id,C?-1:1))},H=async()=>{const Y=n?.uid||"anonymous";if(await u(s.id,Y),U){const X=s.externalUrl||s.url;X&&window.open(X,"_blank","noopener,noreferrer")}else{const X=s.internalRoute||s.url||`/app/${s.id}`;e(X)}},B=s.shortDescription||s.description||"Geen beschrijving beschikbaar";return f.jsxs("div",{className:"group bg-card rounded-xl shadow-sm border border-theme overflow-hidden hover:shadow-lg hover:border-[#2860E0]/50 transition-all duration-300 cursor-pointer flex flex-col",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:H,children:[f.jsxs("div",{className:"w-full aspect-[16/9] relative overflow-hidden bg-gray-100 dark:bg-gray-700",children:[s.imageUrl?f.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400",children:"apps"})}),U&&f.jsx("div",{className:"absolute top-2 left-2 size-8 bg-black/50 backdrop-blur-sm rounded-lg flex items-center justify-center text-white",title:"Opent in een nieuw tabblad",children:f.jsx("span",{className:"material-symbols-outlined text-lg",children:"open_in_new"})}),n&&f.jsx("button",{onClick:M,className:`absolute top-2 right-2 p-2 rounded-full bg-white/90 dark:bg-gray-800/90 shadow-sm transition-all ${C?"text-red-500":"text-gray-400 hover:text-red-500"}`,"aria-label":C?"Verwijder uit favorieten":"Voeg toe aan favorieten",children:f.jsx("span",{className:"material-symbols-outlined text-xl",style:C?{fontVariationSettings:"'FILL' 1"}:{},children:"favorite"})})]}),f.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[f.jsx("h3",{className:"font-semibold text-base mb-1 line-clamp-1 group-hover:text-[#2860E0] transition-colors",children:s.name}),f.jsx("div",{ref:g,className:"h-[3.75rem] overflow-hidden mb-4 flex-1",style:{maxHeight:"3.75rem"},children:f.jsx("p",{ref:p,className:"text-sm text-secondary transition-transform ease-linear",style:{transform:y&&x>0?`translateY(-${x}px)`:"translateY(0)",transitionDuration:y?`${Math.max(2,x*30)}ms`:"300ms"},children:B})}),f.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-theme",children:[N?f.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full text-white font-medium",style:{backgroundColor:N.color},children:[f.jsx("span",{className:"material-symbols-outlined text-[10px]",children:N.icon}),N.name]}):f.jsx("span",{}),f.jsx("span",{className:`material-symbols-outlined text-[#2860E0] transform transition-transform duration-300 ${y?"translate-x-1":""}`,children:U?"open_in_new":"arrow_forward"})]})]})]})}function u4({tools:s}){const{userData:e}=Zt(),n=s.filter(i=>e?.favorites?.includes(i.id));return n.length===0?null:f.jsxs("section",{className:"mt-6 px-4",children:[f.jsx("h2",{className:"text-xl font-bold tracking-tight mb-3",children:"Jouw favorieten"}),f.jsx("div",{className:"flex overflow-x-auto no-scrollbar pb-4 gap-3 snap-x snap-mandatory",children:n.map(i=>f.jsx(h4,{tool:i},i.id))})]})}function h4({tool:s}){const e=()=>{s.link&&window.open(s.link,"_blank","noopener,noreferrer")},n=()=>{const i=["text-blue-600","text-purple-600","text-green-600","text-orange-600","text-pink-600","text-cyan-600"],o=s.name.charCodeAt(0)%i.length;return i[o]};return f.jsxs("button",{onClick:e,className:"snap-start shrink-0 size-20 rounded-xl bg-card shadow-sm border border-theme flex flex-col items-center justify-center p-2 text-center hover:shadow-md transition-all duration-300",children:[s.imageUrl?f.jsx("div",{className:"size-10 rounded-md bg-cover bg-center",style:{backgroundImage:`url('${s.imageUrl}')`}}):f.jsx("span",{className:`material-symbols-outlined text-3xl ${n()}`,children:s.icon||"apps"}),f.jsx("p",{className:"text-sm font-medium mt-1 text-secondary truncate w-full px-1",children:s.name})]})}function d4(){const{user:s,userData:e}=Zt(),{activeTools:n,loading:i}=Oa(),{labels:o,loading:c}=eA(),[u,p]=V.useState(""),[g,y]=V.useState([]),[b,x]=V.useState(!1),w=U=>{y(U===null?[]:M=>M.includes(U)?M.filter(H=>H!==U):[...M,U])},C=V.useMemo(()=>n.filter(M=>M.status==="published"||!M.status).filter(M=>{if(u){const H=u.toLowerCase(),B=M.name?.toLowerCase().includes(H),Y=M.description?.toLowerCase().includes(H),X=M.shortDescription?.toLowerCase().includes(H);if(!B&&!Y&&!X)return!1}return!(g.length>0&&!M.labels?.some(B=>g.includes(B)))}),[n,u,g]),N=i||c;return f.jsxs("div",{className:"min-h-screen flex flex-col",children:[f.jsx(a4,{onSearchClick:()=>x(U=>!U)}),f.jsxs("main",{className:"flex-1 w-full pb-8",children:[b&&f.jsx("div",{className:"px-4 pt-4",children:f.jsx(o4,{value:u,onChange:p,placeholder:"Zoek op naam of beschrijving..."})}),s&&e?.favorites?.length>0&&f.jsx(u4,{tools:n}),f.jsxs("section",{className:"mt-4",children:[f.jsxs("div",{className:"px-4 mb-3 flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Alle Tools"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"flex items-center justify-center size-9 rounded-full bg-card border border-theme hover:bg-gray-500/10 transition-colors",children:f.jsx("span",{className:"material-symbols-outlined text-xl",children:"sort"})}),f.jsx("button",{onClick:()=>x(U=>!U),className:`flex items-center justify-center size-9 rounded-full border transition-colors ${b?"bg-[#2860E0] text-white border-[#2860E0]":"bg-card border-theme hover:bg-gray-500/10"}`,children:f.jsx("span",{className:"material-symbols-outlined text-xl",children:"filter_alt"})})]})]}),f.jsx("div",{className:"px-4 pb-4",children:f.jsx(l4,{labels:o,selectedLabels:g,onToggleLabel:w})}),f.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 px-4 pb-24",children:N?[...Array(8)].map((U,M)=>f.jsxs("div",{className:"bg-card rounded-lg border border-theme overflow-hidden animate-pulse",children:[f.jsx("div",{className:"w-full h-20 bg-gray-200 dark:bg-gray-700"}),f.jsxs("div",{className:"p-3",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),f.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-3 w-full"}),f.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-full"})]})]},M)):C.length===0?f.jsxs("div",{className:"col-span-full text-center py-12 text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"search_off"}),f.jsx("p",{children:"Geen tools gevonden"}),u&&f.jsx("button",{onClick:()=>p(""),className:"mt-2 text-[#2860E0] hover:underline",children:"Wis zoekopdracht"})]}):C.map(U=>f.jsx(c4,{tool:U},U.id))})]})]})]})}const f4=[{label:"Overzicht",path:"/admin",icon:"dashboard",end:!0},{label:"Tools",path:"/admin/tools",icon:"construction"},{label:"Gebruikers",path:"/admin/users",icon:"group"},{label:"Credits",path:"/admin/credits",icon:"payments"},{label:"Kosten",path:"/admin/costs",icon:"euro"},{label:"Labels & Metadata",path:"/admin/labels",icon:"label"},{label:"Rapportages",path:"/admin/reports",icon:"description"},{label:"Nieuwsbrief Analytics",path:"/admin/analytics/nieuwsbrief",icon:"mail"}];function m4(){const{userRole:s,isSupervisor:e,userData:n}=Zt();return f.jsxs("aside",{className:"w-48 md:w-64 bg-card border-r border-theme flex flex-col shrink-0 hidden sm:flex",children:[f.jsx("div",{className:"p-4 border-b border-theme",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-10 bg-amber-500 rounded-lg flex items-center justify-center text-white",children:f.jsx("span",{className:"material-symbols-outlined",children:"admin_panel_settings"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"font-bold text-lg",children:"Admin"}),f.jsx("p",{className:"text-xs text-secondary",children:"DaCapo Tools"})]})]})}),f.jsxs("div",{className:"px-4 py-3 border-b border-theme",children:[f.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${e?"bg-purple-500/10 text-purple-600 dark:text-purple-400":"bg-blue-500/10 text-blue-600 dark:text-blue-400"}`,children:[f.jsx("span",{className:"material-symbols-outlined text-sm",children:e?"shield_person":"verified_user"}),e?"Supervisor":"Admin"]}),!e&&f.jsx("p",{className:"text-xs text-secondary mt-2",children:"Alleen-lezen toegang"})]}),f.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:f4.map(i=>f.jsxs(nx,{to:i.path,end:i.end,className:({isActive:o})=>`
                            flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors
                            ${o?"bg-[#2860E0] text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:i.icon}),f.jsx("span",{className:"font-medium",children:i.label})]},i.path))}),f.jsx("div",{className:"p-4 border-t border-theme",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-9 rounded-full bg-[#2860E0] flex items-center justify-center text-white text-sm font-medium",children:(n?.displayName||n?.email||"?").charAt(0).toUpperCase()}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium truncate",children:n?.displayName||"Gebruiker"}),f.jsx("p",{className:"text-xs text-secondary truncate",children:n?.email})]})]})})]})}const VE={"/admin":"Overzicht","/admin/tools":"Tools","/admin/tools/new":"Nieuwe Tool","/admin/users":"Gebruikers","/admin/credits":"Credits","/admin/costs":"Kosten","/admin/labels":"Labels & Metadata","/admin/reports":"Rapportages"};function p4(){const{isDarkMode:s,toggleTheme:e}=ng(),n=Ys(),i=()=>VE[n.pathname]?VE[n.pathname]:n.pathname.startsWith("/admin/tools/")?"Tool Bewerken":"Admin Dashboard";return f.jsx("header",{className:"sticky top-0 z-40 bg-card/95 backdrop-blur-md border-b border-theme",children:f.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(ds,{to:"/",className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Terug naar App",children:f.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-lg font-bold",children:i()}),f.jsx("p",{className:"text-xs text-secondary",children:"Admin Dashboard"})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:e,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":s?"Schakel naar light mode":"Schakel naar dark mode",children:f.jsx("span",{className:"material-symbols-outlined",children:s?"light_mode":"dark_mode"})})})]})})}function g4(){const{user:s,userRole:e,loading:n}=Zt(),i=Ys();return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"}),f.jsx("p",{className:"mt-2 text-secondary",children:"Laden..."})]})}):s?e==="user"?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:f.jsxs("div",{className:"text-center max-w-md px-4",children:[f.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500",children:"block"}),f.jsx("h1",{className:"text-2xl font-bold mt-4",children:"Geen toegang"}),f.jsx("p",{className:"text-secondary mt-2",children:"Je hebt geen rechten om het admin dashboard te bekijken."}),f.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 mt-6 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"home"}),"Terug naar home"]})]})}):f.jsxs("div",{className:"min-h-screen flex bg-gray-50 dark:bg-gray-900",children:[f.jsx(m4,{}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[f.jsx(p4,{}),f.jsx("main",{className:"flex-1 p-6 overflow-auto",children:f.jsx(zR,{})})]})]}):f.jsx(PR,{to:"/",state:{from:i},replace:!0})}const wi={paco:{appId:"paco",appName:"Paco Generator",monthlyLimit:50,creditUnit:"afbeelding",creditUnitPlural:"afbeeldingen",description:"Genereer afbeeldingen met AI"},translate:{appId:"translate",appName:"Vertaler",monthlyLimit:1e3,creditUnit:"woord",creditUnitPlural:"woorden",description:"Vertaal teksten naar andere talen"}};function yd(s){return wi[s]||null}function Uc(){return Object.keys(wi)}function y4(s){const e=yd(s);return e?{creditsRemaining:e.monthlyLimit,monthlyLimit:e.monthlyLimit,totalUsedThisMonth:0,lastResetAt:new Date,createdAt:new Date}:null}function _4(){const{isSupervisor:s}=Zt(),{tools:e,loading:n}=Oa(),i=Uc(),o=V.useMemo(()=>{const u=e.filter(b=>b.isActive!==!1),p=e.filter(b=>b.status==="published"),g=e.reduce((b,x)=>b+(x.clickCount||0),0),y=e.reduce((b,x)=>b+(x.favoriteCount||0),0);return{totalTools:e.length,activeTools:u.length,publishedTools:p.length,totalClicks:g,totalFavorites:y,totalApps:i.length}},[e,i]),c=V.useMemo(()=>{const u=[],p=e.filter(b=>!b.imageUrl);p.length>0&&u.push({type:"warning",icon:"image_not_supported",message:`${p.length} tool(s) zonder afbeelding`,link:"/admin/tools"});const g=e.filter(b=>b.status==="draft");g.length>0&&u.push({type:"info",icon:"edit_note",message:`${g.length} tool(s) in concept`,link:"/admin/tools"});const y=e.filter(b=>b.isActive===!1);return y.length>0&&u.push({type:"info",icon:"visibility_off",message:`${y.length} tool(s) inactief`,link:"/admin/tools"}),u},[e]);return n?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Welkom terug! "}),f.jsx("p",{className:"text-secondary mt-1",children:"Hier is het overzicht van je DaCapo Tools platform."})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"construction"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:o.totalTools}),f.jsx("p",{className:"text-sm text-secondary",children:"Totaal Tools"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-green-500",children:"check_circle"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:o.publishedTools}),f.jsx("p",{className:"text-sm text-secondary",children:"Gepubliceerd"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"touch_app"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:o.totalClicks}),f.jsx("p",{className:"text-sm text-secondary",children:"Totaal Clicks"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-red-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-red-500 filled",children:"favorite"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),f.jsx("p",{className:"text-sm text-secondary",children:"Favorieten"})]})]})})]}),s&&f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Snelle Acties"}),f.jsxs("div",{className:"flex flex-wrap gap-3",children:[f.jsxs(ds,{to:"/admin/tools/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"Nieuwe Tool"]}),f.jsxs(ds,{to:"/admin/labels",className:"inline-flex items-center gap-2 px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"label"}),"Labels Beheren"]}),f.jsxs(ds,{to:"/admin/users",className:"inline-flex items-center gap-2 px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"group"}),"Gebruikers"]})]})]}),c.length>0&&f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"notifications"}),"Aandachtspunten"]}),f.jsx("div",{className:"space-y-3",children:c.map((u,p)=>f.jsxs(ds,{to:u.link,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${u.type==="warning"?"bg-amber-500/10 hover:bg-amber-500/20":"bg-blue-500/10 hover:bg-blue-500/20"}`,children:[f.jsx("span",{className:`material-symbols-outlined ${u.type==="warning"?"text-amber-500":"text-blue-500"}`,children:u.icon}),f.jsx("span",{className:"flex-1",children:u.message}),f.jsx("span",{className:"material-symbols-outlined text-secondary",children:"chevron_right"})]},p))})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Gebruik per Tool"}),f.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:f.jsxs("div",{className:"text-center text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"bar_chart"}),f.jsx("p",{className:"text-sm",children:"Grafiek komt binnenkort"})]})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Credits Overzicht"}),f.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:f.jsxs("div",{className:"text-center text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"pie_chart"}),f.jsx("p",{className:"text-sm",children:"Grafiek komt binnenkort"})]})})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Geregistreerde Apps"}),f.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4",children:i.map(u=>{const p=wi[u];return f.jsxs("div",{className:"p-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800/50",children:[f.jsx("h4",{className:"font-medium",children:p.appName}),f.jsx("p",{className:"text-sm text-secondary mt-1",children:p.description}),f.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-sm",children:"payments"}),p.monthlyLimit," ",p.creditUnitPlural,"/maand"]})]},u)})})]})]})}function v4(){const{isSupervisor:s}=Zt(),{tools:e,deleteTool:n,loading:i}=Oa(),{labels:o}=eA(),[c,u]=V.useState(null),[p,g]=V.useState("all"),y=async N=>{await n(N),u(null)},b=N=>o.find(M=>M.id===N)?.name||N,x=N=>o.find(M=>M.id===N)?.color||"#2860E0",w=e.filter(N=>p==="all"?!0:p==="published"?N.status==="published":p==="draft"?N.status==="draft"||!N.status:p==="inactive"?N.isActive===!1:!0),C={all:e.length,published:e.filter(N=>N.status==="published").length,draft:e.filter(N=>N.status==="draft"||!N.status).length,inactive:e.filter(N=>N.isActive===!1).length};return i?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Tools"}),f.jsx("p",{className:"text-secondary mt-1",children:"Beheer alle tools in het platform"})]}),s&&f.jsxs(ds,{to:"/admin/tools/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"Nieuwe Tool"]})]}),f.jsx("div",{className:"flex gap-2 border-b border-theme pb-4",children:[{key:"all",label:"Alles",count:C.all},{key:"published",label:"Gepubliceerd",count:C.published},{key:"draft",label:"Concept",count:C.draft},{key:"inactive",label:"Inactief",count:C.inactive}].map(N=>f.jsxs("button",{onClick:()=>g(N.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===N.key?"bg-[#2860E0] text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[N.label,f.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${p===N.key?"bg-white/20":"bg-gray-200 dark:bg-gray-700"}`,children:N.count})]},N.key))}),f.jsx("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Tool"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Status"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Labels"}),f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Clicks"}),f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:f.jsx("span",{className:"material-symbols-outlined text-lg",children:"favorite"})}),s&&f.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),f.jsx("tbody",{children:w.length===0?f.jsx("tr",{children:f.jsxs("td",{colSpan:s?6:5,className:"px-4 py-12 text-center text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"inventory_2"}),f.jsx("p",{children:"Geen tools gevonden"})]})}):w.map(N=>f.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-cover bg-center border border-theme bg-gray-100 dark:bg-gray-700 flex items-center justify-center shrink-0",style:N.imageUrl?{backgroundImage:`url('${N.imageUrl}')`}:{},children:!N.imageUrl&&f.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"apps"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:N.name}),f.jsx("p",{className:"text-sm text-secondary truncate max-w-xs",children:N.shortDescription||N.description})]})]})}),f.jsx("td",{className:"px-4 py-3",children:f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${N.status==="published"?"bg-green-500/10 text-green-600":N.isActive===!1?"bg-gray-500/10 text-gray-600":"bg-yellow-500/10 text-yellow-600"}`,children:[f.jsx("span",{className:`size-2 rounded-full ${N.status==="published"?"bg-green-500":N.isActive===!1?"bg-gray-500":"bg-yellow-500"}`}),N.status==="published"?"Gepubliceerd":N.isActive===!1?"Inactief":"Concept"]})}),f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{className:"flex flex-wrap gap-1",children:[N.labels?.slice(0,3).map(U=>f.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${x(U)}20`,color:x(U)},children:b(U)},U)),N.labels?.length>3&&f.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-200 dark:bg-gray-700",children:["+",N.labels.length-3]})]})}),f.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:N.clickCount||0}),f.jsx("td",{className:"px-4 py-3 text-center",children:f.jsxs("span",{className:"inline-flex items-center gap-1 text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-red-500 text-sm filled",children:"favorite"}),N.favoriteCount||0]})}),s&&f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-end gap-1",children:[f.jsx(ds,{to:`/admin/tools/${N.id}`,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Bewerken",children:f.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),c===N.id?f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>y(N.id),className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Bevestig verwijderen",children:f.jsx("span",{className:"material-symbols-outlined",children:"check"})}),f.jsx("button",{onClick:()=>u(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Annuleren",children:f.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}):f.jsx("button",{onClick:()=>u(N.id),className:"p-2 rounded-lg hover:bg-red-500/10 text-red-500 transition-colors",title:"Verwijderen",children:f.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})})]},N.id))})]})})]})}function b4(){const[s,e]=V.useState(!1),[n,i]=V.useState(0),[o,c]=V.useState(null),u=async(C,N="tools")=>{if(!C)throw new Error("No file provided");if(!C.type.startsWith("image/"))throw new Error("File must be an image");const U=5*1024*1024;if(C.size>U)throw new Error("File size must be less than 5MB");e(!0),i(0),c(null);try{const M=Date.now(),H=C.name.replace(/[^a-zA-Z0-9.]/g,"_"),B=`${N}/${M}_${H}`,Y=lc(cc,B),X=yp(Y,C);return new Promise((ie,ae)=>{X.on("state_changed",R=>{const A=R.bytesTransferred/R.totalBytes*100;i(Math.round(A))},R=>{console.error("Upload error:",R),c(R.message),e(!1),ae(R)},async()=>{const R=await _p(X.snapshot.ref);e(!1),i(100),console.log("[Storage] Image uploaded:",R),ie(R)})})}catch(M){throw console.error("Upload error:",M),c(M.message),e(!1),M}},p=async(C,N)=>{if(!C)throw new Error("No file provided");if(!N)throw new Error("Tool slug is required");if(!(C.type?.startsWith("image/")||C instanceof Blob))throw new Error("File must be an image");const M=5*1024*1024;if(C.size>M)throw new Error("File size must be less than 5MB");e(!0),i(0),c(null);try{const H=`tool-images/${N}/header.png`,B=lc(cc,H),Y=yp(B,C);return new Promise((X,ie)=>{Y.on("state_changed",ae=>{const R=ae.bytesTransferred/ae.totalBytes*100;i(Math.round(R))},ae=>{console.error("Upload error:",ae),c(ae.message),e(!1),ie(ae)},async()=>{const ae=await _p(Y.snapshot.ref);e(!1),i(100),console.log("[Storage] Tool image uploaded:",ae),X(ae)})})}catch(H){throw console.error("Upload error:",H),c(H.message),e(!1),H}};return{uploadImage:u,uploadToolImage:p,uploadFromUrl:async(C,N)=>{if(!C)throw new Error("No URL provided");if(!N)throw new Error("Tool slug is required");e(!0),i(0),c(null);try{i(10);const U=await fetch(C);if(!U.ok)throw new Error(`Failed to fetch image: ${U.status}`);if(!U.headers.get("content-type")?.startsWith("image/"))throw new Error("URL does not point to an image");i(30);const H=await U.blob(),B=5*1024*1024;if(H.size>B)throw new Error("Image size must be less than 5MB");i(50);const Y=`tool-images/${N}/header.png`,X=lc(cc,Y),ie=yp(X,H);return new Promise((ae,R)=>{ie.on("state_changed",A=>{const I=A.bytesTransferred/A.totalBytes*50;i(Math.round(50+I))},A=>{console.error("Upload error:",A),c(A.message),e(!1),R(A)},async()=>{const A=await _p(ie.snapshot.ref);e(!1),i(100),console.log("[Storage] Image from URL uploaded:",A),ae(A)})})}catch(U){throw console.error("Upload from URL error:",U),c(U.message),e(!1),U}},deleteImage:async C=>{if(C)try{const N=lc(cc,C);await ME(N),console.log("[Storage] Image deleted")}catch(N){if(N.code!=="storage/object-not-found")throw console.error("Delete error:",N),N}},deleteToolImage:async C=>{if(C)try{const N=`tool-images/${C}/header.png`,U=lc(cc,N);await ME(U),console.log("[Storage] Tool image deleted")}catch(N){if(N.code!=="storage/object-not-found")throw console.error("Delete error:",N),N}},handlePaste:async(C,N)=>{const U=C.clipboardData?.items;if(!U)return null;for(const M of U)if(M.type.startsWith("image/")){const H=M.getAsFile();if(H&&N)return await p(H,N);if(H)return await u(H,"tools")}return null},isValidImageUrl:C=>{if(!C)return!1;try{new URL(C);const N=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp"],U=C.toLowerCase();return N.some(M=>U.includes(M))||C.startsWith("data:image/")||C.includes("googleusercontent.com")||C.includes("firebasestorage.googleapis.com")}catch{return!1}},uploading:s,progress:n,error:o}}function E4({imageUrl:s,onCrop:e,onCancel:n,aspectRatio:i=16/9}){const o=V.useRef(null),c=V.useRef(null),[u,p]=V.useState({x:0,y:0}),[g,y]=V.useState(!1),[b,x]=V.useState({x:0,y:0}),[w,C]=V.useState({width:0,height:0}),[N,U]=V.useState(1),M=224,H=M/i,B=V.useCallback(R=>{const A=R.target,I=A.naturalWidth,O=A.naturalHeight,D=M/I,L=H/O,j=Math.max(D,L);U(j),C({width:I,height:O});const _e=I*j,Qe=O*j;p({x:(M-_e)/2,y:(H-Qe)/2})},[M,H]),Y=R=>{R.preventDefault(),y(!0),x({x:R.clientX-u.x,y:R.clientY-u.y})},X=V.useCallback(R=>{if(!g)return;const A=w.width*N,I=w.height*N,O=Math.min(0,M-A),D=Math.max(0,M-A),L=Math.min(0,H-I),j=Math.max(0,H-I),_e=Math.max(O,Math.min(D,R.clientX-b.x)),Qe=Math.max(L,Math.min(j,R.clientY-b.y));p({x:_e,y:Qe})},[g,b,w,N,M,H]),ie=()=>{y(!1)},ae=async()=>{if(!c.current)return;const R=document.createElement("canvas");R.width=M,R.height=H;const A=R.getContext("2d"),I=-u.x/N,O=-u.y/N,D=M/N,L=H/N;A.drawImage(c.current,I,O,D,L,0,0,M,H),R.toBlob(async j=>{if(j){const _e=new File([j],"cropped-image.png",{type:"image/png"});e(_e)}},"image/png",.9)};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-6 max-w-lg w-full",children:[f.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined",children:"crop"}),"Afbeelding Positioneren"]}),f.jsx("p",{className:"text-sm text-secondary mb-4",children:"Sleep de afbeelding om het zichtbare gedeelte te kiezen."}),f.jsxs("div",{ref:o,className:"relative mx-auto overflow-hidden rounded-lg border-2 border-dashed border-[#2860E0] bg-gray-100 dark:bg-gray-800",style:{width:M,height:H},onMouseMove:X,onMouseUp:ie,onMouseLeave:ie,children:[f.jsx("img",{ref:c,src:s,alt:"Crop preview",className:"absolute cursor-move select-none",style:{transform:`translate(${u.x}px, ${u.y}px) scale(${N})`,transformOrigin:"top left",maxWidth:"none"},onLoad:B,onMouseDown:Y,draggable:!1,crossOrigin:"anonymous"}),f.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-[#2860E0] pointer-events-none"}),f.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-[#2860E0] pointer-events-none"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-[#2860E0] pointer-events-none"}),f.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-[#2860E0] pointer-events-none"})]}),f.jsxs("p",{className:"text-xs text-secondary text-center mt-2",children:["16:9 formaat  ",M,"  ",Math.round(H)," pixels"]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsx("button",{onClick:n,className:"flex-1 py-3 px-4 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 font-medium rounded-lg transition-colors",children:"Annuleren"}),f.jsxs("button",{onClick:ae,className:"flex-1 py-3 px-4 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}),"Toepassen"]})]})]})})}function x4({tool:s}){const[e,n]=V.useState(!1),i=V.useRef(null),o=s?.name||"Tool Name",c=s?.shortDescription||s?.description||"Short description...",u=s?.fullDescription||c,p=s?.imageUrl||"",g=Zw(s?.labels),y=dy(s?.labels);return f.jsxs("div",{className:"bg-card rounded-xl border border-theme overflow-hidden shadow-lg",children:[f.jsx("div",{className:"bg-[#2860E0]/10 px-3 py-1.5 border-b border-theme",children:f.jsx("span",{className:"text-xs font-semibold text-[#2860E0] uppercase tracking-wide",children:"Live Preview"})}),f.jsxs("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"group bg-card p-3 flex items-center justify-between gap-3 hover:shadow-md transition-all duration-300 cursor-pointer",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[f.jsxs("div",{className:"size-10 rounded-md bg-cover bg-center shrink-0 border border-theme bg-gray-100 dark:bg-gray-700 flex items-center justify-center relative",style:p?{backgroundImage:`url('${p}')`}:{},children:[!p&&f.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"apps"}),y&&f.jsx("div",{className:"absolute -top-1 -right-1 size-4 bg-red-500 rounded-full flex items-center justify-center",title:"Opent in een nieuw tabblad",children:f.jsx("span",{className:"material-symbols-outlined text-white text-xs",children:"open_in_new"})})]}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:"font-semibold text-base truncate",children:o}),y&&f.jsx("span",{className:"material-symbols-outlined text-red-500 text-sm",title:"Opent in een nieuw tabblad",children:"open_in_new"})]}),f.jsx("div",{ref:i,className:`text-xs text-secondary overflow-hidden transition-all duration-300 ${e?"max-h-24 overflow-y-auto":"max-h-5 truncate"}`,children:f.jsx("p",{className:e?"whitespace-pre-wrap":"truncate",children:e?u:c})})]})]}),f.jsx("button",{className:"shrink-0 p-1 rounded-full text-secondary hover:text-red-500 hover:bg-gray-500/10 transition-colors",onClick:b=>b.preventDefault(),children:f.jsx("span",{className:"material-symbols-outlined text-xl",children:"favorite"})})]}),g&&f.jsxs("div",{className:"px-3 pb-3 flex flex-wrap gap-1",children:[f.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full text-white",style:{backgroundColor:g.color},children:[f.jsx("span",{className:"material-symbols-outlined text-xs",children:g.icon}),g.name]}),y&&f.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-red-500 text-white",children:[f.jsx("span",{className:"material-symbols-outlined text-xs",children:"open_in_new"}),"Extern"]})]}),f.jsx("div",{className:"px-3 pb-3",children:f.jsxs("div",{className:`inline-flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full ${s?.status==="published"?"bg-green-500/10 text-green-600":"bg-yellow-500/10 text-yellow-600"}`,children:[f.jsx("span",{className:`size-2 rounded-full ${s?.status==="published"?"bg-green-500":"bg-yellow-500"}`}),s?.status==="published"?"Gepubliceerd":"Concept"]})}),f.jsx("div",{className:"px-3 pb-3 text-xs text-secondary italic",children:y?"Deze tool opent in een nieuw tabblad":"Hover over de kaart om de volledige beschrijving te zien"})]})}function UE(){const{id:s}=AR(),e=vd(),{isSupervisor:n}=Zt(),{addTool:i,updateTool:o}=Oa(),{uploadToolImage:c}=b4(),u=!!s,[p,g]=V.useState({name:"",description:"",shortDescription:"",labels:[],externalUrl:"",internalRoute:"",imageUrl:"",status:"draft",isActive:!0}),[y,b]=V.useState(u),[x,w]=V.useState(!1),[C,N]=V.useState(null),[U,M]=V.useState(!1),[H,B]=V.useState(null),Y=V.useRef(null),X=Tc(p.labels),ie=dy(p.labels);if(!n)return f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"material-symbols-outlined text-6xl text-yellow-500",children:"warning"}),f.jsx("h2",{className:"text-xl font-bold mt-4",children:"Alleen-lezen toegang"}),f.jsx("p",{className:"text-secondary mt-2",children:"Je hebt geen rechten om tools te bewerken."}),f.jsx("button",{onClick:()=>e("/admin/tools"),className:"mt-4 px-4 py-2 bg-[#2860E0] text-white rounded-lg",children:"Terug naar Tools"})]})});V.useEffect(()=>{u&&s&&(async()=>{try{const L=un(yt,"tools",s),j=await Aa(L);if(j.exists()){const _e=j.data();g({name:_e.name||"",description:_e.description||"",shortDescription:_e.shortDescription||"",labels:_e.labels||[],externalUrl:_e.externalUrl||_e.url||"",internalRoute:_e.internalRoute||"",imageUrl:_e.imageUrl||"",status:_e.status||"draft",isActive:_e.isActive!==!1})}}catch(L){console.error("Error loading tool:",L),N("Fout bij laden van tool")}finally{b(!1)}})()},[s,u]);const ae=D=>{g(L=>{const _e=L.labels.includes("extern")?[D,"extern"]:[D];return{...L,labels:_e}})},R=()=>{g(D=>{const L=Tc(D.labels);return L?D.labels.includes("extern")?{...D,labels:[L]}:{...D,labels:[L,"extern"]}:D})},A=async D=>{if(D.preventDefault(),N(null),!p.name.trim()){N("Naam is verplicht");return}const L=r4(p.labels);if(!L.valid){N(L.error);return}if(ie){if(!p.externalUrl.trim()){N("Externe URL is verplicht voor externe tools");return}}else if(!p.internalRoute.trim()){N("Interne route is verplicht voor native tools");return}try{w(!0);const j={...p,url:ie?p.externalUrl:p.internalRoute};u?await o(s,j):await i(j),e("/admin/tools")}catch(j){console.error("Error saving tool:",j),N("Fout bij opslaan")}finally{w(!1)}},I=D=>{const L=D.target.files?.[0];if(L){const j=new FileReader;j.onload=()=>{B(j.result),M(!0)},j.readAsDataURL(L)}},O=async D=>{try{const L=await c(D,p.name||"tool");g(j=>({...j,imageUrl:L})),M(!1),B(null)}catch(L){console.error("Error uploading image:",L),N("Fout bij uploaden afbeelding")}};return V.useEffect(()=>{const D=L=>{const j=L.clipboardData?.items;if(j){for(const _e of j)if(_e.type.indexOf("image")!==-1){const Qe=_e.getAsFile(),J=new FileReader;J.onload=()=>{B(J.result),M(!0)},J.readAsDataURL(Qe),L.preventDefault();break}}};return window.addEventListener("paste",D),()=>window.removeEventListener("paste",D)},[]),y?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold",children:u?"Tool Bewerken":"Nieuwe Tool"}),f.jsx("p",{className:"text-secondary mt-1",children:u?"Bewerk de tool gegevens":"Voeg een nieuwe tool toe aan het platform"})]}),C&&f.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:C}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[f.jsx("div",{className:"lg:col-span-2 space-y-6",children:f.jsxs("form",{onSubmit:A,className:"space-y-6",children:[f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[f.jsx("h3",{className:"font-semibold",children:"Basis Informatie"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Naam *"}),f.jsx("input",{type:"text",value:p.name,onChange:D=>g(L=>({...L,name:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"Tool naam...",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Korte Beschrijving"}),f.jsx("input",{type:"text",value:p.shortDescription,onChange:D=>g(L=>({...L,shortDescription:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"Korte beschrijving (max 100 karakters)...",maxLength:100})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Beschrijving"}),f.jsx("textarea",{value:p.description,onChange:D=>g(L=>({...L,description:D.target.value})),className:"w-full h-32 px-4 py-3 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800 resize-none",placeholder:"Uitgebreide beschrijving..."})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[f.jsx("h3",{className:"font-semibold",children:"Classificatie *"}),f.jsx("p",{className:"text-sm text-secondary",children:'Kies exact n primair label. Markeer als "Extern" indien de tool buiten DaCapoTools opent.'}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium mb-3",children:"Primair Label"}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Vc.map(D=>f.jsxs("button",{type:"button",onClick:()=>ae(D.id),className:`flex items-center gap-2 px-3 py-2.5 rounded-lg border transition-all ${X===D.id?"border-transparent text-white":"border-theme bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:X===D.id?{backgroundColor:D.color}:{},children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:D.icon}),f.jsx("span",{className:"text-sm font-medium truncate",children:D.name})]},D.id))}),!X&&f.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Selecteer een primair label"})]}),f.jsx("div",{className:"pt-4 border-t border-theme",children:f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[f.jsx("button",{type:"button",onClick:R,disabled:!X,className:`relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2860E0] ${ie?"bg-red-500":"bg-gray-200 dark:bg-gray-700"} ${X?"":"opacity-50 cursor-not-allowed"}`,children:f.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${ie?"translate-x-5":"translate-x-0"}`})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-8 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:gr.color},children:f.jsx("span",{className:"material-symbols-outlined text-lg",children:gr.icon})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:gr.name}),f.jsx("p",{className:"text-xs text-secondary",children:"Opent in een nieuw tabblad"})]})]})]})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[f.jsx("h3",{className:"font-semibold",children:"Link / Pad"}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium mb-2",children:[ie?"Web URL":"Interne Route",f.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),f.jsx("input",{type:"text",value:ie?p.externalUrl:p.internalRoute,onChange:D=>{const L=D.target.value,j=/^https?:\/\//i.test(L);g(_e=>{let Qe=_e.labels;if(j&&!_e.labels.includes("extern")){const le=Tc(_e.labels);Qe=le?[le,"extern"]:["extern"]}const J=Qe.includes("extern");return{..._e,labels:Qe,externalUrl:J?L:"",internalRoute:J?"":L}})},className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:ie?"https://example.com":"/app/toolnaam",required:!0}),f.jsx("p",{className:"text-xs text-secondary mt-2",children:ie?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"material-symbols-outlined text-sm align-middle mr-1",children:"open_in_new"}),"Deze link opent in een nieuw tabblad (automatisch gedetecteerd)"]}):"Route binnen DaCapoTools (bijv. /app/paco). Plak een https:// link om automatisch naar Extern te wisselen."})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:["Afbeelding",f.jsx("span",{className:"text-xs font-normal text-secondary px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:"Ctrl+V ondersteund"})]}),f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"size-24 rounded-lg border-2 border-dashed border-theme flex items-center justify-center bg-gray-50 dark:bg-gray-800 overflow-hidden cursor-pointer shrink-0 transition-colors hover:border-[#2860E0]",onClick:()=>Y.current?.click(),title:"Klik om te uploaden of plak een afbeelding",children:p.imageUrl?f.jsx("img",{src:p.imageUrl,alt:"Preview",className:"w-full h-full object-cover"}):f.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"add_photo_alternate"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("input",{ref:Y,type:"file",accept:"image/*",onChange:I,className:"hidden"}),f.jsx("button",{type:"button",onClick:()=>Y.current?.click(),className:"px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 mb-2",children:"Kies Afbeelding"}),f.jsxs("p",{className:"text-xs text-secondary",children:["Sleep een afbeelding hierheen, ",f.jsx("span",{className:"text-[#2860E0] font-medium",children:"plak vanaf klembord (Ctrl+V)"}),", of klik om te kiezen."]}),f.jsx("p",{className:"text-xs text-secondary mt-1",children:"PNG, JPG of GIF. Max 5MB."})]})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[f.jsx("h3",{className:"font-semibold",children:"Status"}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"radio",name:"status",value:"draft",checked:p.status==="draft",onChange:D=>g(L=>({...L,status:D.target.value})),className:"text-[#2860E0]"}),f.jsx("span",{children:"Concept"})]}),f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"radio",name:"status",value:"published",checked:p.status==="published",onChange:D=>g(L=>({...L,status:D.target.value})),className:"text-[#2860E0]"}),f.jsx("span",{children:"Gepubliceerd"})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between pt-4",children:[f.jsx("button",{type:"button",onClick:()=>e("/admin/tools"),className:"px-6 py-3 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:"Annuleren"}),f.jsx("button",{type:"submit",disabled:x||!X,className:"px-6 py-3 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] disabled:opacity-50 flex items-center gap-2",children:x?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"material-symbols-outlined animate-spin",children:"sync"}),"Opslaan..."]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"material-symbols-outlined",children:"save"}),u?"Opslaan":"Aanmaken"]})})]})]})}),f.jsx("div",{className:"lg:col-span-1",children:f.jsxs("div",{className:"sticky top-20",children:[f.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined",children:"visibility"}),"Live Preview"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(x4,{tool:p}),f.jsxs("div",{className:"p-4 bg-blue-500/10 rounded-lg text-sm text-blue-600 dark:text-blue-400",children:[f.jsxs("p",{className:"font-medium flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"material-symbols-outlined text-base",children:"info"}),"Tip"]}),f.jsx("p",{children:"Deze preview toont hoe de kaart er exact uit zal zien voor gebruikers. De beschrijving scrolt wanneer de gebruiker eroverheen muist."})]})]})]})})]}),U&&H&&f.jsx(E4,{imageUrl:H,onCrop:O,onCancel:()=>{M(!1),B(null)}})]})}const pr={NONE:"none",EDITOR:"editor",ADMIN:"admin"};function T4(){const{isSupervisor:s,user:e}=Zt(),[n,i]=V.useState([]),[o,c]=V.useState(!0),[u,p]=V.useState(null),[g,y]=V.useState(!1),[b,x]=V.useState(null),[w,C]=V.useState(!1);V.useEffect(()=>{(async()=>{try{c(!0);const Y=Ti(yt,"users"),X=await Mc(Y),ie=await Promise.all(X.docs.map(async ae=>{const R={id:ae.id,...ae.data()};try{const A=await Aa(un(yt,"users",ae.id,"apps","nieuwsbrief"));R.newsletterRole=A.exists()&&A.data().role||pr.NONE}catch(A){console.error("Error fetching newsletter role for user:",ae.id,A),R.newsletterRole=pr.NONE}return R}));ie.sort((ae,R)=>(ae.email||"").localeCompare(R.email||"")),i(ie)}catch(Y){console.error("Error fetching users:",Y)}finally{c(!1)}})()},[]);const N=async(B,Y)=>{try{y(!0);const X=un(yt,"users",B);await hs(X,{role:Y}),i(ie=>ie.map(ae=>ae.id===B?{...ae,role:Y}:ae)),p(null)}catch(X){console.error("Error updating role:",X)}finally{y(!1)}},U=async(B,Y)=>{try{C(!0);const X=un(yt,"users",B,"apps","nieuwsbrief");await sy(X,{role:Y,updatedAt:new Date,updatedBy:e.uid},{merge:!0}),i(ie=>ie.map(ae=>ae.id===B?{...ae,newsletterRole:Y}:ae)),x(null)}catch(X){console.error("Error updating newsletter role:",X)}finally{C(!1)}},M=B=>{switch(B){case Ge.SUPERVISOR:return{label:"Supervisor",class:"bg-purple-500/10 text-purple-600 dark:text-purple-400"};case Ge.ADMIN:return{label:"Admin",class:"bg-blue-500/10 text-blue-600 dark:text-blue-400"};default:return{label:"Gebruiker",class:"bg-gray-500/10 text-gray-600 dark:text-gray-400"}}},H=B=>{switch(B){case pr.ADMIN:return{label:"Admin",class:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400"};case pr.EDITOR:return{label:"Editor",class:"bg-cyan-500/10 text-cyan-600 dark:text-cyan-400"};default:return{label:"Geen",class:"bg-gray-500/10 text-gray-600 dark:text-gray-400"}}};return o?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Gebruikers"}),f.jsx("p",{className:"text-secondary mt-1",children:"Beheer alle gebruikers en hun rollen"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:n.length}),f.jsx("p",{className:"text-sm text-secondary",children:"Totaal Gebruikers"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"shield_person"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:n.filter(B=>B.role===Ge.SUPERVISOR||B.role===Ge.ADMIN).length}),f.jsx("p",{className:"text-sm text-secondary",children:"Beheerders"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-green-500",children:"schedule"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:n.filter(B=>{if(!B.lastLogin)return!1;const Y=B.lastLogin.toDate?.()||new Date(B.lastLogin),X=new Date;return X.setDate(X.getDate()-7),Y>X}).length}),f.jsx("p",{className:"text-sm text-secondary",children:"Actief (7 dagen)"})]})]})})]}),f.jsx("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Rol"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Nieuwsbrief Generator"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Laatste Login"}),f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Aangemaakt"}),s&&f.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),f.jsx("tbody",{children:n.length===0?f.jsx("tr",{children:f.jsxs("td",{colSpan:s?6:5,className:"px-4 py-12 text-center text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"group"}),f.jsx("p",{children:"Geen gebruikers gevonden"})]})}):n.map(B=>{const Y=M(B.role),X=B.id===e?.uid;return f.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-10 rounded-full bg-[#2860E0] flex items-center justify-center text-white font-medium shrink-0",children:(B.displayName||B.email||"?").charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsxs("p",{className:"font-medium flex items-center gap-2",children:[B.displayName||"Onbekend",X&&f.jsx("span",{className:"text-xs text-secondary",children:"(jij)"})]}),f.jsx("p",{className:"text-sm text-secondary",children:B.email})]})]})}),f.jsx("td",{className:"px-4 py-3",children:u===B.id?f.jsxs("select",{value:B.role||Ge.USER,onChange:ie=>N(B.id,ie.target.value),disabled:g,className:"px-3 py-1.5 rounded-lg border border-theme bg-white dark:bg-gray-800 text-sm",children:[f.jsx("option",{value:Ge.USER,children:"Gebruiker"}),f.jsx("option",{value:Ge.ADMIN,children:"Admin"}),f.jsx("option",{value:Ge.SUPERVISOR,children:"Supervisor"})]}):f.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Y.class}`,children:Y.label})}),f.jsx("td",{className:"px-4 py-3",children:s&&b===B.id?f.jsxs("select",{value:B.newsletterRole||pr.NONE,onChange:ie=>U(B.id,ie.target.value),disabled:w,className:"px-3 py-1.5 rounded-lg border border-theme bg-white dark:bg-gray-800 text-sm",children:[f.jsx("option",{value:pr.NONE,children:"Geen"}),f.jsx("option",{value:pr.EDITOR,children:"Editor"}),f.jsx("option",{value:pr.ADMIN,children:"Admin"})]}):f.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${H(B.newsletterRole).class}`,children:H(B.newsletterRole).label})}),f.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:B.lastLogin?new Date(B.lastLogin.toDate?.()||B.lastLogin).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),f.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:B.createdAt?new Date(B.createdAt.toDate?.()||B.createdAt).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"}):"-"}),s&&f.jsx("td",{className:"px-4 py-3",children:f.jsx("div",{className:"flex items-center justify-end gap-1",children:u===B.id||b===B.id?f.jsx("button",{onClick:()=>{p(null),x(null)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Annuleren",children:f.jsx("span",{className:"material-symbols-outlined",children:"close"})}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>p(B.id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Rol wijzigen",disabled:X,children:f.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),f.jsx("button",{onClick:()=>x(B.id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Nieuwsbrief rol wijzigen",children:f.jsx("span",{className:"material-symbols-outlined",children:"mail"})})]})})})]},B.id)})})]})}),!s&&f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[f.jsx("span",{className:"material-symbols-outlined",children:"info"}),f.jsx("p",{className:"text-sm",children:"Als admin heb je alleen-lezen toegang. Neem contact op met een supervisor voor het wijzigen van gebruikersrollen."})]})]})}function fy(s,e){return un(yt,"users",s,"apps",e)}async function w4(s,e){if(!yd(e))throw new Error(`Unknown app: ${e}`);const i=fy(s,e),o=await Aa(i);if(o.exists())return o.data();const c=y4(e);return await sy(i,c),console.log(`[CreditService] Initialized credits for user ${s}, app ${e}`),c}async function A4(s,e,n){const i=fy(s,e);(await Aa(i)).exists()||await w4(s,e);const c={};return typeof n.creditsRemaining=="number"&&(c.creditsRemaining=Math.max(0,n.creditsRemaining)),typeof n.monthlyLimit=="number"&&(c.monthlyLimit=Math.max(1,n.monthlyLimit)),Object.keys(c).length>0&&(await hs(i,c),console.log(`[CreditService] Modified credits for user ${s}, app ${e}:`,c)),(await Aa(i)).data()}async function S4(s){const e=Ti(yt,"users"),n=await Mc(e),i=[];for(const o of n.docs){const c=o.id,u=o.data(),p=fy(c,s),g=await Aa(p);g.exists()&&i.push({uid:c,email:u.email,displayName:u.displayName,...g.data()})}return i}function R4({appId:s}){const{userRole:e,isSupervisor:n}=Zt(),[i,o]=V.useState(s||Uc()[0]),[c,u]=V.useState([]),[p,g]=V.useState(!0),[y,b]=V.useState(null),[x,w]=V.useState(null),[C,N]=V.useState({creditsRemaining:0,monthlyLimit:0}),[U,M]=V.useState(!1),H=yd(i),B=Uc();V.useEffect(()=>{i&&(async()=>{try{g(!0),b(null);const I=await S4(i);u(I)}catch(I){console.error("[AppCreditsOverview] Error:",I),b(I.message)}finally{g(!1)}})()},[i]);const Y=A=>{w(A.uid),N({creditsRemaining:A.creditsRemaining,monthlyLimit:A.monthlyLimit})},X=()=>{w(null),N({creditsRemaining:0,monthlyLimit:0})},ie=async A=>{try{M(!0),await A4(A,i,C),u(I=>I.map(O=>O.uid===A?{...O,...C}:O)),w(null)}catch(I){console.error("[AppCreditsOverview] Save error:",I),b(I.message)}finally{M(!1)}},ae=c.reduce((A,I)=>A+(I.totalUsedThisMonth||0),0),R=c.reduce((A,I)=>A+(I.creditsRemaining||0),0);return f.jsxs("div",{className:"space-y-4",children:[!s&&B.length>1&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{className:"text-sm font-medium",children:"App:"}),f.jsx("select",{value:i,onChange:A=>o(A.target.value),className:"h-10 px-3 rounded-lg border border-theme bg-card focus:ring-2 focus:ring-[#2860E0] focus:border-transparent",children:B.map(A=>{const I=yd(A);return f.jsx("option",{value:A,children:I?.appName||A},A)})})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[f.jsx("p",{className:"text-secondary text-sm",children:"Gebruikers"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:c.length})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[f.jsx("p",{className:"text-secondary text-sm",children:"Totaal Gebruikt"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:ae}),f.jsx("p",{className:"text-xs text-secondary",children:H?.creditUnitPlural})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[f.jsx("p",{className:"text-secondary text-sm",children:"Totaal Resterend"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:R}),f.jsx("p",{className:"text-xs text-secondary",children:H?.creditUnitPlural})]})]}),y&&f.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:y}),f.jsx("div",{className:"bg-card rounded-lg border border-theme overflow-hidden",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800 border-b border-theme",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Resterend"}),f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Limiet"}),f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Gebruikt"}),n&&f.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),f.jsx("tbody",{children:p?f.jsx("tr",{children:f.jsx("td",{colSpan:n?5:4,className:"px-4 py-8 text-center",children:f.jsx("span",{className:"material-symbols-outlined animate-spin text-2xl",children:"sync"})})}):c.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:n?5:4,className:"px-4 py-8 text-center text-secondary",children:"Geen gebruikers met credits voor deze app"})}):c.map(A=>f.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-500/5",children:[f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:A.displayName||"Onbekend"}),f.jsx("p",{className:"text-sm text-secondary",children:A.email})]})}),f.jsx("td",{className:"px-4 py-3 text-center",children:x===A.uid?f.jsx("input",{type:"number",value:C.creditsRemaining,onChange:I=>N(O=>({...O,creditsRemaining:parseInt(I.target.value)||0})),className:"w-20 h-8 px-2 text-center rounded border border-theme bg-gray-100 dark:bg-gray-700",min:"0"}):f.jsx("span",{className:A.creditsRemaining<=0?"text-red-500 font-medium":"",children:A.creditsRemaining})}),f.jsx("td",{className:"px-4 py-3 text-center",children:x===A.uid?f.jsx("input",{type:"number",value:C.monthlyLimit,onChange:I=>N(O=>({...O,monthlyLimit:parseInt(I.target.value)||1})),className:"w-20 h-8 px-2 text-center rounded border border-theme bg-gray-100 dark:bg-gray-700",min:"1"}):A.monthlyLimit}),f.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:A.totalUsedThisMonth||0}),n&&f.jsx("td",{className:"px-4 py-3",children:f.jsx("div",{className:"flex items-center justify-end gap-2",children:x===A.uid?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>ie(A.uid),disabled:U,className:"p-2 rounded-lg bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors",title:"Opslaan",children:f.jsx("span",{className:"material-symbols-outlined text-sm",children:U?"sync":"check"})}),f.jsx("button",{onClick:X,disabled:U,className:"p-2 rounded-lg hover:bg-gray-500/10 transition-colors",title:"Annuleren",children:f.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}):f.jsx("button",{onClick:()=>Y(A),className:"p-2 rounded-lg hover:bg-gray-500/10 transition-colors",title:"Bewerken",children:f.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})})})})]},A.uid))})]})})]})}function N4(){const{isSupervisor:s}=Zt();return f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Credits"}),f.jsx("p",{className:"text-secondary mt-1",children:s?"Beheer credits en limieten per gebruiker":"Bekijk credit gebruik per app en gebruiker"})]}),f.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${s?"bg-purple-500/10 text-purple-600 dark:text-purple-400":"bg-blue-500/10 text-blue-600 dark:text-blue-400"}`,children:[f.jsx("span",{className:"material-symbols-outlined text-sm",children:s?"edit":"visibility"}),s?"Volledig beheer":"Alleen-lezen"]})]}),f.jsx(R4,{}),!s&&f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[f.jsx("span",{className:"material-symbols-outlined",children:"info"}),f.jsx("p",{className:"text-sm",children:"Als admin heb je alleen-lezen toegang. Neem contact op met een supervisor voor het wijzigen van credits."})]})]})}const Uh={paco:.05,translate:.001};function C4(){const{isSupervisor:s}=Zt(),[e,n]=V.useState([]),[i,o]=V.useState(!0),c=Uc();V.useEffect(()=>{(async()=>{try{o(!0);const g=Ti(yt,"users"),y=await Mc(g),b=[];for(const x of y.docs){const w=x.data(),C={uid:x.id,email:w.email,displayName:w.displayName,apps:{}},N=Ti(yt,"users",x.id,"apps");(await Mc(N)).forEach(M=>{C.apps[M.id]=M.data()}),Object.keys(C.apps).length>0&&b.push(C)}n(b)}catch(g){console.error("Error fetching costs data:",g)}finally{o(!1)}})()},[]);const u=V.useMemo(()=>{const p={totalCost:0,costPerApp:{},costPerUser:[]};return c.forEach(g=>{p.costPerApp[g]={used:0,cost:0}}),e.forEach(g=>{let y=0;Object.entries(g.apps).forEach(([b,x])=>{const w=x.totalUsedThisMonth||0,C=Uh[b]||.01,N=w*C;p.costPerApp[b]&&(p.costPerApp[b].used+=w,p.costPerApp[b].cost+=N),y+=N}),p.costPerUser.push({...g,totalCost:y}),p.totalCost+=y}),p.costPerUser.sort((g,y)=>y.totalCost-g.totalCost),p},[e,c]);return i?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Kosten"}),f.jsx("p",{className:"text-secondary mt-1",children:"Overzicht van platformkosten per app en gebruiker"})]}),f.jsxs("div",{className:"bg-gradient-to-br from-[#2860E0] to-[#1C4DAB] rounded-xl p-6 text-white",children:[f.jsx("p",{className:"text-white/70 text-sm",children:"Totale Kosten Deze Maand"}),f.jsxs("p",{className:"text-4xl font-bold mt-2",children:["",u.totalCost.toFixed(2)]}),f.jsxs("p",{className:"text-white/70 text-sm mt-2",children:["Gebaseerd op ",e.length," actieve gebruikers"]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Kosten per App"}),f.jsx("div",{className:"space-y-4",children:c.map(p=>{const g=wi[p],y=u.costPerApp[p],b=Uh[p]||.01;return f.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"size-12 rounded-lg bg-[#2860E0]/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-[#2860E0]",children:p==="paco"?"image":"translate"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:g.appName}),f.jsxs("p",{className:"text-sm text-secondary",children:[y.used," ",g.creditUnitPlural," gebruikt"]})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"text-xl font-bold",children:["",y.cost.toFixed(2)]}),f.jsxs("p",{className:"text-xs text-secondary",children:["",b.toFixed(3)," per ",g.creditUnit]})]})]},p)})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"settings"}),"Prijsconfiguratie",!s&&f.jsx("span",{className:"text-xs font-normal text-secondary ml-2",children:"(alleen-lezen)"})]}),f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:c.map(p=>{const g=wi[p],y=Uh[p]||.01;return f.jsxs("div",{className:"p-4 border border-theme rounded-lg",children:[f.jsx("p",{className:"font-medium mb-2",children:g.appName}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-secondary",children:""}),f.jsx("input",{type:"number",step:"0.001",defaultValue:y,className:"flex-1 px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800 disabled:opacity-60 disabled:cursor-not-allowed",disabled:!s,readOnly:!s}),f.jsxs("span",{className:"text-sm text-secondary",children:["per ",g.creditUnit]})]}),s&&f.jsx("p",{className:"text-xs text-secondary mt-2",children:"* Prijswijzigingen momenteel niet actief"})]},p)})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:[f.jsx("div",{className:"p-4 border-b border-theme",children:f.jsx("h3",{className:"font-semibold",children:"Kosten per Gebruiker"})}),f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),c.map(p=>f.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:wi[p]?.appName},p)),f.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Totaal"})]})}),f.jsx("tbody",{children:u.costPerUser.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:c.length+2,className:"px-4 py-8 text-center text-secondary",children:"Geen kosten geregistreerd"})}):u.costPerUser.slice(0,20).map(p=>f.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:p.displayName||"Onbekend"}),f.jsx("p",{className:"text-sm text-secondary",children:p.email})]})}),c.map(g=>{const b=p.apps[g]?.totalUsedThisMonth||0,x=b*(Uh[g]||.01);return f.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:b>0?`${x.toFixed(2)}`:"-"},g)}),f.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["",p.totalCost.toFixed(2)]})]},p.uid))})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Maandelijkse Trend"}),f.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:f.jsxs("div",{className:"text-center text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"show_chart"}),f.jsx("p",{className:"text-sm",children:"Kostengrafiek komt binnenkort"})]})})]})]})}function I4(){const{isSupervisor:s}=Zt(),{tools:e}=Oa(),n=V.useMemo(()=>{const i={};return hy.forEach(o=>{i[o.id]=e.filter(c=>c.labels?.includes(o.id)).length}),i},[e]);return f.jsxs("div",{className:"space-y-6 max-w-3xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Labels & Metadata"}),f.jsx("p",{className:"text-secondary mt-1",children:"Voorgedefineerde labels voor tool classificatie"})]}),f.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[f.jsx("span",{className:"material-symbols-outlined mt-0.5",children:"info"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium",children:"Labels zijn vooraf gedefinieerd"}),f.jsx("p",{className:"mt-1 opacity-80",children:'Elke tool moet exact n primair label hebben. Het label "Extern" kan optioneel worden toegevoegd voor tools die buiten DaCapoTools openen.'})]})]}),f.jsxs("section",{className:"bg-card rounded-xl border border-theme overflow-hidden",children:[f.jsxs("div",{className:"px-5 py-3 border-b border-theme flex items-center justify-between",children:[f.jsx("h3",{className:"font-semibold",children:"Primaire Labels"}),f.jsxs("span",{className:"text-sm text-secondary",children:[Vc.length," labels"]})]}),f.jsx("div",{className:"divide-y divide-[var(--border-light)] dark:divide-[var(--border-dark)]",children:Vc.map(i=>f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx("div",{className:"size-10 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:i.color},children:f.jsx("span",{className:"material-symbols-outlined",children:i.icon})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium",children:i.name}),f.jsxs("span",{className:"text-xs text-secondary ml-2",children:["(",n[i.id]||0," tools)"]})]}),f.jsx("span",{className:"text-xs text-secondary font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:i.id})]},i.id))})]}),f.jsxs("section",{className:"bg-card rounded-xl border border-theme overflow-hidden",children:[f.jsx("div",{className:"px-5 py-3 border-b border-theme",children:f.jsx("h3",{className:"font-semibold",children:"Secundair Label"})}),f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx("div",{className:"size-10 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:gr.color},children:f.jsx("span",{className:"material-symbols-outlined",children:gr.icon})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium",children:gr.name}),f.jsxs("span",{className:"text-xs text-secondary ml-2",children:["(",n[gr.id]||0," tools)"]}),f.jsx("p",{className:"text-sm text-secondary mt-1",children:"Markeert tools die in een nieuw tabblad openen"})]}),f.jsx("span",{className:"text-xs text-secondary font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:gr.id})]})]}),f.jsxs("section",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Regels"}),f.jsxs("ul",{className:"space-y-2 text-sm text-secondary",children:[f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),"Elke tool heeft exact n primair label"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),'"Extern" is optioneel en kan alleen samen met een primair label']}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),"Maximaal 2 labels per tool"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-red-500 text-lg",children:"cancel"}),'"Extern" kan niet als enige label worden toegekend']})]})]})]})}function D4(){const{isSupervisor:s}=Zt(),{tools:e}=Oa(),[n,i]=V.useState(new Date().toISOString().slice(0,7)),[o,c]=V.useState("all"),[u,p]=V.useState(null),g=Uc(),y=V.useMemo(()=>{const w=[],C=new Date;for(let N=0;N<12;N++){const U=new Date(C.getFullYear(),C.getMonth()-N,1);w.push({value:U.toISOString().slice(0,7),label:U.toLocaleDateString("nl-NL",{month:"long",year:"numeric"})})}return w},[]),b=V.useMemo(()=>({period:n,totalUsers:0,activeUsers:0,totalCreditsUsed:0,totalCosts:0,apps:g.map(w=>({appId:w,name:wi[w]?.appName,creditsUsed:0,cost:0}))}),[n,g]),x=async w=>{p(w),await new Promise(C=>setTimeout(C,1500)),alert(`${w.toUpperCase()} export functie komt binnenkort beschikbaar`),p(null)};return f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Rapportages"}),f.jsx("p",{className:"text-secondary mt-1",children:"Genereer en exporteer maandelijkse rapporten"})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Rapport Instellingen"}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Periode"}),f.jsx("select",{value:n,onChange:w=>i(w.target.value),className:"w-full px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800",children:y.map(w=>f.jsx("option",{value:w.value,children:w.label},w.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"App"}),f.jsxs("select",{value:o,onChange:w=>c(w.target.value),className:"w-full px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800",children:[f.jsx("option",{value:"all",children:"Alle Apps"}),g.map(w=>f.jsx("option",{value:w,children:wi[w]?.appName},w))]})]}),f.jsx("div",{className:"flex items-end",children:f.jsxs("button",{className:"w-full px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors flex items-center justify-center gap-2",children:[f.jsx("span",{className:"material-symbols-outlined text-xl",children:"refresh"}),"Genereer Rapport"]})})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h3",{className:"font-semibold",children:"Rapport Overzicht"}),f.jsx("p",{className:"text-sm text-secondary",children:y.find(w=>w.value===n)?.label})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("p",{className:"text-sm text-secondary",children:"Actieve Gebruikers"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:b.activeUsers})]}),f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("p",{className:"text-sm text-secondary",children:"Credits Gebruikt"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:b.totalCreditsUsed})]}),f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("p",{className:"text-sm text-secondary",children:"Totale Kosten"}),f.jsxs("p",{className:"text-2xl font-bold mt-1",children:["",b.totalCosts.toFixed(2)]})]}),f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("p",{className:"text-sm text-secondary",children:"Aantal Tools"}),f.jsx("p",{className:"text-2xl font-bold mt-1",children:e.length})]})]}),f.jsxs("div",{className:"border-t border-theme pt-4",children:[f.jsx("h4",{className:"font-medium mb-3",children:"Per App"}),f.jsx("div",{className:"space-y-2",children:b.apps.map(w=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("span",{className:"font-medium",children:w.name}),f.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[f.jsxs("span",{className:"text-secondary",children:[w.creditsUsed," credits"]}),f.jsxs("span",{className:"font-medium",children:["",w.cost.toFixed(2)]})]})]},w.appId))})]}),f.jsxs("div",{className:"mt-6 p-4 bg-blue-500/10 rounded-lg text-center",children:[f.jsx("span",{className:"material-symbols-outlined text-3xl text-blue-500 mb-2 block",children:"info"}),f.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Rapportagedata wordt verzameld zodra het creditsysteem in gebruik is."})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Exporteren"}),f.jsxs("div",{className:"flex flex-wrap gap-4",children:[f.jsxs("button",{onClick:()=>x("pdf"),disabled:u==="pdf",className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:[u==="pdf"?f.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):f.jsx("span",{className:"material-symbols-outlined text-xl",children:"picture_as_pdf"}),"Exporteer als PDF"]}),f.jsxs("button",{onClick:()=>x("excel"),disabled:u==="excel",className:"inline-flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[u==="excel"?f.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):f.jsx("span",{className:"material-symbols-outlined text-xl",children:"table_chart"}),"Exporteer als Excel"]}),f.jsxs("button",{onClick:()=>x("csv"),disabled:u==="csv",className:"inline-flex items-center gap-2 px-6 py-3 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:[u==="csv"?f.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):f.jsx("span",{className:"material-symbols-outlined text-xl",children:"csv"}),"Exporteer als CSV"]})]}),f.jsx("p",{className:"text-sm text-secondary mt-4",children:"Export functionaliteit wordt binnenkort toegevoegd."})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Recente Rapporten"}),f.jsxs("div",{className:"text-center py-8 text-secondary",children:[f.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"folder_open"}),f.jsx("p",{children:"Nog geen rapporten gegenereerd"})]})]})]})}function j4(){const{isAdmin:s}=Zt(),[e,n]=V.useState(!0),[i,o]=V.useState([]),[c,u]=V.useState(8);V.useEffect(()=>{(async()=>{try{n(!0);const b=Ti(yt,"apps/nieuwsbrief/items"),x=Nw(b,Cw("createdAt","desc")),C=(await Mc(x)).docs.map(N=>({id:N.id,...N.data()}));o(C)}catch(b){console.error("Error fetching newsletter data:",b),o([])}finally{n(!1)}})()},[c]);const p=V.useMemo(()=>{const y=new Date,b=new Date(y.getFullYear(),y.getMonth(),y.getDate()-c*7),x=i.filter(X=>(X.createdAt?.toDate?X.createdAt.toDate():new Date(X.createdAt))>=b),w=x.length,C=x.filter(X=>X.status==="pending").length,N=x.filter(X=>X.status==="approved").length,U=x.filter(X=>X.status==="approved"&&X.approvedAt&&X.createdAt),M=U.length>0?U.reduce((X,ie)=>{const ae=ie.createdAt?.toDate?ie.createdAt.toDate():new Date(ie.createdAt),R=ie.approvedAt?.toDate?ie.approvedAt.toDate():new Date(ie.approvedAt);return X+(R-ae)/(1e3*60*60)},0)/U.length:0,H={};x.forEach(X=>{const ie=X.week||LE(X.createdAt);H[ie]=(H[ie]||0)+1});const B={};x.forEach(X=>{const ie=X.submittedBy||"Unknown";B[ie]=(B[ie]||0)+1});const Y={};return x.forEach(X=>{const ie=X.doelgroep||"Onbekend";Y[ie]=(Y[ie]||0)+1}),{totalItems:w,pendingItems:C,approvedItems:N,approvalRatio:w>0?(N/w*100).toFixed(1):0,avgApprovalTime:M.toFixed(1),itemsByWeek:H,itemsByUser:B,itemsByDoelgroep:Y}},[i,c]),g=V.useMemo(()=>{const y=[],b=new Date;for(let x=c-1;x>=0;x--){const w=new Date(b.getFullYear(),b.getMonth(),b.getDate()-x*7),C=LE(w);y.push(`Week ${C}`)}return y},[c]);return s?e?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):f.jsxs("div",{className:"space-y-6 max-w-7xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Nieuwsbrief Analytics"}),f.jsx("p",{className:"text-secondary mt-1",children:"Inzichten in nieuwsbrief submissions en goedkeuringen"})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Periode"}),f.jsxs("select",{value:c,onChange:y=>u(Number(y.target.value)),className:"px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800",children:[f.jsx("option",{value:4,children:"Laatste 4 weken"}),f.jsx("option",{value:8,children:"Laatste 8 weken"}),f.jsx("option",{value:12,children:"Laatste 12 weken"}),f.jsx("option",{value:26,children:"Laatste 6 maanden"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"description"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:p.totalItems}),f.jsx("p",{className:"text-sm text-secondary",children:"Totaal Items"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-amber-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"pending"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold",children:p.pendingItems}),f.jsx("p",{className:"text-sm text-secondary",children:"In Afwachting"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-green-500",children:"check_circle"})}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-2xl font-bold",children:[p.approvalRatio,"%"]}),f.jsx("p",{className:"text-sm text-secondary",children:"Goedgekeurd"})]})]})}),f.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:f.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"schedule"})}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-2xl font-bold",children:[p.avgApprovalTime,"u"]}),f.jsx("p",{className:"text-sm text-secondary",children:"Gem. Goedkeuring"})]})]})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Items per Week"}),f.jsx("div",{className:"space-y-3",children:g.map((y,b)=>{const x=p.itemsByWeek[y.replace("Week ","")]||0,w=Math.max(...Object.values(p.itemsByWeek),1),C=x/w*100;return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-20 text-sm text-secondary",children:y}),f.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full h-8 overflow-hidden",children:f.jsx("div",{className:"bg-[#2860E0] h-full flex items-center justify-end px-3 text-white text-sm font-medium transition-all",style:{width:`${C}%`},children:x>0&&x})})]},y)})})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Submissions per Gebruiker"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),f.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Aantal"})]})}),f.jsx("tbody",{children:Object.entries(p.itemsByUser).sort(([,y],[,b])=>b-y).map(([y,b])=>f.jsxs("tr",{className:"border-b border-theme last:border-0",children:[f.jsx("td",{className:"px-4 py-3",children:y}),f.jsx("td",{className:"px-4 py-3 text-right font-medium",children:b})]},y))})]}),Object.keys(p.itemsByUser).length===0&&f.jsx("div",{className:"text-center py-8 text-secondary",children:f.jsx("p",{children:"Geen data beschikbaar"})})]})]}),f.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Verdeling per Doelgroep"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Object.entries(p.itemsByDoelgroep).map(([y,b])=>f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[f.jsx("p",{className:"text-sm text-secondary mb-1",children:y}),f.jsx("p",{className:"text-2xl font-bold",children:b})]},y)),Object.keys(p.itemsByDoelgroep).length===0&&f.jsx("div",{className:"col-span-full text-center py-8 text-secondary",children:f.jsx("p",{children:"Geen data beschikbaar"})})]})]}),f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[f.jsx("span",{className:"material-symbols-outlined",children:"info"}),f.jsx("p",{className:"text-sm",children:"Deze analytics zijn read-only en gebaseerd op Newsletter Generator data. Wijzig rollen en instellingen via de Admin  Gebruikers pagina."})]})]}):f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500 mb-4 block",children:"block"}),f.jsx("p",{className:"text-xl font-semibold",children:"Toegang Geweigerd"}),f.jsx("p",{className:"text-secondary mt-2",children:"Je hebt geen toegang tot deze pagina."})]})})}function LE(s){const e=s instanceof Date?s:s?.toDate?s.toDate():new Date(s),n=new Date(e.valueOf()),i=(e.getDay()+6)%7;n.setDate(n.getDate()-i+3);const o=new Date(n.getFullYear(),0,4),c=(n-o)/864e5;return 1+Math.ceil(c/7)}function O4(){return f.jsx(d1,{children:f.jsx(E1,{children:f.jsx(n4,{children:f.jsxs(qR,{children:[f.jsx(Dn,{path:"/",element:f.jsx(d4,{})}),f.jsxs(Dn,{path:"/admin",element:f.jsx(g4,{}),children:[f.jsx(Dn,{index:!0,element:f.jsx(_4,{})}),f.jsx(Dn,{path:"tools",element:f.jsx(v4,{})}),f.jsx(Dn,{path:"tools/:id",element:f.jsx(UE,{})}),f.jsx(Dn,{path:"tools/new",element:f.jsx(UE,{})}),f.jsx(Dn,{path:"users",element:f.jsx(T4,{})}),f.jsx(Dn,{path:"credits",element:f.jsx(N4,{})}),f.jsx(Dn,{path:"costs",element:f.jsx(C4,{})}),f.jsx(Dn,{path:"labels",element:f.jsx(I4,{})}),f.jsx(Dn,{path:"reports",element:f.jsx(D4,{})}),f.jsx(Dn,{path:"analytics/nieuwsbrief",element:f.jsx(j4,{})})]})]})})})})}zS.createRoot(document.getElementById("root")).render(f.jsx(V.StrictMode,{children:f.jsx(O4,{})}));

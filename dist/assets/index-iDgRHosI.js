(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Km={exports:{}},sc={};var Ob;function RA(){if(Ob)return sc;Ob=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:u,ref:o!==void 0?o:null,props:c}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var kb;function NA(){return kb||(kb=1,Km.exports=RA()),Km.exports}var m=NA(),Qm={exports:{}},we={};var jb;function CA(){if(jb)return we;jb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function N(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,j={};function H(z,ne,le){this.props=z,this.context=ne,this.refs=j,this.updater=le||R}H.prototype.isReactComponent={},H.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},H.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function $(){}$.prototype=H.prototype;function X(z,ne,le){this.props=z,this.context=ne,this.refs=j,this.updater=le||R}var re=X.prototype=new $;re.constructor=X,V(re,H.prototype),re.isPureReactComponent=!0;var ae=Array.isArray;function ce(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(z,ne,le){var de=le.ref;return{$$typeof:s,type:z,key:ne,ref:de!==void 0?de:null,props:le}}function k(z,ne){return I(z.type,ne,z.props)}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===s}function U(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(le){return ne[le]})}var O=/\/+/g;function Ee(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?U(""+z.key):ne.toString(36)}function st(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ce,ce):(z.status="pending",z.then(function(ne){z.status==="pending"&&(z.status="fulfilled",z.value=ne)},function(ne){z.status==="pending"&&(z.status="rejected",z.reason=ne)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function W(z,ne,le,de,xe){var Ne=typeof z;(Ne==="undefined"||Ne==="boolean")&&(z=null);var Le=!1;if(z===null)Le=!0;else switch(Ne){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(z.$$typeof){case s:case e:Le=!0;break;case b:return Le=z._init,W(Le(z._payload),ne,le,de,xe)}}if(Le)return xe=xe(z),Le=de===""?"."+Ee(z,0):de,ae(xe)?(le="",Le!=null&&(le=Le.replace(O,"$&/")+"/"),W(xe,ne,le,"",function(Mi){return Mi})):xe!=null&&(D(xe)&&(xe=k(xe,le+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(O,"$&/")+"/")+Le)),ne.push(xe)),1;Le=0;var Mt=de===""?".":de+":";if(ae(z))for(var ct=0;ct<z.length;ct++)de=z[ct],Ne=Mt+Ee(de,ct),Le+=W(de,ne,le,Ne,xe);else if(ct=N(z),typeof ct=="function")for(z=ct.call(z),ct=0;!(de=z.next()).done;)de=de.value,Ne=Mt+Ee(de,ct++),Le+=W(de,ne,le,Ne,xe);else if(Ne==="object"){if(typeof z.then=="function")return W(st(z),ne,le,de,xe);throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Le}function oe(z,ne,le){if(z==null)return z;var de=[],xe=0;return W(z,de,"","",function(Ne){return ne.call(le,Ne,xe++)}),de}function ye(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(le){(z._status===0||z._status===-1)&&(z._status=1,z._result=le)},function(le){(z._status===0||z._status===-1)&&(z._status=2,z._result=le)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var ze=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Qe={map:oe,forEach:function(z,ne,le){oe(z,function(){ne.apply(this,arguments)},le)},count:function(z){var ne=0;return oe(z,function(){ne++}),ne},toArray:function(z){return oe(z,function(ne){return ne})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return we.Activity=x,we.Children=Qe,we.Component=H,we.Fragment=n,we.Profiler=o,we.PureComponent=X,we.StrictMode=i,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,we.__COMPILER_RUNTIME={__proto__:null,c:function(z){return C.H.useMemoCache(z)}},we.cache=function(z){return function(){return z.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(z,ne,le){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var de=V({},z.props),xe=z.key;if(ne!=null)for(Ne in ne.key!==void 0&&(xe=""+ne.key),ne)!S.call(ne,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ne.ref===void 0||(de[Ne]=ne[Ne]);var Ne=arguments.length-2;if(Ne===1)de.children=le;else if(1<Ne){for(var Le=Array(Ne),Mt=0;Mt<Ne;Mt++)Le[Mt]=arguments[Mt+2];de.children=Le}return I(z.type,xe,de)},we.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},we.createElement=function(z,ne,le){var de,xe={},Ne=null;if(ne!=null)for(de in ne.key!==void 0&&(Ne=""+ne.key),ne)S.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(xe[de]=ne[de]);var Le=arguments.length-2;if(Le===1)xe.children=le;else if(1<Le){for(var Mt=Array(Le),ct=0;ct<Le;ct++)Mt[ct]=arguments[ct+2];xe.children=Mt}if(z&&z.defaultProps)for(de in Le=z.defaultProps,Le)xe[de]===void 0&&(xe[de]=Le[de]);return I(z,Ne,xe)},we.createRef=function(){return{current:null}},we.forwardRef=function(z){return{$$typeof:p,render:z}},we.isValidElement=D,we.lazy=function(z){return{$$typeof:b,_payload:{_status:-1,_result:z},_init:ye}},we.memo=function(z,ne){return{$$typeof:y,type:z,compare:ne===void 0?null:ne}},we.startTransition=function(z){var ne=C.T,le={};C.T=le;try{var de=z(),xe=C.S;xe!==null&&xe(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ce,ze)}catch(Ne){ze(Ne)}finally{ne!==null&&le.types!==null&&(ne.types=le.types),C.T=ne}},we.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},we.use=function(z){return C.H.use(z)},we.useActionState=function(z,ne,le){return C.H.useActionState(z,ne,le)},we.useCallback=function(z,ne){return C.H.useCallback(z,ne)},we.useContext=function(z){return C.H.useContext(z)},we.useDebugValue=function(){},we.useDeferredValue=function(z,ne){return C.H.useDeferredValue(z,ne)},we.useEffect=function(z,ne){return C.H.useEffect(z,ne)},we.useEffectEvent=function(z){return C.H.useEffectEvent(z)},we.useId=function(){return C.H.useId()},we.useImperativeHandle=function(z,ne,le){return C.H.useImperativeHandle(z,ne,le)},we.useInsertionEffect=function(z,ne){return C.H.useInsertionEffect(z,ne)},we.useLayoutEffect=function(z,ne){return C.H.useLayoutEffect(z,ne)},we.useMemo=function(z,ne){return C.H.useMemo(z,ne)},we.useOptimistic=function(z,ne){return C.H.useOptimistic(z,ne)},we.useReducer=function(z,ne,le){return C.H.useReducer(z,ne,le)},we.useRef=function(z){return C.H.useRef(z)},we.useState=function(z){return C.H.useState(z)},we.useSyncExternalStore=function(z,ne,le){return C.H.useSyncExternalStore(z,ne,le)},we.useTransition=function(){return C.H.useTransition()},we.version="19.2.3",we}var Mb;function Qp(){return Mb||(Mb=1,Qm.exports=CA()),Qm.exports}var L=Qp(),Ym={exports:{}},rc={},$m={exports:{}},Xm={};var Vb;function IA(){return Vb||(Vb=1,(function(s){function e(W,oe){var ye=W.length;W.push(oe);e:for(;0<ye;){var ze=ye-1>>>1,Qe=W[ze];if(0<o(Qe,oe))W[ze]=oe,W[ye]=Qe,ye=ze;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],ye=W.pop();if(ye!==oe){W[0]=ye;e:for(var ze=0,Qe=W.length,z=Qe>>>1;ze<z;){var ne=2*(ze+1)-1,le=W[ne],de=ne+1,xe=W[de];if(0>o(le,ye))de<Qe&&0>o(xe,le)?(W[ze]=xe,W[de]=ye,ze=de):(W[ze]=le,W[ne]=ye,ze=ne);else if(de<Qe&&0>o(xe,ye))W[ze]=xe,W[de]=ye,ze=de;else break e}}return oe}function o(W,oe){var ye=W.sortIndex-oe.sortIndex;return ye!==0?ye:W.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,x=null,T=3,N=!1,R=!1,V=!1,j=!1,H=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function re(W){for(var oe=n(y);oe!==null;){if(oe.callback===null)i(y);else if(oe.startTime<=W)i(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(y)}}function ae(W){if(V=!1,re(W),!R)if(n(g)!==null)R=!0,ce||(ce=!0,U());else{var oe=n(y);oe!==null&&st(ae,oe.startTime-W)}}var ce=!1,C=-1,S=5,I=-1;function k(){return j?!0:!(s.unstable_now()-I<S)}function D(){if(j=!1,ce){var W=s.unstable_now();I=W;var oe=!0;try{e:{R=!1,V&&(V=!1,$(C),C=-1),N=!0;var ye=T;try{t:{for(re(W),x=n(g);x!==null&&!(x.expirationTime>W&&k());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,T=x.priorityLevel;var Qe=ze(x.expirationTime<=W);if(W=s.unstable_now(),typeof Qe=="function"){x.callback=Qe,re(W),oe=!0;break t}x===n(g)&&i(g),re(W)}else i(g);x=n(g)}if(x!==null)oe=!0;else{var z=n(y);z!==null&&st(ae,z.startTime-W),oe=!1}}break e}finally{x=null,T=ye,N=!1}oe=void 0}}finally{oe?U():ce=!1}}}var U;if(typeof X=="function")U=function(){X(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ee=O.port2;O.port1.onmessage=D,U=function(){Ee.postMessage(null)}}else U=function(){H(D,0)};function st(W,oe){C=H(function(){W(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(W){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var ye=T;T=oe;try{return W()}finally{T=ye}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ye=T;T=W;try{return oe()}finally{T=ye}},s.unstable_scheduleCallback=function(W,oe,ye){var ze=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,W){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ye+Qe,W={id:b++,callback:oe,priorityLevel:W,startTime:ye,expirationTime:Qe,sortIndex:-1},ye>ze?(W.sortIndex=ye,e(y,W),n(g)===null&&W===n(y)&&(V?($(C),C=-1):V=!0,st(ae,ye-ze))):(W.sortIndex=Qe,e(g,W),R||N||(R=!0,ce||(ce=!0,U()))),W},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(W){var oe=T;return function(){var ye=T;T=oe;try{return W.apply(this,arguments)}finally{T=ye}}}})(Xm)),Xm}var Ub;function DA(){return Ub||(Ub=1,$m.exports=IA()),$m.exports}var Wm={exports:{}},Zt={};var Lb;function OA(){if(Lb)return Zt;Lb=1;var s=Qp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:b}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,b)},Zt.flushSync=function(g){var y=u.T,b=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=b,i.d.f()}},Zt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Zt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Zt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:N}):b==="script"&&i.d.X(g,{crossOrigin:x,integrity:T,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Zt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Zt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Zt.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Zt.requestFormReset=function(g){i.d.r(g)},Zt.unstable_batchedUpdates=function(g,y){return g(y)},Zt.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.2.3",Zt}var Pb;function kA(){if(Pb)return Wm.exports;Pb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Wm.exports=OA(),Wm.exports}var zb;function jA(){if(zb)return rc;zb=1;var s=DA(),e=Qp(),n=kA();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return g(d),t;if(f===l)return g(d),r;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=f;else{for(var v=!1,w=d.child;w;){if(w===a){v=!0,a=d,l=f;break}if(w===l){v=!0,l=d,a=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===a){v=!0,a=f,l=d;break}if(w===l){v=!0,l=f,a=d;break}w=w.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),X=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var O=Symbol.for("react.client.reference");function Ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case H:return"Profiler";case j:return"StrictMode";case ae:return"Suspense";case ce:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case R:return"Portal";case X:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case re:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:Ee(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return Ee(t(r))}catch{}}return null}var st=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ze=[],Qe=-1;function z(t){return{current:t}}function ne(t){0>Qe||(t.current=ze[Qe],ze[Qe]=null,Qe--)}function le(t,r){Qe++,ze[Qe]=t.current,t.current=r}var de=z(null),xe=z(null),Ne=z(null),Le=z(null);function Mt(t,r){switch(le(Ne,r),le(xe,t),le(de,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?tb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=tb(r),t=nb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(de),le(de,t)}function ct(){ne(de),ne(xe),ne(Ne)}function Mi(t){t.memoizedState!==null&&le(Le,t);var r=de.current,a=nb(r,t.type);r!==a&&(le(xe,t),le(de,a))}function Oa(t){xe.current===t&&(ne(de),ne(xe)),Le.current===t&&(ne(Le),Zl._currentValue=ye)}var ka,ja;function ps(t){if(ka===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ka=r&&r[1]||"",ja=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+t+ja}var Zo=!1;function Vi(t,r){if(!t||Zo)return"";Zo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var K=Y}Reflect.construct(t,[],te)}else{try{te.call()}catch(Y){K=Y}t.call(te.prototype)}}else{try{throw Error()}catch(Y){K=Y}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var M=v.split(`
`),G=w.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===G.length)for(l=M.length-1,d=G.length-1;1<=l&&0<=d&&M[l]!==G[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==G[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==G[d]){var J=`
`+M[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=d);break}}}finally{Zo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ps(a):""}function el(t,r){switch(t.tag){case 26:case 27:case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return t.child!==r&&r!==null?ps("Suspense Fallback"):ps("Suspense");case 19:return ps("SuspenseList");case 0:case 15:return Vi(t.type,!1);case 11:return Vi(t.type.render,!1);case 1:return Vi(t.type,!0);case 31:return ps("Activity");default:return""}}function tl(t){try{var r="",a=null;do r+=el(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,Dr=s.unstable_cancelCallback,Qd=s.unstable_shouldYield,$c=s.unstable_requestPaint,an=s.unstable_now,Ui=s.unstable_getCurrentPriorityLevel,nl=s.unstable_ImmediatePriority,sl=s.unstable_UserBlockingPriority,Or=s.unstable_NormalPriority,Yd=s.unstable_LowPriority,Xc=s.unstable_IdlePriority,Wc=s.log,Jc=s.unstable_setDisableYieldValue,Zn=null,Ft=null;function Mn(t){if(typeof Wc=="function"&&Jc(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Zn,t)}catch{}}var _t=Math.clz32?Math.clz32:eu,Zc=Math.log,Ma=Math.LN2;function eu(t){return t>>>=0,t===0?32:31-(Zc(t)/Ma|0)|0}var gs=256,Li=262144,wt=4194304;function ys(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _s(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?d=ys(l):(v&=w,v!==0?d=ys(v):a||(a=w&~t,a!==0&&(d=ys(a))))):(w=l&~f,w!==0?d=ys(w):v!==0?d=ys(v):a||(a=l&~t,a!==0&&(d=ys(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function es(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function $d(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tu(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function vs(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Pi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xd(t,r,a,l,d,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var J=31-_t(a),te=1<<J;w[J]=0,M[J]=-1;var K=G[J];if(K!==null)for(G[J]=null,J=0;J<K.length;J++){var Y=K[J];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&zi(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~r))}function zi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-_t(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function rl(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-_t(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function il(t,r){var a=r&-r;return a=(a&42)!==0?1:Bi(a),(a&(t.suspendedLanes|r))!==0?0:a}function Bi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function nu(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Sb(t.type))}function ts(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var ns=Math.random().toString(36).slice(2),St="__reactFiber$"+ns,zt="__reactProps$"+ns,bs="__reactContainer$"+ns,Va="__reactEvents$"+ns,Wd="__reactListeners$"+ns,su="__reactHandles$"+ns,ru="__reactResources$"+ns,Es="__reactMarker$"+ns;function Ua(t){delete t[St],delete t[zt],delete t[Va],delete t[Wd],delete t[su]}function xs(t){var r=t[St];if(r)return r;for(var a=t.parentNode;a;){if(r=a[bs]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=cb(t);t!==null;){if(a=t[St])return a;t=cb(t)}return r}t=a,a=t.parentNode}return null}function Vn(t){if(t=t[St]||t[bs]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function En(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Ts(t){var r=t[ru];return r||(r=t[ru]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(t){t[Es]=!0}var al=new Set,ol={};function ws(t,r){Ss(t,r),Ss(t+"Capture",r)}function Ss(t,r){for(ol[t]=r,t=0;t<r.length;t++)al.add(r[t])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},ul={};function iu(t){return Tt.call(ul,t)?!0:Tt.call(cl,t)?!1:ll.test(t)?ul[t]=!0:(cl[t]=!0,!1)}function La(t,r,a){if(iu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function xn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Rt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function hl(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ye(t){if(!t._valueTracker){var r=kr(t)?"checked":"value";t._valueTracker=hl(t,r,""+t[r])}}function qi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=kr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hi=/[\n"\\]/g;function un(t){return t.replace(Hi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Pa(t,r,a,l,d,f,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Bt(r)):t.value!==""+Bt(r)&&(t.value=""+Bt(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?dl(t,v,Bt(r)):a!=null?dl(t,v,Bt(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Bt(w):t.removeAttribute("name")}function au(t,r,a,l,d,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Ye(t);return}a=a!=null?""+Bt(a):"",r=r!=null?""+Bt(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ye(t)}function dl(t,r,a){r==="number"&&As(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function jr(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function ou(t,r,a){if(r!=null&&(r=""+Bt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Bt(a):""}function Mr(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(st(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Bt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function hn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||lu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ml(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&fl(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&fl(t,f,r[f])}function za(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(t){return Vr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ss(){}var pl=null;function Un(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ur=null,Rs=null;function Fi(t){var r=Vn(t);if(r&&(t=r.stateNode)){var a=t[zt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Pa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[zt]||null;if(!d)throw Error(i(90));Pa(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&qi(l)}break e;case"textarea":ou(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&jr(t,!!a.multiple,r,!1)}}}var qa=!1;function Lr(t,r,a){if(qa)return t(r,a);qa=!0;try{var l=t(r);return l}finally{if(qa=!1,(Ur!==null||Rs!==null)&&(nh(),Ur&&(r=Ur,t=Rs,Rs=Ur=null,Fi(r),t)))for(r=0;r<t.length;r++)Fi(t[r])}}function rs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(Ln)try{var We={};Object.defineProperty(We,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{Gi=!1}var Ns=null,gl=null,Ki=null;function yl(){if(Ki)return Ki;var t,r=gl,a=r.length,l,d="value"in Ns?Ns.value:Ns.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===d[f-l];l++);return Ki=d.slice(t,1<l?1-l:void 0)}function Qi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function is(){return!1}function Gt(t){function r(a,l,d,f,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ws:is,this.isPropagationStopped=is,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),r}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cs=Gt(Js),Pr=x({},Js,{view:0,detail:0}),_l=Gt(Pr),zr,Ha,Is,Fa=x({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Is&&(Is&&t.type==="mousemove"?(zr=t.screenX-Is.screenX,Ha=t.screenY-Is.screenY):Ha=zr=0,Is=t),zr)},movementY:function(t){return"movementY"in t?t.movementY:Ha}}),vl=Gt(Fa),Yi=x({},Fa,{dataTransfer:0}),uu=Gt(Yi),hu=x({},Pr,{relatedTarget:0}),$i=Gt(hu),bl=x({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),du=Gt(bl),Ga=x({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fu=Gt(Ga),mu=x({},Js,{data:0}),Ds=Gt(mu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=yu[t])?!!r[t]:!1}function Br(){return _u}var on=x({},Pr,{key:function(t){if(t.key){var r=pu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(t){return t.type==="keypress"?Qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vu=Gt(on),bu=x({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zs=Gt(bu),h=x({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),_=Gt(h),E=x({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Gt(E),q=x({},Fa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Gt(q),ie=x({},Js,{newState:0,oldState:0}),Ae=Gt(ie),vt=[9,13,27,32],He=Ln&&"CompositionEvent"in window,ut=null;Ln&&"documentMode"in document&&(ut=document.documentMode);var Pn=Ln&&"TextEvent"in window&&!ut,Os=Ln&&(!He||ut&&8<ut&&11>=ut),as=" ",os=!1;function Xi(t,r){switch(t){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qa=!1;function Ww(t,r){switch(t){case"compositionend":return Ka(r);case"keypress":return r.which!==32?null:(os=!0,as);case"textInput":return t=r.data,t===as&&os?null:t;default:return null}}function Jw(t,r){if(Qa)return t==="compositionend"||!He&&Xi(t,r)?(t=yl(),Ki=gl=Ns=null,Qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Os&&r.locale!=="ko"?null:r.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Zw[t.type]:r==="textarea"}function fy(t,r,a,l){Ur?Rs?Rs.push(l):Rs=[l]:Ur=l,r=ch(r,"onChange"),0<r.length&&(a=new Cs("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var El=null,xl=null;function eS(t){$v(t,0)}function Eu(t){var r=En(t);if(qi(r))return t}function my(t,r){if(t==="change")return r}var py=!1;if(Ln){var Jd;if(Ln){var Zd="oninput"in document;if(!Zd){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),Zd=typeof gy.oninput=="function"}Jd=Zd}else Jd=!1;py=Jd&&(!document.documentMode||9<document.documentMode)}function yy(){El&&(El.detachEvent("onpropertychange",_y),xl=El=null)}function _y(t){if(t.propertyName==="value"&&Eu(xl)){var r=[];fy(r,xl,t,Un(t)),Lr(eS,r)}}function tS(t,r,a){t==="focusin"?(yy(),El=r,xl=a,El.attachEvent("onpropertychange",_y)):t==="focusout"&&yy()}function nS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(xl)}function sS(t,r){if(t==="click")return Eu(r)}function rS(t,r){if(t==="input"||t==="change")return Eu(r)}function iS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Tn=typeof Object.is=="function"?Object.is:iS;function Tl(t,r){if(Tn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Tt.call(r,d)||!Tn(t[d],r[d]))return!1}return!0}function vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function by(t,r){var a=vy(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vy(a)}}function Ey(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ey(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function xy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=As(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=As(t.document)}return r}function ef(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var aS=Ln&&"documentMode"in document&&11>=document.documentMode,Ya=null,tf=null,wl=null,nf=!1;function Ty(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nf||Ya==null||Ya!==As(l)||(l=Ya,"selectionStart"in l&&ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wl&&Tl(wl,l)||(wl=l,l=ch(tf,"onSelect"),0<l.length&&(r=new Cs("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ya)))}function Wi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var $a={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},sf={},wy={};Ln&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Ji(t){if(sf[t])return sf[t];if(!$a[t])return t;var r=$a[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in wy)return sf[t]=r[a];return t}var Sy=Ji("animationend"),Ay=Ji("animationiteration"),Ry=Ji("animationstart"),oS=Ji("transitionrun"),lS=Ji("transitionstart"),cS=Ji("transitioncancel"),Ny=Ji("transitionend"),Cy=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function ls(t,r){Cy.set(t,r),ws(r,[t])}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zn=[],Xa=0,af=0;function Tu(){for(var t=Xa,r=af=Xa=0;r<t;){var a=zn[r];zn[r++]=null;var l=zn[r];zn[r++]=null;var d=zn[r];zn[r++]=null;var f=zn[r];if(zn[r++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}f!==0&&Iy(a,d,f)}}function wu(t,r,a,l){zn[Xa++]=t,zn[Xa++]=r,zn[Xa++]=a,zn[Xa++]=l,af|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function of(t,r,a,l){return wu(t,r,a,l),Su(t)}function Zi(t,r){return wu(t,null,null,r),Su(t)}function Iy(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-_t(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function Su(t){if(50<Kl)throw Kl=0,gm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Wa={};function uS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,r,a,l){return new uS(t,r,a,l)}function lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function er(t,r){var a=t.alternate;return a===null?(a=wn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Dy(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Au(t,r,a,l,d,f){var v=0;if(l=t,typeof t=="function")lf(t)&&(v=1);else if(typeof t=="string")v=pA(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=wn(31,a,r,d),t.elementType=I,t.lanes=f,t;case V:return ea(a.children,d,f,r);case j:v=8,d|=24;break;case H:return t=wn(12,a,r,d|2),t.elementType=H,t.lanes=f,t;case ae:return t=wn(13,a,r,d),t.elementType=ae,t.lanes=f,t;case ce:return t=wn(19,a,r,d),t.elementType=ce,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X:v=10;break e;case $:v=9;break e;case re:v=11;break e;case C:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=wn(v,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function ea(t,r,a,l){return t=wn(7,t,l,r),t.lanes=a,t}function cf(t,r,a){return t=wn(6,t,null,r),t.lanes=a,t}function Oy(t){var r=wn(18,null,null,0);return r.stateNode=t,r}function uf(t,r,a){return r=wn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ky=new WeakMap;function Bn(t,r){if(typeof t=="object"&&t!==null){var a=ky.get(t);return a!==void 0?a:(r={value:t,source:r,stack:tl(r)},ky.set(t,r),r)}return{value:t,source:r,stack:tl(r)}}var Ja=[],Za=0,Ru=null,Sl=0,qn=[],Hn=0,qr=null,ks=1,js="";function tr(t,r){Ja[Za++]=Sl,Ja[Za++]=Ru,Ru=t,Sl=r}function jy(t,r,a){qn[Hn++]=ks,qn[Hn++]=js,qn[Hn++]=qr,qr=t;var l=ks;t=js;var d=32-_t(l)-1;l&=~(1<<d),a+=1;var f=32-_t(r)+d;if(30<f){var v=d-d%5;f=(l&(1<<v)-1).toString(32),l>>=v,d-=v,ks=1<<32-_t(r)+d|a<<d|l,js=f+t}else ks=1<<f|a<<d|l,js=t}function hf(t){t.return!==null&&(tr(t,1),jy(t,1,0))}function df(t){for(;t===Ru;)Ru=Ja[--Za],Ja[Za]=null,Sl=Ja[--Za],Ja[Za]=null;for(;t===qr;)qr=qn[--Hn],qn[Hn]=null,js=qn[--Hn],qn[Hn]=null,ks=qn[--Hn],qn[Hn]=null}function My(t,r){qn[Hn++]=ks,qn[Hn++]=js,qn[Hn++]=qr,ks=r.id,js=r.overflow,qr=t}var Kt=null,rt=null,Ue=!1,Hr=null,Fn=!1,ff=Error(i(519));function Fr(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(Bn(r,t)),ff}function Vy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[St]=t,r[zt]=l,a){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(a=0;a<Yl.length;a++)De(Yl[a],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":De("invalid",r),au(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":De("invalid",r);break;case"textarea":De("invalid",r),Mr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Zv(r.textContent,a)?(l.popover!=null&&(De("beforetoggle",r),De("toggle",r)),l.onScroll!=null&&De("scroll",r),l.onScrollEnd!=null&&De("scrollend",r),l.onClick!=null&&(r.onclick=ss),r=!0):r=!1,r||Fr(t,!0)}function Uy(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Kt=Kt.return}}function eo(t){if(t!==Kt)return!1;if(!Ue)return Uy(t),Ue=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Dm(t.type,t.memoizedProps)),a=!a),a&&rt&&Fr(t),Uy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));rt=lb(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));rt=lb(t)}else r===27?(r=rt,ri(t.type)?(t=Vm,Vm=null,rt=t):rt=r):rt=Kt?Kn(t.stateNode.nextSibling):null;return!0}function ta(){rt=Kt=null,Ue=!1}function mf(){var t=Hr;return t!==null&&(pn===null?pn=t:pn.push.apply(pn,t),Hr=null),t}function Al(t){Hr===null?Hr=[t]:Hr.push(t)}var pf=z(null),na=null,nr=null;function Gr(t,r,a){le(pf,r._currentValue),r._currentValue=a}function sr(t){t._currentValue=pf.current,ne(pf)}function gf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function yf(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var M=0;M<r.length;M++)if(w.context===r[M]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),gf(f.return,a,t),l||(v=null);break e}f=w.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),gf(v,a,t),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===t){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function to(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var w=d.type;Tn(d.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(d===Le.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Zl):t=[Zl])}d=d.return}t!==null&&yf(r,t,a,l),r.flags|=262144}function Nu(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){na=t,nr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return Ly(na,t)}function Cu(t,r){return na===null&&sa(t),Ly(t,r)}function Ly(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},nr===null){if(t===null)throw Error(i(308));nr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else nr=nr.next=r;return a}var hS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},dS=s.unstable_scheduleCallback,fS=s.unstable_NormalPriority,Nt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new hS,data:new Map,refCount:0}}function Rl(t){t.refCount--,t.refCount===0&&dS(fS,function(){t.controller.abort()})}var Nl=null,vf=0,no=0,so=null;function mS(t,r){if(Nl===null){var a=Nl=[];vf=0,no=xm(),so={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vf++,r.then(Py,Py),r}function Py(){if(--vf===0&&Nl!==null){so!==null&&(so.status="fulfilled");var t=Nl;Nl=null,no=0,so=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function pS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var zy=W.S;W.S=function(t,r){Tv=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&mS(t,r),zy!==null&&zy(t,r)};var ra=z(null);function bf(){var t=ra.current;return t!==null?t:tt.pooledCache}function Iu(t,r){r===null?le(ra,ra.current):le(ra,r.pool)}function By(){var t=bf();return t===null?null:{parent:Nt._currentValue,pool:t}}var ro=Error(i(460)),Ef=Error(i(474)),Du=Error(i(542)),Ou={then:function(){}};function qy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ss,ss),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gy(t),t;default:if(typeof r.status=="string")r.then(ss,ss);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gy(t),t}throw aa=r,ro}}function ia(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(aa=a,ro):a}}var aa=null;function Fy(){if(aa===null)throw Error(i(459));var t=aa;return aa=null,t}function Gy(t){if(t===ro||t===Du)throw Error(i(483))}var io=null,Cl=0;function ku(t){var r=Cl;return Cl+=1,io===null&&(io=[]),Hy(io,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ju(t,r){throw r.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Ky(t){function r(B,P){if(t){var F=B.deletions;F===null?(B.deletions=[P],B.flags|=16):F.push(P)}}function a(B,P){if(!t)return null;for(;P!==null;)r(B,P),P=P.sibling;return null}function l(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function d(B,P){return B=er(B,P),B.index=0,B.sibling=null,B}function f(B,P,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<P?(B.flags|=67108866,P):F):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,P,F,Z){return P===null||P.tag!==6?(P=cf(F,B.mode,Z),P.return=B,P):(P=d(P,F),P.return=B,P)}function M(B,P,F,Z){var pe=F.type;return pe===V?J(B,P,F.props.children,Z,F.key):P!==null&&(P.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&ia(pe)===P.type)?(P=d(P,F.props),Il(P,F),P.return=B,P):(P=Au(F.type,F.key,F.props,null,B.mode,Z),Il(P,F),P.return=B,P)}function G(B,P,F,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=uf(F,B.mode,Z),P.return=B,P):(P=d(P,F.children||[]),P.return=B,P)}function J(B,P,F,Z,pe){return P===null||P.tag!==7?(P=ea(F,B.mode,Z,pe),P.return=B,P):(P=d(P,F),P.return=B,P)}function te(B,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=cf(""+P,B.mode,F),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case N:return F=Au(P.type,P.key,P.props,null,B.mode,F),Il(F,P),F.return=B,F;case R:return P=uf(P,B.mode,F),P.return=B,P;case S:return P=ia(P),te(B,P,F)}if(st(P)||U(P))return P=ea(P,B.mode,F,null),P.return=B,P;if(typeof P.then=="function")return te(B,ku(P),F);if(P.$$typeof===X)return te(B,Cu(B,P),F);ju(B,P)}return null}function K(B,P,F,Z){var pe=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return pe!==null?null:w(B,P,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return F.key===pe?M(B,P,F,Z):null;case R:return F.key===pe?G(B,P,F,Z):null;case S:return F=ia(F),K(B,P,F,Z)}if(st(F)||U(F))return pe!==null?null:J(B,P,F,Z,null);if(typeof F.then=="function")return K(B,P,ku(F),Z);if(F.$$typeof===X)return K(B,P,Cu(B,F),Z);ju(B,F)}return null}function Y(B,P,F,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(F)||null,w(P,B,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return B=B.get(Z.key===null?F:Z.key)||null,M(P,B,Z,pe);case R:return B=B.get(Z.key===null?F:Z.key)||null,G(P,B,Z,pe);case S:return Z=ia(Z),Y(B,P,F,Z,pe)}if(st(Z)||U(Z))return B=B.get(F)||null,J(P,B,Z,pe,null);if(typeof Z.then=="function")return Y(B,P,F,ku(Z),pe);if(Z.$$typeof===X)return Y(B,P,F,Cu(P,Z),pe);ju(P,Z)}return null}function fe(B,P,F,Z){for(var pe=null,Be=null,me=P,Ce=P=0,ke=null;me!==null&&Ce<F.length;Ce++){me.index>Ce?(ke=me,me=null):ke=me.sibling;var qe=K(B,me,F[Ce],Z);if(qe===null){me===null&&(me=ke);break}t&&me&&qe.alternate===null&&r(B,me),P=f(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe,me=ke}if(Ce===F.length)return a(B,me),Ue&&tr(B,Ce),pe;if(me===null){for(;Ce<F.length;Ce++)me=te(B,F[Ce],Z),me!==null&&(P=f(me,P,Ce),Be===null?pe=me:Be.sibling=me,Be=me);return Ue&&tr(B,Ce),pe}for(me=l(me);Ce<F.length;Ce++)ke=Y(me,B,Ce,F[Ce],Z),ke!==null&&(t&&ke.alternate!==null&&me.delete(ke.key===null?Ce:ke.key),P=f(ke,P,Ce),Be===null?pe=ke:Be.sibling=ke,Be=ke);return t&&me.forEach(function(ci){return r(B,ci)}),Ue&&tr(B,Ce),pe}function _e(B,P,F,Z){if(F==null)throw Error(i(151));for(var pe=null,Be=null,me=P,Ce=P=0,ke=null,qe=F.next();me!==null&&!qe.done;Ce++,qe=F.next()){me.index>Ce?(ke=me,me=null):ke=me.sibling;var ci=K(B,me,qe.value,Z);if(ci===null){me===null&&(me=ke);break}t&&me&&ci.alternate===null&&r(B,me),P=f(ci,P,Ce),Be===null?pe=ci:Be.sibling=ci,Be=ci,me=ke}if(qe.done)return a(B,me),Ue&&tr(B,Ce),pe;if(me===null){for(;!qe.done;Ce++,qe=F.next())qe=te(B,qe.value,Z),qe!==null&&(P=f(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe);return Ue&&tr(B,Ce),pe}for(me=l(me);!qe.done;Ce++,qe=F.next())qe=Y(me,B,Ce,qe.value,Z),qe!==null&&(t&&qe.alternate!==null&&me.delete(qe.key===null?Ce:qe.key),P=f(qe,P,Ce),Be===null?pe=qe:Be.sibling=qe,Be=qe);return t&&me.forEach(function(AA){return r(B,AA)}),Ue&&tr(B,Ce),pe}function et(B,P,F,Z){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case N:e:{for(var pe=F.key;P!==null;){if(P.key===pe){if(pe=F.type,pe===V){if(P.tag===7){a(B,P.sibling),Z=d(P,F.props.children),Z.return=B,B=Z;break e}}else if(P.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&ia(pe)===P.type){a(B,P.sibling),Z=d(P,F.props),Il(Z,F),Z.return=B,B=Z;break e}a(B,P);break}else r(B,P);P=P.sibling}F.type===V?(Z=ea(F.props.children,B.mode,Z,F.key),Z.return=B,B=Z):(Z=Au(F.type,F.key,F.props,null,B.mode,Z),Il(Z,F),Z.return=B,B=Z)}return v(B);case R:e:{for(pe=F.key;P!==null;){if(P.key===pe)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){a(B,P.sibling),Z=d(P,F.children||[]),Z.return=B,B=Z;break e}else{a(B,P);break}else r(B,P);P=P.sibling}Z=uf(F,B.mode,Z),Z.return=B,B=Z}return v(B);case S:return F=ia(F),et(B,P,F,Z)}if(st(F))return fe(B,P,F,Z);if(U(F)){if(pe=U(F),typeof pe!="function")throw Error(i(150));return F=pe.call(F),_e(B,P,F,Z)}if(typeof F.then=="function")return et(B,P,ku(F),Z);if(F.$$typeof===X)return et(B,P,Cu(B,F),Z);ju(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(a(B,P.sibling),Z=d(P,F),Z.return=B,B=Z):(a(B,P),Z=cf(F,B.mode,Z),Z.return=B,B=Z),v(B)):a(B,P)}return function(B,P,F,Z){try{Cl=0;var pe=et(B,P,F,Z);return io=null,pe}catch(me){if(me===ro||me===Du)throw me;var Be=wn(29,me,null,B.mode);return Be.lanes=Z,Be.return=B,Be}}}var oa=Ky(!0),Qy=Ky(!1),Kr=!1;function xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Yr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Su(t),Iy(t,null,a),r}return wu(t,l,r,a),Su(t)}function Dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,rl(t,a)}}function wf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Sf=!1;function Ol(){if(Sf){var t=so;if(t!==null)throw t}}function kl(t,r,a,l){Sf=!1;var d=t.updateQueue;Kr=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var M=w,G=M.next;M.next=null,v===null?f=G:v.next=G,v=M;var J=t.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==v&&(w===null?J.firstBaseUpdate=G:w.next=G,J.lastBaseUpdate=M))}if(f!==null){var te=d.baseState;v=0,J=G=M=null,w=f;do{var K=w.lane&-536870913,Y=K!==w.lane;if(Y?(Oe&K)===K:(l&K)===K){K!==0&&K===no&&(Sf=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=t,_e=w;K=r;var et=a;switch(_e.tag){case 1:if(fe=_e.payload,typeof fe=="function"){te=fe.call(et,te,K);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=_e.payload,K=typeof fe=="function"?fe.call(et,te,K):fe,K==null)break e;te=x({},te,K);break e;case 2:Kr=!0}}K=w.callback,K!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(G=J=Y,M=te):J=J.next=Y,v|=K;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);J===null&&(M=te),d.baseState=M,d.firstBaseUpdate=G,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),Zr|=v,t.lanes=v,t.memoizedState=te}}function Yy(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function $y(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yy(a[t],r)}var ao=z(null),Mu=z(0);function Xy(t,r){t=dr,le(Mu,t),le(ao,r),dr=t|r.baseLanes}function Af(){le(Mu,dr),le(ao,ao.current)}function Rf(){dr=Mu.current,ne(ao),ne(Mu)}var Sn=z(null),Gn=null;function $r(t){var r=t.alternate;le(bt,bt.current&1),le(Sn,t),Gn===null&&(r===null||ao.current!==null||r.memoizedState!==null)&&(Gn=t)}function Nf(t){le(bt,bt.current),le(Sn,t),Gn===null&&(Gn=t)}function Wy(t){t.tag===22?(le(bt,bt.current),le(Sn,t),Gn===null&&(Gn=t)):Xr()}function Xr(){le(bt,bt.current),le(Sn,Sn.current)}function An(t){ne(Sn),Gn===t&&(Gn=null),ne(bt)}var bt=z(0);function Vu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jm(a)||Mm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var rr=0,Re=null,Je=null,Ct=null,Uu=!1,oo=!1,la=!1,Lu=0,jl=0,lo=null,gS=0;function pt(){throw Error(i(321))}function Cf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Tn(t[a],r[a]))return!1;return!0}function If(t,r,a,l,d,f){return rr=f,Re=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=t===null||t.memoizedState===null?j_:Gf,la=!1,f=a(l,d),la=!1,oo&&(f=Zy(r,a,l,d)),Jy(t),f}function Jy(t){W.H=Ul;var r=Je!==null&&Je.next!==null;if(rr=0,Ct=Je=Re=null,Uu=!1,jl=0,lo=null,r)throw Error(i(300));t===null||It||(t=t.dependencies,t!==null&&Nu(t)&&(It=!0))}function Zy(t,r,a,l){Re=t;var d=0;do{if(oo&&(lo=null),jl=0,oo=!1,25<=d)throw Error(i(301));if(d+=1,Ct=Je=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=M_,f=r(a,l)}while(oo);return f}function yS(){var t=W.H,r=t.useState()[0];return r=typeof r.then=="function"?Ml(r):r,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Re.flags|=1024),r}function Df(){var t=Lu!==0;return Lu=0,t}function Of(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function kf(t){if(Uu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Uu=!1}rr=0,Ct=Je=Re=null,oo=!1,jl=Lu=0,lo=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Re.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Et(){if(Je===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var r=Ct===null?Re.memoizedState:Ct.next;if(r!==null)Ct=r,Je=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ct===null?Re.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(t){var r=jl;return jl+=1,lo===null&&(lo=[]),t=Hy(lo,t,r),r=Re,(Ct===null?r.memoizedState:Ct.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?j_:Gf),t}function zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ml(t);if(t.$$typeof===X)return Qt(t)}throw Error(i(438,String(t)))}function jf(t){var r=null,a=Re.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Pu(),Re.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=k;return r.index++,a}function ir(t,r){return typeof r=="function"?r(t):r}function Bu(t){var r=Et();return Mf(r,Je,t)}function Mf(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var w=v=null,M=null,G=r,J=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(Oe&te)===te:(rr&te)===te){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===no&&(J=!0);else if((rr&K)===K){G=G.next,K===no&&(J=!0);continue}else te={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=te,v=f):M=M.next=te,Re.lanes|=K,Zr|=K;te=G.action,la&&a(f,te),f=G.hasEagerState?G.eagerState:a(f,te)}else K={lane:te,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=K,v=f):M=M.next=K,Re.lanes|=te,Zr|=te;G=G.next}while(G!==null&&G!==r);if(M===null?v=f:M.next=w,!Tn(f,t.memoizedState)&&(It=!0,J&&(a=so,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=M,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Vf(t){var r=Et(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=t(f,v.action),v=v.next;while(v!==d);Tn(f,r.memoizedState)||(It=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function e_(t,r,a){var l=Re,d=Et(),f=Ue;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=r();var v=!Tn((Je||d).memoizedState,a);if(v&&(d.memoizedState=a,It=!0),d=d.queue,Pf(s_.bind(null,l,d,t),[t]),d.getSnapshot!==r||v||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,co(9,{destroy:void 0},n_.bind(null,l,d,a,r),null),tt===null)throw Error(i(349));f||(rr&127)!==0||t_(l,r,a)}return a}function t_(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Re.updateQueue,r===null?(r=Pu(),Re.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function n_(t,r,a,l){r.value=a,r.getSnapshot=l,r_(r)&&i_(t)}function s_(t,r,a){return a(function(){r_(r)&&i_(t)})}function r_(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Tn(t,a)}catch{return!0}}function i_(t){var r=Zi(t,2);r!==null&&gn(r,t,2)}function Uf(t){var r=ln();if(typeof t=="function"){var a=t;if(t=a(),la){Mn(!0);try{a()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:t},r}function a_(t,r,a,l){return t.baseState=a,Mf(t,Je,typeof l=="function"?l:ir)}function _S(t,r,a,l,d){if(Fu(t))throw Error(i(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,o_(r,f)):(f.next=a.next,r.pending=a.next=f)}}function o_(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=W.T,v={};W.T=v;try{var w=a(d,l),M=W.S;M!==null&&M(v,w),l_(t,r,w)}catch(G){Lf(t,r,G)}finally{f!==null&&v.types!==null&&(f.types=v.types),W.T=f}}else try{f=a(d,l),l_(t,r,f)}catch(G){Lf(t,r,G)}}function l_(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){c_(t,r,l)},function(l){return Lf(t,r,l)}):c_(t,r,a)}function c_(t,r,a){r.status="fulfilled",r.value=a,u_(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,o_(t,a)))}function Lf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,u_(r),r=r.next;while(r!==l)}t.action=null}function u_(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function h_(t,r){return r}function d_(t,r){if(Ue){var a=tt.formState;if(a!==null){e:{var l=Re;if(Ue){if(rt){t:{for(var d=rt,f=Fn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Kn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){rt=Kn(d.nextSibling),l=d.data==="F!";break e}}Fr(l)}l=!1}l&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h_,lastRenderedState:r},a.queue=l,a=D_.bind(null,Re,l),l.dispatch=a,l=Uf(!1),f=Ff.bind(null,Re,!1,l.queue),l=ln(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=_S.bind(null,Re,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function f_(t){var r=Et();return m_(r,Je,t)}function m_(t,r,a){if(r=Mf(t,r,h_)[0],t=Bu(ir)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Ml(r)}catch(v){throw v===ro?Du:v}else l=r;r=Et();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(Re.flags|=2048,co(9,{destroy:void 0},vS.bind(null,d,a),null)),[l,f,t]}function vS(t,r){t.action=r}function p_(t){var r=Et(),a=Je;if(a!==null)return m_(r,a,t);Et(),r=r.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function co(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Re.updateQueue,r===null&&(r=Pu(),Re.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function g_(){return Et().memoizedState}function qu(t,r,a,l){var d=ln();Re.flags|=t,d.memoizedState=co(1|r,{destroy:void 0},a,l===void 0?null:l)}function Hu(t,r,a,l){var d=Et();l=l===void 0?null:l;var f=d.memoizedState.inst;Je!==null&&l!==null&&Cf(l,Je.memoizedState.deps)?d.memoizedState=co(r,f,a,l):(Re.flags|=t,d.memoizedState=co(1|r,f,a,l))}function y_(t,r){qu(8390656,8,t,r)}function Pf(t,r){Hu(2048,8,t,r)}function bS(t){Re.flags|=4;var r=Re.updateQueue;if(r===null)r=Pu(),Re.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function __(t){var r=Et().memoizedState;return bS({ref:r,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function v_(t,r){return Hu(4,2,t,r)}function b_(t,r){return Hu(4,4,t,r)}function E_(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function x_(t,r,a){a=a!=null?a.concat([t]):null,Hu(4,4,E_.bind(null,r,t),a)}function zf(){}function T_(t,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Cf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function w_(t,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Cf(r,l[1]))return l[0];if(l=t(),la){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,r],l}function Bf(t,r,a){return a===void 0||(rr&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Sv(),Re.lanes|=t,Zr|=t,a)}function S_(t,r,a,l){return Tn(a,r)?a:ao.current!==null?(t=Bf(t,a,l),Tn(t,r)||(It=!0),t):(rr&42)===0||(rr&1073741824)!==0&&(Oe&261930)===0?(It=!0,t.memoizedState=a):(t=Sv(),Re.lanes|=t,Zr|=t,r)}function A_(t,r,a,l,d){var f=oe.p;oe.p=f!==0&&8>f?f:8;var v=W.T,w={};W.T=w,Ff(t,!1,r,a);try{var M=d(),G=W.S;if(G!==null&&G(w,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var J=pS(M,l);Vl(t,r,J,Cn(t))}else Vl(t,r,l,Cn(t))}catch(te){Vl(t,r,{then:function(){},status:"rejected",reason:te},Cn())}finally{oe.p=f,v!==null&&w.types!==null&&(v.types=w.types),W.T=v}}function ES(){}function qf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var d=R_(t).queue;A_(t,d,r,ye,a===null?ES:function(){return N_(t),a(l)})}function R_(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function N_(t){var r=R_(t);r.next===null&&(r=t.alternate.memoizedState),Vl(t,r.next.queue,{},Cn())}function Hf(){return Qt(Zl)}function C_(){return Et().memoizedState}function I_(){return Et().memoizedState}function xS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Cn();t=Qr(a);var l=Yr(r,t,a);l!==null&&(gn(l,r,a),Dl(l,r,a)),r={cache:_f()},t.payload=r;return}r=r.return}}function TS(t,r,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(t)?O_(r,a):(a=of(t,r,a,l),a!==null&&(gn(a,t,l),k_(a,r,l)))}function D_(t,r,a){var l=Cn();Vl(t,r,a,l)}function Vl(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))O_(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,w=f(v,a);if(d.hasEagerState=!0,d.eagerState=w,Tn(w,v))return wu(t,r,d,0),tt===null&&Tu(),!1}catch{}if(a=of(t,r,d,l),a!==null)return gn(a,t,l),k_(a,r,l),!0}return!1}function Ff(t,r,a,l){if(l={lane:2,revertLane:xm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(r)throw Error(i(479))}else r=of(t,a,l,2),r!==null&&gn(r,t,2)}function Fu(t){var r=t.alternate;return t===Re||r!==null&&r===Re}function O_(t,r){oo=Uu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function k_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,rl(t,a)}}var Ul={readContext:Qt,use:zu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Ul.useEffectEvent=pt;var j_={readContext:Qt,use:zu,useCallback:function(t,r){return ln().memoizedState=[t,r===void 0?null:r],t},useContext:Qt,useEffect:y_,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,qu(4194308,4,E_.bind(null,r,t),a)},useLayoutEffect:function(t,r){return qu(4194308,4,t,r)},useInsertionEffect:function(t,r){qu(4,2,t,r)},useMemo:function(t,r){var a=ln();r=r===void 0?null:r;var l=t();if(la){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=ln();if(a!==void 0){var d=a(r);if(la){Mn(!0);try{a(r)}finally{Mn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=TS.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var r=ln();return t={current:t},r.memoizedState=t},useState:function(t){t=Uf(t);var r=t.queue,a=D_.bind(null,Re,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:zf,useDeferredValue:function(t,r){var a=ln();return Bf(a,t,r)},useTransition:function(){var t=Uf(!1);return t=A_.bind(null,Re,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Re,d=ln();if(Ue){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),tt===null)throw Error(i(349));(Oe&127)!==0||t_(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,y_(s_.bind(null,l,f,t),[t]),l.flags|=2048,co(9,{destroy:void 0},n_.bind(null,l,f,a,r),null),a},useId:function(){var t=ln(),r=tt.identifierPrefix;if(Ue){var a=js,l=ks;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Lu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=gS++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Hf,useFormState:d_,useActionState:d_,useOptimistic:function(t){var r=ln();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ff.bind(null,Re,!0,a),a.dispatch=r,[t,r]},useMemoCache:jf,useCacheRefresh:function(){return ln().memoizedState=xS.bind(null,Re)},useEffectEvent:function(t){var r=ln(),a={impl:t};return r.memoizedState=a,function(){if((Fe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Gf={readContext:Qt,use:zu,useCallback:T_,useContext:Qt,useEffect:Pf,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:b_,useMemo:w_,useReducer:Bu,useRef:g_,useState:function(){return Bu(ir)},useDebugValue:zf,useDeferredValue:function(t,r){var a=Et();return S_(a,Je.memoizedState,t,r)},useTransition:function(){var t=Bu(ir)[0],r=Et().memoizedState;return[typeof t=="boolean"?t:Ml(t),r]},useSyncExternalStore:e_,useId:C_,useHostTransitionStatus:Hf,useFormState:f_,useActionState:f_,useOptimistic:function(t,r){var a=Et();return a_(a,Je,t,r)},useMemoCache:jf,useCacheRefresh:I_};Gf.useEffectEvent=__;var M_={readContext:Qt,use:zu,useCallback:T_,useContext:Qt,useEffect:Pf,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:b_,useMemo:w_,useReducer:Vf,useRef:g_,useState:function(){return Vf(ir)},useDebugValue:zf,useDeferredValue:function(t,r){var a=Et();return Je===null?Bf(a,t,r):S_(a,Je.memoizedState,t,r)},useTransition:function(){var t=Vf(ir)[0],r=Et().memoizedState;return[typeof t=="boolean"?t:Ml(t),r]},useSyncExternalStore:e_,useId:C_,useHostTransitionStatus:Hf,useFormState:p_,useActionState:p_,useOptimistic:function(t,r){var a=Et();return Je!==null?a_(a,Je,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:I_};M_.useEffectEvent=__;function Kf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Qf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Cn(),d=Qr(l);d.payload=r,a!=null&&(d.callback=a),r=Yr(t,d,l),r!==null&&(gn(r,t,l),Dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Cn(),d=Qr(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Yr(t,d,l),r!==null&&(gn(r,t,l),Dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Cn(),l=Qr(a);l.tag=2,r!=null&&(l.callback=r),r=Yr(t,l,a),r!==null&&(gn(r,t,a),Dl(r,t,a))}};function V_(t,r,a,l,d,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!Tl(a,l)||!Tl(d,f):!0}function U_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Qf.enqueueReplaceState(r,r.state,null)}function ca(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=x({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function L_(t){xu(t)}function P_(t){console.error(t)}function z_(t){xu(t)}function Gu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function B_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Yf(t,r,a){return a=Qr(a),a.tag=3,a.payload={element:null},a.callback=function(){Gu(t,r)},a}function q_(t){return t=Qr(t),t.tag=3,t}function H_(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){B_(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){B_(r,a,l),typeof d!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function wS(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&to(r,a,d,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?sh():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Ou?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),vm(t,l,d)),!1;case 22:return a.flags|=65536,l===Ou?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),vm(t,l,d)),!1}throw Error(i(435,a.tag))}return vm(t,l,d),sh(),!1}if(Ue)return r=Sn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==ff&&(t=Error(i(422),{cause:l}),Al(Bn(t,a)))):(l!==ff&&(r=Error(i(423),{cause:l}),Al(Bn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Bn(l,a),d=Yf(t.stateNode,l,d),wf(t,d),gt!==4&&(gt=2)),!1;var f=Error(i(520),{cause:l});if(f=Bn(f,a),Gl===null?Gl=[f]:Gl.push(f),gt!==4&&(gt=2),r===null)return!0;l=Bn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Yf(a.stateNode,l,t),wf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ei===null||!ei.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=q_(d),H_(d,t,a,l),wf(a,d),!1}a=a.return}while(a!==null);return!1}var $f=Error(i(461)),It=!1;function Yt(t,r,a,l){r.child=t===null?Qy(r,null,a,l):oa(r,t.child,a,l)}function F_(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return sa(r),l=If(t,r,a,v,f,d),w=Df(),t!==null&&!It?(Of(t,r,d),ar(t,r,d)):(Ue&&w&&hf(r),r.flags|=1,Yt(t,r,l,d),r.child)}function G_(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!lf(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,K_(t,r,f,l,d)):(t=Au(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!sm(t,d)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(v,l)&&t.ref===r.ref)return ar(t,r,d)}return r.flags|=1,t=er(f,l),t.ref=r.ref,t.return=r,r.child=t}function K_(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(Tl(f,l)&&t.ref===r.ref)if(It=!1,r.pendingProps=l=f,sm(t,d))(t.flags&131072)!==0&&(It=!0);else return r.lanes=t.lanes,ar(t,r,d)}return Xf(t,r,a,l,d)}function Q_(t,r,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,r.child=null;return Y_(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Iu(r,f!==null?f.cachePool:null),f!==null?Xy(r,f):Af(),Wy(r);else return l=r.lanes=536870912,Y_(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(Iu(r,f.cachePool),Xy(r,f),Xr(),r.memoizedState=null):(t!==null&&Iu(r,null),Af(),Xr());return Yt(t,r,d,a),r.child}function Ll(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Y_(t,r,a,l,d){var f=bf();return f=f===null?null:{parent:Nt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&Iu(r,null),Af(),Wy(r),t!==null&&to(t,r,l,!0),r.childLanes=d,null}function Ku(t,r){return r=Yu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function $_(t,r,a){return oa(r,t.child,null,a),t=Ku(r,r.pendingProps),t.flags|=2,An(r),r.memoizedState=null,t}function SS(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ue){if(l.mode==="hidden")return t=Ku(r,l),r.lanes=536870912,Ll(null,t);if(Nf(r),(t=rt)?(t=ob(t,Fn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:qr!==null?{id:ks,overflow:js}:null,retryLane:536870912,hydrationErrors:null},a=Oy(t),a.return=r,r.child=a,Kt=r,rt=null)):t=null,t===null)throw Fr(r);return r.lanes=536870912,null}return Ku(r,l)}var f=t.memoizedState;if(f!==null){var v=f.dehydrated;if(Nf(r),d)if(r.flags&256)r.flags&=-257,r=$_(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(It||to(t,r,a,!1),d=(a&t.childLanes)!==0,It||d){if(l=tt,l!==null&&(v=il(l,a),v!==0&&v!==f.retryLane))throw f.retryLane=v,Zi(t,v),gn(l,t,v),$f;sh(),r=$_(t,r,a)}else t=f.treeContext,rt=Kn(v.nextSibling),Kt=r,Ue=!0,Hr=null,Fn=!1,t!==null&&My(r,t),r=Ku(r,l),r.flags|=4096;return r}return t=er(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Qu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Xf(t,r,a,l,d){return sa(r),a=If(t,r,a,l,void 0,d),l=Df(),t!==null&&!It?(Of(t,r,d),ar(t,r,d)):(Ue&&l&&hf(r),r.flags|=1,Yt(t,r,a,d),r.child)}function X_(t,r,a,l,d,f){return sa(r),r.updateQueue=null,a=Zy(r,l,a,d),Jy(t),l=Df(),t!==null&&!It?(Of(t,r,f),ar(t,r,f)):(Ue&&l&&hf(r),r.flags|=1,Yt(t,r,a,f),r.child)}function W_(t,r,a,l,d){if(sa(r),r.stateNode===null){var f=Wa,v=a.contextType;typeof v=="object"&&v!==null&&(f=Qt(v)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},xf(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?Qt(v):Wa,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Kf(r,a,v,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Qf.enqueueReplaceState(f,f.state,null),kl(r,l,f,d),Ol(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,M=ca(a,w);f.props=M;var G=f.context,J=a.contextType;v=Wa,typeof J=="object"&&J!==null&&(v=Qt(J));var te=a.getDerivedStateFromProps;J=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||G!==v)&&U_(r,f,l,v),Kr=!1;var K=r.memoizedState;f.state=K,kl(r,l,f,d),Ol(),G=r.memoizedState,w||K!==G||Kr?(typeof te=="function"&&(Kf(r,a,te,l),G=r.memoizedState),(M=Kr||V_(r,a,M,l,K,G,v))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=G),f.props=l,f.state=G,f.context=v,l=M):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Tf(t,r),v=r.memoizedProps,J=ca(a,v),f.props=J,te=r.pendingProps,K=f.context,G=a.contextType,M=Wa,typeof G=="object"&&G!==null&&(M=Qt(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==te||K!==M)&&U_(r,f,l,M),Kr=!1,K=r.memoizedState,f.state=K,kl(r,l,f,d),Ol();var Y=r.memoizedState;v!==te||K!==Y||Kr||t!==null&&t.dependencies!==null&&Nu(t.dependencies)?(typeof w=="function"&&(Kf(r,a,w,l),Y=r.memoizedState),(J=Kr||V_(r,a,J,l,K,Y,M)||t!==null&&t.dependencies!==null&&Nu(t.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Y,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Y,M)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),f.props=l,f.state=Y,f.context=M,l=J):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Qu(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=oa(r,t.child,null,d),r.child=oa(r,null,a,d)):Yt(t,r,a,d),r.memoizedState=f.state,t=r.child):t=ar(t,r,d),t}function J_(t,r,a,l){return ta(),r.flags|=256,Yt(t,r,a,l),r.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jf(t){return{baseLanes:t,cachePool:By()}}function Zf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Nn),t}function Z_(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),v&&(d=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ue){if(d?$r(r):Xr(),(t=rt)?(t=ob(t,Fn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:qr!==null?{id:ks,overflow:js}:null,retryLane:536870912,hydrationErrors:null},a=Oy(t),a.return=r,r.child=a,Kt=r,rt=null)):t=null,t===null)throw Fr(r);return Mm(t)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,d?(Xr(),d=r.mode,w=Yu({mode:"hidden",children:w},d),l=ea(l,d,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Jf(a),l.childLanes=Zf(t,v,a),r.memoizedState=Wf,Ll(null,l)):($r(r),em(r,w))}var M=t.memoizedState;if(M!==null&&(w=M.dehydrated,w!==null)){if(f)r.flags&256?($r(r),r.flags&=-257,r=tm(t,r,a)):r.memoizedState!==null?(Xr(),r.child=t.child,r.flags|=128,r=null):(Xr(),w=l.fallback,d=r.mode,l=Yu({mode:"visible",children:l.children},d),w=ea(w,d,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,oa(r,t.child,null,a),l=r.child,l.memoizedState=Jf(a),l.childLanes=Zf(t,v,a),r.memoizedState=Wf,r=Ll(null,l));else if($r(r),Mm(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(i(419)),l.stack="",l.digest=v,Al({value:l,source:null,stack:null}),r=tm(t,r,a)}else if(It||to(t,r,a,!1),v=(a&t.childLanes)!==0,It||v){if(v=tt,v!==null&&(l=il(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Zi(t,l),gn(v,t,l),$f;jm(w)||sh(),r=tm(t,r,a)}else jm(w)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,rt=Kn(w.nextSibling),Kt=r,Ue=!0,Hr=null,Fn=!1,t!==null&&My(r,t),r=em(r,l.children),r.flags|=4096);return r}return d?(Xr(),w=l.fallback,d=r.mode,M=t.child,G=M.sibling,l=er(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?w=er(G,w):(w=ea(w,d,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,Ll(null,l),l=r.child,w=t.child.memoizedState,w===null?w=Jf(a):(d=w.cachePool,d!==null?(M=Nt._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=By(),w={baseLanes:w.baseLanes|a,cachePool:d}),l.memoizedState=w,l.childLanes=Zf(t,v,a),r.memoizedState=Wf,Ll(t.child,l)):($r(r),a=t.child,t=a.sibling,a=er(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function em(t,r){return r=Yu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Yu(t,r){return t=wn(22,t,null,r),t.lanes=0,t}function tm(t,r,a){return oa(r,t.child,null,a),t=em(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ev(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),gf(t.return,r,a)}function nm(t,r,a,l,d,f){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=d,v.treeForkCount=f)}function tv(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var v=bt.current,w=(v&2)!==0;if(w?(v=v&1|2,r.flags|=128):v&=1,le(bt,v),Yt(t,r,l,a),l=Ue?Sl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ev(t,a,r);else if(t.tag===19)ev(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Vu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),nm(r,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Vu(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}nm(r,!0,a,null,f,l);break;case"together":nm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ar(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Zr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(to(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=er(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=er(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function sm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Nu(t)))}function AS(t,r,a){switch(r.tag){case 3:Mt(r,r.stateNode.containerInfo),Gr(r,Nt,t.memoizedState.cache),ta();break;case 27:case 5:Mi(r);break;case 4:Mt(r,r.stateNode.containerInfo);break;case 10:Gr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Nf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?($r(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Z_(t,r,a):($r(r),t=ar(t,r,a),t!==null?t.sibling:null);$r(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(to(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return tv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),le(bt,bt.current),l)break;return null;case 22:return r.lanes=0,Q_(t,r,a,r.pendingProps);case 24:Gr(r,Nt,t.memoizedState.cache)}return ar(t,r,a)}function nv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)It=!0;else{if(!sm(t,a)&&(r.flags&128)===0)return It=!1,AS(t,r,a);It=(t.flags&131072)!==0}else It=!1,Ue&&(r.flags&1048576)!==0&&jy(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ia(r.elementType),r.type=t,typeof t=="function")lf(t)?(l=ca(t,l),r.tag=1,r=W_(null,r,t,l,a)):(r.tag=0,r=Xf(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===re){r.tag=11,r=F_(null,r,t,l,a);break e}else if(d===C){r.tag=14,r=G_(null,r,t,l,a);break e}}throw r=Ee(t)||t,Error(i(306,r,""))}}return r;case 0:return Xf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ca(l,r.pendingProps),W_(t,r,l,d,a);case 3:e:{if(Mt(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Tf(t,r),kl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Gr(r,Nt,l),l!==f.cache&&yf(r,[Nt],a,!0),Ol(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=J_(t,r,l,a);break e}else if(l!==d){d=Bn(Error(i(424)),r),Al(d),r=J_(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,rt=Kn(t.firstChild),Kt=r,Ue=!0,Hr=null,Fn=!0,a=Qy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ta(),l===d){r=ar(t,r,a);break e}Yt(t,r,l,a)}r=r.child}return r;case 26:return Qu(t,r),t===null?(a=fb(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ue||(a=r.type,t=r.pendingProps,l=uh(Ne.current).createElement(a),l[St]=r,l[zt]=t,$t(l,a,t),At(l),r.stateNode=l):r.memoizedState=fb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Mi(r),t===null&&Ue&&(l=r.stateNode=ub(r.type,r.pendingProps,Ne.current),Kt=r,Fn=!0,d=rt,ri(r.type)?(Vm=d,rt=Kn(l.firstChild)):rt=d),Yt(t,r,r.pendingProps.children,a),Qu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ue&&((d=l=rt)&&(l=nA(l,r.type,r.pendingProps,Fn),l!==null?(r.stateNode=l,Kt=r,rt=Kn(l.firstChild),Fn=!1,d=!0):d=!1),d||Fr(r)),Mi(r),d=r.type,f=r.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,Dm(d,f)?l=null:v!==null&&Dm(d,v)&&(r.flags|=32),r.memoizedState!==null&&(d=If(t,r,yS,null,null,a),Zl._currentValue=d),Qu(t,r),Yt(t,r,l,a),r.child;case 6:return t===null&&Ue&&((t=a=rt)&&(a=sA(a,r.pendingProps,Fn),a!==null?(r.stateNode=a,Kt=r,rt=null,t=!0):t=!1),t||Fr(r)),null;case 13:return Z_(t,r,a);case 4:return Mt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=oa(r,null,l,a):Yt(t,r,l,a),r.child;case 11:return F_(t,r,r.type,r.pendingProps,a);case 7:return Yt(t,r,r.pendingProps,a),r.child;case 8:return Yt(t,r,r.pendingProps.children,a),r.child;case 12:return Yt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Gr(r,r.type,l.value),Yt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,sa(r),d=Qt(d),l=l(d),r.flags|=1,Yt(t,r,l,a),r.child;case 14:return G_(t,r,r.type,r.pendingProps,a);case 15:return K_(t,r,r.type,r.pendingProps,a);case 19:return tv(t,r,a);case 31:return SS(t,r,a);case 22:return Q_(t,r,a,r.pendingProps);case 24:return sa(r),l=Qt(Nt),t===null?(d=bf(),d===null&&(d=tt,f=_f(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},xf(r),Gr(r,Nt,d)):((t.lanes&a)!==0&&(Tf(t,r),kl(r,null,null,a),Ol()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Gr(r,Nt,l)):(l=f.cache,Gr(r,Nt,l),l!==d.cache&&yf(r,[Nt],a,!0))),Yt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function or(t){t.flags|=4}function rm(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Cv())t.flags|=8192;else throw aa=Ou,Ef}else t.flags&=-16777217}function sv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_b(r))if(Cv())t.flags|=8192;else throw aa=Ou,Ef}function $u(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?tu():536870912,t.lanes|=r,mo|=r)}function Pl(t,r){if(!Ue)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function RS(t,r,a){var l=r.pendingProps;switch(df(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(r),null;case 1:return it(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),sr(Nt),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(eo(r)?or(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mf())),it(r),null;case 26:var d=r.type,f=r.memoizedState;return t===null?(or(r),f!==null?(it(r),sv(r,f)):(it(r),rm(r,d,null,l,a))):f?f!==t.memoizedState?(or(r),it(r),sv(r,f)):(it(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&or(r),it(r),rm(r,d,t,l,a)),null;case 27:if(Oa(r),a=Ne.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}t=de.current,eo(r)?Vy(r):(t=ub(d,l,a),r.stateNode=t,or(r))}return it(r),null;case 5:if(Oa(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}if(f=de.current,eo(r))Vy(r);else{var v=uh(Ne.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}f[St]=r,f[zt]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=f;e:switch($t(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&or(r)}}return it(r),rm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&or(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=Ne.current,eo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[St]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Zv(t.nodeValue,a)),t||Fr(r,!0)}else t=uh(t).createTextNode(l),t[St]=r,r.stateNode=t}return it(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=eo(r),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[St]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),t=!1}else a=mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(An(r),r):(An(r),null);if((r.flags&128)!==0)throw Error(i(558))}return it(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=eo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[St]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),d=!1}else d=mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(An(r),r):(An(r),null)}return An(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),$u(r,r.updateQueue),it(r),null);case 4:return ct(),t===null&&Am(r.stateNode.containerInfo),it(r),null;case 10:return sr(r.type),it(r),null;case 19:if(ne(bt),l=r.memoizedState,l===null)return it(r),null;if(d=(r.flags&128)!==0,f=l.rendering,f===null)if(d)Pl(l,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Vu(t),f!==null){for(r.flags|=128,Pl(l,!1),t=f.updateQueue,r.updateQueue=t,$u(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Dy(a,t),a=a.sibling;return le(bt,bt.current&1|2),Ue&&tr(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&an()>eh&&(r.flags|=128,d=!0,Pl(l,!1),r.lanes=4194304)}else{if(!d)if(t=Vu(f),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,$u(r,t),Pl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ue)return it(r),null}else 2*an()-l.renderingStartTime>eh&&a!==536870912&&(r.flags|=128,d=!0,Pl(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=an(),t.sibling=null,a=bt.current,le(bt,d?a&1|2:a&1),Ue&&tr(r,l.treeForkCount),t):(it(r),null);case 22:case 23:return An(r),Rf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(it(r),r.subtreeFlags&6&&(r.flags|=8192)):it(r),a=r.updateQueue,a!==null&&$u(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ne(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),sr(Nt),it(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function NS(t,r){switch(df(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return sr(Nt),ct(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Oa(r),null;case 31:if(r.memoizedState!==null){if(An(r),r.alternate===null)throw Error(i(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(An(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ne(bt),null;case 4:return ct(),null;case 10:return sr(r.type),null;case 22:case 23:return An(r),Rf(),t!==null&&ne(ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return sr(Nt),null;case 25:return null;default:return null}}function rv(t,r){switch(df(r),r.tag){case 3:sr(Nt),ct();break;case 26:case 27:case 5:Oa(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&An(r);break;case 13:An(r);break;case 19:ne(bt);break;case 10:sr(r.type);break;case 22:case 23:An(r),Rf(),t!==null&&ne(ra);break;case 24:sr(Nt)}}function zl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==d)}}catch(w){Xe(r,r.return,w)}}function Wr(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,d=r;var M=a,G=w;try{G()}catch(J){Xe(d,M,J)}}}l=l.next}while(l!==f)}}catch(J){Xe(r,r.return,J)}}function iv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{$y(r,a)}catch(l){Xe(t,t.return,l)}}}function av(t,r,a){a.props=ca(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,r,l)}}function Bl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Xe(t,r,d)}}function Ms(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Xe(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Xe(t,r,d)}else a.current=null}function ov(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Xe(t,t.return,d)}}function im(t,r,a){try{var l=t.stateNode;XS(l,t.type,a,r),l[zt]=r}catch(d){Xe(t,t.return,d)}}function lv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ri(t.type)||t.tag===4}function am(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ri(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ss));else if(l!==4&&(l===27&&ri(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(om(t,r,a),t=t.sibling;t!==null;)om(t,r,a),t=t.sibling}function Xu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ri(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Xu(t,r,a),t=t.sibling;t!==null;)Xu(t,r,a),t=t.sibling}function cv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);$t(r,l,a),r[St]=t,r[zt]=a}catch(f){Xe(t,t.return,f)}}var lr=!1,Dt=!1,lm=!1,uv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function CS(t,r){if(t=t.containerInfo,Cm=yh,t=xy(t),ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,w=-1,M=-1,G=0,J=0,te=t,K=null;t:for(;;){for(var Y;te!==a||d!==0&&te.nodeType!==3||(w=v+d),te!==f||l!==0&&te.nodeType!==3||(M=v+l),te.nodeType===3&&(v+=te.nodeValue.length),(Y=te.firstChild)!==null;)K=te,te=Y;for(;;){if(te===t)break t;if(K===a&&++G===d&&(w=v),K===f&&++J===l&&(M=v),(Y=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=Y}a=w===-1||M===-1?null:{start:w,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Im={focusedElem:t,selectionRange:a},yh=!1,qt=r;qt!==null;)if(r=qt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,qt=t;else for(;qt!==null;){switch(r=qt,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var fe=ca(a.type,d);t=l.getSnapshotBeforeUpdate(fe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Xe(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)km(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":km(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,qt=t;break}qt=r.return}}function hv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ur(t,a),l&4&&zl(5,a);break;case 1:if(ur(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){Xe(a,a.return,v)}else{var d=ca(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Xe(a,a.return,v)}}l&64&&iv(a),l&512&&Bl(a,a.return);break;case 3:if(ur(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{$y(t,r)}catch(v){Xe(a,a.return,v)}}break;case 27:r===null&&l&4&&cv(a);case 26:case 5:ur(t,a),r===null&&l&4&&ov(a),l&512&&Bl(a,a.return);break;case 12:ur(t,a);break;case 31:ur(t,a),l&4&&mv(t,a);break;case 13:ur(t,a),l&4&&pv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=LS.bind(null,a),rA(t,a))));break;case 22:if(l=a.memoizedState!==null||lr,!l){r=r!==null&&r.memoizedState!==null||Dt,d=lr;var f=Dt;lr=l,(Dt=r)&&!f?hr(t,a,(a.subtreeFlags&8772)!==0):ur(t,a),lr=d,Dt=f}break;case 30:break;default:ur(t,a)}}function dv(t){var r=t.alternate;r!==null&&(t.alternate=null,dv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ua(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,dn=!1;function cr(t,r,a){for(a=a.child;a!==null;)fv(t,r,a),a=a.sibling}function fv(t,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Dt||Ms(a,r),cr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ms(a,r);var l=ht,d=dn;ri(a.type)&&(ht=a.stateNode,dn=!1),cr(t,r,a),Xl(a.stateNode),ht=l,dn=d;break;case 5:Dt||Ms(a,r);case 6:if(l=ht,d=dn,ht=null,cr(t,r,a),ht=l,dn=d,ht!==null)if(dn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(f){Xe(a,r,f)}else try{ht.removeChild(a.stateNode)}catch(f){Xe(a,r,f)}break;case 18:ht!==null&&(dn?(t=ht,ib(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xo(t)):ib(ht,a.stateNode));break;case 4:l=ht,d=dn,ht=a.stateNode.containerInfo,dn=!0,cr(t,r,a),ht=l,dn=d;break;case 0:case 11:case 14:case 15:Wr(2,a,r),Dt||Wr(4,a,r),cr(t,r,a);break;case 1:Dt||(Ms(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&av(a,r,l)),cr(t,r,a);break;case 21:cr(t,r,a);break;case 22:Dt=(l=Dt)||a.memoizedState!==null,cr(t,r,a),Dt=l;break;default:cr(t,r,a)}}function mv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xo(t)}catch(a){Xe(r,r.return,a)}}}function pv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xo(t)}catch(a){Xe(r,r.return,a)}}function IS(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new uv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new uv),r;default:throw Error(i(435,t.tag))}}function Wu(t,r){var a=IS(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=PS.bind(null,t,l);l.then(d,d)}})}function fn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,v=r,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(ri(w.type)){ht=w.stateNode,dn=!1;break e}break;case 5:ht=w.stateNode,dn=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,dn=!0;break e}w=w.return}if(ht===null)throw Error(i(160));fv(f,v,d),ht=null,dn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)gv(r,t),r=r.sibling}var cs=null;function gv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(r,t),mn(t),l&4&&(Wr(3,t,t.return),zl(3,t),Wr(5,t,t.return));break;case 1:fn(r,t),mn(t),l&512&&(Dt||a===null||Ms(a,a.return)),l&64&&lr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=cs;if(fn(r,t),mn(t),l&512&&(Dt||a===null||Ms(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Es]||f[St]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),$t(f,l,a),f[St]=t,At(f),l=f;break e;case"link":var v=gb("link","href",d).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}f=d.createElement(l),$t(f,l,a),d.head.appendChild(f);break;case"meta":if(v=gb("meta","content",d).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}f=d.createElement(l),$t(f,l,a),d.head.appendChild(f);break;default:throw Error(i(468,l))}f[St]=t,At(f),l=f}t.stateNode=l}else yb(d,t.type,t.stateNode);else t.stateNode=pb(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?yb(d,t.type,t.stateNode):pb(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&im(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(r,t),mn(t),l&512&&(Dt||a===null||Ms(a,a.return)),a!==null&&l&4&&im(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(r,t),mn(t),l&512&&(Dt||a===null||Ms(a,a.return)),t.flags&32){d=t.stateNode;try{hn(d,"")}catch(fe){Xe(t,t.return,fe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,im(t,d,a!==null?a.memoizedProps:d)),l&1024&&(lm=!0);break;case 6:if(fn(r,t),mn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){Xe(t,t.return,fe)}}break;case 3:if(fh=null,d=cs,cs=hh(r.containerInfo),fn(r,t),cs=d,mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{xo(r.containerInfo)}catch(fe){Xe(t,t.return,fe)}lm&&(lm=!1,yv(t));break;case 4:l=cs,cs=hh(t.stateNode.containerInfo),fn(r,t),mn(t),cs=l;break;case 12:fn(r,t),mn(t);break;case 31:fn(r,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 13:fn(r,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zu=an()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,G=lr,J=Dt;if(lr=G||d,Dt=J||M,fn(r,t),Dt=J,lr=G,mn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||M||lr||Dt||ua(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(f=M.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=M.stateNode;var te=M.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(fe){Xe(M,M.return,fe)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(fe){Xe(M,M.return,fe)}}}else if(r.tag===18){if(a===null){M=r;try{var Y=M.stateNode;d?ab(Y,!0):ab(M.stateNode,!1)}catch(fe){Xe(M,M.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Wu(t,a))));break;case 19:fn(r,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 30:break;case 21:break;default:fn(r,t),mn(t)}}function mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(lv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,f=am(t);Xu(t,f,d);break;case 5:var v=a.stateNode;a.flags&32&&(hn(v,""),a.flags&=-33);var w=am(t);Xu(t,w,v);break;case 3:case 4:var M=a.stateNode.containerInfo,G=am(t);om(t,G,M);break;default:throw Error(i(161))}}catch(J){Xe(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function yv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;yv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ur(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)hv(t,r.alternate,r),r=r.sibling}function ua(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Wr(4,r,r.return),ua(r);break;case 1:Ms(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&av(r,r.return,a),ua(r);break;case 27:Xl(r.stateNode);case 26:case 5:Ms(r,r.return),ua(r);break;case 22:r.memoizedState===null&&ua(r);break;case 30:ua(r);break;default:ua(r)}t=t.sibling}}function hr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:hr(d,f,a),zl(4,f);break;case 1:if(hr(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){Xe(l,l.return,G)}if(l=f,d=l.updateQueue,d!==null){var w=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)Yy(M[d],w)}catch(G){Xe(l,l.return,G)}}a&&v&64&&iv(f),Bl(f,f.return);break;case 27:cv(f);case 26:case 5:hr(d,f,a),a&&l===null&&v&4&&ov(f),Bl(f,f.return);break;case 12:hr(d,f,a);break;case 31:hr(d,f,a),a&&v&4&&mv(d,f);break;case 13:hr(d,f,a),a&&v&4&&pv(d,f);break;case 22:f.memoizedState===null&&hr(d,f,a),Bl(f,f.return);break;case 30:break;default:hr(d,f,a)}r=r.sibling}}function cm(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Rl(a))}function um(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Rl(t))}function us(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_v(t,r,a,l),r=r.sibling}function _v(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:us(t,r,a,l),d&2048&&zl(9,r);break;case 1:us(t,r,a,l);break;case 3:us(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Rl(t)));break;case 12:if(d&2048){us(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Xe(r,r.return,M)}}else us(t,r,a,l);break;case 31:us(t,r,a,l);break;case 13:us(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?us(t,r,a,l):ql(t,r):f._visibility&2?us(t,r,a,l):(f._visibility|=2,uo(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&cm(v,r);break;case 24:us(t,r,a,l),d&2048&&um(r.alternate,r);break;default:us(t,r,a,l)}}function uo(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,v=r,w=a,M=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:uo(f,v,w,M,d),zl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?uo(f,v,w,M,d):ql(f,v):(J._visibility|=2,uo(f,v,w,M,d)),d&&G&2048&&cm(v.alternate,v);break;case 24:uo(f,v,w,M,d),d&&G&2048&&um(v.alternate,v);break;default:uo(f,v,w,M,d)}r=r.sibling}}function ql(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:ql(a,l),d&2048&&cm(l.alternate,l);break;case 24:ql(a,l),d&2048&&um(l.alternate,l);break;default:ql(a,l)}r=r.sibling}}var Hl=8192;function ho(t,r,a){if(t.subtreeFlags&Hl)for(t=t.child;t!==null;)vv(t,r,a),t=t.sibling}function vv(t,r,a){switch(t.tag){case 26:ho(t,r,a),t.flags&Hl&&t.memoizedState!==null&&gA(a,cs,t.memoizedState,t.memoizedProps);break;case 5:ho(t,r,a);break;case 3:case 4:var l=cs;cs=hh(t.stateNode.containerInfo),ho(t,r,a),cs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Hl,Hl=16777216,ho(t,r,a),Hl=l):ho(t,r,a));break;default:ho(t,r,a)}}function bv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Fl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,xv(l,t)}bv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ev(t),t=t.sibling}function Ev(t){switch(t.tag){case 0:case 11:case 15:Fl(t),t.flags&2048&&Wr(9,t,t.return);break;case 3:Fl(t);break;case 12:Fl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Ju(t)):Fl(t);break;default:Fl(t)}}function Ju(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,xv(l,t)}bv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Wr(8,r,r.return),Ju(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(r));break;default:Ju(r)}t=t.sibling}}function xv(t,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Wr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Rl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=t;qt!==null;){l=qt;var d=l.sibling,f=l.return;if(dv(l),l===a){qt=null;break e}if(d!==null){d.return=f,qt=d;break e}qt=f}}}var DS={getCacheForType:function(t){var r=Qt(Nt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},OS=typeof WeakMap=="function"?WeakMap:Map,Fe=0,tt=null,Ie=null,Oe=0,$e=0,Rn=null,Jr=!1,fo=!1,hm=!1,dr=0,gt=0,Zr=0,ha=0,dm=0,Nn=0,mo=0,Gl=null,pn=null,fm=!1,Zu=0,Tv=0,eh=1/0,th=null,ei=null,Ut=0,ti=null,po=null,fr=0,mm=0,pm=null,wv=null,Kl=0,gm=null;function Cn(){return(Fe&2)!==0&&Oe!==0?Oe&-Oe:W.T!==null?xm():nu()}function Sv(){if(Nn===0)if((Oe&536870912)===0||Ue){var t=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),Nn=t}else Nn=536870912;return t=Sn.current,t!==null&&(t.flags|=32),Nn}function gn(t,r,a){(t===tt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(go(t,0),ni(t,Oe,Nn,!1)),Pi(t,a),((Fe&2)===0||t!==tt)&&(t===tt&&((Fe&2)===0&&(ha|=a),gt===4&&ni(t,Oe,Nn,!1)),Vs(t))}function Av(t,r,a){if((Fe&6)!==0)throw Error(i(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||es(t,r),d=l?MS(t,r):_m(t,r,!0),f=l;do{if(d===0){fo&&!l&&ni(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!kS(a)){d=_m(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var w=t;d=Gl;var M=w.current.memoizedState.isDehydrated;if(M&&(go(w,v).flags|=256),v=_m(w,v,!1),v!==2){if(hm&&!M){w.errorRecoveryDisabledLanes|=f,ha|=f,d=4;break e}f=pn,pn=d,f!==null&&(pn===null?pn=f:pn.push.apply(pn,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){go(t,0),ni(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ni(l,r,Nn,!Jr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Zu+300-an(),10<d)){if(ni(l,r,Nn,!Jr),_s(l,0,!0)!==0)break e;fr=r,l.timeoutHandle=sb(Rv.bind(null,l,a,pn,th,fm,r,Nn,ha,mo,Jr,f,"Throttled",-0,0),d);break e}Rv(l,a,pn,th,fm,r,Nn,ha,mo,Jr,f,null,-0,0)}}break}while(!0);Vs(t)}function Rv(t,r,a,l,d,f,v,w,M,G,J,te,K,Y){if(t.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},vv(r,f,te);var fe=(f&62914560)===f?Zu-an():(f&4194048)===f?Tv-an():0;if(fe=yA(te,fe),fe!==null){fr=f,t.cancelPendingCommit=fe(Mv.bind(null,t,r,f,a,l,d,v,w,M,J,te,null,K,Y)),ni(t,f,v,!G);return}}Mv(t,r,f,a,l,d,v,w,M)}function kS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Tn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ni(t,r,a,l){r&=~dm,r&=~ha,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-_t(d),v=1<<f;l[f]=-1,d&=~v}a!==0&&zi(t,a,r)}function nh(){return(Fe&6)===0?(Ql(0),!1):!0}function ym(){if(Ie!==null){if($e===0)var t=Ie.return;else t=Ie,nr=na=null,kf(t),io=null,Cl=0,t=Ie;for(;t!==null;)rv(t.alternate,t),t=t.return;Ie=null}}function go(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,ZS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fr=0,ym(),tt=t,Ie=a=er(t.current,null),Oe=r,$e=0,Rn=null,Jr=!1,fo=es(t,r),hm=!1,mo=Nn=dm=ha=Zr=gt=0,pn=Gl=null,fm=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-_t(l),f=1<<d;r|=t[d],l&=~f}return dr=r,Tu(),a}function Nv(t,r){Re=null,W.H=Ul,r===ro||r===Du?(r=Fy(),$e=3):r===Ef?(r=Fy(),$e=4):$e=r===$f?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ie===null&&(gt=1,Gu(t,Bn(r,t.current)))}function Cv(){var t=Sn.current;return t===null?!0:(Oe&4194048)===Oe?Gn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===Gn:!1}function Iv(){var t=W.H;return W.H=Ul,t===null?Ul:t}function Dv(){var t=W.A;return W.A=DS,t}function sh(){gt=4,Jr||(Oe&4194048)!==Oe&&Sn.current!==null||(fo=!0),(Zr&134217727)===0&&(ha&134217727)===0||tt===null||ni(tt,Oe,Nn,!1)}function _m(t,r,a){var l=Fe;Fe|=2;var d=Iv(),f=Dv();(tt!==t||Oe!==r)&&(th=null,go(t,r)),r=!1;var v=gt;e:do try{if($e!==0&&Ie!==null){var w=Ie,M=Rn;switch($e){case 8:ym(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(r=!0);var G=$e;if($e=0,Rn=null,yo(t,w,M,G),a&&fo){v=0;break e}break;default:G=$e,$e=0,Rn=null,yo(t,w,M,G)}}jS(),v=gt;break}catch(J){Nv(t,J)}while(!0);return r&&t.shellSuspendCounter++,nr=na=null,Fe=l,W.H=d,W.A=f,Ie===null&&(tt=null,Oe=0,Tu()),v}function jS(){for(;Ie!==null;)Ov(Ie)}function MS(t,r){var a=Fe;Fe|=2;var l=Iv(),d=Dv();tt!==t||Oe!==r?(th=null,eh=an()+500,go(t,r)):fo=es(t,r);e:do try{if($e!==0&&Ie!==null){r=Ie;var f=Rn;t:switch($e){case 1:$e=0,Rn=null,yo(t,r,f,1);break;case 2:case 9:if(qy(f)){$e=0,Rn=null,kv(r);break}r=function(){$e!==2&&$e!==9||tt!==t||($e=7),Vs(t)},f.then(r,r);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:qy(f)?($e=0,Rn=null,kv(r)):($e=0,Rn=null,yo(t,r,f,7));break;case 5:var v=null;switch(Ie.tag){case 26:v=Ie.memoizedState;case 5:case 27:var w=Ie;if(v?_b(v):w.stateNode.complete){$e=0,Rn=null;var M=w.sibling;if(M!==null)Ie=M;else{var G=w.return;G!==null?(Ie=G,rh(G)):Ie=null}break t}}$e=0,Rn=null,yo(t,r,f,5);break;case 6:$e=0,Rn=null,yo(t,r,f,6);break;case 8:ym(),gt=6;break e;default:throw Error(i(462))}}VS();break}catch(J){Nv(t,J)}while(!0);return nr=na=null,W.H=l,W.A=d,Fe=a,Ie!==null?0:(tt=null,Oe=0,Tu(),gt)}function VS(){for(;Ie!==null&&!Qd();)Ov(Ie)}function Ov(t){var r=nv(t.alternate,t,dr);t.memoizedProps=t.pendingProps,r===null?rh(t):Ie=r}function kv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=X_(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=X_(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:kf(r);default:rv(a,r),r=Ie=Dy(r,dr),r=nv(a,r,dr)}t.memoizedProps=t.pendingProps,r===null?rh(t):Ie=r}function yo(t,r,a,l){nr=na=null,kf(r),io=null,Cl=0;var d=r.return;try{if(wS(t,d,r,a,Oe)){gt=1,Gu(t,Bn(a,t.current)),Ie=null;return}}catch(f){if(d!==null)throw Ie=d,f;gt=1,Gu(t,Bn(a,t.current)),Ie=null;return}r.flags&32768?(Ue||l===1?t=!0:fo||(Oe&536870912)!==0?t=!1:(Jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),jv(r,t)):rh(r)}function rh(t){var r=t;do{if((r.flags&32768)!==0){jv(r,Jr);return}t=r.return;var a=RS(r.alternate,r,dr);if(a!==null){Ie=a;return}if(r=r.sibling,r!==null){Ie=r;return}Ie=r=t}while(r!==null);gt===0&&(gt=5)}function jv(t,r){do{var a=NS(t.alternate,t);if(a!==null){a.flags&=32767,Ie=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=a}while(t!==null);gt=6,Ie=null}function Mv(t,r,a,l,d,f,v,w,M){t.cancelPendingCommit=null;do ih();while(Ut!==0);if((Fe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=af,Xd(t,a,f,v,w,M),t===tt&&(Ie=tt=null,Oe=0),po=r,ti=t,fr=a,mm=f,pm=d,wv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,zS(Or,function(){return zv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,d=oe.p,oe.p=2,v=Fe,Fe|=4;try{CS(t,r,a)}finally{Fe=v,oe.p=d,W.T=l}}Ut=1,Vv(),Uv(),Lv()}}function Vv(){if(Ut===1){Ut=0;var t=ti,r=po,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var d=Fe;Fe|=4;try{gv(r,t);var f=Im,v=xy(t.containerInfo),w=f.focusedElem,M=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&Ey(w.ownerDocument.documentElement,w)){if(M!==null&&ef(w)){var G=M.start,J=M.end;if(J===void 0&&(J=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(J,w.value.length);else{var te=w.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var Y=K.getSelection(),fe=w.textContent.length,_e=Math.min(M.start,fe),et=M.end===void 0?_e:Math.min(M.end,fe);!Y.extend&&_e>et&&(v=et,et=_e,_e=v);var B=by(w,_e),P=by(w,et);if(B&&P&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var F=te.createRange();F.setStart(B.node,B.offset),Y.removeAllRanges(),_e>et?(Y.addRange(F),Y.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),Y.addRange(F))}}}}for(te=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}yh=!!Cm,Im=Cm=null}finally{Fe=d,oe.p=l,W.T=a}}t.current=r,Ut=2}}function Uv(){if(Ut===2){Ut=0;var t=ti,r=po,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var d=Fe;Fe|=4;try{hv(t,r.alternate,r)}finally{Fe=d,oe.p=l,W.T=a}}Ut=3}}function Lv(){if(Ut===4||Ut===3){Ut=0,$c();var t=ti,r=po,a=fr,l=wv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,po=ti=null,Pv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(ei=null),Xs(a),r=r.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Zn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,d=oe.p,oe.p=2,W.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];f(w.value,{componentStack:w.stack})}}finally{W.T=r,oe.p=d}}(fr&3)!==0&&ih(),Vs(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===gm?Kl++:(Kl=0,gm=t):Kl=0,Ql(0)}}function Pv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Rl(r)))}function ih(){return Vv(),Uv(),Lv(),zv()}function zv(){if(Ut!==5)return!1;var t=ti,r=mm;mm=0;var a=Xs(fr),l=W.T,d=oe.p;try{oe.p=32>a?32:a,W.T=null,a=pm,pm=null;var f=ti,v=fr;if(Ut=0,po=ti=null,fr=0,(Fe&6)!==0)throw Error(i(331));var w=Fe;if(Fe|=4,Ev(f.current),_v(f,f.current,v,a),Fe=w,Ql(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Zn,f)}catch{}return!0}finally{oe.p=d,W.T=l,Pv(t,r)}}function Bv(t,r,a){r=Bn(a,r),r=Yf(t.stateNode,r,2),t=Yr(t,r,2),t!==null&&(Pi(t,2),Vs(t))}function Xe(t,r,a){if(t.tag===3)Bv(t,t,a);else for(;r!==null;){if(r.tag===3){Bv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ei===null||!ei.has(l))){t=Bn(a,t),a=q_(2),l=Yr(r,a,2),l!==null&&(H_(a,l,r,t),Pi(l,2),Vs(l));break}}r=r.return}}function vm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new OS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(hm=!0,d.add(a),t=US.bind(null,t,r,a),r.then(t,t))}function US(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Oe&a)===a&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>an()-Zu?(Fe&2)===0&&go(t,0):dm|=a,mo===Oe&&(mo=0)),Vs(t)}function qv(t,r){r===0&&(r=tu()),t=Zi(t,r),t!==null&&(Pi(t,r),Vs(t))}function LS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),qv(t,a)}function PS(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),qv(t,a)}function zS(t,r){return Vt(t,r)}var ah=null,_o=null,bm=!1,oh=!1,Em=!1,si=0;function Vs(t){t!==_o&&t.next===null&&(_o===null?ah=_o=t:_o=_o.next=t),oh=!0,bm||(bm=!0,qS())}function Ql(t,r){if(!Em&&oh){Em=!0;do for(var a=!1,l=ah;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var v=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-_t(42|t)+1)-1,f&=d&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Kv(l,f))}else f=Oe,f=_s(l,l===tt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||es(l,f)||(a=!0,Kv(l,f));l=l.next}while(a);Em=!1}}function BS(){Hv()}function Hv(){oh=bm=!1;var t=0;si!==0&&JS()&&(t=si);for(var r=an(),a=null,l=ah;l!==null;){var d=l.next,f=Fv(l,r);f===0?(l.next=null,a===null?ah=d:a.next=d,d===null&&(_o=a)):(a=l,(t!==0||(f&3)!==0)&&(oh=!0)),l=d}Ut!==0&&Ut!==5||Ql(t),si!==0&&(si=0)}function Fv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-_t(f),w=1<<v,M=d[v];M===-1?((w&a)===0||(w&l)!==0)&&(d[v]=$d(w,r)):M<=r&&(t.expiredLanes|=w),f&=~w}if(r=tt,a=Oe,a=_s(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Dr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||es(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Dr(l),Xs(a)){case 2:case 8:a=sl;break;case 32:a=Or;break;case 268435456:a=Xc;break;default:a=Or}return l=Gv.bind(null,t),a=Vt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Dr(l),t.callbackPriority=2,t.callbackNode=null,2}function Gv(t,r){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ih()&&t.callbackNode!==a)return null;var l=Oe;return l=_s(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Av(t,l,r),Fv(t,an()),t.callbackNode!=null&&t.callbackNode===a?Gv.bind(null,t):null)}function Kv(t,r){if(ih())return null;Av(t,r,!0)}function qS(){eA(function(){(Fe&6)!==0?Vt(nl,BS):Hv()})}function xm(){if(si===0){var t=no;t===0&&(t=gs,gs<<=1,(gs&261888)===0&&(gs=256)),si=t}return si}function Qv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ba(""+t)}function Yv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function HS(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=Qv((d[zt]||null).action),v=l.submitter;v&&(r=(r=v[zt]||null)?Qv(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var w=new Cs("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(si!==0){var M=v?Yv(d,v):new FormData(d);qf(a,{pending:!0,data:M,method:d.method,action:f},null,M)}}else typeof f=="function"&&(w.preventDefault(),M=v?Yv(d,v):new FormData(d),qf(a,{pending:!0,data:M,method:d.method,action:f},f,M))},currentTarget:d}]})}}for(var Tm=0;Tm<rf.length;Tm++){var wm=rf[Tm],FS=wm.toLowerCase(),GS=wm[0].toUpperCase()+wm.slice(1);ls(FS,"on"+GS)}ls(Sy,"onAnimationEnd"),ls(Ay,"onAnimationIteration"),ls(Ry,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(oS,"onTransitionRun"),ls(lS,"onTransitionStart"),ls(cS,"onTransitionCancel"),ls(Ny,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function $v(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var w=l[v],M=w.instance,G=w.currentTarget;if(w=w.listener,M!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=G;try{f(d)}catch(J){xu(J)}d.currentTarget=null,f=M}else for(v=0;v<l.length;v++){if(w=l[v],M=w.instance,G=w.currentTarget,w=w.listener,M!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=G;try{f(d)}catch(J){xu(J)}d.currentTarget=null,f=M}}}}function De(t,r){var a=r[Va];a===void 0&&(a=r[Va]=new Set);var l=t+"__bubble";a.has(l)||(Xv(r,t,2,!1),a.add(l))}function Sm(t,r,a){var l=0;r&&(l|=4),Xv(a,t,l,r)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Am(t){if(!t[lh]){t[lh]=!0,al.forEach(function(a){a!=="selectionchange"&&(KS.has(a)||Sm(a,!1,t),Sm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[lh]||(r[lh]=!0,Sm("selectionchange",!1,r))}}function Xv(t,r,a,l){switch(Sb(r)){case 2:var d=bA;break;case 8:d=EA;break;default:d=Bm}a=d.bind(null,r,a,t),d=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Rm(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===d)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;w!==null;){if(v=xs(w),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=f=v;continue e}w=w.parentNode}}l=l.return}Lr(function(){var G=f,J=Un(a),te=[];e:{var K=Cy.get(t);if(K!==void 0){var Y=Cs,fe=t;switch(t){case"keypress":if(Qi(a)===0)break e;case"keydown":case"keyup":Y=vu;break;case"focusin":fe="focus",Y=$i;break;case"focusout":fe="blur",Y=$i;break;case"beforeblur":case"afterblur":Y=$i;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=_;break;case Sy:case Ay:case Ry:Y=du;break;case Ny:Y=A;break;case"scroll":case"scrollend":Y=_l;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Zs;break;case"toggle":case"beforetoggle":Y=Ae}var _e=(r&4)!==0,et=!_e&&(t==="scroll"||t==="scrollend"),B=_e?K!==null?K+"Capture":null:K;_e=[];for(var P=G,F;P!==null;){var Z=P;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||B===null||(Z=rs(P,B),Z!=null&&_e.push($l(P,Z,F))),et)break;P=P.return}0<_e.length&&(K=new Y(K,fe,null,a,J),te.push({event:K,listeners:_e}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",K&&a!==pl&&(fe=a.relatedTarget||a.fromElement)&&(xs(fe)||fe[bs]))break e;if((Y||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(fe=a.relatedTarget||a.toElement,Y=G,fe=fe?xs(fe):null,fe!==null&&(et=c(fe),_e=fe.tag,fe!==et||_e!==5&&_e!==27&&_e!==6)&&(fe=null)):(Y=null,fe=G),Y!==fe)){if(_e=vl,Z="onMouseLeave",B="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Zs,Z="onPointerLeave",B="onPointerEnter",P="pointer"),et=Y==null?K:En(Y),F=fe==null?K:En(fe),K=new _e(Z,P+"leave",Y,a,J),K.target=et,K.relatedTarget=F,Z=null,xs(J)===G&&(_e=new _e(B,P+"enter",fe,a,J),_e.target=F,_e.relatedTarget=et,Z=_e),et=Z,Y&&fe)t:{for(_e=QS,B=Y,P=fe,F=0,Z=B;Z;Z=_e(Z))F++;Z=0;for(var pe=P;pe;pe=_e(pe))Z++;for(;0<F-Z;)B=_e(B),F--;for(;0<Z-F;)P=_e(P),Z--;for(;F--;){if(B===P||P!==null&&B===P.alternate){_e=B;break t}B=_e(B),P=_e(P)}_e=null}else _e=null;Y!==null&&Wv(te,K,Y,_e,!1),fe!==null&&et!==null&&Wv(te,et,fe,_e,!0)}}e:{if(K=G?En(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var Be=my;else if(dy(K))if(py)Be=rS;else{Be=nS;var me=tS}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&za(G.elementType)&&(Be=my):Be=sS;if(Be&&(Be=Be(t,G))){fy(te,Be,a,J);break e}me&&me(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&dl(K,"number",K.value)}switch(me=G?En(G):window,t){case"focusin":(dy(me)||me.contentEditable==="true")&&(Ya=me,tf=G,wl=null);break;case"focusout":wl=tf=Ya=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Ty(te,a,J);break;case"selectionchange":if(aS)break;case"keydown":case"keyup":Ty(te,a,J)}var Ce;if(He)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Qa?Xi(t,a)&&(ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Os&&a.locale!=="ko"&&(Qa||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Qa&&(Ce=yl()):(Ns=J,gl="value"in Ns?Ns.value:Ns.textContent,Qa=!0)),me=ch(G,ke),0<me.length&&(ke=new Ds(ke,t,null,a,J),te.push({event:ke,listeners:me}),Ce?ke.data=Ce:(Ce=Ka(a),Ce!==null&&(ke.data=Ce)))),(Ce=Pn?Ww(t,a):Jw(t,a))&&(ke=ch(G,"onBeforeInput"),0<ke.length&&(me=new Ds("onBeforeInput","beforeinput",null,a,J),te.push({event:me,listeners:ke}),me.data=Ce)),HS(te,t,G,a,J)}$v(te,r)})}function $l(t,r,a){return{instance:t,listener:r,currentTarget:a}}function ch(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=rs(t,a),d!=null&&l.unshift($l(t,d,f)),d=rs(t,r),d!=null&&l.push($l(t,d,f))),t.tag===3)return l;t=t.return}return[]}function QS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wv(t,r,a,l,d){for(var f=r._reactName,v=[];a!==null&&a!==l;){var w=a,M=w.alternate,G=w.stateNode;if(w=w.tag,M!==null&&M===l)break;w!==5&&w!==26&&w!==27||G===null||(M=G,d?(G=rs(a,f),G!=null&&v.unshift($l(a,G,M))):d||(G=rs(a,f),G!=null&&v.push($l(a,G,M)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var YS=/\r\n?/g,$S=/\u0000|\uFFFD/g;function Jv(t){return(typeof t=="string"?t:""+t).replace(YS,`
`).replace($S,"")}function Zv(t,r){return r=Jv(r),Jv(t)===r}function Ze(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||hn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&hn(t,""+l);break;case"className":xn(t,"class",l);break;case"tabIndex":xn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(t,a,l);break;case"style":ml(t,l,f);break;case"data":if(r!=="object"){xn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ba(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Ze(t,r,"name",d.name,d,null),Ze(t,r,"formEncType",d.formEncType,d,null),Ze(t,r,"formMethod",d.formMethod,d,null),Ze(t,r,"formTarget",d.formTarget,d,null)):(Ze(t,r,"encType",d.encType,d,null),Ze(t,r,"method",d.method,d,null),Ze(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ba(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ss);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ba(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),La(t,"popover",l);break;case"xlinkActuate":Rt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":La(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,La(t,a,l))}}function Nm(t,r,a,l,d,f){switch(a){case"style":ml(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?hn(t,l):(typeof l=="number"||typeof l=="bigint")&&hn(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[zt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):La(t,a,l)}}}function $t(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ze(t,r,f,v,a,null)}}d&&Ze(t,r,"srcSet",a.srcSet,a,null),l&&Ze(t,r,"src",a.src,a,null);return;case"input":De("invalid",t);var w=f=v=d=null,M=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":d=J;break;case"type":v=J;break;case"checked":M=J;break;case"defaultChecked":G=J;break;case"value":f=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:Ze(t,r,l,J,a,null)}}au(t,f,w,M,G,v,d,!1);return;case"select":De("invalid",t),l=v=f=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:Ze(t,r,d,w,a,null)}r=f,a=v,t.multiple=!!l,r!=null?jr(t,!!l,r,!1):a!=null&&jr(t,!!l,a,!0);return;case"textarea":De("invalid",t),f=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ze(t,r,v,w,a,null)}Mr(t,l,d,f);return;case"option":for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Ze(t,r,M,l,a,null));return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<Yl.length;l++)De(Yl[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ze(t,r,G,l,a,null)}return;default:if(za(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Nm(t,r,J,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ze(t,r,w,l,a,null))}function XS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,w=null,M=null,G=null,J=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":M=te;default:l.hasOwnProperty(Y)||Ze(t,r,Y,null,l,te)}}for(var K in l){var Y=l[K];if(te=a[K],l.hasOwnProperty(K)&&(Y!=null||te!=null))switch(K){case"type":f=Y;break;case"name":d=Y;break;case"checked":G=Y;break;case"defaultChecked":J=Y;break;case"value":v=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==te&&Ze(t,r,K,Y,l,te)}}Pa(t,v,w,M,G,J,f,d);return;case"select":Y=v=w=K=null;for(f in a)if(M=a[f],a.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":Y=M;default:l.hasOwnProperty(f)||Ze(t,r,f,null,l,M)}for(d in l)if(f=l[d],M=a[d],l.hasOwnProperty(d)&&(f!=null||M!=null))switch(d){case"value":K=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==M&&Ze(t,r,d,f,l,M)}r=w,a=v,l=Y,K!=null?jr(t,!!a,K,!1):!!l!=!!a&&(r!=null?jr(t,!!a,r,!0):jr(t,!!a,a?[]:"",!1));return;case"textarea":Y=K=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ze(t,r,w,null,l,d)}for(v in l)if(d=l[v],f=a[v],l.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":K=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&Ze(t,r,v,d,l,f)}ou(t,K,Y);return;case"option":for(var fe in a)K=a[fe],a.hasOwnProperty(fe)&&K!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?t.selected=!1:Ze(t,r,fe,null,l,K));for(M in l)K=l[M],Y=a[M],l.hasOwnProperty(M)&&K!==Y&&(K!=null||Y!=null)&&(M==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":Ze(t,r,M,K,l,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)K=a[_e],a.hasOwnProperty(_e)&&K!=null&&!l.hasOwnProperty(_e)&&Ze(t,r,_e,null,l,K);for(G in l)if(K=l[G],Y=a[G],l.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:Ze(t,r,G,K,l,Y)}return;default:if(za(r)){for(var et in a)K=a[et],a.hasOwnProperty(et)&&K!==void 0&&!l.hasOwnProperty(et)&&Nm(t,r,et,void 0,l,K);for(J in l)K=l[J],Y=a[J],!l.hasOwnProperty(J)||K===Y||K===void 0&&Y===void 0||Nm(t,r,J,K,l,Y);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&Ze(t,r,B,null,l,K);for(te in l)K=l[te],Y=a[te],!l.hasOwnProperty(te)||K===Y||K==null&&Y==null||Ze(t,r,te,K,l,Y)}function eb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,v=d.initiatorType,w=d.duration;if(f&&w&&eb(v)){for(v=0,w=d.responseEnd,l+=1;l<a.length;l++){var M=a[l],G=M.startTime;if(G>w)break;var J=M.transferSize,te=M.initiatorType;J&&eb(te)&&(M=M.responseEnd,v+=J*(M<w?1:(w-G)/(M-G)))}if(--l,r+=8*(f+v)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cm=null,Im=null;function uh(t){return t.nodeType===9?t:t.ownerDocument}function tb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Dm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Om=null;function JS(){var t=window.event;return t&&t.type==="popstate"?t===Om?!1:(Om=t,!0):(Om=null,!1)}var sb=typeof setTimeout=="function"?setTimeout:void 0,ZS=typeof clearTimeout=="function"?clearTimeout:void 0,rb=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof rb<"u"?function(t){return rb.resolve(null).then(t).catch(tA)}:sb;function tA(t){setTimeout(function(){throw t})}function ri(t){return t==="head"}function ib(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),xo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Xl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Xl(a);for(var f=a.firstChild;f;){var v=f.nextSibling,w=f.nodeName;f[Es]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=v}}else a==="body"&&Xl(t.ownerDocument.body);a=d}while(a);xo(r)}function ab(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function km(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":km(a),Ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function nA(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Es])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Kn(t.nextSibling),t===null)break}return null}function sA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Kn(t.nextSibling),t===null))return null;return t}function ob(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Kn(t.nextSibling),t===null))return null;return t}function jm(t){return t.data==="$?"||t.data==="$~"}function Mm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rA(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Kn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Vm=null;function lb(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Kn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function cb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function ub(t,r,a){switch(r=uh(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Xl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ua(t)}var Qn=new Map,hb=new Set;function hh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mr=oe.d;oe.d={f:iA,r:aA,D:oA,C:lA,L:cA,m:uA,X:dA,S:hA,M:fA};function iA(){var t=mr.f(),r=nh();return t||r}function aA(t){var r=Vn(t);r!==null&&r.tag===5&&r.type==="form"?N_(r):mr.r(t)}var vo=typeof document>"u"?null:document;function db(t,r,a){var l=vo;if(l&&typeof r=="string"&&r){var d=un(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),hb.has(d)||(hb.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),$t(r,"link",t),At(r),l.head.appendChild(r)))}}function oA(t){mr.D(t),db("dns-prefetch",t,null)}function lA(t,r){mr.C(t,r),db("preconnect",t,r)}function cA(t,r,a){mr.L(t,r,a);var l=vo;if(l&&t&&r){var d='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+un(a.imageSizes)+'"]')):d+='[href="'+un(t)+'"]';var f=d;switch(r){case"style":f=bo(t);break;case"script":f=Eo(t)}Qn.has(f)||(t=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Qn.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Wl(f))||r==="script"&&l.querySelector(Jl(f))||(r=l.createElement("link"),$t(r,"link",t),At(r),l.head.appendChild(r)))}}function uA(t,r){mr.m(t,r);var a=vo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Eo(t)}if(!Qn.has(f)&&(t=x({rel:"modulepreload",href:t},r),Qn.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(f)))return}l=a.createElement("link"),$t(l,"link",t),At(l),a.head.appendChild(l)}}}function hA(t,r,a){mr.S(t,r,a);var l=vo;if(l&&t){var d=Ts(l).hoistableStyles,f=bo(t);r=r||"default";var v=d.get(f);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Wl(f)))w.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Qn.get(f))&&Um(t,a);var M=v=l.createElement("link");At(M),$t(M,"link",t),M._p=new Promise(function(G,J){M.onload=G,M.onerror=J}),M.addEventListener("load",function(){w.loading|=1}),M.addEventListener("error",function(){w.loading|=2}),w.loading|=4,dh(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:w},d.set(f,v)}}}function dA(t,r){mr.X(t,r);var a=vo;if(a&&t){var l=Ts(a).hoistableScripts,d=Eo(t),f=l.get(d);f||(f=a.querySelector(Jl(d)),f||(t=x({src:t,async:!0},r),(r=Qn.get(d))&&Lm(t,r),f=a.createElement("script"),At(f),$t(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function fA(t,r){mr.M(t,r);var a=vo;if(a&&t){var l=Ts(a).hoistableScripts,d=Eo(t),f=l.get(d);f||(f=a.querySelector(Jl(d)),f||(t=x({src:t,async:!0,type:"module"},r),(r=Qn.get(d))&&Lm(t,r),f=a.createElement("script"),At(f),$t(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function fb(t,r,a,l){var d=(d=Ne.current)?hh(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=bo(a.href),a=Ts(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=bo(a.href);var f=Ts(d).hoistableStyles,v=f.get(t);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=d.querySelector(Wl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(t,a),f||mA(d,t,a,v.state))),r&&l===null)throw Error(i(528,""));return v}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Eo(a),a=Ts(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function bo(t){return'href="'+un(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function mb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function mA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),$t(r,"link",a),At(r),t.head.appendChild(r))}function Eo(t){return'[src="'+un(t)+'"]'}function Jl(t){return"script[async]"+t}function pb(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+un(a.href)+'"]');if(l)return r.instance=l,At(l),l;var d=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),$t(l,"style",d),dh(l,a.precedence,t),r.instance=l;case"stylesheet":d=bo(a.href);var f=t.querySelector(Wl(d));if(f)return r.state.loading|=4,r.instance=f,At(f),f;l=mb(a),(d=Qn.get(d))&&Um(l,d),f=(t.ownerDocument||t).createElement("link"),At(f);var v=f;return v._p=new Promise(function(w,M){v.onload=w,v.onerror=M}),$t(f,"link",l),r.state.loading|=4,dh(f,a.precedence,t),r.instance=f;case"script":return f=Eo(a.src),(d=t.querySelector(Jl(f)))?(r.instance=d,At(d),d):(l=a,(d=Qn.get(f))&&(l=x({},a),Lm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),At(d),$t(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,dh(l,a.precedence,t));return r.instance}function dh(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===r)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var fh=null;function gb(t,r,a){if(fh===null){var l=new Map,d=fh=new Map;d.set(a,l)}else d=fh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Es]||f[St]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=t+v;var w=l.get(v);w?w.push(f):l.set(v,[f])}}return l}function yb(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function pA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _b(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function gA(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=bo(l.href),f=r.querySelector(Wl(d));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=mh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,At(f);return}f=r.ownerDocument||r,l=mb(l),(d=Qn.get(d))&&Um(l,d),f=f.createElement("link"),At(f);var v=f;v._p=new Promise(function(w,M){v.onload=w,v.onerror=M}),$t(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=mh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var Pm=0;function yA(t,r){return t.stylesheets&&t.count===0&&gh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&Pm===0&&(Pm=62500*WS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Pm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ph=null;function gh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ph=new Map,r.forEach(_A,t),ph=null,mh.call(t))}function _A(t,r){if(!(r.state.loading&4)){var a=ph.get(t);if(a)var l=a.get(null);else{a=new Map,ph.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=r.instance,v=d.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,d),a.set(v,d),this.count++,l=mh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Zl={$$typeof:X,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function vA(t,r,a,l,d,f,v,w,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.hiddenUpdates=vs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function vb(t,r,a,l,d,f,v,w,M,G,J,te){return t=new vA(t,r,a,v,M,G,J,te,w),r=1,f===!0&&(r|=24),f=wn(3,null,null,r),t.current=f,f.stateNode=t,r=_f(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},xf(f),t}function bb(t){return t?(t=Wa,t):Wa}function Eb(t,r,a,l,d,f){d=bb(d),l.context===null?l.context=d:l.pendingContext=d,l=Qr(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Yr(t,l,r),a!==null&&(gn(a,t,r),Dl(a,t,r))}function xb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function zm(t,r){xb(t,r),(t=t.alternate)&&xb(t,r)}function Tb(t){if(t.tag===13||t.tag===31){var r=Zi(t,67108864);r!==null&&gn(r,t,67108864),zm(t,67108864)}}function wb(t){if(t.tag===13||t.tag===31){var r=Cn();r=Bi(r);var a=Zi(t,r);a!==null&&gn(a,t,r),zm(t,r)}}var yh=!0;function bA(t,r,a,l){var d=W.T;W.T=null;var f=oe.p;try{oe.p=2,Bm(t,r,a,l)}finally{oe.p=f,W.T=d}}function EA(t,r,a,l){var d=W.T;W.T=null;var f=oe.p;try{oe.p=8,Bm(t,r,a,l)}finally{oe.p=f,W.T=d}}function Bm(t,r,a,l){if(yh){var d=qm(l);if(d===null)Rm(t,r,l,_h,a),Ab(t,l);else if(TA(d,t,r,a,l))l.stopPropagation();else if(Ab(t,l),r&4&&-1<xA.indexOf(t)){for(;d!==null;){var f=Vn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ys(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var M=1<<31-_t(v);w.entanglements[1]|=M,v&=~M}Vs(f),(Fe&6)===0&&(eh=an()+500,Ql(0))}}break;case 31:case 13:w=Zi(f,2),w!==null&&gn(w,f,2),nh(),zm(f,2)}if(f=qm(l),f===null&&Rm(t,r,l,_h,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Rm(t,r,l,null,a)}}function qm(t){return t=Un(t),Hm(t)}var _h=null;function Hm(t){if(_h=null,t=xs(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=u(r),t!==null)return t;t=null}else if(a===31){if(t=p(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return _h=t,null}function Sb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ui()){case nl:return 2;case sl:return 8;case Or:case Yd:return 32;case Xc:return 268435456;default:return 32}default:return 32}}var Fm=!1,ii=null,ai=null,oi=null,ec=new Map,tc=new Map,li=[],xA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ab(t,r){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":ec.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(r.pointerId)}}function nc(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=Vn(r),r!==null&&Tb(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function TA(t,r,a,l,d){switch(r){case"focusin":return ii=nc(ii,t,r,a,l,d),!0;case"dragenter":return ai=nc(ai,t,r,a,l,d),!0;case"mouseover":return oi=nc(oi,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return ec.set(f,nc(ec.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,tc.set(f,nc(tc.get(f)||null,t,r,a,l,d)),!0}return!1}function Rb(t){var r=xs(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){t.blockedOn=r,ts(t.priority,function(){wb(a)});return}}else if(r===31){if(r=p(a),r!==null){t.blockedOn=r,ts(t.priority,function(){wb(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=qm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);pl=l,a.target.dispatchEvent(l),pl=null}else return r=Vn(a),r!==null&&Tb(r),t.blockedOn=a,!1;r.shift()}return!0}function Nb(t,r,a){vh(t)&&a.delete(r)}function wA(){Fm=!1,ii!==null&&vh(ii)&&(ii=null),ai!==null&&vh(ai)&&(ai=null),oi!==null&&vh(oi)&&(oi=null),ec.forEach(Nb),tc.forEach(Nb)}function bh(t,r){t.blockedOn===r&&(t.blockedOn=null,Fm||(Fm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wA)))}var Eh=null;function Cb(t){Eh!==t&&(Eh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Eh===t&&(Eh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(Hm(l||a)===null)continue;break}var f=Vn(a);f!==null&&(t.splice(r,3),r-=3,qf(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function xo(t){function r(M){return bh(M,t)}ii!==null&&bh(ii,t),ai!==null&&bh(ai,t),oi!==null&&bh(oi,t),ec.forEach(r),tc.forEach(r);for(var a=0;a<li.length;a++){var l=li[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<li.length&&(a=li[0],a.blockedOn===null);)Rb(a),a.blockedOn===null&&li.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],v=d[zt]||null;if(typeof f=="function")v||Cb(a);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[zt]||null)w=v.formAction;else if(Hm(d)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Cb(a)}}}function Ib(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Gm(t){this._internalRoot=t}xh.prototype.render=Gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Cn();Eb(a,l,t,r,null,null)},xh.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Eb(t.current,2,null,t,null,null),nh(),r[bs]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var r=nu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<li.length&&r!==0&&r<li[a].priority;a++);li.splice(a,0,t),a===0&&Rb(t)}};var Db=e.version;if(Db!=="19.2.3")throw Error(i(527,Db,"19.2.3"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var SA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Zn=Th.inject(SA),Ft=Th}catch{}}return rc.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",d=L_,f=P_,v=z_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=vb(t,1,!1,null,null,a,l,null,d,f,v,Ib),t[bs]=r.current,Am(t),new Gm(r)},rc.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,d="",f=L_,v=P_,w=z_,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=vb(t,1,!0,r,a??null,l,d,M,f,v,w,Ib),r.context=bb(null),a=r.current,l=Cn(),l=Bi(l),d=Qr(l),d.callback=null,Yr(a,d,l),a=l,r.current.lanes=a,Pi(r,a),Vs(r),t[bs]=r.current,Am(t),new xh(r)},rc.version="19.2.3",rc}var Bb;function MA(){if(Bb)return Ym.exports;Bb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ym.exports=jA(),Ym.exports}var VA=MA();var qb="popstate";function UA(s={}){function e(i,o){let{pathname:c,search:u,hash:p}=i.location;return _p("",{pathname:c,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:xc(o)}return PA(e,n,null,s)}function dt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Wn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LA(){return Math.random().toString(36).substring(2,10)}function Hb(s,e){return{usr:s.state,key:s.key,idx:e}}function _p(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:n,key:e&&e.key||i||LA()}}function xc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ho(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function PA(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,u=o.history,p="POP",g=null,y=b();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function b(){return(u.state||{idx:null}).idx}function x(){p="POP";let j=b(),H=j==null?null:j-y;y=j,g&&g({action:p,location:V.location,delta:H})}function T(j,H){p="PUSH";let $=_p(V.location,j,H);y=b()+1;let X=Hb($,y),re=V.createHref($);try{u.pushState(X,"",re)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(re)}c&&g&&g({action:p,location:V.location,delta:1})}function N(j,H){p="REPLACE";let $=_p(V.location,j,H);y=b();let X=Hb($,y),re=V.createHref($);u.replaceState(X,"",re),c&&g&&g({action:p,location:V.location,delta:0})}function R(j){return zA(j)}let V={get action(){return p},get location(){return s(o,u)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(qb,x),g=j,()=>{o.removeEventListener(qb,x),g=null}},createHref(j){return e(o,j)},createURL:R,encodeLocation(j){let H=R(j);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:N,go(j){return u.go(j)}};return V}function zA(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:xc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function VE(s,e,n="/"){return BA(s,e,n,!1)}function BA(s,e,n,i){let o=typeof e=="string"?Ho(e):e,c=xr(o.pathname||"/",n);if(c==null)return null;let u=UE(s);qA(u);let p=null;for(let g=0;p==null&&g<u.length;++g){let y=ZA(c);p=WA(u[g],y,i)}return p}function UE(s,e=[],n=[],i="",o=!1){let c=(u,p,g=o,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;dt(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let x=_r([i,b.relativePath]),T=n.concat(b);u.children&&u.children.length>0&&(dt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),UE(u.children,e,T,x,g)),!(u.path==null&&!u.index)&&e.push({path:x,score:$A(x,u.index),routesMeta:T})};return s.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))c(u,p);else for(let g of LE(u.path))c(u,p,!0,g)}),e}function LE(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let u=LE(i.join("/")),p=[];return p.push(...u.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...u),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function qA(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:XA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var HA=/^:[\w-]+$/,FA=3,GA=2,KA=1,QA=10,YA=-2,Fb=s=>s==="*";function $A(s,e){let n=s.split("/"),i=n.length;return n.some(Fb)&&(i+=YA),e&&(i+=GA),n.filter(o=>!Fb(o)).reduce((o,c)=>o+(HA.test(c)?FA:c===""?KA:QA),i)}function XA(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function WA(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",u=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",x=Qh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!x&&y&&n&&!i[i.length-1].route.index&&(x=Qh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!x)return null;Object.assign(o,x.params),u.push({params:o,pathname:_r([c,x.pathname]),pathnameBase:sR(_r([c,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(c=_r([c,x.pathnameBase]))}return u}function Qh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=JA(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:x},T)=>{if(b==="*"){let R=p[T]||"";u=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const N=p[T];return x&&!N?y[b]=void 0:y[b]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:u,pattern:s}}function JA(s,e=!1,n=!0){Wn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ZA(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function xr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var PE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eR=s=>PE.test(s);function tR(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?Ho(s):s,c;if(n)if(eR(n))c=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Wn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?c=Gb(n.substring(1),"/"):c=Gb(n,e)}else c=e;return{pathname:c,search:rR(i),hash:iR(o)}}function Gb(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Jm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nR(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yp(s){let e=nR(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function $p(s,e,n,i=!1){let o;typeof s=="string"?o=Ho(s):(o={...s},dt(!o.pathname||!o.pathname.includes("?"),Jm("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Jm("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Jm("#","search","hash",o)));let c=s===""||o.pathname==="",u=c?"/":o.pathname,p;if(u==null)p=n;else{let x=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),x-=1;o.pathname=T.join("/")}p=x>=0?e[x]:"/"}let g=tR(o,p),y=u&&u!=="/"&&u.endsWith("/"),b=(c||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var _r=s=>s.join("/").replace(/\/\/+/g,"/"),sR=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),rR=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,iR=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,aR=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function oR(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function lR(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BE(s,e){let n=s;if(typeof n!="string"||!PE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,o=!1;if(zE)try{let c=new URL(window.location.href),u=n.startsWith("//")?new URL(c.protocol+n):new URL(n),p=xr(u.pathname,e);u.origin===c.origin&&p!=null?n=p+u.search+u.hash:o=!0}catch{Wn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qE=["POST","PUT","PATCH","DELETE"];new Set(qE);var cR=["GET",...qE];new Set(cR);var Fo=L.createContext(null);Fo.displayName="DataRouter";var yd=L.createContext(null);yd.displayName="DataRouterState";var uR=L.createContext(!1),HE=L.createContext({isTransitioning:!1});HE.displayName="ViewTransition";var hR=L.createContext(new Map);hR.displayName="Fetchers";var dR=L.createContext(null);dR.displayName="Await";var jn=L.createContext(null);jn.displayName="Navigation";var Mc=L.createContext(null);Mc.displayName="Location";var Jn=L.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var Xp=L.createContext(null);Xp.displayName="RouteError";var FE="REACT_ROUTER_ERROR",fR="REDIRECT",mR="ROUTE_ERROR_RESPONSE";function pR(s){if(s.startsWith(`${FE}:${fR}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function gR(s){if(s.startsWith(`${FE}:${mR}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new aR(e.status,e.statusText,e.data)}catch{}}function yR(s,{relative:e}={}){dt(Go(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=L.useContext(jn),{hash:o,pathname:c,search:u}=Vc(s,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:_r([n,c])),i.createHref({pathname:p,search:u,hash:o})}function Go(){return L.useContext(Mc)!=null}function Ys(){return dt(Go(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Mc).location}var GE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KE(s){L.useContext(jn).static||L.useLayoutEffect(s)}function _d(){let{isDataRoute:s}=L.useContext(Jn);return s?kR():_R()}function _R(){dt(Go(),"useNavigate() may be used only in the context of a <Router> component.");let s=L.useContext(Fo),{basename:e,navigator:n}=L.useContext(jn),{matches:i}=L.useContext(Jn),{pathname:o}=Ys(),c=JSON.stringify(Yp(i)),u=L.useRef(!1);return KE(()=>{u.current=!0}),L.useCallback((g,y={})=>{if(Wn(u.current,GE),!u.current)return;if(typeof g=="number"){n.go(g);return}let b=$p(g,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:_r([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,s])}var vR=L.createContext(null);function bR(s){let e=L.useContext(Jn).outlet;return L.useMemo(()=>e&&L.createElement(vR.Provider,{value:s},e),[e,s])}function ER(){let{matches:s}=L.useContext(Jn),e=s[s.length-1];return e?e.params:{}}function Vc(s,{relative:e}={}){let{matches:n}=L.useContext(Jn),{pathname:i}=Ys(),o=JSON.stringify(Yp(n));return L.useMemo(()=>$p(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function xR(s,e){return QE(s,e)}function QE(s,e,n,i,o){dt(Go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=L.useContext(jn),{matches:u}=L.useContext(Jn),p=u[u.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",x=p&&p.route;{let $=x&&x.path||"";$E(y,!x||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Ys(),N;if(e){let $=typeof e=="string"?Ho(e):e;dt(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),N=$}else N=T;let R=N.pathname||"/",V=R;if(b!=="/"){let $=b.replace(/^\//,"").split("/");V="/"+R.replace(/^\//,"").split("/").slice($.length).join("/")}let j=VE(s,{pathname:V});Wn(x||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Wn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=RR(j&&j.map($=>Object.assign({},$,{params:Object.assign({},g,$.params),pathname:_r([b,c.encodeLocation?c.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:_r([b,c.encodeLocation?c.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),u,n,i,o);return e&&H?L.createElement(Mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},H):H}function TR(){let s=OR(),e=oR(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:c},"ErrorBoundary")," or"," ",L.createElement("code",{style:c},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,u)}var wR=L.createElement(TR,null),YE=class extends L.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=gR(s.digest);n&&(s=n)}let e=s!==void 0?L.createElement(Jn.Provider,{value:this.props.routeContext},L.createElement(Xp.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?L.createElement(SR,{error:s},e):e}};YE.contextType=uR;var Zm=new WeakMap;function SR({children:s,error:e}){let{basename:n}=L.useContext(jn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=pR(e.digest);if(i){let o=Zm.get(e);if(o)throw o;let c=BE(i.location,n);if(zE&&!Zm.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw Zm.set(e,u),u}return L.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function AR({routeContext:s,match:e,children:n}){let i=L.useContext(Fo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Jn.Provider,{value:s},n)}function RR(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,u=n?.errors;if(u!=null){let b=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);dt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<c.length;b++){let x=c[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=b),x.route.id){let{loaderData:T,errors:N}=n,R=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!N||N[x.route.id]===void 0);if(x.route.lazy||R){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&i?(b,x)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:lR(n.matches),errorInfo:x})}:void 0;return c.reduceRight((b,x,T)=>{let N,R=!1,V=null,j=null;n&&(N=u&&x.route.id?u[x.route.id]:void 0,V=x.route.errorElement||wR,p&&(g<0&&T===0?($E("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,j=null):g===T&&(R=!0,j=x.route.hydrateFallbackElement||null)));let H=e.concat(c.slice(0,T+1)),$=()=>{let X;return N?X=V:R?X=j:x.route.Component?X=L.createElement(x.route.Component,null):x.route.element?X=x.route.element:X=b,L.createElement(AR,{match:x,routeContext:{outlet:b,matches:H,isDataRoute:n!=null},children:X})};return n&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?L.createElement(YE,{location:n.location,revalidation:n.revalidation,component:V,error:N,children:$(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:y}):$()},null)}function Wp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NR(s){let e=L.useContext(Fo);return dt(e,Wp(s)),e}function CR(s){let e=L.useContext(yd);return dt(e,Wp(s)),e}function IR(s){let e=L.useContext(Jn);return dt(e,Wp(s)),e}function Jp(s){let e=IR(s),n=e.matches[e.matches.length-1];return dt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function DR(){return Jp("useRouteId")}function OR(){let s=L.useContext(Xp),e=CR("useRouteError"),n=Jp("useRouteError");return s!==void 0?s:e.errors?.[n]}function kR(){let{router:s}=NR("useNavigate"),e=Jp("useNavigate"),n=L.useRef(!1);return KE(()=>{n.current=!0}),L.useCallback(async(o,c={})=>{Wn(n.current,GE),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Kb={};function $E(s,e,n){!e&&!Kb[s]&&(Kb[s]=!0,Wn(!1,n))}L.memo(jR);function jR({routes:s,future:e,state:n,onError:i}){return QE(s,void 0,n,i,e)}function MR({to:s,replace:e,state:n,relative:i}){dt(Go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(jn);Wn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=L.useContext(Jn),{pathname:u}=Ys(),p=_d(),g=$p(s,Yp(c),u,i==="path"),y=JSON.stringify(g);return L.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function VR(s){return bR(s.context)}function Yn(s){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UR({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1,unstable_useTransitions:u}){dt(!Go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=L.useMemo(()=>({basename:p,navigator:o,static:c,unstable_useTransitions:u,future:{}}),[p,o,c,u]);typeof n=="string"&&(n=Ho(n));let{pathname:y="/",search:b="",hash:x="",state:T=null,key:N="default"}=n,R=L.useMemo(()=>{let V=xr(y,p);return V==null?null:{location:{pathname:V,search:b,hash:x,state:T,key:N},navigationType:i}},[p,y,b,x,T,N,i]);return Wn(R!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${x}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:L.createElement(jn.Provider,{value:g},L.createElement(Mc.Provider,{children:e,value:R}))}function LR({children:s,location:e}){return xR(vp(s),e)}function vp(s,e=[]){let n=[];return L.Children.forEach(s,(i,o)=>{if(!L.isValidElement(i))return;let c=[...e,o];if(i.type===L.Fragment){n.push.apply(n,vp(i.props.children,c));return}dt(i.type===Yn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=vp(i.props.children,c)),n.push(u)}),n}var Mh="get",Vh="application/x-www-form-urlencoded";function vd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function PR(s){return vd(s)&&s.tagName.toLowerCase()==="button"}function zR(s){return vd(s)&&s.tagName.toLowerCase()==="form"}function BR(s){return vd(s)&&s.tagName.toLowerCase()==="input"}function qR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function HR(s,e){return s.button===0&&(!e||e==="_self")&&!qR(s)}var wh=null;function FR(){if(wh===null)try{new FormData(document.createElement("form"),0),wh=!1}catch{wh=!0}return wh}var GR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ep(s){return s!=null&&!GR.has(s)?(Wn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vh}"`),null):s}function KR(s,e){let n,i,o,c,u;if(zR(s)){let p=s.getAttribute("action");i=p?xr(p,e):null,n=s.getAttribute("method")||Mh,o=ep(s.getAttribute("enctype"))||Vh,c=new FormData(s)}else if(PR(s)||BR(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?xr(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Mh,o=ep(s.getAttribute("formenctype"))||ep(p.getAttribute("enctype"))||Vh,c=new FormData(p,s),!FR()){let{name:y,type:b,value:x}=s;if(b==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,x)}}else{if(vd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Mh,i=null,o=Vh,u=s}return c&&o==="text/plain"&&(u=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function QR(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&xr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function YR(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $R(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function XR(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await YR(c,n);return u.links?u.links():[]}return[]}));return e1(i.flat(1).filter($R).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Qb(s,e,n,i,o,c){let u=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>u(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(u(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function WR(s,e,{includeHydrateFallback:n}={}){return JR(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function JR(s){return[...new Set(s)]}function ZR(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function e1(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(ZR(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function XE(){let s=L.useContext(Fo);return Zp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function t1(){let s=L.useContext(yd);return Zp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var eg=L.createContext(void 0);eg.displayName="FrameworkContext";function WE(){let s=L.useContext(eg);return Zp(s,"You must render this element inside a <HydratedRouter> element"),s}function n1(s,e){let n=L.useContext(eg),[i,o]=L.useState(!1),[c,u]=L.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:x}=e,T=L.useRef(null);L.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let V=H=>{H.forEach($=>{u($.isIntersecting)})},j=new IntersectionObserver(V,{threshold:.5});return T.current&&j.observe(T.current),()=>{j.disconnect()}}},[s]),L.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let N=()=>{o(!0)},R=()=>{o(!1),u(!1)};return n?s!=="intent"?[c,T,{}]:[c,T,{onFocus:ic(p,N),onBlur:ic(g,R),onMouseEnter:ic(y,N),onMouseLeave:ic(b,R),onTouchStart:ic(x,N)}]:[!1,T,{}]}function ic(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function s1({page:s,...e}){let{router:n}=XE(),i=L.useMemo(()=>VE(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?L.createElement(i1,{page:s,matches:i,...e}):null}function r1(s){let{manifest:e,routeModules:n}=WE(),[i,o]=L.useState([]);return L.useEffect(()=>{let c=!1;return XR(s,e,n).then(u=>{c||o(u)}),()=>{c=!0}},[s,e,n]),i}function i1({page:s,matches:e,...n}){let i=Ys(),{manifest:o,routeModules:c}=WE(),{basename:u}=XE(),{loaderData:p,matches:g}=t1(),y=L.useMemo(()=>Qb(s,e,g,o,i,"data"),[s,e,g,o,i]),b=L.useMemo(()=>Qb(s,e,g,o,i,"assets"),[s,e,g,o,i]),x=L.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let R=new Set,V=!1;if(e.forEach(H=>{let $=o.routes[H.route.id];!$||!$.hasLoader||(!y.some(X=>X.route.id===H.route.id)&&H.route.id in p&&c[H.route.id]?.shouldRevalidate||$.hasClientLoader?V=!0:R.add(H.route.id))}),R.size===0)return[];let j=QR(s,u,"data");return V&&R.size>0&&j.searchParams.set("_routes",e.filter(H=>R.has(H.route.id)).map(H=>H.route.id).join(",")),[j.pathname+j.search]},[u,p,i,o,y,e,s,c]),T=L.useMemo(()=>WR(b,o),[b,o]),N=r1(b);return L.createElement(L.Fragment,null,x.map(R=>L.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),T.map(R=>L.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),N.map(({key:R,link:V})=>L.createElement("link",{key:R,nonce:n.nonce,...V})))}function a1(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var o1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{o1&&(window.__reactRouterVersion="7.11.0")}catch{}function l1({basename:s,children:e,unstable_useTransitions:n,window:i}){let o=L.useRef();o.current==null&&(o.current=UA({window:i,v5Compat:!0}));let c=o.current,[u,p]=L.useState({action:c.action,location:c.location}),g=L.useCallback(y=>{n===!1?p(y):L.startTransition(()=>p(y))},[n]);return L.useLayoutEffect(()=>c.listen(g),[c,g]),L.createElement(UR,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:n})}var JE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ls=L.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:u,state:p,target:g,to:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:T,...N},R){let{basename:V,unstable_useTransitions:j}=L.useContext(jn),H=typeof y=="string"&&JE.test(y),$=BE(y,V);y=$.to;let X=yR(y,{relative:o}),[re,ae,ce]=n1(i,N),C=h1(y,{replace:u,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:x,unstable_defaultShouldRevalidate:T,unstable_useTransitions:j});function S(k){e&&e(k),k.defaultPrevented||C(k)}let I=L.createElement("a",{...N,...ce,href:$.absoluteURL||X,onClick:$.isExternal||c?e:S,ref:a1(R,ae),target:g,"data-discover":!H&&n==="render"?"true":void 0});return re&&!H?L.createElement(L.Fragment,null,I,L.createElement(s1,{page:X})):I});Ls.displayName="Link";var ZE=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:p,children:g,...y},b){let x=Vc(u,{relative:y.relative}),T=Ys(),N=L.useContext(yd),{navigator:R,basename:V}=L.useContext(jn),j=N!=null&&g1(x)&&p===!0,H=R.encodeLocation?R.encodeLocation(x).pathname:x.pathname,$=T.pathname,X=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||($=$.toLowerCase(),X=X?X.toLowerCase():null,H=H.toLowerCase()),X&&V&&(X=xr(X,V)||X);const re=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ae=$===H||!o&&$.startsWith(H)&&$.charAt(re)==="/",ce=X!=null&&(X===H||!o&&X.startsWith(H)&&X.charAt(H.length)==="/"),C={isActive:ae,isPending:ce,isTransitioning:j},S=ae?e:void 0,I;typeof i=="function"?I=i(C):I=[i,ae?"active":null,ce?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let k=typeof c=="function"?c(C):c;return L.createElement(Ls,{...y,"aria-current":S,className:I,ref:b,style:k,to:u,viewTransition:p},typeof g=="function"?g(C):g)});ZE.displayName="NavLink";var c1=L.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:u=Mh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:T,...N},R)=>{let{unstable_useTransitions:V}=L.useContext(jn),j=m1(),H=p1(p,{relative:y}),$=u.toLowerCase()==="get"?"get":"post",X=typeof p=="string"&&JE.test(p),re=ae=>{if(g&&g(ae),ae.defaultPrevented)return;ae.preventDefault();let ce=ae.nativeEvent.submitter,C=ce?.getAttribute("formmethod")||u,S=()=>j(ce||ae.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:T});V&&n!==!1?L.startTransition(()=>S()):S()};return L.createElement("form",{ref:R,method:$,action:H,onSubmit:i?g:re,...N,"data-discover":!X&&s==="render"?"true":void 0})});c1.displayName="Form";function u1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ex(s){let e=L.useContext(Fo);return dt(e,u1(s)),e}function h1(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=_d(),b=Ys(),x=Vc(s,{relative:c});return L.useCallback(T=>{if(HR(T,e)){T.preventDefault();let N=n!==void 0?n:xc(b)===xc(x),R=()=>y(s,{replace:N,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:p});g?L.startTransition(()=>R()):R()}},[b,y,x,n,i,e,s,o,c,u,p,g])}var d1=0,f1=()=>`__${String(++d1)}__`;function m1(){let{router:s}=ex("useSubmit"),{basename:e}=L.useContext(jn),n=DR(),i=s.fetch,o=s.navigate;return L.useCallback(async(c,u={})=>{let{action:p,method:g,encType:y,formData:b,body:x}=KR(c,e);if(u.navigate===!1){let T=u.fetcherKey||f1();await i(T,n,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:x,formMethod:u.method||g,formEncType:u.encType||y,flushSync:u.flushSync})}else await o(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:x,formMethod:u.method||g,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,e,n])}function p1(s,{relative:e}={}){let{basename:n}=L.useContext(jn),i=L.useContext(Jn);dt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Vc(s||".",{relative:e})},u=Ys();if(s==null){c.search=u.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let b=p.toString();c.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:_r([n,c.pathname])),xc(c)}function g1(s,{relative:e}={}){let n=L.useContext(HE);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ex("useViewTransitionState"),o=Vc(s,{relative:e});if(!n.isTransitioning)return!1;let c=xr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=xr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Qh(o.pathname,u)!=null||Qh(o.pathname,c)!=null}const tx=L.createContext();function y1({children:s}){const[e,n]=L.useState(()=>localStorage.getItem("dacapo-theme")==="dark");L.useEffect(()=>{e?(document.body.classList.add("dark"),localStorage.setItem("dacapo-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("dacapo-theme","light"))},[e]);const i=L.useCallback(()=>{n(u=>!u)},[]),o=L.useCallback(u=>{n(u==="dark")},[]),c=L.useCallback(()=>e?"dark":"light",[e]);return m.jsx(tx.Provider,{value:{isDarkMode:e,toggleTheme:i,setThemeFromPreference:o,getThemePreference:c},children:s})}function tg(){const s=L.useContext(tx);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s}const _1=()=>{};var Yb={};const nx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},v1=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],u=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],u=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],u=o+1<s.length,p=u?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,b=c>>2,x=(c&3)<<4|p>>4;let T=(p&15)<<2|y>>6,N=y&63;g||(N=64,u||(T=64)),i.push(n[b],n[x],n[T],n[N])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(nx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):v1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||y==null||x==null)throw new b1;const T=c<<2|p>>4;if(i.push(T),y!==64){const N=p<<4&240|y>>2;if(i.push(N),x!==64){const R=y<<6&192|x;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class b1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E1=function(s){const e=nx(s);return sx.encodeByteArray(e,!0)},Yh=function(s){return E1(s).replace(/\./g,"")},rx=function(s){try{return sx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const T1=()=>x1().__FIREBASE_DEFAULTS__,w1=()=>{if(typeof process>"u"||typeof Yb>"u")return;const s=Yb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},S1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&rx(s[1]);return e&&JSON.parse(e)},bd=()=>{try{return _1()||T1()||w1()||S1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},ix=s=>bd()?.emulatorHosts?.[s],ax=s=>{const e=ix(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ox=()=>bd()?.config,lx=s=>bd()?.[`_${s}`];class A1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Ii(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ng(s){return(await fetch(s,{credentials:"include"})).ok}function cx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Yh(JSON.stringify(n)),Yh(JSON.stringify(u)),""].join(".")}const pc={};function R1(){const s={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?s.emulator.push(e):s.prod.push(e);return s}function N1(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let $b=!1;function sg(s,e){if(typeof window>"u"||typeof document>"u"||!Ii(window.location.host)||pc[s]===e||pc[s]||$b)return;pc[s]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=R1().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{$b=!0,u()},T}function b(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=N1(i),N=n("text"),R=document.getElementById(N)||document.createElement("span"),V=n("learnmore"),j=document.getElementById(V)||document.createElement("a"),H=n("preprendIcon"),$=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;p(X),b(j,V);const re=y();g($,H),X.append($,R,j,re),document.body.appendChild(X)}c?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function I1(){const s=bd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function k1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const s=sn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function M1(){return!I1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V1(){try{return typeof indexedDB=="object"}catch{return!1}}function U1(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const L1="FirebaseError";class $s extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=L1,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uc.prototype.create)}}class Uc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?P1(c,i):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new $s(o,p,i)}}function P1(s,e){return s.replace(z1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const z1=/\{\$([^}]+)}/g;function B1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Tr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],u=e[o];if(Xb(c)&&Xb(u)){if(!Tr(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Xb(s){return s!==null&&typeof s=="object"}function Lc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function uc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function q1(s,e){const n=new H1(s,e);return n.subscribe.bind(n)}class H1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");F1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=tp),o.error===void 0&&(o.error=tp),o.complete===void 0&&(o.complete=tp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F1(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function tp(){}function ot(s){return s&&s._delegate?s._delegate:s}class Ti{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const da="[DEFAULT]";class G1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new A1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q1(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:K1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K1(s){return s===da?void 0:s}function Q1(s){return s.instantiationMode==="EAGER"}class Y1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const $1={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},X1=je.INFO,W1={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},J1=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=W1[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rg{constructor(e){this.name=e,this._logLevel=X1,this._logHandler=J1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const Z1=(s,e)=>e.some(n=>s instanceof n);let Wb,Jb;function eN(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ux=new WeakMap,bp=new WeakMap,hx=new WeakMap,np=new WeakMap,ig=new WeakMap;function nN(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{n(_i(s.result)),o()},u=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&ux.set(n,s)}).catch(()=>{}),ig.set(e,s),e}function sN(s){if(bp.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});bp.set(s,e)}let Ep={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return bp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||hx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function rN(s){Ep=s(Ep)}function iN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(sp(this),e,...n);return hx.set(i,e.sort?e.sort():[e]),_i(i)}:tN().includes(s)?function(...e){return s.apply(sp(this),e),_i(ux.get(this))}:function(...e){return _i(s.apply(sp(this),e))}}function aN(s){return typeof s=="function"?iN(s):(s instanceof IDBTransaction&&sN(s),Z1(s,eN())?new Proxy(s,Ep):s)}function _i(s){if(s instanceof IDBRequest)return nN(s);if(np.has(s))return np.get(s);const e=aN(s);return e!==s&&(np.set(s,e),ig.set(e,s)),e}const sp=s=>ig.get(s);function oN(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(s,e),p=_i(u);return i&&u.addEventListener("upgradeneeded",g=>{i(_i(u.result),g.oldVersion,g.newVersion,_i(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const lN=["get","getKey","getAll","getAllKeys","count"],cN=["put","add","delete","clear"],rp=new Map;function Zb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=cN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||lN.includes(n)))return;const c=async function(u,...p){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return rp.set(e,c),c}rN(s=>({...s,get:(e,n,i)=>Zb(e,n)||s.get(e,n,i),has:(e,n)=>!!Zb(e,n)||s.has(e,n)}));class uN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function hN(s){return s.getComponent()?.type==="VERSION"}const xp="@firebase/app",e0="0.14.6";const wr=new rg("@firebase/app"),dN="@firebase/app-compat",fN="@firebase/analytics-compat",mN="@firebase/analytics",pN="@firebase/app-check-compat",gN="@firebase/app-check",yN="@firebase/auth",_N="@firebase/auth-compat",vN="@firebase/database",bN="@firebase/data-connect",EN="@firebase/database-compat",xN="@firebase/functions",TN="@firebase/functions-compat",wN="@firebase/installations",SN="@firebase/installations-compat",AN="@firebase/messaging",RN="@firebase/messaging-compat",NN="@firebase/performance",CN="@firebase/performance-compat",IN="@firebase/remote-config",DN="@firebase/remote-config-compat",ON="@firebase/storage",kN="@firebase/storage-compat",jN="@firebase/firestore",MN="@firebase/ai",VN="@firebase/firestore-compat",UN="firebase",LN="12.6.0";const Tp="[DEFAULT]",PN={[xp]:"fire-core",[dN]:"fire-core-compat",[mN]:"fire-analytics",[fN]:"fire-analytics-compat",[gN]:"fire-app-check",[pN]:"fire-app-check-compat",[yN]:"fire-auth",[_N]:"fire-auth-compat",[vN]:"fire-rtdb",[bN]:"fire-data-connect",[EN]:"fire-rtdb-compat",[xN]:"fire-fn",[TN]:"fire-fn-compat",[wN]:"fire-iid",[SN]:"fire-iid-compat",[AN]:"fire-fcm",[RN]:"fire-fcm-compat",[NN]:"fire-perf",[CN]:"fire-perf-compat",[IN]:"fire-rc",[DN]:"fire-rc-compat",[ON]:"fire-gcs",[kN]:"fire-gcs-compat",[jN]:"fire-fst",[VN]:"fire-fst-compat",[MN]:"fire-vertex","fire-js":"fire-js",[UN]:"fire-js-all"};const $h=new Map,zN=new Map,wp=new Map;function t0(s,e){try{s.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function va(s){const e=s.name;if(wp.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,s);for(const n of $h.values())t0(n,s);for(const n of zN.values())t0(n,s);return!0}function Ed(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function In(s){return s==null?!1:s.settings!==void 0}const BN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new Uc("app","Firebase",BN);class qN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}const Sa=LN;function dx(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Tp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw vi.create("bad-app-name",{appName:String(o)});if(n||(n=ox()),!n)throw vi.create("no-options");const c=$h.get(o);if(c){if(Tr(n,c.options)&&Tr(i,c.config))return c;throw vi.create("duplicate-app",{appName:o})}const u=new Y1(o);for(const g of wp.values())u.addComponent(g);const p=new qN(n,i,u);return $h.set(o,p),p}function ag(s=Tp){const e=$h.get(s);if(!e&&s===Tp&&ox())return dx();if(!e)throw vi.create("no-app",{appName:s});return e}function zs(s,e,n){let i=PN[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(u.join(" "));return}va(new Ti(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const HN="firebase-heartbeat-database",FN=1,Tc="firebase-heartbeat-store";let ip=null;function fx(){return ip||(ip=oN(HN,FN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Tc)}catch(n){console.warn(n)}}}}).catch(s=>{throw vi.create("idb-open",{originalErrorMessage:s.message})})),ip}async function GN(s){try{const n=(await fx()).transaction(Tc),i=await n.objectStore(Tc).get(mx(s));return await n.done,i}catch(e){if(e instanceof $s)wr.warn(e.message);else{const n=vi.create("idb-get",{originalErrorMessage:e?.message});wr.warn(n.message)}}}async function n0(s,e){try{const i=(await fx()).transaction(Tc,"readwrite");await i.objectStore(Tc).put(e,mx(s)),await i.done}catch(n){if(n instanceof $s)wr.warn(n.message);else{const i=vi.create("idb-set",{originalErrorMessage:n?.message});wr.warn(i.message)}}}function mx(s){return`${s.name}!${s.options.appId}`}const KN=1024,QN=30;class YN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=s0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>QN){const o=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s0(),{heartbeatsToSend:n,unsentEntries:i}=$N(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wr.warn(e),""}}}function s0(){return new Date().toISOString().substring(0,10)}function $N(s,e=KN){const n=[];let i=s.slice();for(const o of s){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),r0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),r0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class XN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V1()?U1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r0(s){return Yh(JSON.stringify({version:2,heartbeats:s})).length}function WN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function JN(s){va(new Ti("platform-logger",e=>new uN(e),"PRIVATE")),va(new Ti("heartbeat",e=>new YN(e),"PRIVATE")),zs(xp,e0,s),zs(xp,e0,"esm2020"),zs("fire-js","")}JN("");function px(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZN=px,gx=new Uc("auth","Firebase",px());const Xh=new rg("@firebase/auth");function eC(s,...e){Xh.logLevel<=je.WARN&&Xh.warn(`Auth (${Sa}): ${s}`,...e)}function Uh(s,...e){Xh.logLevel<=je.ERROR&&Xh.error(`Auth (${Sa}): ${s}`,...e)}function fs(s,...e){throw og(s,...e)}function Bs(s,...e){return og(s,...e)}function yx(s,e,n){const i={...ZN(),[e]:n};return new Uc("auth","Firebase",i).create(e,{appName:s.name})}function vr(s){return yx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function og(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return gx.create(s,...e)}function ve(s,e,...n){if(!s)throw og(e,...n)}function gr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Uh(e),new Error(e)}function Sr(s,e){s||gr(e)}function Sp(){return typeof self<"u"&&self.location?.href||""}function tC(){return i0()==="http:"||i0()==="https:"}function i0(){return typeof self<"u"&&self.location?.protocol||null}function nC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tC()||O1()||"connection"in navigator)?navigator.onLine:!0}function sC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=C1()||k1()}get(){return nC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lg(s,e){Sr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class _x{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aC=new Pc(3e4,6e4);function Cr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ir(s,e,n,i,o={}){return vx(s,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const p=Lc({key:s.config.apiKey,...u}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...c};return D1()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ii(s.emulatorConfig.host)&&(y.credentials="include"),_x.fetch()(await bx(s,s.config.apiHost,n,p),y)})}async function vx(s,e,n){s._canInitEmulator=!1;const i={...rC,...e};try{const o=new lC(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Sh(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(s,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Sh(s,"email-already-in-use",u);if(g==="USER_DISABLED")throw Sh(s,"user-disabled",u);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yx(s,b,y);fs(s,b)}}catch(o){if(o instanceof $s)throw o;fs(s,"network-request-failed",{message:String(o)})}}async function zc(s,e,n,i,o={}){const c=await Ir(s,e,n,i,o);return"mfaPendingCredential"in c&&fs(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function bx(s,e,n,i){const o=`${e}${n}?${i}`,c=s,u=c.config.emulator?lg(s.config,o):`${s.config.apiScheme}://${o}`;return iC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function oC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Bs(this.auth,"network-request-failed")),aC.get())})}}function Sh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Bs(s,e,i);return o.customData._tokenResponse=n,o}function a0(s){return s!==void 0&&s.enterprise!==void 0}class cC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uC(s,e){return Ir(s,"GET","/v2/recaptchaConfig",Cr(s,e))}async function hC(s,e){return Ir(s,"POST","/v1/accounts:delete",e)}async function Wh(s,e){return Ir(s,"POST","/v1/accounts:lookup",e)}function gc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dC(s,e=!1){const n=ot(s),i=await n.getIdToken(e),o=cg(i);ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:i,authTime:gc(ap(o.auth_time)),issuedAtTime:gc(ap(o.iat)),expirationTime:gc(ap(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ap(s){return Number(s)*1e3}function cg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rx(n);return o?JSON.parse(o):(Uh("Failed to decode base64 JWT payload"),null)}catch(o){return Uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function o0(s){const e=cg(s);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function wc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof $s&&fC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function fC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class mC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Jh(s){const e=s.auth,n=await s.getIdToken(),i=await wc(s,Wh(e,{idToken:n}));ve(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?Ex(o.providerUserInfo):[],u=gC(s.providerData,c),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!u?.length,y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function pC(s){const e=ot(s);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Ex(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function yC(s,e){const n=await vx(s,{},async()=>{const i=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,u=await bx(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Ii(s.emulatorConfig.host)&&(g.credentials="include"),_x.fetch()(u,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _C(s,e){return Ir(s,"POST","/v2/accounts:revokeToken",Cr(s,e))}class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=o0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await yC(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,u=new Io;return i&&(ve(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(ve(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(ve(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return gr("not implemented")}}function ui(s,e){ve(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ds{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new mC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ap(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await wc(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dC(this,e)}reload(){return pC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ds({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Jh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await wc(this,hC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:N,providerData:R,stsTokenManager:V}=n;ve(x&&V,e,"internal-error");const j=Io.fromJSON(this.name,V);ve(typeof x=="string",e,"internal-error"),ui(i,e.name),ui(o,e.name),ve(typeof T=="boolean",e,"internal-error"),ve(typeof N=="boolean",e,"internal-error"),ui(c,e.name),ui(u,e.name),ui(p,e.name),ui(g,e.name),ui(y,e.name),ui(b,e.name);const H=new ds({uid:x,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:N,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:j,createdAt:y,lastLoginAt:b});return R&&Array.isArray(R)&&(H.providerData=R.map($=>({...$}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,n,i=!1){const o=new Io;o.updateFromServerResponse(n);const c=new ds({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Jh(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Ex(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,p=new Io;p.updateFromIdToken(i);const g=new ds({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const l0=new Map;function yr(s){Sr(s instanceof Function,"Expected a class definition");let e=l0.get(s);return e?(Sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,l0.set(s,e),e)}class xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xx.type="NONE";const c0=xx;function Lh(s,e,n){return`firebase:${s}:${e}:${n}`}class Do{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Lh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Lh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wh(this.auth,{idToken:e}).catch(()=>{});return n?ds._fromGetAccountInfoResponse(this.auth,n,e):null}return ds._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Do(yr(c0),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||yr(c0);const u=Lh(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(u);if(b){let x;if(typeof b=="string"){const T=await Wh(e,{idToken:b}).catch(()=>{});if(!T)break;x=await ds._fromGetAccountInfoResponse(e,T,b)}else x=ds._fromJSON(e,b);y!==c&&(p=x),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Do(c,e,i):(c=g[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new Do(c,e,i))}}function u0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ax(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nx(e))return"Blackberry";if(Cx(e))return"Webos";if(wx(e))return"Safari";if((e.includes("chrome/")||Sx(e))&&!e.includes("edge/"))return"Chrome";if(Rx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Tx(s=sn()){return/firefox\//i.test(s)}function wx(s=sn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sx(s=sn()){return/crios\//i.test(s)}function Ax(s=sn()){return/iemobile/i.test(s)}function Rx(s=sn()){return/android/i.test(s)}function Nx(s=sn()){return/blackberry/i.test(s)}function Cx(s=sn()){return/webos/i.test(s)}function ug(s=sn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function vC(s=sn()){return ug(s)&&!!window.navigator?.standalone}function bC(){return j1()&&document.documentMode===10}function Ix(s=sn()){return ug(s)||Rx(s)||Cx(s)||Nx(s)||/windows phone/i.test(s)||Ax(s)}function Dx(s,e=[]){let n;switch(s){case"Browser":n=u0(sn());break;case"Worker":n=`${u0(sn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${i}`}class EC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((u,p)=>{try{const g=e(c);u(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function xC(s,e={}){return Ir(s,"GET","/v2/passwordPolicy",Cr(s,e))}const TC=6;class wC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class SC{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h0(this),this.idTokenSubscription=new h0(this),this.beforeStateQueue=new EC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wh(this,{idToken:e}),i=await ds._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(In(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===u)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(vr(this));const n=e?ot(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xC(this),n=new wC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await _C(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(n);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&eC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Di(s){return ot(s)}class h0{constructor(e){this.auth=e,this.observer=null,this.addObserver=q1(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AC(s){xd=s}function Ox(s){return xd.loadJS(s)}function RC(){return xd.recaptchaEnterpriseScript}function NC(){return xd.gapiScript}function CC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class IC{constructor(){this.enterprise=new DC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const OC="recaptcha-enterprise",kx="NO_RECAPTCHA";class kC{constructor(e){this.type=OC,this.auth=Di(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,p)=>{uC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new cC(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,u,p){const g=window.grecaptcha;a0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(kx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IC().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(p=>{if(!n&&a0(window.grecaptcha))o(p,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=RC();g.length!==0&&(g+=p),Ox(g).then(()=>{o(p,c,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function d0(s,e,n,i=!1,o=!1){const c=new kC(s);let u;if(o)u=kx;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Zh(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await d0(s,e,n,n==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await d0(s,e,n,n==="getOobCode");return i(s,u)}else return Promise.reject(c)})}function jC(s,e){const n=Ed(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Tr(c,e??{}))return o;fs(o,"already-initialized")}return n.initialize({options:e})}function MC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(yr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function VC(s,e,n){const i=Di(s);ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=jx(e),{host:u,port:p}=UC(e),g=p===null?"":`:${p}`,y={url:`${c}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ve(Tr(y,i.config.emulator)&&Tr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,Ii(u)?(ng(`${c}//${u}${g}`),sg("Auth",!0)):LC()}function jx(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function UC(s){const e=jx(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:f0(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:f0(u)}}}function f0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function LC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class hg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function PC(s,e){return Ir(s,"POST","/v1/accounts:signUp",e)}async function zC(s,e){return zc(s,"POST","/v1/accounts:signInWithPassword",Cr(s,e))}async function Mx(s,e){return Ir(s,"POST","/v1/accounts:sendOobCode",Cr(s,e))}async function BC(s,e){return Mx(s,e)}async function qC(s,e){return Mx(s,e)}async function HC(s,e){return zc(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,e))}async function FC(s,e){return zc(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,e))}class Sc extends hg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Sc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Sc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,n,"signInWithPassword",zC);case"emailLink":return HC(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,i,"signUpPassword",PC);case"emailLink":return FC(e,{idToken:n,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Oo(s,e){return zc(s,"POST","/v1/accounts:signInWithIdp",Cr(s,e))}const GC="http://localhost";class ba extends hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const u=new ba(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Oo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:GC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lc(n)}return e}}function KC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QC(s){const e=cc(uc(s)).link,n=e?cc(uc(e)).deep_link_id:null,i=cc(uc(s)).deep_link_id;return(i?cc(uc(i)).link:null)||i||n||e||s}class dg{constructor(e){const n=cc(uc(e)),i=n.apiKey??null,o=n.oobCode??null,c=KC(n.mode??null);ve(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QC(e);try{return new dg(n)}catch{return null}}}class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,n){return Sc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=dg.parseLink(n);return ve(i,"argument-error"),Sc._fromEmailAndCode(e,i.code,i.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Vx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bc extends Vx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class di extends Bc{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";class fi extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ba._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return fi.credential(n,i)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";class mi extends Bc{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";class pi extends Bc{constructor(){super("twitter.com")}static credential(e,n){return ba._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return pi.credential(n,i)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";async function YC(s,e){return zc(s,"POST","/v1/accounts:signUp",Cr(s,e))}class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await ds._fromIdTokenResponse(e,i,o),u=m0(i);return new Ea({user:c,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=m0(i);return new Ea({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function m0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class ed extends $s{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new ed(e,n,i,o)}}function Ux(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(s,c,e,i):c})}async function $C(s,e,n=!1){const i=await wc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Ea._forOperation(s,"link",i)}async function XC(s,e,n=!1){const{auth:i}=s;if(In(i.app))return Promise.reject(vr(i));const o="reauthenticate";try{const c=await wc(s,Ux(i,o,e,s),n);ve(c.idToken,i,"internal-error");const u=cg(c.idToken);ve(u,i,"internal-error");const{sub:p}=u;return ve(s.uid===p,i,"user-mismatch"),Ea._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&fs(i,"user-mismatch"),c}}async function Lx(s,e,n=!1){if(In(s.app))return Promise.reject(vr(s));const i="signIn",o=await Ux(s,i,e),c=await Ea._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function WC(s,e){return Lx(Di(s),e)}async function Px(s){const e=Di(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JC(s,e,n){const i=Di(s);await Zh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qC)}async function ZC(s,e,n){if(In(s.app))return Promise.reject(vr(s));const i=Di(s),u=await Zh(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Px(s),g}),p=await Ea._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(p.user),p}function eI(s,e,n){return In(s.app)?Promise.reject(vr(s)):WC(ot(s),Ko.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Px(s),i})}async function p0(s,e){const n=ot(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await BC(n.auth,o);c!==s.email&&await s.reload()}function tI(s,e,n,i){return ot(s).onIdTokenChanged(e,n,i)}function nI(s,e,n){return ot(s).beforeAuthStateChanged(e,n)}function sI(s,e,n,i){return ot(s).onAuthStateChanged(e,n,i)}function rI(s){return ot(s).signOut()}const td="__sak";class zx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iI=1e3,aI=10;class Bx extends zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);bC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aI):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},iI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bx.type="LOCAL";const oI=Bx;class qx extends zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qx.type="SESSION";const Hx=qx;function lI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(u).map(async y=>y(n.origin,c)),g=await lI(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];function fg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class cI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((p,g)=>{const y=fg("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(x){const T=x;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function qs(){return window}function uI(s){qs().location.href=s}function Fx(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function hI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dI(){return navigator?.serviceWorker?.controller||null}function fI(){return Fx()?self:null}const Gx="firebaseLocalStorageDb",mI=1,nd="firebaseLocalStorage",Kx="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wd(s,e){return s.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function pI(){const s=indexedDB.deleteDatabase(Gx);return new qc(s).toPromise()}function Rp(){const s=indexedDB.open(Gx,mI);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(nd,{keyPath:Kx})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(nd)?e(i):(i.close(),await pI(),e(await Rp()))})})}async function g0(s,e,n){const i=wd(s,!0).put({[Kx]:e,value:n});return new qc(i).toPromise()}async function gI(s,e){const n=wd(s,!1).get(e),i=await new qc(n).toPromise();return i===void 0?null:i.value}function y0(s,e){const n=wd(s,!0).delete(e);return new qc(n).toPromise()}const yI=800,_I=3;class Qx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_I)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(fI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hI(),!this.activeServiceWorker)return;this.sender=new cI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rp();return await g0(e,td,"1"),await y0(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>g0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>gI(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=wd(o,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qx.type="LOCAL";const vI=Qx;new Pc(3e4,6e4);function bI(s,e){return e?yr(e):(ve(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class mg extends hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EI(s){return Lx(s.auth,new mg(s),s.bypassAuthState)}function xI(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),XC(n,new mg(s),s.bypassAuthState)}async function TI(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),$C(n,new mg(s),s.bypassAuthState)}class Yx{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EI;case"linkViaPopup":case"linkViaRedirect":return TI;case"reauthViaPopup":case"reauthViaRedirect":return xI;default:fs(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wI=new Pc(2e3,1e4);class Co extends Yx{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wI.get())};e()}}Co.currentPopupAction=null;const SI="pendingRedirect",Ph=new Map;class AI extends Yx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const i=await RI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RI(s,e){const n=II(e),i=CI(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function NI(s,e){Ph.set(s._key(),e)}function CI(s){return yr(s._redirectPersistence)}function II(s){return Lh(SI,s.config.apiKey,s.name)}async function DI(s,e,n=!1){if(In(s.app))return Promise.reject(vr(s));const i=Di(s),o=bI(i,e),u=await new AI(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const OI=600*1e3;class kI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!$x(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OI&&this.cachedEventUids.clear(),this.cachedEventUids.has(_0(e))}saveEventToCache(e){this.cachedEventUids.add(_0(e)),this.lastProcessedEventTime=Date.now()}}function _0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function $x({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function jI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $x(s);default:return!1}}async function MI(s,e={}){return Ir(s,"GET","/v1/projects",e)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UI=/^https?/;async function LI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await MI(s);for(const n of e)try{if(PI(n))return}catch{}fs(s,"unauthorized-domain")}function PI(s){const e=Sp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!UI.test(n))return!1;if(VI.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const zI=new Pc(3e4,6e4);function v0(){const s=qs().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function BI(s){return new Promise((e,n)=>{function i(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),n(Bs(s,"network-request-failed"))},timeout:zI.get()})}if(qs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qs().gapi?.load)i();else{const o=CC("iframefcb");return qs()[o]=()=>{gapi.load?i():n(Bs(s,"network-request-failed"))},Ox(`${NC()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw zh=null,e})}let zh=null;function qI(s){return zh=zh||BI(s),zh}const HI=new Pc(5e3,15e3),FI="__/auth/iframe",GI="emulator/auth/iframe",KI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YI(s){const e=s.config;ve(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?lg(e,GI):`https://${s.config.authDomain}/${FI}`,i={apiKey:e.apiKey,appName:s.name,v:Sa},o=QI.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Lc(i).slice(1)}`}async function $I(s){const e=await qI(s),n=qs().gapi;return ve(n,s,"internal-error"),e.open({where:document.body,url:YI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KI,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=Bs(s,"network-request-failed"),p=qs().setTimeout(()=>{c(u)},HI.get());function g(){qs().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{c(u)})}))}const XI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WI=500,JI=600,ZI="_blank",e2="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t2(s,e,n,i=WI,o=JI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...XI,width:i.toString(),height:o.toString(),top:c,left:u},y=sn().toLowerCase();n&&(p=Sx(y)?ZI:n),Tx(y)&&(e=e||e2,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[N,R])=>`${T}${N}=${R},`,"");if(vC(y)&&p!=="_self")return n2(e||"",p),new b0(null);const x=window.open(e||"",p,b);ve(x,s,"popup-blocked");try{x.focus()}catch{}return new b0(x)}function n2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const s2="__/auth/handler",r2="emulator/auth/handler",i2=encodeURIComponent("fac");async function E0(s,e,n,i,o,c){ve(s.config.authDomain,s,"auth-domain-config-required"),ve(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Sa,eventId:o};if(e instanceof Vx){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",B1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,x]of Object.entries({}))u[b]=x}if(e instanceof Bc){const b=e.getScopes().filter(x=>x!=="");b.length>0&&(u.scopes=b.join(","))}s.tenantId&&(u.tid=s.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${i2}=${encodeURIComponent(g)}`:"";return`${a2(s)}?${Lc(p).slice(1)}${y}`}function a2({config:s}){return s.emulator?lg(s,r2):`https://${s.authDomain}/${s2}`}const op="webStorageSupport";class o2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hx,this._completeRedirectFn=DI,this._overrideRedirectResult=NI}async _openPopup(e,n,i,o){Sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await E0(e,n,i,Sp(),o);return t2(e,c,fg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await E0(e,n,i,Sp(),o);return uI(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Sr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await $I(e),i=new kI(e);return n.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(op,{type:op},o=>{const c=o?.[0]?.[op];c!==void 0&&n(!!c),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ix()||wx()||ug()}}const l2=o2;var x0="@firebase/auth",T0="1.12.0";class c2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function u2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h2(s){va(new Ti("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;ve(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dx(s)},y=new SC(i,o,c,g);return MC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),va(new Ti("auth-internal",e=>{const n=Di(e.getProvider("auth").getImmediate());return(i=>new c2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(x0,T0,u2(s)),zs(x0,T0,"esm2020")}const d2=300,f2=lx("authIdTokenMaxAge")||d2;let w0=null;const m2=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>f2)return;const o=n?.token;w0!==o&&(w0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function p2(s=ag()){const e=Ed(s,"auth");if(e.isInitialized())return e.getImmediate();const n=jC(s,{popupRedirectResolver:l2,persistence:[vI,oI,Hx]}),i=lx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=m2(c.toString());nI(n,u,()=>u(n.currentUser)),tI(n,p=>u(p))}}const o=ix("auth");return o&&VC(n,`http://${o}`),n}function g2(){return document.getElementsByTagName("head")?.[0]??document}AC({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Bs("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",g2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h2("Browser");var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bi,Xx;(function(){var s;function e(C,S){function I(){}I.prototype=S.prototype,C.F=S.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(k,D,U){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return S.prototype[D].apply(k,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,I){I||(I=0);const k=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)k[D]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(D=0;D<16;++D)k[D]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=C.g[0],I=C.g[1],D=C.g[2];let U=C.g[3],O;O=S+(U^I&(D^U))+k[0]+3614090360&4294967295,S=I+(O<<7&4294967295|O>>>25),O=U+(D^S&(I^D))+k[1]+3905402710&4294967295,U=S+(O<<12&4294967295|O>>>20),O=D+(I^U&(S^I))+k[2]+606105819&4294967295,D=U+(O<<17&4294967295|O>>>15),O=I+(S^D&(U^S))+k[3]+3250441966&4294967295,I=D+(O<<22&4294967295|O>>>10),O=S+(U^I&(D^U))+k[4]+4118548399&4294967295,S=I+(O<<7&4294967295|O>>>25),O=U+(D^S&(I^D))+k[5]+1200080426&4294967295,U=S+(O<<12&4294967295|O>>>20),O=D+(I^U&(S^I))+k[6]+2821735955&4294967295,D=U+(O<<17&4294967295|O>>>15),O=I+(S^D&(U^S))+k[7]+4249261313&4294967295,I=D+(O<<22&4294967295|O>>>10),O=S+(U^I&(D^U))+k[8]+1770035416&4294967295,S=I+(O<<7&4294967295|O>>>25),O=U+(D^S&(I^D))+k[9]+2336552879&4294967295,U=S+(O<<12&4294967295|O>>>20),O=D+(I^U&(S^I))+k[10]+4294925233&4294967295,D=U+(O<<17&4294967295|O>>>15),O=I+(S^D&(U^S))+k[11]+2304563134&4294967295,I=D+(O<<22&4294967295|O>>>10),O=S+(U^I&(D^U))+k[12]+1804603682&4294967295,S=I+(O<<7&4294967295|O>>>25),O=U+(D^S&(I^D))+k[13]+4254626195&4294967295,U=S+(O<<12&4294967295|O>>>20),O=D+(I^U&(S^I))+k[14]+2792965006&4294967295,D=U+(O<<17&4294967295|O>>>15),O=I+(S^D&(U^S))+k[15]+1236535329&4294967295,I=D+(O<<22&4294967295|O>>>10),O=S+(D^U&(I^D))+k[1]+4129170786&4294967295,S=I+(O<<5&4294967295|O>>>27),O=U+(I^D&(S^I))+k[6]+3225465664&4294967295,U=S+(O<<9&4294967295|O>>>23),O=D+(S^I&(U^S))+k[11]+643717713&4294967295,D=U+(O<<14&4294967295|O>>>18),O=I+(U^S&(D^U))+k[0]+3921069994&4294967295,I=D+(O<<20&4294967295|O>>>12),O=S+(D^U&(I^D))+k[5]+3593408605&4294967295,S=I+(O<<5&4294967295|O>>>27),O=U+(I^D&(S^I))+k[10]+38016083&4294967295,U=S+(O<<9&4294967295|O>>>23),O=D+(S^I&(U^S))+k[15]+3634488961&4294967295,D=U+(O<<14&4294967295|O>>>18),O=I+(U^S&(D^U))+k[4]+3889429448&4294967295,I=D+(O<<20&4294967295|O>>>12),O=S+(D^U&(I^D))+k[9]+568446438&4294967295,S=I+(O<<5&4294967295|O>>>27),O=U+(I^D&(S^I))+k[14]+3275163606&4294967295,U=S+(O<<9&4294967295|O>>>23),O=D+(S^I&(U^S))+k[3]+4107603335&4294967295,D=U+(O<<14&4294967295|O>>>18),O=I+(U^S&(D^U))+k[8]+1163531501&4294967295,I=D+(O<<20&4294967295|O>>>12),O=S+(D^U&(I^D))+k[13]+2850285829&4294967295,S=I+(O<<5&4294967295|O>>>27),O=U+(I^D&(S^I))+k[2]+4243563512&4294967295,U=S+(O<<9&4294967295|O>>>23),O=D+(S^I&(U^S))+k[7]+1735328473&4294967295,D=U+(O<<14&4294967295|O>>>18),O=I+(U^S&(D^U))+k[12]+2368359562&4294967295,I=D+(O<<20&4294967295|O>>>12),O=S+(I^D^U)+k[5]+4294588738&4294967295,S=I+(O<<4&4294967295|O>>>28),O=U+(S^I^D)+k[8]+2272392833&4294967295,U=S+(O<<11&4294967295|O>>>21),O=D+(U^S^I)+k[11]+1839030562&4294967295,D=U+(O<<16&4294967295|O>>>16),O=I+(D^U^S)+k[14]+4259657740&4294967295,I=D+(O<<23&4294967295|O>>>9),O=S+(I^D^U)+k[1]+2763975236&4294967295,S=I+(O<<4&4294967295|O>>>28),O=U+(S^I^D)+k[4]+1272893353&4294967295,U=S+(O<<11&4294967295|O>>>21),O=D+(U^S^I)+k[7]+4139469664&4294967295,D=U+(O<<16&4294967295|O>>>16),O=I+(D^U^S)+k[10]+3200236656&4294967295,I=D+(O<<23&4294967295|O>>>9),O=S+(I^D^U)+k[13]+681279174&4294967295,S=I+(O<<4&4294967295|O>>>28),O=U+(S^I^D)+k[0]+3936430074&4294967295,U=S+(O<<11&4294967295|O>>>21),O=D+(U^S^I)+k[3]+3572445317&4294967295,D=U+(O<<16&4294967295|O>>>16),O=I+(D^U^S)+k[6]+76029189&4294967295,I=D+(O<<23&4294967295|O>>>9),O=S+(I^D^U)+k[9]+3654602809&4294967295,S=I+(O<<4&4294967295|O>>>28),O=U+(S^I^D)+k[12]+3873151461&4294967295,U=S+(O<<11&4294967295|O>>>21),O=D+(U^S^I)+k[15]+530742520&4294967295,D=U+(O<<16&4294967295|O>>>16),O=I+(D^U^S)+k[2]+3299628645&4294967295,I=D+(O<<23&4294967295|O>>>9),O=S+(D^(I|~U))+k[0]+4096336452&4294967295,S=I+(O<<6&4294967295|O>>>26),O=U+(I^(S|~D))+k[7]+1126891415&4294967295,U=S+(O<<10&4294967295|O>>>22),O=D+(S^(U|~I))+k[14]+2878612391&4294967295,D=U+(O<<15&4294967295|O>>>17),O=I+(U^(D|~S))+k[5]+4237533241&4294967295,I=D+(O<<21&4294967295|O>>>11),O=S+(D^(I|~U))+k[12]+1700485571&4294967295,S=I+(O<<6&4294967295|O>>>26),O=U+(I^(S|~D))+k[3]+2399980690&4294967295,U=S+(O<<10&4294967295|O>>>22),O=D+(S^(U|~I))+k[10]+4293915773&4294967295,D=U+(O<<15&4294967295|O>>>17),O=I+(U^(D|~S))+k[1]+2240044497&4294967295,I=D+(O<<21&4294967295|O>>>11),O=S+(D^(I|~U))+k[8]+1873313359&4294967295,S=I+(O<<6&4294967295|O>>>26),O=U+(I^(S|~D))+k[15]+4264355552&4294967295,U=S+(O<<10&4294967295|O>>>22),O=D+(S^(U|~I))+k[6]+2734768916&4294967295,D=U+(O<<15&4294967295|O>>>17),O=I+(U^(D|~S))+k[13]+1309151649&4294967295,I=D+(O<<21&4294967295|O>>>11),O=S+(D^(I|~U))+k[4]+4149444226&4294967295,S=I+(O<<6&4294967295|O>>>26),O=U+(I^(S|~D))+k[11]+3174756917&4294967295,U=S+(O<<10&4294967295|O>>>22),O=D+(S^(U|~I))+k[2]+718787259&4294967295,D=U+(O<<15&4294967295|O>>>17),O=I+(U^(D|~S))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+U&4294967295}i.prototype.v=function(C,S){S===void 0&&(S=C.length);const I=S-this.blockSize,k=this.C;let D=this.h,U=0;for(;U<S;){if(D==0)for(;U<=I;)o(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<S;)if(k[D++]=C.charCodeAt(U++),D==this.blockSize){o(this,k),D=0;break}}else for(;U<S;)if(k[D++]=C[U++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)C[S++]=this.g[I]>>>k&255;return C};function c(C,S){var I=p;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=S(C)}function u(C,S){this.h=S;const I=[];let k=!0;for(let D=C.length-1;D>=0;D--){const U=C[D]|0;k&&U==S||(I[D]=U,k=!1)}this.g=I}var p={};function g(C){return-128<=C&&C<128?c(C,function(S){return new u([S|0],S<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return j(y(-C));const S=[];let I=1;for(let k=0;C>=I;k++)S[k]=C/I|0,I*=4294967296;return new u(S,0)}function b(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return j(b(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(S,8));let k=x;for(let U=0;U<C.length;U+=8){var D=Math.min(8,C.length-U);const O=parseInt(C.substring(U,U+D),S);D<8?(D=y(Math.pow(S,D)),k=k.j(D).add(y(O))):(k=k.j(I),k=k.add(y(O)))}return k}var x=g(0),T=g(1),N=g(16777216);s=u.prototype,s.m=function(){if(V(this))return-j(this).m();let C=0,S=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);C+=(k>=0?k:4294967296+k)*S,S*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R(this))return"0";if(V(this))return"-"+j(this).toString(C);const S=y(Math.pow(C,6));var I=this;let k="";for(;;){const D=re(I,S).g;I=H(I,D.j(S));let U=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=D,R(I))return U+k;for(;U.length<6;)U="0"+U;k=U+k}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function R(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function V(C){return C.h==-1}s.l=function(C){return C=H(this,C),V(C)?-1:R(C)?0:1};function j(C){const S=C.g.length,I=[];for(let k=0;k<S;k++)I[k]=~C.g[k];return new u(I,~C.h).add(T)}s.abs=function(){return V(this)?j(this):this},s.add=function(C){const S=Math.max(this.g.length,C.g.length),I=[];let k=0;for(let D=0;D<=S;D++){let U=k+(this.i(D)&65535)+(C.i(D)&65535),O=(U>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);k=O>>>16,U&=65535,O&=65535,I[D]=O<<16|U}return new u(I,I[I.length-1]&-2147483648?-1:0)};function H(C,S){return C.add(j(S))}s.j=function(C){if(R(this)||R(C))return x;if(V(this))return V(C)?j(this).j(j(C)):j(j(this).j(C));if(V(C))return j(this.j(j(C)));if(this.l(N)<0&&C.l(N)<0)return y(this.m()*C.m());const S=this.g.length+C.g.length,I=[];for(var k=0;k<2*S;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<C.g.length;D++){const U=this.i(k)>>>16,O=this.i(k)&65535,Ee=C.i(D)>>>16,st=C.i(D)&65535;I[2*k+2*D]+=O*st,$(I,2*k+2*D),I[2*k+2*D+1]+=U*st,$(I,2*k+2*D+1),I[2*k+2*D+1]+=O*Ee,$(I,2*k+2*D+1),I[2*k+2*D+2]+=U*Ee,$(I,2*k+2*D+2)}for(C=0;C<S;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=S;C<2*S;C++)I[C]=0;return new u(I,0)};function $(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function X(C,S){this.g=C,this.h=S}function re(C,S){if(R(S))throw Error("division by zero");if(R(C))return new X(x,x);if(V(C))return S=re(j(C),S),new X(j(S.g),j(S.h));if(V(S))return S=re(C,j(S)),new X(j(S.g),S.h);if(C.g.length>30){if(V(C)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=S;k.l(C)<=0;)I=ae(I),k=ae(k);var D=ce(I,1),U=ce(k,1);for(k=ce(k,2),I=ce(I,2);!R(k);){var O=U.add(k);O.l(C)<=0&&(D=D.add(I),U=O),k=ce(k,1),I=ce(I,1)}return S=H(C,D.j(S)),new X(D,S)}for(D=x;C.l(S)>=0;){for(I=Math.max(1,Math.floor(C.m()/S.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),U=y(I),O=U.j(S);V(O)||O.l(C)>0;)I-=k,U=y(I),O=U.j(S);R(U)&&(U=T),D=D.add(U),C=H(C,O)}return new X(D,C)}s.B=function(C){return re(this,C).h},s.and=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<S;k++)I[k]=this.i(k)&C.i(k);return new u(I,this.h&C.h)},s.or=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<S;k++)I[k]=this.i(k)|C.i(k);return new u(I,this.h|C.h)},s.xor=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<S;k++)I[k]=this.i(k)^C.i(k);return new u(I,this.h^C.h)};function ae(C){const S=C.g.length+1,I=[];for(let k=0;k<S;k++)I[k]=C.i(k)<<1|C.i(k-1)>>>31;return new u(I,C.h)}function ce(C,S){const I=S>>5;S%=32;const k=C.g.length-I,D=[];for(let U=0;U<k;U++)D[U]=S>0?C.i(U+I)>>>S|C.i(U+I+1)<<32-S:C.i(U+I);return new u(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Xx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,bi=u}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wx,hc,Jx,Bh,Np,Zx,eT,tT;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,_){if(_)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in E))break e;E=E[q]}h=h[h.length-1],A=E[h],_=_(A),_!=A&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(_){var E=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&E.push([A,_[A]]);return E}});var c=c||{},u=this||self;function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function g(h,_,E){return h.call.apply(h.bind,arguments)}function y(h,_,E){return y=g,y.apply(null,arguments)}function b(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function x(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,q,Q){for(var ie=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ie[Ae-2]=arguments[Ae];return _.prototype[q].apply(A,ie)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const _=h.length;if(_>0){const E=Array(_);for(let A=0;A<_;A++)E[A]=h[A];return E}return[]}function R(h,_){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const Q=q.length||0;h.length=E+Q;for(let ie=0;ie<Q;ie++)h[E+ie]=q[ie]}else h.push(q)}}class V{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(h){u.setTimeout(()=>{throw h},0)}function H(){var h=C;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,E){const A=X.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}}var X=new V(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ce=!1,C=new $,S=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(I)}};function I(){for(var h;h=H();){try{h.h.call(h.g)}catch(E){j(E)}var _=X;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ce=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,_){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}x(Ee,D),Ee.prototype.init=function(h,_){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),W=0;function oe(h,_,E,A,q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=q,this.key=++W,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,_,E){for(const A in h)_.call(E,h[A],A,h)}function Qe(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function z(h){const _={};for(const E in h)_[E]=h[E];return _}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,_){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)h[E]=A[E];for(let Q=0;Q<ne.length;Q++)E=ne[Q],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,_,E,A,q){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const ie=Ne(h,_,A,q);return ie>-1?(_=h[ie],E||(_.fa=!1)):(_=new oe(_,this.src,Q,!!A,q),_.fa=E,h.push(_)),_};function xe(h,_){const E=_.type;if(E in h.g){var A=h.g[E],q=Array.prototype.indexOf.call(A,_,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(A,q,1),Q&&(ye(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ne(h,_,E,A){for(let q=0;q<h.length;++q){const Q=h[q];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==A)return q}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Mt={};function ct(h,_,E,A,q){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)ct(h,_[Q],E,A,q);return null}return E=tl(E),h&&h[st]?h.J(_,E,p(A)?!!A.capture:!1,q):Mi(h,_,E,!1,A,q)}function Mi(h,_,E,A,q,Q){if(!_)throw Error("Invalid event type");const ie=p(q)?!!q.capture:!!q;let Ae=Vi(h);if(Ae||(h[Le]=Ae=new de(h)),E=Ae.add(_,E,A,ie,Q),E.proxy)return E;if(A=Oa(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)U||(q=ie),q===void 0&&(q=!1),h.addEventListener(_.toString(),A,q);else if(h.attachEvent)h.attachEvent(ps(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Oa(){function h(E){return _.call(h.src,h.listener,E)}const _=Zo;return h}function ka(h,_,E,A,q){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)ka(h,_[Q],E,A,q);else A=p(A)?!!A.capture:!!A,E=tl(E),h&&h[st]?(h=h.i,Q=String(_).toString(),Q in h.g&&(_=h.g[Q],E=Ne(_,E,A,q),E>-1&&(ye(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Vi(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ne(_,E,A,q)),(E=h>-1?_[h]:null)&&ja(E))}function ja(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[st])xe(_.i,h);else{var E=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(E,A,h.capture):_.detachEvent?_.detachEvent(ps(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=Vi(_))?(xe(E,h),E.h==0&&(E.src=null,_[Le]=null)):ye(h)}}}function ps(h){return h in Mt?Mt[h]:Mt[h]="on"+h}function Zo(h,_){if(h.da)h=!0;else{_=new Ee(_,this);const E=h.listener,A=h.ha||h.src;h.fa&&ja(h),h=E.call(A,_)}return h}function Vi(h){return h=h[Le],h instanceof de?h:null}var el="__closure_events_fn_"+(Math.random()*1e9>>>0);function tl(h){return typeof h=="function"?h:(h[el]||(h[el]=function(_){return h.handleEvent(_)}),h[el])}function Tt(){k.call(this),this.i=new de(this),this.M=this,this.G=null}x(Tt,k),Tt.prototype[st]=!0,Tt.prototype.removeEventListener=function(h,_,E,A){ka(this,h,_,E,A)};function Vt(h,_){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var q=_;_=new D(A,h),le(_,q)}q=!0;let Q,ie;if(E)for(ie=E.length-1;ie>=0;ie--)Q=_.g=E[ie],q=Dr(Q,A,!0,_)&&q;if(Q=_.g=h,q=Dr(Q,A,!0,_)&&q,q=Dr(Q,A,!1,_)&&q,E)for(ie=0;ie<E.length;ie++)Q=_.g=E[ie],q=Dr(Q,A,!1,_)&&q}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let A=0;A<E.length;A++)ye(E[A]);delete h.g[_],h.h--}}this.G=null},Tt.prototype.J=function(h,_,E,A){return this.i.add(String(h),_,!1,E,A)},Tt.prototype.K=function(h,_,E,A){return this.i.add(String(h),_,!0,E,A)};function Dr(h,_,E,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let Q=0;Q<_.length;++Q){const ie=_[Q];if(ie&&!ie.da&&ie.capture==E){const Ae=ie.listener,vt=ie.ha||ie.src;ie.fa&&xe(h.i,ie),q=Ae.call(vt,A)!==!1&&q}}return q&&!A.defaultPrevented}function Qd(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function $c(h){h.g=Qd(()=>{h.g=null,h.i&&(h.i=!1,$c(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class an extends k{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:$c(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(h){k.call(this),this.h=h,this.g={}}x(Ui,k);var nl=[];function sl(h){ze(h.g,function(_,E){this.g.hasOwnProperty(E)&&ja(_)},h),h.g={}}Ui.prototype.N=function(){Ui.Z.N.call(this),sl(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Or=u.JSON.stringify,Yd=u.JSON.parse,Xc=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Wc(){}function Jc(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){D.call(this,"d")}x(Ft,D);function Mn(){D.call(this,"c")}x(Mn,D);var _t={},Zc=null;function Ma(){return Zc=Zc||new Tt}_t.Ia="serverreachability";function eu(h){D.call(this,_t.Ia,h)}x(eu,D);function gs(h){const _=Ma();Vt(_,new eu(_))}_t.STAT_EVENT="statevent";function Li(h,_){D.call(this,_t.STAT_EVENT,h),this.stat=_}x(Li,D);function wt(h){const _=Ma();Vt(_,new Li(_,h))}_t.Ja="timingevent";function ys(h,_){D.call(this,_t.Ja,h),this.size=_}x(ys,D);function _s(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function $d(h,_,E,A,q,Q){h.info(function(){if(h.g)if(Q){var ie="",Ae=Q.split("&");for(let He=0;He<Ae.length;He++){var vt=Ae[He].split("=");if(vt.length>1){const ut=vt[0];vt=vt[1];const Pn=ut.split("_");ie=Pn.length>=2&&Pn[1]=="type"?ie+(ut+"="+vt+"&"):ie+(ut+"=redacted&")}}}else ie=null;else ie=Q;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+_+`
`+E+`
`+ie})}function tu(h,_,E,A,q,Q,ie){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+_+`
`+E+`
`+Q+" "+ie})}function vs(h,_,E,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xd(h,E)+(A?" "+A:"")})}function Pi(h,_){h.info(function(){return"TIMEOUT: "+_})}es.prototype.info=function(){};function Xd(h,_){if(!h.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var E=Q[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ie=1;ie<A.length;ie++)A[ie]=""}}}}return Or(Q)}catch{return _}}var zi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},il;function Bi(){}x(Bi,Wc),Bi.prototype.g=function(){return new XMLHttpRequest},il=new Bi;function Xs(h){return encodeURIComponent(String(h))}function nu(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ts(h,_,E,A){this.j=h,this.i=_,this.l=E,this.S=A||1,this.V=new Ui(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var St={},zt={};function bs(h,_,E){h.M=1,h.A=qi(Rt(_)),h.u=E,h.R=!0,Va(h,null)}function Va(h,_){h.F=Date.now(),Es(h),h.B=Rt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),za(E.i,"t",A),h.C=0,E=h.j.L,h.h=new ns,h.g=yu(h.j,E?_:null,!h.u),h.P>0&&(h.O=new an(y(h.Y,h,h.g),h.P)),_=h.V,E=h.g,A=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(nl[0]=q.toString()),q=nl);for(let Q=0;Q<q.length;Q++){const ie=ct(E,q[Q],A||_.handleEvent,!1,_.h||_);if(!ie)break;_.g[ie.key]=ie}_=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),gs(),$d(h.i,h.v,h.B,h.l,h.S,h.u)}ts.prototype.ba=function(h){h=h.target;const _=this.O;_&&is(h)==3?_.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const Ae=is(this.g),vt=this.g.ya(),He=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Ae!=4||vt==7||(vt==8||He<=0?gs(3):gs(2)),xs(this);var _=this.g.ca();this.X=_;var E=Wd(this);if(this.o=_==200,tu(this.i,this.v,this.B,this.l,this.S,Ae,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var Q=A;break t}}Q=null}if(h=Q)vs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ts(this,h);else{this.o=!1,this.m=3,wt(12),En(this),Vn(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<E.length;)if(ut=ru(this,E),ut==zt){Ae==4&&(this.m=4,wt(14),h=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==St){this.m=4,wt(15),vs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else vs(this.i,this.l,ut,null),Ts(this,ut);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||E.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)vs(this.i,this.l,E,"[Invalid Chunked Response]"),En(this),Vn(this);else if(E.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),bl(ie),ie.P=!0,wt(11))}}else vs(this.i,this.l,E,null),Ts(this,E);Ae==4&&En(this),this.o&&!this.K&&(Ae==4?fu(this.j,this):(this.o=!1,Es(this)))}else Js(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),En(this),Vn(this)}}}catch{}};function Wd(h){if(!su(h))return h.g.la();const _=Gt(h.g);if(_==="")return"";let E="";const A=_.length,q=is(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return En(h),Vn(h),"";h.h.i=new u.TextDecoder}for(let Q=0;Q<A;Q++)h.h.h=!0,E+=h.h.i.decode(_[Q],{stream:!(q&&Q==A-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function su(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ru(h,_){var E=h.C,A=_.indexOf(`
`,E);return A==-1?zt:(E=Number(_.substring(E,A)),isNaN(E)?St:(A+=1,A+E>_.length?zt:(_=_.slice(A,A+E),h.C=A+E,_)))}ts.prototype.cancel=function(){this.K=!0,En(this)};function Es(h){h.T=Date.now()+h.H,Ua(h,h.H)}function Ua(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_s(y(h.aa,h),_)}function xs(h){h.D&&(u.clearTimeout(h.D),h.D=null)}ts.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(gs(),wt(17)),En(this),this.m=2,Vn(this)):Ua(this,this.T-h)};function Vn(h){h.j.I==0||h.K||fu(h.j,h)}function En(h){xs(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,sl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Ts(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||Ss(E.h,h))){if(!h.L&&Ss(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Ga(E),zr(E);else break e;$i(E),wt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=_s(y(E.Va,E),6e3));ws(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ds(E,11)}else if((h.L||E.g==h)&&Ga(E),!O(_))for(q=E.Ba.g.parse(_),_=0;_<q.length;_++){let He=q[_];const ut=He[0];if(!(ut<=E.K))if(E.K=ut,He=He[1],E.I==2)if(He[0]=="c"){E.M=He[1],E.ba=He[2];const Pn=He[3];Pn!=null&&(E.ka=Pn,E.j.info("VER="+E.ka));const Os=He[4];Os!=null&&(E.za=Os,E.j.info("SVER="+E.za));const as=He[5];as!=null&&typeof as=="number"&&as>0&&(A=1.5*as,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const os=h.g;if(os){const Xi=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var Q=A.h;Q.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ll(Q,Q.h),Q.h=null))}if(A.G){const Ka=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ka&&(A.wa=Ka,Ye(A.J,A.G,Ka))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ie=h;if(A.na=gu(A,A.L?A.ba:null,A.W),ie.L){cl(A.h,ie);var Ae=ie,vt=A.O;vt&&(Ae.H=vt),Ae.D&&(xs(Ae),Es(Ae)),A.g=ie}else hu(A);E.i.length>0&&Is(E)}else He[0]!="stop"&&He[0]!="close"||Ds(E,7);else E.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ds(E,7):_l(E):He[0]!="noop"&&E.l&&E.l.qa(He),E.A=0)}}gs(4)}catch{}}var At=class{constructor(h,_){this.g=h,this.map=_}};function al(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ws(h){return h.h?1:h.g?h.g.size:0}function Ss(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ll(h,_){h.g?h.g.add(_):h.h=_}function cl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}al.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ul(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return N(h.i)}var iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let q,Q=null;A>=0?(q=h[E].substring(0,A),Q=h[E].substring(A+1)):q=h[E],_(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof xn?(this.l=h.l,Bt(this,h.j),this.o=h.o,this.g=h.g,kr(this,h.u),this.h=h.h,hl(this,cu(h.i)),this.m=h.m):h&&(_=String(h).match(iu))?(this.l=!1,Bt(this,_[1]||"",!0),this.o=As(_[2]||""),this.g=As(_[3]||"",!0),kr(this,_[4]),this.h=As(_[5]||"",!0),hl(this,_[6]||"",!0),this.m=As(_[7]||"")):(this.l=!1,this.i=new Mr(null,this.l))}xn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Hi(_,Pa,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Hi(_,Pa,!0),"@"),h.push(Xs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Hi(E,E.charAt(0)=="/"?dl:au,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Hi(E,ou)),h.join("")},xn.prototype.resolve=function(h){const _=Rt(this);let E=!!h.j;E?Bt(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var A=h.h;if(E)kr(_,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=_.h.lastIndexOf("/");q!=-1&&(A=_.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let ie=0;ie<q.length;){const Ae=q[ie++];Ae=="."?A&&ie==q.length&&Q.push(""):Ae==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&ie==q.length&&Q.push("")):(Q.push(Ae),A=!0)}A=Q.join("/")}else A=q}return E?_.h=A:E=h.i.toString()!=="",E?hl(_,cu(h.i)):E=!!h.m,E&&(_.m=h.m),_};function Rt(h){return new xn(h)}function Bt(h,_,E){h.j=E?As(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function kr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function hl(h,_,E){_ instanceof Mr?(h.i=_,Ba(h.i,h.l)):(E||(_=Hi(_,jr)),h.i=new Mr(_,h.l))}function Ye(h,_,E){h.i.set(_,E)}function qi(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function As(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hi(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,un),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function un(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pa=/[#\/\?@]/g,au=/[#\?:]/g,dl=/[#\?]/g,jr=/[#\?@]/g,ou=/#/g;function Mr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function hn(h){h.g||(h.g=new Map,h.h=0,h.i&&La(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}s=Mr.prototype,s.add=function(h,_){hn(this),this.i=null,h=Vr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function lu(h,_){hn(h),_=Vr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function fl(h,_){return hn(h),_=Vr(h,_),h.g.has(_)}s.forEach=function(h,_){hn(this),this.g.forEach(function(E,A){E.forEach(function(q){h.call(_,q,A,this)},this)},this)};function ml(h,_){hn(h);let E=[];if(typeof _=="string")fl(h,_)&&(E=E.concat(h.g.get(Vr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}s.set=function(h,_){return hn(this),this.i=null,h=Vr(this,h),fl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=ml(this,h),h.length>0?String(h[0]):_):_};function za(h,_,E){lu(h,_),E.length>0&&(h.i=null,h.g.set(Vr(h,_),N(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var E=_[A];const q=Xs(E);E=ml(this,E);for(let Q=0;Q<E.length;Q++){let ie=q;E[Q]!==""&&(ie+="="+Xs(E[Q])),h.push(ie)}}return this.i=h.join("&")};function cu(h){const _=new Mr;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Vr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ba(h,_){_&&!h.j&&(hn(h),h.i=null,h.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(lu(this,A),za(this,q,E))},h)),h.j=_}function ss(h,_){const E=new es;if(u.Image){const A=new Image;A.onload=b(Un,E,"TestLoadImage: loaded",!0,_,A),A.onerror=b(Un,E,"TestLoadImage: error",!1,_,A),A.onabort=b(Un,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=b(Un,E,"TestLoadImage: timeout",!1,_,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function pl(h,_){const E=new es,A=new AbortController,q=setTimeout(()=>{A.abort(),Un(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout(q),Q.ok?Un(E,"TestPingServer: ok",!0,_):Un(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Un(E,"TestPingServer: error",!1,_)})}function Un(h,_,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function Ur(){this.g=new Xc}function Rs(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Rs,Wc),Rs.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(h,_){Tt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Fi,Tt),s=Fi.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,rs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Lr(this):rs(this),this.readyState==3&&qa(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Lr(this))},s.Na=function(h){this.g&&(this.response=h,Lr(this))},s.ga=function(){this.g&&Lr(this)};function Lr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,rs(h)}s.setRequestHeader=function(h,_){this.A.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function rs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let _="";return ze(h,function(E,A){_+=A,_+=":",_+=E,_+=`\r
`}),_}function Gi(h,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Ln(E),typeof h=="string"?E!=null&&Xs(E):Ye(h,_,E))}function We(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(We,Tt);var Ns=/^https?$/i,gl=["POST","PUT"];s=We.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():il.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){Ki(this,Q);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())E.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(gl,_,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ie]of E)this.g.setRequestHeader(Q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Ki(this,Q)}};function Ki(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,yl(h),Ws(h)}function yl(h){h.A||(h.A=!0,Vt(h,"complete"),Vt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Vt(this,"complete"),Vt(this,"abort"),Ws(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ws(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Qi(this):this.Xa())},s.Xa=function(){Qi(this)};function Qi(h){if(h.h&&typeof c<"u"){if(h.v&&is(h)==4)setTimeout(h.Ca.bind(h),0);else if(Vt(h,"readystatechange"),is(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=Q===0){let ie=String(h.D).match(iu)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),A=!Ns.test(ie?ie.toLowerCase():"")}E=A}if(E)Vt(h,"complete"),Vt(h,"success");else{h.o=6;try{var q=is(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",yl(h)}}finally{Ws(h)}}}}function Ws(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||Vt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function is(h){return h.g?h.g.readyState:0}s.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Yd(_)}};function Gt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(h){const _={};h=(h.g&&is(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(O(h[A]))continue;var E=nu(h[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[q]||[];_[q]=Q,Q.push(E)}Qe(_,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Pr(h){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cs("baseRetryDelayMs",5e3,h),this.Za=Cs("retryDelaySeedMs",1e4,h),this.Ta=Cs("forwardChannelMaxRetries",2,h),this.va=Cs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new al(h&&h.concurrentRequestLimit),this.Ba=new Ur,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Pr.prototype,s.ka=8,s.I=1,s.connect=function(h,_,E,A){wt(0),this.W=h,this.H=_||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=gu(this,null,this.W),Is(this)};function _l(h){if(Ha(h),h.I==3){var _=h.V++,E=Rt(h.J);if(Ye(E,"SID",h.M),Ye(E,"RID",_),Ye(E,"TYPE","terminate"),Yi(h,E),_=new ts(h,h.j,_),_.M=2,_.A=qi(Rt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.A,E=!0),E||(_.g=yu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Es(_)}pu(h)}function zr(h){h.g&&(bl(h),h.g.cancel(),h.g=null)}function Ha(h){zr(h),h.v&&(u.clearTimeout(h.v),h.v=null),Ga(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Is(h){if(!ol(h.h)&&!h.m){h.m=!0;var _=h.Ea;ae||S(),ce||(ae(),ce=!0),C.add(_,h),h.D=0}}function Fa(h,_){return ws(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_s(y(h.Ea,h,_),mu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ts(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=z(Q),le(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=uu(this,q,_),E=Rt(this.J),Ye(E,"RID",h),Ye(E,"CVER",22),this.G&&Ye(E,"X-HTTP-Session-Id",this.G),Yi(this,E),Q&&(this.R?_="headers="+Xs(Ln(Q))+"&"+_:this.u&&Gi(E,this.u,Q)),ll(this.h,q),this.Ra&&Ye(E,"TYPE","init"),this.S?(Ye(E,"$req",_),Ye(E,"SID","null"),q.U=!0,bs(q,E,null)):bs(q,E,_),this.I=2}}else this.I==3&&(h?vl(this,h):this.i.length==0||ol(this.h)||vl(this))};function vl(h,_){var E;_?E=_.l:E=h.V++;const A=Rt(h.J);Ye(A,"SID",h.M),Ye(A,"RID",E),Ye(A,"AID",h.K),Yi(h,A),h.u&&h.o&&Gi(A,h.u,h.o),E=new ts(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=uu(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ll(h.h,E),bs(E,A,_)}function Yi(h,_){h.H&&ze(h.H,function(E,A){Ye(_,A,E)}),h.l&&ze({},function(E,A){Ye(_,A,E)})}function uu(h,_,E){E=Math.min(h.i.length,E);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var q=h.i;let Ae=-1;for(;;){const vt=["count="+E];Ae==-1?E>0?(Ae=q[0].g,vt.push("ofs="+Ae)):Ae=0:vt.push("ofs="+Ae);let He=!0;for(let ut=0;ut<E;ut++){var Q=q[ut].g;const Pn=q[ut].map;if(Q-=Ae,Q<0)Ae=Math.max(0,q[ut].g-100),He=!1;else try{Q="req"+Q+"_"||"";try{var ie=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Os,as]of ie){let os=as;p(as)&&(os=Or(as)),vt.push(Q+Os+"="+encodeURIComponent(os))}}catch(Os){throw vt.push(Q+"type="+encodeURIComponent("_badmap")),Os}}catch{A&&A(Pn)}}if(He){ie=vt.join("&");break e}}ie=void 0}return h=h.i.splice(0,E),_.G=h,ie}function hu(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ae||S(),ce||(ae(),ce=!0),C.add(_,h),h.A=0}}function $i(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_s(y(h.Da,h),mu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_s(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),zr(this),du(this))};function bl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function du(h){h.g=new ts(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Rt(h.na);Ye(_,"RID","rpc"),Ye(_,"SID",h.M),Ye(_,"AID",h.K),Ye(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(_,"TO",h.ia),Ye(_,"TYPE","xmlhttp"),Yi(h,_),h.u&&h.o&&Gi(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=qi(Rt(_)),E.u=null,E.R=!0,Va(E,h)}s.Va=function(){this.C!=null&&(this.C=null,zr(this),$i(this),wt(19))};function Ga(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function fu(h,_){var E=null;if(h.g==_){Ga(h),bl(h),h.g=null;var A=2}else if(Ss(h.h,_))E=_.G,cl(h.h,_),A=1;else return;if(h.I!=0){if(_.o)if(A==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var q=h.D;A=Ma(),Vt(A,new ys(A,E)),Is(h)}else hu(h);else if(q=_.m,q==3||q==0&&_.X>0||!(A==1&&Fa(h,_)||A==2&&$i(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),q){case 1:Ds(h,5);break;case 4:Ds(h,10);break;case 3:Ds(h,6);break;default:Ds(h,2)}}}function mu(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function Ds(h,_){if(h.j.info("Error code "+_),_==2){var E=y(h.bb,h),A=h.Ua;const q=!A;A=new xn(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(A,"https"),qi(A),q?ss(A.toString(),E):pl(A.toString(),E)}else wt(2);h.I=0,h.l&&h.l.pa(_),pu(h),Ha(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function pu(h){if(h.I=0,h.ja=[],h.l){const _=ul(h.h);(_.length!=0||h.i.length!=0)&&(R(h.ja,_),R(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function gu(h,_,E){var A=E instanceof xn?Rt(E):new xn(E);if(A.g!="")_&&(A.g=_+"."+A.g),kr(A,A.u);else{var q=u.location;A=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const Q=new xn(null);A&&Bt(Q,A),_&&(Q.g=_),q&&kr(Q,q),E&&(Q.h=E),A=Q}return E=h.G,_=h.wa,E&&_&&Ye(A,E,_),Ye(A,"VER",h.ka),Yi(h,A),A}function yu(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new We(new Rs({ab:E})):new We(h.ma),_.Fa(h.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}s=_u.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Br(){}Br.prototype.g=function(h,_){return new on(h,_)};function on(h,_){Tt.call(this),this.g=new Pr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zs(this)}x(on,Tt),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){_l(this.g)},on.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Or(h),h=E);_.i.push(new At(_.Ya++,h)),_.I==3&&Is(_)},on.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,on.Z.N.call(this)};function vu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(vu,Ft);function bu(){Mn.call(this),this.status=1}x(bu,Mn);function Zs(h){this.g=h}x(Zs,_u),Zs.prototype.ra=function(){Vt(this.g,"a")},Zs.prototype.qa=function(h){Vt(this.g,new vu(h))},Zs.prototype.pa=function(h){Vt(this.g,new bu)},Zs.prototype.oa=function(){Vt(this.g,"b")},Br.prototype.createWebChannel=Br.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,tT=function(){return new Br},eT=function(){return Ma()},Zx=_t,Np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Bh=zi,rl.COMPLETE="complete",Jx=rl,Jc.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,hc=Jc,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,Wx=We}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});const A0="@firebase/firestore",R0="4.9.3";class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let Qo="12.7.0";const xa=new rg("@firebase/firestore");function So(){return xa.logLevel}function he(s,...e){if(xa.logLevel<=je.DEBUG){const n=e.map(pg);xa.debug(`Firestore (${Qo}): ${s}`,...n)}}function Ar(s,...e){if(xa.logLevel<=je.ERROR){const n=e.map(pg);xa.error(`Firestore (${Qo}): ${s}`,...n)}}function jo(s,...e){if(xa.logLevel<=je.WARN){const n=e.map(pg);xa.warn(`Firestore (${Qo}): ${s}`,...n)}}function pg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function be(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,nT(s,i,n)}function nT(s,e,n){let i=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ar(i),new Error(i)}function Ke(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||nT(e,o,i)}function Se(s,e){return s}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class sT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(tn.UNAUTHENTICATED)))}shutdown(){}}class _2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class v2{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new br;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new br,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new br)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new sT(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class b2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new b2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function T2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=T2(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Me(s,e){return s<e?-1:s>e?1:0}function Cp(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return lp(o)===lp(c)?Me(o,c):lp(o)?1:-1}return Me(s.length,e.length)}const w2=55296,S2=57343;function lp(s){const e=s.charCodeAt(0);return e>=w2&&e<=S2}function Mo(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}const C0="__name__";class Us{constructor(e,n,i){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Us.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Me(e.length,n.length)}static compareSegments(e,n){const i=Us.isNumericId(e),o=Us.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Us.extractNumericId(e).compare(Us.extractNumericId(n)):Cp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class nt extends Us{construct(e,n,i){return new nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new nt(n)}static emptyPath(){return new nt([])}}const A2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Us{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return A2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new Wt([C0])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(u=!u,o++):p!=="."||u?(i+=p,o++):(c(),o++)}if(c(),u)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(nt.fromString(e))}static fromName(e){return new ge(nt.fromString(e).popFirst(5))}static empty(){return new ge(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new nt(e.slice()))}}function rT(s,e,n){if(!n)throw new ue(ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function R2(s,e,n,i){if(e===!0&&i===!0)throw new ue(ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function I0(s){if(!ge.isDocumentKey(s))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function D0(s){if(ge.isDocumentKey(s))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function iT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Sd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":be(12329,{type:typeof s})}function bn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sd(s);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function jt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Hc(s,e){if(!iT(s))throw new ue(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const u=s[i];if(o&&typeof u!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ue(ee.INVALID_ARGUMENT,n);return!0}const O0=-62135596800,k0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*k0);return new at(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-O0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:jt("string",at._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new at(0,0))}static max(){return new Te(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ac=-1;function N2(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new at(n+1,0):new at(n,i));return new wi(o,ge.empty(),e)}function C2(s){return new wi(s.readTime,s.key,Ac)}class wi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wi(Te.min(),ge.empty(),Ac)}static max(){return new wi(Te.max(),ge.empty(),Ac)}}function I2(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(s.documentKey,e.documentKey),n!==0?n:Me(s.largestBatchId,e.largestBatchId))}const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yo(s){if(s.code!==ee.FAILED_PRECONDITION||s.message!==D2)throw s;he("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,i)=>{n(e)}))}static reject(e){return new se(((n,i)=>{i(e)}))}static waitFor(e){return new se(((n,i)=>{let o=0,c=0,u=!1;e.forEach((p=>{++o,p.next((()=>{++c,u&&c===o&&n()}),(g=>i(g)))})),u=!0,c===o&&n()}))}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next((o=>o?se.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new se(((i,o)=>{const c=e.length,u=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((b=>{u[y]=b,++p,p===c&&i(u)}),(b=>o(b)))}}))}static doWhile(e,n){return new se(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function k2(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $o(s){return s.name==="IndexedDbTransactionError"}class Ad{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ad.ce=-1;const yg=-1;function Rd(s){return s==null}function sd(s){return s===0&&1/s==-1/0}function j2(s){return typeof s=="number"&&Number.isInteger(s)&&!sd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const aT="";function M2(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=j0(e)),e=V2(s.get(n),e);return j0(e)}function V2(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case aT:n+="";break;default:n+=c}}return n}function j0(s){return s+aT+""}function M0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Oi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function oT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ft{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rh(this.root,e,this.comparator,!0)}}class Rh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class On{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Pt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class lT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new lT("Invalid base64 string: "+c):c}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=U2.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(s.seconds),nanos:xt(s.nanos)}}function xt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ai(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}const cT="server_timestamp",uT="__type__",hT="__previous_value__",dT="__local_write_time__";function _g(s){return(s?.mapValue?.fields||{})[uT]?.stringValue===cT}function Nd(s){const e=s.mapValue.fields[hT];return _g(e)?Nd(e):e}function Rc(s){const e=Si(s.mapValue.fields[dT].timestampValue);return new at(e.seconds,e.nanos)}class L2{constructor(e,n,i,o,c,u,p,g,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const rd="(default)";class Nc{constructor(e,n){this.projectId=e,this.database=n||rd}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===rd}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}const fT="__type__",P2="__max__",Nh={mapValue:{}},mT="__vector__",id="value";function Ri(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?_g(s)?4:B2(s)?9007199254740991:z2(s)?10:11:be(28295,{value:s})}function Qs(s,e){if(s===e)return!0;const n=Ri(s);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Rc(s).isEqual(Rc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Si(o.timestampValue),p=Si(c.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Ai(o.bytesValue).isEqual(Ai(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return xt(o.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return xt(o.integerValue)===xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=xt(o.doubleValue),p=xt(c.doubleValue);return u===p?sd(u)===sd(p):isNaN(u)&&isNaN(p)}return!1})(s,e);case 9:return Mo(s.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},p=c.mapValue.fields||{};if(M0(u)!==M0(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Qs(u[g],p[g])))return!1;return!0})(s,e);default:return be(52216,{left:s})}}function Cc(s,e){return(s.values||[]).find((n=>Qs(n,e)))!==void 0}function Vo(s,e){if(s===e)return 0;const n=Ri(s),i=Ri(e);if(n!==i)return Me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const p=xt(c.integerValue||c.doubleValue),g=xt(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return U0(s.timestampValue,e.timestampValue);case 4:return U0(Rc(s),Rc(e));case 5:return Cp(s.stringValue,e.stringValue);case 6:return(function(c,u){const p=Ai(c),g=Ai(u);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const p=c.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Me(p[y],g[y]);if(b!==0)return b}return Me(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const p=Me(xt(c.latitude),xt(u.latitude));return p!==0?p:Me(xt(c.longitude),xt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return L0(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const p=c.fields||{},g=u.fields||{},y=p[id]?.arrayValue,b=g[id]?.arrayValue,x=Me(y?.values?.length||0,b?.values?.length||0);return x!==0?x:L0(y,b)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Nh.mapValue&&u===Nh.mapValue)return 0;if(c===Nh.mapValue)return 1;if(u===Nh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let x=0;x<g.length&&x<b.length;++x){const T=Cp(g[x],b[x]);if(T!==0)return T;const N=Vo(p[g[x]],y[b[x]]);if(N!==0)return N}return Me(g.length,b.length)})(s.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function U0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const n=Si(s),i=Si(e),o=Me(n.seconds,i.seconds);return o!==0?o:Me(n.nanos,i.nanos)}function L0(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Vo(n[o],i[o]);if(c)return c}return Me(n.length,i.length)}function Uo(s){return Ip(s)}function Ip(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Si(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ai(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ge.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=Ip(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of i)c?c=!1:o+=",",o+=`${u}:${Ip(n.fields[u])}`;return o+"}"})(s.mapValue):be(61005,{value:s})}function qh(s){switch(Ri(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nd(s);return e?16+qh(e):16;case 5:return 2*s.stringValue.length;case 6:return Ai(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+qh(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Oi(i.fields,((c,u)=>{o+=c.length+qh(u)})),o})(s.mapValue);default:throw be(13486,{value:s})}}function P0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Dp(s){return!!s&&"integerValue"in s}function vg(s){return!!s&&"arrayValue"in s}function z0(s){return!!s&&"nullValue"in s}function B0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Hh(s){return!!s&&"mapValue"in s}function z2(s){return(s?.mapValue?.fields||{})[fT]?.stringValue===mT}function yc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Oi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=yc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yc(s.arrayValue.values[n]);return e}return{...s}}function B2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===P2}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(n)}setAll(e){let n=Wt.emptyPath(),i={},o=[];e.forEach(((u,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}u?i[p.lastSegment()]=yc(u):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());Hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Oi(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new vn(yc(this.value))}}function pT(s){const e=[];return Oi(s.fields,((n,i)=>{const o=new Wt([n]);if(Hh(i)){const c=pT(i.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new On(e)}class nn{constructor(e,n,i,o,c,u,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=u,this.documentState=p}static newInvalidDocument(e){return new nn(e,0,Te.min(),Te.min(),Te.min(),vn.empty(),0)}static newFoundDocument(e,n,i,o){return new nn(e,1,n,Te.min(),i,o,0)}static newNoDocument(e,n){return new nn(e,2,n,Te.min(),Te.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Te.min(),Te.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ad{constructor(e,n){this.position=e,this.inclusive=n}}function q0(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],u=s.position[o];if(c.field.isKeyField()?i=ge.comparator(ge.fromName(u.referenceValue),n.key):i=Vo(u,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function H0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Qs(s.position[n],e.position[n]))return!1;return!0}class Ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function q2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class gT{}class kt extends gT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new F2(e,n,i):n==="array-contains"?new Q2(e,i):n==="in"?new Y2(e,i):n==="not-in"?new $2(e,i):n==="array-contains-any"?new X2(e,i):new kt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new G2(e,i):new K2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vo(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends gT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ms(e,n)}matches(e){return yT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yT(s){return s.op==="and"}function _T(s){return H2(s)&&yT(s)}function H2(s){for(const e of s.filters)if(e instanceof ms)return!1;return!0}function Op(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+Uo(s.value);if(_T(s))return s.filters.map((e=>Op(e))).join(",");{const e=s.filters.map((n=>Op(n))).join(",");return`${s.op}(${e})`}}function vT(s,e){return s instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Qs(i.value,o.value)})(s,e):s instanceof ms?(function(i,o){return o instanceof ms&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,u,p)=>c&&vT(u,o.filters[p])),!0):!1})(s,e):void be(19439)}function bT(s){return s instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`})(s):s instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(bT).join(" ,")+"}"})(s):"Filter"}class F2 extends kt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class G2 extends kt{constructor(e,n){super(e,"in",n),this.keys=ET("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class K2 extends kt{constructor(e,n){super(e,"not-in",n),this.keys=ET("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ET(s,e){return(e.arrayValue?.values||[]).map((n=>ge.fromName(n.referenceValue)))}class Q2 extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&Cc(n.arrayValue,this.value)}}class Y2 extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cc(this.value.arrayValue,n)}}class $2 extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cc(this.value.arrayValue,n)}}class X2 extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Cc(this.value.arrayValue,i)))}}class W2{constructor(e,n=null,i=[],o=[],c=null,u=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=u,this.endAt=p,this.Te=null}}function F0(s,e=null,n=[],i=[],o=null,c=null,u=null){return new W2(s,e,n,i,o,c,u)}function bg(s){const e=Se(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Op(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Uo(i))).join(",")),e.Te=n}return e.Te}function Eg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!q2(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!vT(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!H0(s.startAt,e.startAt)&&H0(s.endAt,e.endAt)}function kp(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Xo{constructor(e,n=null,i=[],o=[],c=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J2(s,e,n,i,o,c,u,p){return new Xo(s,e,n,i,o,c,u,p)}function Cd(s){return new Xo(s)}function G0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function xT(s){return s.collectionGroup!==null}function _c(s){const e=Se(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Pt(Wt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ic(c,i))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Ic(Wt.keyField(),i))}return e.Ie}function Hs(s){const e=Se(s);return e.Ee||(e.Ee=Z2(e,_c(s))),e.Ee}function Z2(s,e){if(s.limitType==="F")return F0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Ic(o.field,c)}));const n=s.endAt?new ad(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new ad(s.startAt.position,s.startAt.inclusive):null;return F0(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function jp(s,e){const n=s.filters.concat([e]);return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Mp(s,e,n){return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Id(s,e){return Eg(Hs(s),Hs(e))&&s.limitType===e.limitType}function TT(s){return`${bg(Hs(s))}|lt:${s.limitType}`}function Ao(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>bT(o))).join(", ")}]`),Rd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Uo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(Hs(s))}; limitType=${s.limitType})`}function Dd(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ge.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of _c(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(u,p,g){const y=q0(u,p,g);return u.inclusive?y<=0:y<0})(i.startAt,_c(i),o)||i.endAt&&!(function(u,p,g){const y=q0(u,p,g);return u.inclusive?y>=0:y>0})(i.endAt,_c(i),o))})(s,e)}function eD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function wT(s){return(e,n)=>{let i=!1;for(const o of _c(s)){const c=tD(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function tD(s,e,n){const i=s.field.isKeyField()?ge.comparator(e.key,n.key):(function(c,u,p){const g=u.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Vo(g,y):be(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:s.dir})}}class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return oT(this.inner)}size(){return this.innerSize}}const nD=new ft(ge.comparator);function Rr(){return nD}const ST=new ft(ge.comparator);function dc(...s){let e=ST;for(const n of s)e=e.insert(n.key,n);return e}function AT(s){let e=ST;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ma(){return vc()}function RT(){return vc()}function vc(){return new Aa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const sD=new ft(ge.comparator),rD=new Pt(ge.comparator);function Ve(...s){let e=rD;for(const n of s)e=e.add(n);return e}const iD=new Pt(Me);function aD(){return iD}function xg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function NT(s){return{integerValue:""+s}}function CT(s,e){return j2(e)?NT(e):xg(s,e)}class Od{constructor(){this._=void 0}}function oD(s,e,n){return s instanceof Dc?(function(o,c){const u={fields:{[uT]:{stringValue:cT},[dT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&_g(c)&&(c=Nd(c)),c&&(u.fields[hT]=c),{mapValue:u}})(n,e):s instanceof Lo?DT(s,e):s instanceof Po?OT(s,e):(function(o,c){const u=IT(o,c),p=K0(u)+K0(o.Ae);return Dp(u)&&Dp(o.Ae)?NT(p):xg(o.serializer,p)})(s,e)}function lD(s,e,n){return s instanceof Lo?DT(s,e):s instanceof Po?OT(s,e):n}function IT(s,e){return s instanceof Oc?(function(i){return Dp(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Dc extends Od{}class Lo extends Od{constructor(e){super(),this.elements=e}}function DT(s,e){const n=kT(e);for(const i of s.elements)n.some((o=>Qs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Po extends Od{constructor(e){super(),this.elements=e}}function OT(s,e){let n=kT(e);for(const i of s.elements)n=n.filter((o=>!Qs(o,i)));return{arrayValue:{values:n}}}class Oc extends Od{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K0(s){return xt(s.integerValue||s.doubleValue)}function kT(s){return vg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class kd{constructor(e,n){this.field=e,this.transform=n}}function cD(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Lo&&o instanceof Lo||i instanceof Po&&o instanceof Po?Mo(i.elements,o.elements,Qs):i instanceof Oc&&o instanceof Oc?Qs(i.Ae,o.Ae):i instanceof Dc&&o instanceof Dc})(s.transform,e.transform)}class uD{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class jd{}function jT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Tg(s.key,Xn.none()):new Fc(s.key,s.data,Xn.none());{const n=s.data,i=vn.empty();let o=new Pt(Wt.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?i.delete(c):i.set(c,u),o=o.add(c)}return new ki(s.key,i,new On(o.toArray()),Xn.none())}}function hD(s,e,n){s instanceof Fc?(function(o,c,u){const p=o.value.clone(),g=Y0(o.fieldTransforms,c,u.transformResults);p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ki?(function(o,c,u){if(!Fh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const p=Y0(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(MT(o)),g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function bc(s,e,n,i){return s instanceof Fc?(function(c,u,p,g){if(!Fh(c.precondition,u))return p;const y=c.value.clone(),b=$0(c.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof ki?(function(c,u,p,g){if(!Fh(c.precondition,u))return p;const y=$0(c.fieldTransforms,g,u),b=u.data;return b.setAll(MT(c)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(s,e,n,i):(function(c,u,p){return Fh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(s,e,n)}function dD(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=IT(i.transform,o||null);c!=null&&(n===null&&(n=vn.empty()),n.set(i.field,c))}return n||null}function Q0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((c,u)=>cD(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Fc extends jd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ki extends jd{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function MT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Y0(s,e,n){const i=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],u=c.transform,p=e.data.field(c.field);i.set(c.field,lD(u,p,n[o]))}return i}function $0(s,e,n){const i=new Map;for(const o of s){const c=o.transform,u=n.data.field(o.field);i.set(o.field,oD(c,u,e))}return i}class Tg extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fD extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mD{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&hD(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=bc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=bc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=RT();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let p=this.applyToLocalView(u,c.mutatedFields);p=n.has(o.key)?null:p;const g=jT(u,p);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((n,i)=>Q0(n,i)))&&Mo(this.baseMutations,e.baseMutations,((n,i)=>Q0(n,i)))}}class wg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return sD})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,i[u].version);return new wg(e,n,i,o)}}class pD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gD{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ot,Pe;function yD(s){switch(s){case ee.OK:return be(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return be(15467,{code:s})}}function VT(s){if(s===void 0)return Ar("GRPC error has no .code"),ee.UNKNOWN;switch(s){case Ot.OK:return ee.OK;case Ot.CANCELLED:return ee.CANCELLED;case Ot.UNKNOWN:return ee.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ee.INTERNAL;case Ot.UNAVAILABLE:return ee.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ee.NOT_FOUND;case Ot.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ot.ABORTED:return ee.ABORTED;case Ot.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ot.DATA_LOSS:return ee.DATA_LOSS;default:return be(39323,{code:s})}}(Pe=Ot||(Ot={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";function _D(){return new TextEncoder}const vD=new bi([4294967295,4294967295],0);function X0(s){const e=_D().encode(s),n=new Xx;return n.update(e),new Uint8Array(n.digest())}function W0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new bi([n,i],0),new bi([o,c],0)]}class Sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(i<0)throw new fc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(bi.fromNumber(i)));return o.compare(vD)===1&&(o=new bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=X0(e),[i,o]=W0(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);if(!this.we(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Sg(c,o,n);return i.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const n=X0(e),[i,o]=W0(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Md{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Md(Te.min(),o,new ft(Me),Rr(),Ve())}}class Gc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Gc(i,n,Ve(),Ve(),Ve())}}class Gh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class UT{constructor(e,n){this.targetId=e,this.Ce=n}}class LT{constructor(e,n,i=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class J0{constructor(){this.ve=0,this.Fe=Z0(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),i=Ve();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:be(38017,{changeType:c})}})),new Gc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Z0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rr(),this.Je=Ch(),this.He=Ch(),this.Ye=new ft(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(kp(c))if(i===0){const u=new ge(c.path);this.et(n,u,nn.newNoDocument(u,Te.min()))}else Ke(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let u,p;try{u=Ai(i).toUint8Array()}catch(g){if(g instanceof lT)return jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Sg(u,o,c)}catch(g){return jo(g instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const p=this.ot(u);if(p){if(c.current&&kp(p.target)){const g=new ge(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,nn.newNoDocument(g,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let i=Ve();this.He.forEach(((c,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Md(e,n,this.Ye,this.je,i);return this.je=Rr(),this.Je=Ch(),this.He=Ch(),this.Ye=new ft(Me),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new J0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new J0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ch(){return new ft(ge.comparator)}function Z0(){return new ft(ge.comparator)}const ED={asc:"ASCENDING",desc:"DESCENDING"},xD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TD={and:"AND",or:"OR"};class wD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vp(s,e){return s.useProto3Json||Rd(e)?e:{value:e}}function od(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function SD(s,e){return od(s,e.toTimestamp())}function Fs(s){return Ke(!!s,49232),Te.fromTimestamp((function(n){const i=Si(n);return new at(i.seconds,i.nanos)})(s))}function Ag(s,e){return Up(s,e).canonicalString()}function Up(s,e){const n=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function zT(s){const e=nt.fromString(s);return Ke(GT(e),10190,{key:e.toString()}),e}function Lp(s,e){return Ag(s.databaseId,e.path)}function cp(s,e){const n=zT(e);if(n.get(1)!==s.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ge(qT(n))}function BT(s,e){return Ag(s.databaseId,e)}function AD(s){const e=zT(s);return e.length===4?nt.emptyPath():qT(e)}function Pp(s){return new nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function qT(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function eE(s,e,n){return{name:Lp(s,e),fields:n.value.mapValue.fields}}function RD(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Ke(b===void 0||typeof b=="string",58123),Jt.fromBase64String(b||"")):(Ke(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Jt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?ee.UNKNOWN:VT(y.code);return new ue(b,y.message||"")})(u);n=new LT(i,o,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=cp(s,i.document.name),c=Fs(i.document.updateTime),u=i.document.createTime?Fs(i.document.createTime):Te.min(),p=new vn({mapValue:{fields:i.document.fields}}),g=nn.newFoundDocument(o,c,u,p),y=i.targetIds||[],b=i.removedTargetIds||[];n=new Gh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=cp(s,i.document),c=i.readTime?Fs(i.readTime):Te.min(),u=nn.newNoDocument(o,c),p=i.removedTargetIds||[];n=new Gh([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=cp(s,i.document),c=i.removedTargetIds||[];n=new Gh([],c,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,u=new gD(o,c),p=i.targetId;n=new UT(p,u)}}return n}function ND(s,e){let n;if(e instanceof Fc)n={update:eE(s,e.key,e.value)};else if(e instanceof Tg)n={delete:Lp(s,e.key)};else if(e instanceof ki)n={update:eE(s,e.key,e.data),updateMask:UD(e.fieldMask)};else{if(!(e instanceof fD))return be(16599,{Vt:e.type});n={verify:Lp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const p=u.transform;if(p instanceof Dc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Lo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Po)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Oc)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw be(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:SD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)})(s,e.precondition)),n}function CD(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,c){let u=o.updateTime?Fs(o.updateTime):Fs(c);return u.isEqual(Te.min())&&(u=Fs(c)),new uD(u,o.transformResults||[])})(n,e)))):[]}function ID(s,e){return{documents:[BT(s,e.path)]}}function DD(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=BT(s,o);const c=(function(y){if(y.length!==0)return FT(ms.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:Ro(T.field),direction:jD(T.dir)}})(b)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const p=Vp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function OD(s){let e=AD(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(x){const T=HT(x);return T instanceof ms&&_T(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(x){return x.map((T=>(function(R){return new Ic(No(R.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(x){let T;return T=typeof x=="object"?x.value:x,Rd(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(x){const T=!!x.before,N=x.values||[];return new ad(N,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(x){const T=!x.before,N=x.values||[];return new ad(N,T)})(n.endAt)),J2(e,o,u,c,p,"F",g,y)}function kD(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=No(n.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=No(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=No(n.unaryFilter.field);return kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=No(n.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(s):s.fieldFilter!==void 0?(function(n){return kt.create(No(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((i=>HT(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(s):be(30097,{filter:s})}function jD(s){return ED[s]}function MD(s){return xD[s]}function VD(s){return TD[s]}function Ro(s){return{fieldPath:s.canonicalString()}}function No(s){return Wt.fromServerFormat(s.fieldPath)}function FT(s){return s instanceof kt?(function(n){if(n.op==="=="){if(B0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(z0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(B0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(z0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:MD(n.op),value:n.value}}})(s):s instanceof ms?(function(n){const i=n.getFilters().map((o=>FT(o)));return i.length===1?i[0]:{compositeFilter:{op:VD(n.op),filters:i}}})(s):be(54877,{filter:s})}function UD(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function GT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class yi{constructor(e,n,i,o,c=Te.min(),u=Te.min(),p=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LD{constructor(e){this.yt=e}}function PD(s){const e=OD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Mp(e,e.limit,"L"):e}class zD{constructor(){this.Cn=new BD}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(wi.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class BD{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Pt(nt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Pt(nt.comparator)).toArray()}}const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KT=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(KT,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zo(0)}static cr(){return new zo(-1)}}const nE="LruGarbageCollector",qD=1048576;function sE([s,e],[n,i]){const o=Me(s,n);return o===0?Me(e,i):o}class HD{constructor(e){this.Ir=e,this.buffer=new Pt(sE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();sE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(nE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$o(n)?he(nE,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Vr(3e5)}))}}class GD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Ad.ce);const i=new HD(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(tE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,u=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,n)))).next((x=>(c=x,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(y=Date.now(),So()<=je.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${o} in `+(p-u)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x}))))}}function KD(s,e){return new GD(s,e)}class QD{constructor(){this.changes=new Aa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class $D{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&bc(i.mutation,o,On.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ve()){const o=ma();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let u=dc();return c.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=ma();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ve())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,p)=>{n.set(u,p)}))}))}computeViews(e,n,i,o){let c=Rr();const u=vc(),p=(function(){return vc()})();return n.forEach(((g,y)=>{const b=i.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof ki)?c=c.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),bc(b.mutation,y,b.mutation.getFieldMask(),at.now())):u.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,b)=>u.set(y,b))),n.forEach(((y,b)=>p.set(y,new YD(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=vc();let o=new ft(((u,p)=>u-p)),c=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=i.get(g)||On.empty();b=p.applyToLocalView(y,b),i.set(g,b);const x=(o.get(p.batchId)||Ve()).add(g);o=o.insert(p.batchId,x)}))})).next((()=>{const u=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,x=RT();b.forEach((T=>{if(!c.has(T)){const N=jT(n.get(T),i.get(T));N!==null&&x.set(T,N),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return ge.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):se.resolve(ma());let p=Ac,g=c;return u.next((y=>se.forEach(y,((b,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),c.get(b)?se.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ve()))).next((b=>({batchId:p,changes:AT(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next((i=>{let o=dc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let u=dc();return this.indexManager.getCollectionParents(e,c).next((p=>se.forEach(p,(g=>{const y=(function(x,T){return new Xo(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((b=>{b.forEach(((x,T)=>{u=u.insert(x,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((u=>{c.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,nn.newInvalidDocument(b)))}));let p=dc();return u.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&bc(b.mutation,y,On.empty(),at.now()),Dd(n,y)&&(p=p.insert(g,y))})),p}))}}class XD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Fs(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:PD(o.bundledQuery),readTime:Fs(o.readTime)}})(n)),se.resolve()}}class WD{constructor(){this.overlays=new ft(ge.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ma();return se.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.St(e,n,c)})),se.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const o=ma(),c=n.length+1,u=new ge(n.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new ft(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=ma(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=ma(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return se.resolve(p)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new pD(n,i));let c=this.qr.get(n);c===void 0&&(c=Ve(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}class JD{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class Rg{constructor(){this.Qr=new Pt(Ht.$r),this.Ur=new Pt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ht(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new ge(new nt([])),i=new Ht(n,e),o=new Ht(n,e+1),c=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new nt([])),i=new Ht(n,e),o=new Ht(n,e+1);let c=Ve();return this.Ur.forEachInRange([i,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new Ht(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}class ZD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ht.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new mD(c,n,i,o);this.mutationQueue.push(u);for(const p of o)this.Zr=this.Zr.add(new Ht(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ht(n,0),o=new Ht(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(u=>{const p=this.Xr(u.Yr);c.push(p)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pt(Me);return n.forEach((o=>{const c=new Ht(o,0),u=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(p=>{i=i.add(p.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;ge.isDocumentKey(c)||(c=c.child(""));const u=new Ht(new ge(c),0);let p=new Pt(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),u),se.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,(o=>{const c=new Ht(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Ht(n,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eO{constructor(e){this.ri=e,this.docs=(function(){return new ft(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let i=Rr();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():nn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=Rr();const u=n.path,p=new ge(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||I2(C2(b),i)<=0||(o.has(b.key)||Dd(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,i,o){be(9500)}ii(e,n){return se.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new tO(this)}getSize(e){return se.resolve(this.size)}}class tO extends QD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class nO{constructor(e){this.persistence=e,this.si=new Aa((n=>bg(n)),Eg),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Rg,this.targetCount=0,this.ai=zo.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),se.waitFor(c).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}class QT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ad(0),this.li=!1,this.li=!0,this.hi=new JD,this.referenceDelegate=e(this),this.Pi=new nO(this),this.indexManager=new zD,this.remoteDocumentCache=(function(o){return new eO(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new LD(n),this.Ii=new XD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new ZD(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){he("MemoryPersistence","Starting transaction:",e);const o=new sO(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class sO extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new Rg,this.Vi=null}static mi(e){return new Ng(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ld{constructor(e,n){this.persistence=e,this.pi=new Aa((i=>M2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=KD(this,n)}static mi(e,n){return new ld(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?se.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((p=>{p||(i++,c.removeEntry(u,Te.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qh(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ve(),o=Ve();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Cg(e,n.fromCache,i,o)}}class rO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return M1()?8:k2(sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,o,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new rO;return this.Ss(e,n,u).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,u,p.size)}))})).next((()=>c.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(So()<=je.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(So()<=je.DEBUG&&he("QueryEngine","Query:",Ao(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(So()<=je.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hs(n))):se.resolve())}ys(e,n){if(G0(n))return se.resolve(null);let i=Hs(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Mp(n,null,"F"),i=Hs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Ve(...c);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,u,g.readTime)?this.ys(e,Mp(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,i,o){return G0(n)||o.isEqual(Te.min())?se.resolve(null):this.ps.getDocuments(e,i).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,i,o)?se.resolve(null):(So()<=je.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(n)),this.vs(e,u,n,N2(o,Ac)).next((p=>p)))}))}Ds(e,n){let i=new Pt(wT(e));return n.forEach(((o,c)=>{Dd(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return So()<=je.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.ps.getDocumentsMatchingQuery(e,n,wi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Ig="LocalStore",aO=3e8;class oO{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ft(Me),this.xs=new Aa((c=>bg(c)),Eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $D(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function lO(s,e,n,i){return new oO(s,e,n,i)}async function YT(s,e){const n=Se(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],p=[];let g=Ve();for(const y of o){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function cO(s,e){const n=Se(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const x=y.batch,T=x.keys();let N=se.resolve();return T.forEach((R=>{N=N.next((()=>b.getEntry(g,R))).next((V=>{const j=y.docVersions.get(R);Ke(j!==null,48541),V.version.compareTo(j)<0&&(x.applyToRemoteDocument(V,y),V.isValidDocument()&&(V.setReadTime(y.commitVersion),b.addEntry(V)))}))})),N.next((()=>p.mutationQueue.removeMutationBatch(g,x)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ve();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function $T(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function uO(s,e){const n=Se(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((b,x)=>{const T=o.get(x);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,x))));let N=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?N=N.withResumeToken(Jt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,i)),o=o.insert(x,N),(function(V,j,H){return V.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=aO?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,N,b)&&p.push(n.Pi.updateTargetData(c,N))}));let g=Rr(),y=Ve();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(hO(c,u,e.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!i.isEqual(Te.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((x=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(b)}return se.waitFor(p).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function hO(s,e,n){let i=Ve(),o=Ve();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let u=Rr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):he(Ig,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function dO(s,e){const n=Se(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=yg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function fO(s,e){const n=Se(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((c=>c?(o=c,se.resolve(o)):n.Pi.allocateTargetId(i).next((u=>(o=new yi(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function zp(s,e,n){const i=Se(s),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!$o(u))throw u;he(Ig,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function rE(s,e,n){const i=Se(s);let o=Te.min(),c=Ve();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const x=Se(g),T=x.xs.get(b);return T!==void 0?se.resolve(x.Ms.get(T)):x.Pi.getTargetData(y,b)})(i,u,Hs(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,p.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?o:Te.min(),n?c:Ve()))).next((p=>(mO(i,eD(e),p),{documents:p,Qs:c})))))}function mO(s,e,n){let i=s.Os.get(e)||Te.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class iE{constructor(){this.activeTargetIds=aD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pO{constructor(){this.Mo=new iE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new iE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gO{Oo(e){}shutdown(){}}const aE="ConnectivityMonitor";class oE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(aE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ih=null;function Bp(){return Ih===null?Ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ih++,"0x"+Ih.toString(16)}const up="RestConnection",yO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _O{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===rd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const u=Bp(),p=this.zo(e,n.toUriEncodedString());he(up,`Sending RPC '${e}' ${u}:`,p,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),b=Ii(y);return this.Jo(e,p,g,i,b).then((x=>(he(up,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw jo(up,`RPC '${e}' ${u} failed with error: `,x,"url: ",p,"request:",i),x}))}Ho(e,n,i,o,c,u){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const i=yO[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class vO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const en="WebChannelConnection";class bO extends _O{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const u=Bp();return new Promise(((p,g)=>{const y=new Wx;y.setWithCredentials(!0),y.listenOnce(Jx.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Bh.NO_ERROR:const x=y.getResponseJson();he(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),p(x);break;case Bh.TIMEOUT:he(en,`RPC '${e}' ${u} timed out`),g(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Bh.HTTP_ERROR:const T=y.getStatus();if(he(en,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const R=N?.error;if(R&&R.status&&R.message){const V=(function(H){const $=H.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf($)>=0?$:ee.UNKNOWN})(R.status);g(new ue(V,R.message))}else g(new ue(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(en,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(o);he(en,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const o=Bp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tT(),p=eT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const b=c.join("");he(en,`Creating RPC '${e}' stream ${o}: ${b}`,g);const x=u.createWebChannel(b,g);this.I_(x);let T=!1,N=!1;const R=new vO({Yo:j=>{N?he(en,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(he(en,`Opening RPC '${e}' stream ${o} transport.`),x.open(),T=!0),he(en,`RPC '${e}' stream ${o} sending:`,j),x.send(j))},Zo:()=>x.close()}),V=(j,H,$)=>{j.listen(H,(X=>{try{$(X)}catch(re){setTimeout((()=>{throw re}),0)}}))};return V(x,hc.EventType.OPEN,(()=>{N||(he(en,`RPC '${e}' stream ${o} transport opened.`),R.o_())})),V(x,hc.EventType.CLOSE,(()=>{N||(N=!0,he(en,`RPC '${e}' stream ${o} transport closed`),R.a_(),this.E_(x))})),V(x,hc.EventType.ERROR,(j=>{N||(N=!0,jo(en,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),R.a_(new ue(ee.UNAVAILABLE,"The operation could not be completed")))})),V(x,hc.EventType.MESSAGE,(j=>{if(!N){const H=j.data[0];Ke(!!H,16349);const $=H,X=$?.error||$[0]?.error;if(X){he(en,`RPC '${e}' stream ${o} received error:`,X);const re=X.status;let ae=(function(S){const I=Ot[S];if(I!==void 0)return VT(I)})(re),ce=X.message;ae===void 0&&(ae=ee.INTERNAL,ce="Unknown error status: "+re+" with message "+X.message),N=!0,R.a_(new ue(ae,ce)),x.close()}else he(en,`RPC '${e}' stream ${o} received:`,H),R.u_(H)}})),V(p,Zx.STAT_EVENT,(j=>{j.stat===Np.PROXY?he(en,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Np.NOPROXY&&he(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function hp(){return typeof document<"u"?document:null}function Vd(s){return new wD(s,!0)}class XT{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const lE="PersistentStream";class WT{constructor(e,n,i,o,c,u,p,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new ue(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(lE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(lE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EO extends WT{constructor(e,n,i,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RD(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Te.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Te.min():u.readTime?Fs(u.readTime):Te.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Pp(this.serializer),n.addTarget=(function(c,u){let p;const g=u.target;if(p=kp(g)?{documents:ID(c,g)}:{query:DD(c,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=PT(c,u.resumeToken);const y=Vp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Te.min())>0){p.readTime=od(c,u.snapshotVersion.toTimestamp());const y=Vp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=kD(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Pp(this.serializer),n.removeTarget=e,this.q_(n)}}class xO extends WT{constructor(e,n,i,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CD(e.writeResults,e.commitTime),i=Fs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Pp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>ND(this.serializer,i)))};this.q_(n)}}class TO{}class wO extends TO{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Up(n,i),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(ee.UNKNOWN,c.toString())}))}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,Up(n,i),o,u,p,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ar(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ta="RemoteStore";class AO{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Ra(this)&&(he(Ta,"Restarting streams for network reachability change."),await(async function(g){const y=Se(g);y.Ea.add(4),await Kc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ud(y)})(this))}))})),this.Ra=new SO(i,o)}}async function Ud(s){if(Ra(s))for(const e of s.da)await e(!0)}async function Kc(s){for(const e of s.da)await e(!1)}function JT(s,e){const n=Se(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jg(n)?kg(n):Wo(n).O_()&&Og(n,e))}function Dg(s,e){const n=Se(s),i=Wo(n);n.Ia.delete(e),i.O_()&&ZT(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ra(n)&&n.Ra.set("Unknown"))}function Og(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(s).Y_(e)}function ZT(s,e){s.Va.Ue(e),Wo(s).Z_(e)}function kg(s){s.Va=new bD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Wo(s).start(),s.Ra.ua()}function jg(s){return Ra(s)&&!Wo(s).x_()&&s.Ia.size>0}function Ra(s){return Se(s).Ea.size===0}function ew(s){s.Va=void 0}async function RO(s){s.Ra.set("Online")}async function NO(s){s.Ia.forEach(((e,n)=>{Og(s,e)}))}async function CO(s,e){ew(s),jg(s)?(s.Ra.ha(e),kg(s)):s.Ra.set("Unknown")}async function IO(s,e,n){if(s.Ra.set("Online"),e instanceof LT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,u),o.Ia.delete(p),o.Va.removeTarget(p))})(s,e)}catch(i){he(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cd(s,i)}else if(e instanceof Gh?s.Va.Ze(e):e instanceof UT?s.Va.st(e):s.Va.tt(e),!n.isEqual(Te.min()))try{const i=await $T(s.localStore);n.compareTo(i)>=0&&await(function(c,u){const p=c.Va.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(Jt.EMPTY_BYTE_STRING,b.snapshotVersion)),ZT(c,g);const x=new yi(b.target,g,y,b.sequenceNumber);Og(c,x)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){he(Ta,"Failed to raise snapshot:",i),await cd(s,i)}}async function cd(s,e,n){if(!$o(e))throw e;s.Ea.add(1),await Kc(s),s.Ra.set("Offline"),n||(n=()=>$T(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{he(Ta,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ud(s)}))}function tw(s,e){return e().catch((n=>cd(s,n,e)))}async function Ld(s){const e=Se(s),n=Ni(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yg;for(;DO(e);)try{const o=await dO(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,OO(e,o)}catch(o){await cd(e,o)}nw(e)&&sw(e)}function DO(s){return Ra(s)&&s.Ta.length<10}function OO(s,e){s.Ta.push(e);const n=Ni(s);n.O_()&&n.X_&&n.ea(e.mutations)}function nw(s){return Ra(s)&&!Ni(s).x_()&&s.Ta.length>0}function sw(s){Ni(s).start()}async function kO(s){Ni(s).ra()}async function jO(s){const e=Ni(s);for(const n of s.Ta)e.ea(n.mutations)}async function MO(s,e,n){const i=s.Ta.shift(),o=wg.from(i,e,n);await tw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ld(s)}async function VO(s,e){e&&Ni(s).X_&&await(async function(i,o){if((function(u){return yD(u)&&u!==ee.ABORTED})(o.code)){const c=i.Ta.shift();Ni(i).B_(),await tw(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ld(i)}})(s,e),nw(s)&&sw(s)}async function cE(s,e){const n=Se(s);n.asyncQueue.verifyOperationInProgress(),he(Ta,"RemoteStore received new credentials");const i=Ra(n);n.Ea.add(3),await Kc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ud(n)}async function UO(s,e){const n=Se(s);e?(n.Ea.delete(2),await Ud(n)):e||(n.Ea.add(2),await Kc(n),n.Ra.set("Unknown"))}function Wo(s){return s.ma||(s.ma=(function(n,i,o){const c=Se(n);return c.sa(),new EO(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:RO.bind(null,s),t_:NO.bind(null,s),r_:CO.bind(null,s),H_:IO.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),jg(s)?kg(s):s.Ra.set("Unknown")):(await s.ma.stop(),ew(s))}))),s.ma}function Ni(s){return s.fa||(s.fa=(function(n,i,o){const c=Se(n);return c.sa(),new xO(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:kO.bind(null,s),r_:VO.bind(null,s),ta:jO.bind(null,s),na:MO.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ld(s)):(await s.fa.stop(),s.Ta.length>0&&(he(Ta,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Mg{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const u=Date.now()+i,p=new Mg(e,n,u,o,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vg(s,e){if(Ar("AsyncQueue",`${e}: ${s}`),$o(s))return new ue(ee.UNAVAILABLE,`${e}: ${s}`);throw s}class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=dc(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class uE{constructor(){this.ga=new ft(ge.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Bo{constructor(e,n,i,o,c,u,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const u=[];return n.forEach((p=>{u.push({type:0,doc:p})})),new Bo(e,n,ko.emptySet(n),u,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class LO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PO{constructor(){this.queries=hE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Se(n),c=o.queries;o.queries=hE(),c.forEach(((u,p)=>{for(const g of p.Sa)g.onError(i)}))})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function hE(){return new Aa((s=>TT(s)),Id)}async function Ug(s,e){const n=Se(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new LO,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const p=Vg(u,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Pg(n)}async function Lg(s,e){const n=Se(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zO(s,e){const n=Se(s);let i=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const p of u.Sa)p.Fa(o)&&(i=!0);u.wa=o}}i&&Pg(n)}function BO(s,e,n){const i=Se(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function Pg(s){s.Ca.forEach((e=>{e.next()}))}var qp,dE;(dE=qp||(qp={})).Ma="default",dE.Cache="cache";class zg{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qp.Cache}}class rw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class qO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=wT(e),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new uE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,x)=>{const T=o.get(b),N=Dd(this.query,x)?x:null,R=!!T&&this.mutatedKeys.has(T.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let j=!1;T&&N?T.data.isEqual(N.data)?R!==V&&(i.track({type:3,doc:N}),j=!0):this.su(T,N)||(i.track({type:2,doc:N}),j=!0,(g&&this.eu(N,g)>0||y&&this.eu(N,y)<0)&&(p=!0)):!T&&N?(i.track({type:0,doc:N}),j=!0):T&&!N&&(i.track({type:1,doc:T}),j=!0,(g||y)&&(p=!0)),j&&(N?(u=u.add(N),c=V?c.add(b):c.delete(b)):(u=u.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:u,iu:i,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,x)=>(function(N,R){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:j})}};return V(N)-V(R)})(b.type,x.type)||this.eu(b.doc,x.doc))),this.ou(i),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new Bo(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new iw(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new rw(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class HO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class FO{constructor(e){this.key=e,this.hu=!1}}class GO{constructor(e,n,i,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Aa((p=>TT(p)),Id),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ge.comparator),this.Au=new Map,this.Ru=new Rg,this.Vu={},this.mu=new Map,this.fu=zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KO(s,e,n=!0){const i=hw(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await aw(i,e,n,!0),o}async function QO(s,e){const n=hw(s);await aw(n,e,!0,!1)}async function aw(s,e,n,i){const o=await fO(s.localStore,Hs(e)),c=o.targetId,u=s.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await YO(s,e,c,u==="current",o.resumeToken)),s.isPrimaryClient&&n&&JT(s.remoteStore,o),p}async function YO(s,e,n,i,o){s.pu=(x,T,N)=>(async function(V,j,H,$){let X=j.view.ru(H);X.Cs&&(X=await rE(V.localStore,j.query,!1).then((({documents:C})=>j.view.ru(C,X))));const re=$&&$.targetChanges.get(j.targetId),ae=$&&$.targetMismatches.get(j.targetId)!=null,ce=j.view.applyChanges(X,V.isPrimaryClient,re,ae);return mE(V,j.targetId,ce.au),ce.snapshot})(s,x,T,N);const c=await rE(s.localStore,e,!0),u=new qO(e,c.Qs),p=u.ru(c.documents),g=Gc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=u.applyChanges(p,s.isPrimaryClient,g);mE(s,n,y.au);const b=new HO(e,n,u);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function $O(s,e,n){const i=Se(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((u=>!Id(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await zp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Dg(i.remoteStore,o.targetId),Hp(i,o.targetId)})).catch(Yo)):(Hp(i,o.targetId),await zp(i.localStore,o.targetId,!0))}async function XO(s,e){const n=Se(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dg(n.remoteStore,i.targetId))}async function WO(s,e,n){const i=rk(s);try{const o=await(function(u,p){const g=Se(u),y=at.now(),b=p.reduce(((N,R)=>N.add(R.key)),Ve());let x,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let R=Rr(),V=Ve();return g.Ns.getEntries(N,b).next((j=>{R=j,R.forEach(((H,$)=>{$.isValidDocument()||(V=V.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,R))).next((j=>{x=j;const H=[];for(const $ of p){const X=dD($,x.get($.key).overlayedDocument);X!=null&&H.push(new ki($.key,X,pT(X.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,H,p)})).next((j=>{T=j;const H=j.applyToLocalDocumentSet(x,V);return g.documentOverlayCache.saveOverlays(N,j.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:AT(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,p,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new ft(Me)),y=y.insert(p,g),u.Vu[u.currentUser.toKey()]=y})(i,o.batchId,n),await Qc(i,o.changes),await Ld(i.remoteStore)}catch(o){const c=Vg(o,"Failed to persist write");n.reject(c)}}async function ow(s,e){const n=Se(s);try{const i=await uO(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ke(u.hu,14607):o.removedDocuments.size>0&&(Ke(u.hu,42227),u.hu=!1))})),await Qc(n,i,e)}catch(i){await Yo(i)}}function fE(s,e,n){const i=Se(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((c,u)=>{const p=u.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(u,p){const g=Se(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,x)=>{for(const T of x.Sa)T.va(p)&&(y=!0)})),y&&Pg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function JO(s,e,n){const i=Se(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let u=new ft(ge.comparator);u=u.insert(c,nn.newNoDocument(c,Te.min()));const p=Ve().add(c),g=new Md(Te.min(),new Map,new ft(Me),u,p);await ow(i,g),i.du=i.du.remove(c),i.Au.delete(e),qg(i)}else await zp(i.localStore,e,!1).then((()=>Hp(i,e,n))).catch(Yo)}async function ZO(s,e){const n=Se(s),i=e.batch.batchId;try{const o=await cO(n.localStore,e);cw(n,i,null),lw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Qc(n,o)}catch(o){await Yo(o)}}async function ek(s,e,n){const i=Se(s);try{const o=await(function(u,p){const g=Se(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((x=>(Ke(x!==null,37113),b=x.keys(),g.mutationQueue.removeMutationBatch(y,x)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);cw(i,e,n),lw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Qc(i,o)}catch(o){await Yo(o)}}function lw(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function cw(s,e,n){const i=Se(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Hp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||uw(s,i)}))}function uw(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Dg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),qg(s))}function mE(s,e,n){for(const i of n)i instanceof rw?(s.Ru.addReference(i.key,e),tk(s,i)):i instanceof iw?(he(Bg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||uw(s,i.key)):be(19791,{wu:i})}function tk(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(he(Bg,"New document in limbo: "+n),s.Eu.add(i),qg(s))}function qg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new ge(nt.fromString(e)),i=s.fu.next();s.Au.set(i,new FO(n)),s.du=s.du.insert(n,i),JT(s.remoteStore,new yi(Hs(Cd(n.path)),i,"TargetPurposeLimboResolution",Ad.ce))}}async function Qc(s,e,n){const i=Se(s),o=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{u.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=Cg.As(g.targetId,y);c.push(b)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(g,y){const b=Se(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>se.forEach(y,(T=>se.forEach(T.Es,(N=>b.persistence.referenceDelegate.addReference(x,T.targetId,N))).next((()=>se.forEach(T.ds,(N=>b.persistence.referenceDelegate.removeReference(x,T.targetId,N)))))))))}catch(x){if(!$o(x))throw x;he(Ig,"Failed to update sequence numbers: "+x)}for(const x of y){const T=x.targetId;if(!x.fromCache){const N=b.Ms.get(T),R=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(R);b.Ms=b.Ms.insert(T,V)}}})(i.localStore,c))}async function nk(s,e){const n=Se(s);if(!n.currentUser.isEqual(e)){he(Bg,"User change. New user:",e.toKey());const i=await YT(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new ue(ee.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qc(n,i.Ls)}}function sk(s,e){const n=Se(s),i=n.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let o=Ve();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const p=n.Tu.get(u);o=o.unionWith(p.view.nu)}return o}}function hw(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JO.bind(null,e),e.Pu.H_=zO.bind(null,e.eventManager),e.Pu.yu=BO.bind(null,e.eventManager),e}function rk(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ek.bind(null,e),e}class ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lO(this.persistence,new iO,e.initialUser,this.serializer)}Cu(e){return new QT(Ng.mi,this.serializer)}Du(e){return new pO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ud.provider={build:()=>new ud};class ik extends ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new FD(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new QT((i=>ld.mi(i,n)),this.serializer)}}class Fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nk.bind(null,this.syncEngine),await UO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PO})()}createDatastore(e){const n=Vd(e.databaseInfo.databaseId),i=(function(c){return new bO(c)})(e.databaseInfo);return(function(c,u,p,g){return new wO(c,u,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,u,p){return new AO(i,o,c,u,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>fE(this.syncEngine,n,0)),(function(){return oE.v()?new oE:new gO})())}createSyncEngine(e,n){return(function(o,c,u,p,g,y,b){const x=new GO(o,c,u,p,g,y);return b&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Se(n);he(Ta,"RemoteStore shutting down."),i.Ea.add(5),await Kc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fp.provider={build:()=>new Fp};class Hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ci="FirestoreClient";class ak{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{he(Ci,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(Ci,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function dp(s,e){s.asyncQueue.verifyOperationInProgress(),he(Ci,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await YT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function pE(s,e){s.asyncQueue.verifyOperationInProgress();const n=await ok(s);he(Ci,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>cE(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>cE(e.remoteStore,o))),s._onlineComponents=e}async function ok(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(Ci,"Using user provided OfflineComponentProvider");try{await dp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await dp(s,new ud)}}else he(Ci,"Using default OfflineComponentProvider"),await dp(s,new ik(void 0));return s._offlineComponents}async function dw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(Ci,"Using user provided OnlineComponentProvider"),await pE(s,s._uninitializedComponentsProvider._online)):(he(Ci,"Using default OnlineComponentProvider"),await pE(s,new Fp))),s._onlineComponents}function lk(s){return dw(s).then((e=>e.syncEngine))}async function hd(s){const e=await dw(s),n=e.eventManager;return n.onListen=KO.bind(null,e.syncEngine),n.onUnlisten=$O.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XO.bind(null,e.syncEngine),n}function ck(s,e,n={}){const i=new br;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new Hg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Lg(c,x)));const N=T.docs.has(p);!N&&T.fromCache?y.reject(new ue(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&g&&g.source==="server"?y.reject(new ue(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new zg(Cd(p.path),b,{includeMetadataChanges:!0,qa:!0});return Ug(c,x)})(await hd(s),s.asyncQueue,e,n,i))),i.promise}function uk(s,e,n={}){const i=new br;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new Hg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Lg(c,x))),T.fromCache&&g.source==="server"?y.reject(new ue(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new zg(p,b,{includeMetadataChanges:!0,qa:!0});return Ug(c,x)})(await hd(s),s.asyncQueue,e,n,i))),i.promise}function fw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const gE=new Map;const mw="firestore.googleapis.com",yE=!0;class _E{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mw,this.ssl=yE}else this.host=e.host,this.ssl=e.ssl??yE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qD)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new y2;switch(i.type){case"firstParty":return new E2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=gE.get(n);i&&(he("ComponentProvider","Removing Datastore"),gE.delete(n),i.terminate())})(this),Promise.resolve()}}function hk(s,e,n,i={}){s=bn(s,Pd);const o=Ii(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(ng(`https://${p}`),sg("Firestore",!0)),c.host!==mw&&c.host!==p&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:i};if(!Tr(g,u)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=tn.MOCK_USER;else{y=cx(i.mockUserToken,s._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new tn(x)}s._authCredentials=new _2(new sT(y,b))}}class ji{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class yt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Hc(n,yt._jsonSchema))return new yt(e,i||null,new ge(nt.fromString(n.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:jt("string",yt._jsonSchemaVersion),referencePath:jt("string")};class Ei extends ji{constructor(e,n,i){super(e,n,Cd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new ge(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function pa(s,e,...n){if(s=ot(s),rT("collection","path",e),s instanceof Pd){const i=nt.fromString(e,...n);return D0(i),new Ei(s,null,i)}{if(!(s instanceof yt||s instanceof Ei))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...n));return D0(i),new Ei(s.firestore,null,i)}}function Dn(s,e,...n){if(s=ot(s),arguments.length===1&&(e=gg.newId()),rT("doc","path",e),s instanceof Pd){const i=nt.fromString(e,...n);return I0(i),new yt(s,null,new ge(i))}{if(!(s instanceof yt||s instanceof Ei))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...n));return I0(i),new yt(s.firestore,s instanceof Ei?s.converter:null,new ge(i))}}const vE="AsyncQueue";class bE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XT(this,"async_queue_retry"),this._c=()=>{const i=hp();i&&he(vE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new br;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;he(vE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ar("INTERNAL UNHANDLED ERROR: ",EE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Mg.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:EE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function EE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function xE(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Nr extends Pd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new bE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bE(e),this._firestoreClient=void 0,await e}}}function dk(s,e){const n=typeof s=="object"?s:ag(),i=typeof s=="string"?s:rd,o=Ed(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=ax("firestore");c&&hk(o,...c)}return o}function zd(s){if(s._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fk(s),s._firestoreClient}function fk(s){const e=s._freezeSettings(),n=(function(o,c,u,p){return new L2(o,c,u,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,fw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new ak(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Jt.fromBase64String(e))}catch(n){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:jt("string",$n._jsonSchemaVersion),bytes:jt("string")};class Bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Na{constructor(e){this._methodName=e}}class Gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gs._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,Gs._jsonSchema))return new Gs(e.latitude,e.longitude)}}Gs._jsonSchemaVersion="firestore/geoPoint/1.0",Gs._jsonSchema={type:jt("string",Gs._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ks(e.vectorValues);throw new ue(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:jt("string",Ks._jsonSchemaVersion),vectorValues:jt("object")};const mk=/^__.*__$/;class pk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fc(e,this.data,n,this.fieldTransforms)}}class pw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:s})}}class qd{constructor(e,n,i,o,c,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gw(this.Ac)&&mk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vd(e)}Cc(e,n,i,o=!1){return new qd({Ac:e,methodName:n,Dc:i,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hd(s){const e=s._freezeSettings(),n=Vd(s._databaseId);return new gk(s._databaseId,!!e.ignoreUndefinedProperties,n)}function yw(s,e,n,i,o,c={}){const u=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Yg("Data must be an object, but it was:",u,i);const p=vw(i,u);let g,y;if(c.merge)g=new On(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const b=[];for(const x of c.mergeFields){const T=Gp(e,x,n);if(!u.contains(T))throw new ue(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ew(b,T)||b.push(T)}g=new On(b),y=u.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,y=u.fieldTransforms;return new pk(new vn(p),g,y)}class Fd extends Na{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fd}}function _w(s,e,n){return new qd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fg extends Na{_toFieldTransform(e){return new kd(e.path,new Dc)}isEqual(e){return e instanceof Fg}}class Gg extends Na{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_w(this,e,!0),i=this.vc.map((c=>Ca(c,n))),o=new Lo(i);return new kd(e.path,o)}isEqual(e){return e instanceof Gg&&Tr(this.vc,e.vc)}}class Kg extends Na{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_w(this,e,!0),i=this.vc.map((c=>Ca(c,n))),o=new Po(i);return new kd(e.path,o)}isEqual(e){return e instanceof Kg&&Tr(this.vc,e.vc)}}class Qg extends Na{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Oc(e.serializer,CT(e.serializer,this.Fc));return new kd(e.path,n)}isEqual(e){return e instanceof Qg&&this.Fc===e.Fc}}function yk(s,e,n,i){const o=s.Cc(1,e,n);Yg("Data must be an object, but it was:",o,i);const c=[],u=vn.empty();Oi(i,((g,y)=>{const b=$g(e,g,n);y=ot(y);const x=o.yc(b);if(y instanceof Fd)c.push(b);else{const T=Ca(y,x);T!=null&&(c.push(b),u.set(b,T))}}));const p=new On(c);return new pw(u,p,o.fieldTransforms)}function _k(s,e,n,i,o,c){const u=s.Cc(1,e,n),p=[Gp(e,i,n)],g=[o];if(c.length%2!=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Gp(e,c[T])),g.push(c[T+1]);const y=[],b=vn.empty();for(let T=p.length-1;T>=0;--T)if(!Ew(y,p[T])){const N=p[T];let R=g[T];R=ot(R);const V=u.yc(N);if(R instanceof Fd)y.push(N);else{const j=Ca(R,V);j!=null&&(y.push(N),b.set(N,j))}}const x=new On(y);return new pw(b,x,u.fieldTransforms)}function vk(s,e,n,i=!1){return Ca(n,s.Cc(i?4:3,e))}function Ca(s,e){if(bw(s=ot(s)))return Yg("Unsupported field value:",e,s),vw(s,e);if(s instanceof Na)return(function(i,o){if(!gw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let u=0;for(const p of i){let g=Ca(p,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return CT(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=at.fromDate(i);return{timestampValue:od(o.serializer,c)}}if(i instanceof at){const c=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:od(o.serializer,c)}}if(i instanceof Gs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $n)return{bytesValue:PT(o.serializer,i._byteString)};if(i instanceof yt){const c=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ag(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ks)return(function(u,p){return{mapValue:{fields:{[fT]:{stringValue:mT},[id]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return xg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Sd(i)}`)})(s,e)}function vw(s,e){const n={};return oT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(s,((i,o)=>{const c=Ca(o,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function bw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof at||s instanceof Gs||s instanceof $n||s instanceof yt||s instanceof Na||s instanceof Ks)}function Yg(s,e,n){if(!bw(n)||!iT(n)){const i=Sd(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Gp(s,e,n){if((e=ot(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return $g(s,e);throw dd("Field path arguments must be of type string or ",s,!1,void 0,n)}const bk=new RegExp("[~\\*/\\[\\]]");function $g(s,e,n){if(e.search(bk)>=0)throw dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch{throw dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function dd(s,e,n,i,o){const c=i&&!i.isEmpty(),u=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new ue(ee.INVALID_ARGUMENT,p+s+g)}function Ew(s,e){return s.some((n=>n.isEqual(e)))}class xw{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ek extends xw{data(){return super.data()}}function Xg(s,e){return typeof e=="string"?$g(s,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function Tw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wg{}class ww extends Wg{}function xk(s,e,...n){let i=[];e instanceof Wg&&i.push(e),i=i.concat(n),(function(c){const u=c.filter((g=>g instanceof Zg)).length,p=c.filter((g=>g instanceof Jg)).length;if(u>1||u>0&&p>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class Jg extends ww{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Jg(e,n,i)}_apply(e){const n=this._parse(e);return Sw(e._query,n),new ji(e.firestore,e.converter,jp(e._query,n))}_parse(e){const n=Hd(e.firestore);return(function(c,u,p,g,y,b,x){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){wE(x,b);const R=[];for(const V of x)R.push(TE(g,c,V));T={arrayValue:{values:R}}}else T=TE(g,c,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||wE(x,b),T=vk(p,u,x,b==="in"||b==="not-in");return kt.create(y,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zg extends Wg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let u=o;const p=c.getFlattenedFilters();for(const g of p)Sw(u,g),u=jp(u,g)})(e._query,n),new ji(e.firestore,e.converter,jp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ey extends ww{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ey(e,n)}_apply(e){const n=(function(o,c,u){if(o.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(c,u)})(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,(function(o,c){const u=o.explicitOrderBy.concat([c]);return new Xo(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Tk(s,e="asc"){const n=e,i=Xg("orderBy",s);return ey._create(i,n)}function TE(s,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(e)&&n.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(nt.fromString(n));if(!ge.isDocumentKey(i))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return P0(s,new ge(i))}if(n instanceof yt)return P0(s,n._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(n)}.`)}function wE(s,e){if(!Array.isArray(s)||s.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sw(s,e){const n=(function(o,c){for(const u of o)for(const p of u.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wk{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Oi(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){const n=e.fields?.[id].arrayValue?.values?.map((i=>xt(i.doubleValue)));return new Ks(n)}convertGeoPoint(e){return new Gs(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Nd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Rc(e));default:return null}}convertTimestamp(e){const n=Si(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=nt.fromString(e);Ke(GT(i),9688,{name:e});const o=new Nc(i.get(1),i.get(3)),c=new ge(i.popFirst(5));return o.isEqual(n)||Ar(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Aw(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class mc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends xw{constructor(e,n,i,o,c,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Xg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:jt("string",ga._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Kh extends ga{data(e={}){return super.data(e)}}class ya{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new mc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Kh(this._firestore,this._userDataWriter,i.key,i,new mc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((p=>{const g=new Kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new mc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new mc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:Sk(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Sk(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:s})}}function qo(s){s=bn(s,yt);const e=bn(s.firestore,Nr);return ck(zd(e),s._key).then((n=>Nw(e,s,n)))}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:jt("string",ya._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class ty extends wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function fd(s){s=bn(s,ji);const e=bn(s.firestore,Nr),n=zd(e),i=new ty(e);return Tw(s._query),uk(n,s._query).then((o=>new ya(e,i,s,o)))}function Rw(s,e,n){s=bn(s,yt);const i=bn(s.firestore,Nr),o=Aw(s.converter,e);return Gd(i,[yw(Hd(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Xn.none())])}function hs(s,e,n,...i){s=bn(s,yt);const o=bn(s.firestore,Nr),c=Hd(o);let u;return u=typeof(e=ot(e))=="string"||e instanceof Bd?_k(c,"updateDoc",s._key,e,n,i):yk(c,"updateDoc",s._key,e),Gd(o,[u.toMutation(s._key,Xn.exists(!0))])}function Ak(s){return Gd(bn(s.firestore,Nr),[new Tg(s._key,Xn.none())])}function SE(s,e){const n=bn(s.firestore,Nr),i=Dn(s),o=Aw(s.converter,e);return Gd(n,[yw(Hd(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Xn.exists(!1))]).then((()=>i))}function Rk(s,...e){s=ot(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||xE(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xE(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let c,u,p;if(s instanceof yt)u=bn(s.firestore,Nr),p=Cd(s._key.path),c={next:g=>{e[i]&&e[i](Nw(u,s,g))},error:e[i+1],complete:e[i+2]};else{const g=bn(s,ji);u=bn(g.firestore,Nr),p=g._query;const y=new ty(u);c={next:b=>{e[i]&&e[i](new ya(u,y,g,b))},error:e[i+1],complete:e[i+2]},Tw(s._query)}return(function(y,b,x,T){const N=new Hg(T),R=new zg(b,N,x);return y.asyncQueue.enqueueAndForget((async()=>Ug(await hd(y),R))),()=>{N.Nu(),y.asyncQueue.enqueueAndForget((async()=>Lg(await hd(y),R)))}})(zd(u),p,o,c)}function Gd(s,e){return(function(i,o){const c=new br;return i.asyncQueue.enqueueAndForget((async()=>WO(await lk(i),o,c))),c.promise})(zd(s),e)}function Nw(s,e,n){const i=n.docs.get(e._key),o=new ty(s);return new ga(s,o,e._key,i,new mc(n.hasPendingWrites,n.fromCache),e.converter)}function To(){return new Fg("serverTimestamp")}function Nk(...s){return new Gg("arrayUnion",s)}function Ck(...s){return new Kg("arrayRemove",s)}function AE(s){return new Qg("increment",s)}(function(e,n=!0){(function(o){Qo=o})(Sa),va(new Ti("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),p=new Nr(new v2(i.getProvider("auth-internal")),new x2(u,i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(y.options.projectId,b)})(u,o),u);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),zs(A0,R0,e),zs(A0,R0,"esm2020")})();var Ik="firebase",Dk="12.7.0";zs(Ik,Dk,"app");const Cw="firebasestorage.googleapis.com",Iw="storageBucket",Ok=120*1e3,kk=600*1e3,jk=1e3;class mt extends $s{constructor(e,n,i=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function fp(s){return"storage/"+s}function ny(){const s="An unknown error occurred, please check the error payload for server response.";return new mt(lt.UNKNOWN,s)}function Mk(s){return new mt(lt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function Vk(s){return new mt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Uk(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(lt.UNAUTHENTICATED,s)}function Lk(){return new mt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Pk(s){return new mt(lt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Dw(){return new mt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ow(){return new mt(lt.CANCELED,"User canceled the upload/download.")}function zk(s){return new mt(lt.INVALID_URL,"Invalid URL '"+s+"'.")}function Bk(s){return new mt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function qk(){return new mt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Iw+"' property when initializing the app?")}function kw(){return new mt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hk(){return new mt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Fk(){return new mt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Gk(s){return new mt(lt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kp(s){return new mt(lt.INVALID_ARGUMENT,s)}function jw(){return new mt(lt.APP_DELETED,"The Firebase app was deleted.")}function Kk(s){return new mt(lt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ec(s,e){return new mt(lt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function ac(s){throw new mt(lt.INTERNAL_ERROR,"Internal error: "+s)}class kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=kn.makeFromUrl(e,n)}catch{return new kn(e,"")}if(i.path==="")return i;throw Bk(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",p=new RegExp("^gs://"+o+u,"i"),g={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const b="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",N=new RegExp(`^https?://${x}/${b}/b/${o}/o${T}`,"i"),R={bucket:1,path:3},V=n===Cw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",H=new RegExp(`^https?://${V}/${o}/${j}`,"i"),X=[{regex:p,indices:g,postModify:c},{regex:N,indices:R,postModify:y},{regex:H,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<X.length;re++){const ae=X[re],ce=ae.regex.exec(e);if(ce){const C=ce[ae.indices.bucket];let S=ce[ae.indices.path];S||(S=""),i=new kn(C,S),ae.postModify(i);break}}if(i==null)throw zk(e);return i}}class Qk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Yk(s,e,n){let i=1,o=null,c=null,u=!1,p=0;function g(){return p===2}let y=!1;function b(...j){y||(y=!0,e.apply(null,j))}function x(j){o=setTimeout(()=>{o=null,s(N,g())},j)}function T(){c&&clearTimeout(c)}function N(j,...H){if(y){T();return}if(j){T(),b.call(null,j,...H);return}if(g()||u){T(),b.call(null,j,...H);return}i<64&&(i*=2);let X;p===1?(p=2,X=0):X=(i+Math.random())*1e3,x(X)}let R=!1;function V(j){R||(R=!0,T(),!y&&(o!==null?(j||(p=2),clearTimeout(o),x(0)):j||(p=1)))}return x(0),c=setTimeout(()=>{u=!0,V(!0)},n),V}function $k(s){s(!1)}function Xk(s){return s!==void 0}function Wk(s){return typeof s=="function"}function Jk(s){return typeof s=="object"&&!Array.isArray(s)}function Kd(s){return typeof s=="string"||s instanceof String}function RE(s){return sy()&&s instanceof Blob}function sy(){return typeof Blob<"u"}function NE(s,e,n,i){if(i<e)throw Kp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Kp(`Invalid value for '${s}'. Expected ${n} or less.`)}function Jo(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function Mw(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var _a;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(_a||(_a={}));function Vw(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}class Zk{constructor(e,n,i,o,c,u,p,g,y,b,x,T=!0,N=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=x,this.retry=T,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,V)=>{this.resolve_=R,this.reject_=V,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Dh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const p=c.getErrorCode()===_a.NO_ERROR,g=c.getStatus();if(!p||Vw(g,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===_a.ABORT;i(!1,new Dh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Dh(y,c))})},n=(i,o)=>{const c=this.resolve_,u=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());Xk(g)?c(g):c()}catch(g){u(g)}else if(p!==null){const g=ny();g.serverResponse=p.getErrorText(),this.errorCallback_?u(this.errorCallback_(p,g)):u(g)}else if(o.canceled){const g=this.appDelete_?jw():Ow();u(g)}else{const g=Dw();u(g)}};this.canceled_?n(!1,new Dh(!1,null,!0)):this.backoffId_=Yk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$k(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function ej(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function tj(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nj(s,e){e&&(s["X-Firebase-GMPID"]=e)}function sj(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function rj(s,e,n,i,o,c,u=!0,p=!1){const g=Mw(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return nj(b,e),ej(b,n),tj(b,c),sj(b,i),new Zk(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,u,p)}function ij(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aj(...s){const e=ij();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(sy())return new Blob(s);throw new mt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oj(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function lj(s){if(typeof atob>"u")throw Gk("base-64");return atob(s)}const Ps={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function cj(s,e){switch(s){case Ps.RAW:return new mp(Uw(e));case Ps.BASE64:case Ps.BASE64URL:return new mp(Lw(s,e));case Ps.DATA_URL:return new mp(hj(e),dj(e))}throw ny()}function Uw(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=i,u=s.charCodeAt(++n);i=65536|(c&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function uj(s){let e;try{e=decodeURIComponent(s)}catch{throw Ec(Ps.DATA_URL,"Malformed data URL.")}return Uw(e)}function Lw(s,e){switch(s){case Ps.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Ec(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ps.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Ec(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lj(e)}catch(o){throw o.message.includes("polyfill")?o:Ec(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class Pw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ec(Ps.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=fj(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function hj(s){const e=new Pw(s);return e.base64?Lw(Ps.BASE64,e.rest):uj(e.rest)}function dj(s){return new Pw(s).contentType}function fj(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class gi{constructor(e,n){let i=0,o="";RE(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(RE(this.data_)){const i=this.data_,o=oj(i,e,n);return o===null?null:new gi(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new gi(i,!0)}}static getBlob(...e){if(sy()){const n=e.map(i=>i instanceof gi?i.data_:i);return new gi(aj.apply(null,n))}else{const n=e.map(u=>Kd(u)?cj(Ps.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let c=0;return n.forEach(u=>{for(let p=0;p<u.length;p++)o[c++]=u[p]}),new gi(o,!0)}}uploadData(){return this.data_}}function zw(s){let e;try{e=JSON.parse(s)}catch{return null}return Jk(e)?e:null}function mj(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function pj(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function Bw(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function gj(s,e){return e}class cn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||gj}}let Oh=null;function yj(s){return!Kd(s)||s.length<2?s:Bw(s)}function qw(){if(Oh)return Oh;const s=[];s.push(new cn("bucket")),s.push(new cn("generation")),s.push(new cn("metageneration")),s.push(new cn("name","fullPath",!0));function e(c,u){return yj(u)}const n=new cn("name");n.xform=e,s.push(n);function i(c,u){return u!==void 0?Number(u):u}const o=new cn("size");return o.xform=i,s.push(o),s.push(new cn("timeCreated")),s.push(new cn("updated")),s.push(new cn("md5Hash",null,!0)),s.push(new cn("cacheControl",null,!0)),s.push(new cn("contentDisposition",null,!0)),s.push(new cn("contentEncoding",null,!0)),s.push(new cn("contentLanguage",null,!0)),s.push(new cn("contentType",null,!0)),s.push(new cn("metadata","customMetadata",!0)),Oh=s,Oh}function _j(s,e){function n(){const i=s.bucket,o=s.fullPath,c=new kn(i,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function vj(s,e,n){const i={};i.type="file";const o=n.length;for(let c=0;c<o;c++){const u=n[c];i[u.local]=u.xform(i,e[u.server])}return _j(i,s),i}function Hw(s,e,n){const i=zw(e);return i===null?null:vj(s,i,n)}function bj(s,e,n,i){const o=zw(e);if(o===null||!Kd(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(y=>{const b=s.bucket,x=s.fullPath,T="/b/"+u(b)+"/o/"+u(x),N=Jo(T,n,i),R=Mw({alt:"media",token:y});return N+R})[0]}function Fw(s,e){const n={},i=e.length;for(let o=0;o<i;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class Ia{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Er(s){if(!s)throw ny()}function ry(s,e){function n(i,o){const c=Hw(s,o,e);return Er(c!==null),c}return n}function Ej(s,e){function n(i,o){const c=Hw(s,o,e);return Er(c!==null),bj(c,o,s.host,s._protocol)}return n}function Yc(s){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=Lk():o=Uk():n.getStatus()===402?o=Vk(s.bucket):n.getStatus()===403?o=Pk(s.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function iy(s){const e=Yc(s);function n(i,o){let c=e(i,o);return i.getStatus()===404&&(c=Mk(s.path)),c.serverResponse=o.serverResponse,c}return n}function xj(s,e,n){const i=e.fullServerUrl(),o=Jo(i,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new Ia(o,c,ry(s,n),u);return p.errorHandler=iy(e),p}function Tj(s,e,n){const i=e.fullServerUrl(),o=Jo(i,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new Ia(o,c,Ej(s,n),u);return p.errorHandler=iy(e),p}function wj(s,e){const n=e.fullServerUrl(),i=Jo(n,s.host,s._protocol),o="DELETE",c=s.maxOperationRetryTime;function u(g,y){}const p=new Ia(i,o,u,c);return p.successCodes=[200,204],p.errorHandler=iy(e),p}function Sj(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Gw(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Sj(null,e)),i}function Aj(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function p(){let X="";for(let re=0;re<2;re++)X=X+Math.random().toString().slice(2);return X}const g=p();u["Content-Type"]="multipart/related; boundary="+g;const y=Gw(e,i,o),b=Fw(y,n),x="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",N=gi.getBlob(x,i,T);if(N===null)throw kw();const R={name:y.fullPath},V=Jo(c,s.host,s._protocol),j="POST",H=s.maxUploadRetryTime,$=new Ia(V,j,ry(s,n),H);return $.urlParams=R,$.headers=u,$.body=N.uploadData(),$.errorHandler=Yc(e),$}class md{constructor(e,n,i,o){this.current=e,this.total=n,this.finalized=!!i,this.metadata=o||null}}function ay(s,e){let n=null;try{n=s.getResponseHeader("X-Goog-Upload-Status")}catch{Er(!1)}return Er(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Rj(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),u=Gw(e,i,o),p={name:u.fullPath},g=Jo(c,s.host,s._protocol),y="POST",b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=Fw(u,n),T=s.maxUploadRetryTime;function N(V){ay(V);let j;try{j=V.getResponseHeader("X-Goog-Upload-URL")}catch{Er(!1)}return Er(Kd(j)),j}const R=new Ia(g,y,N,T);return R.urlParams=p,R.headers=b,R.body=x,R.errorHandler=Yc(e),R}function Nj(s,e,n,i){const o={"X-Goog-Upload-Command":"query"};function c(y){const b=ay(y,["active","final"]);let x=null;try{x=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Er(!1)}x||Er(!1);const T=Number(x);return Er(!isNaN(T)),new md(T,i.size(),b==="final")}const u="POST",p=s.maxUploadRetryTime,g=new Ia(n,u,c,p);return g.headers=o,g.errorHandler=Yc(e),g}const CE=256*1024;function Cj(s,e,n,i,o,c,u,p){const g=new md(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw Hk();const y=g.total-g.current;let b=y;o>0&&(b=Math.min(b,o));const x=g.current,T=x+b;let N="";b===0?N="finalize":y===b?N="upload, finalize":N="upload";const R={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${g.current}`},V=i.slice(x,T);if(V===null)throw kw();function j(re,ae){const ce=ay(re,["active","final"]),C=g.current+b,S=i.size();let I;return ce==="final"?I=ry(e,c)(re,ae):I=null,new md(C,S,ce==="final",I)}const H="POST",$=e.maxUploadRetryTime,X=new Ia(n,H,j,$);return X.headers=R,X.body=V.uploadData(),X.progressCallback=p||null,X.errorHandler=Yc(s),X}const _n={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pp(s){switch(s){case"running":case"pausing":case"canceling":return _n.RUNNING;case"paused":return _n.PAUSED;case"success":return _n.SUCCESS;case"canceled":return _n.CANCELED;case"error":return _n.ERROR;default:return _n.ERROR}}class Ij{constructor(e,n,i){if(Wk(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function wo(s){return(...e)=>{Promise.resolve().then(()=>s(...e))}}class Dj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_a.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_a.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_a.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,c){if(this.sent_)throw ac("cannot .send() more than once");if(Ii(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Oj extends Dj{initXhr(){this.xhr_.responseType="text"}}function fa(){return new Oj}class kj{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=qw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(Vw(o.status,[]))if(c)o=Dw();else{this.sleepTime=Math.max(this.sleepTime*2,jk),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=Rj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,fa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const o=Nj(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(o,fa,n,i);this._request=c,c.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=CE*this._chunkMultiplier,n=new md(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((o,c)=>{let u;try{u=Cj(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const p=this._ref.storage._makeRequest(u,fa,o,c,!1);this._request=p,p.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){CE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=xj(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(i,fa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=Aj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,fa,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ow(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=pp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,o){const c=new Ij(n||void 0,i||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(pp(this._state)){case _n.SUCCESS:wo(this._resolve.bind(null,this.snapshot))();break;case _n.CANCELED:case _n.ERROR:const n=this._reject;wo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pp(this._state)){case _n.RUNNING:case _n.PAUSED:e.next&&wo(e.next.bind(e,this.snapshot))();break;case _n.SUCCESS:e.complete&&wo(e.complete.bind(e))();break;case _n.CANCELED:case _n.ERROR:e.error&&wo(e.error.bind(e,this._error))();break;default:e.error&&wo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class wa{constructor(e,n){this._service=e,n instanceof kn?this._location=n:this._location=kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wa(e,n)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bw(this._location.path)}get storage(){return this._service}get parent(){const e=mj(this._location.path);if(e===null)return null;const n=new kn(this._location.bucket,e);return new wa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Kk(e)}}function jj(s,e,n){return s._throwIfRoot("uploadBytesResumable"),new kj(s,new gi(e),n)}function Mj(s){s._throwIfRoot("getDownloadURL");const e=Tj(s.storage,s._location,qw());return s.storage.makeRequestWithTokens(e,fa).then(n=>{if(n===null)throw Fk();return n})}function Vj(s){s._throwIfRoot("deleteObject");const e=wj(s.storage,s._location);return s.storage.makeRequestWithTokens(e,fa)}function Uj(s,e){const n=pj(s._location.path,e),i=new kn(s._location.bucket,n);return new wa(s.storage,i)}function Lj(s){return/^[A-Za-z]+:\/\//.test(s)}function Pj(s,e){return new wa(s,e)}function Kw(s,e){if(s instanceof oy){const n=s;if(n._bucket==null)throw qk();const i=new wa(n,n._bucket);return e!=null?Kw(i,e):i}else return e!==void 0?Uj(s,e):s}function zj(s,e){if(e&&Lj(e)){if(s instanceof oy)return Pj(s,e);throw Kp("To use ref(service, url), the first argument must be a Storage instance.")}else return Kw(s,e)}function IE(s,e){const n=e?.[Iw];return n==null?null:kn.makeFromBucketSpec(n,s)}function Bj(s,e,n,i={}){s.host=`${e}:${n}`;const o=Ii(e);o&&(ng(`https://${s.host}/b`),sg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=i;c&&(s._overrideAuthToken=typeof c=="string"?c:cx(c,s.app.options.projectId))}class oy{constructor(e,n,i,o,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=Cw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ok,this._maxUploadRetryTime=kk,this._requests=new Set,o!=null?this._bucket=kn.makeFromBucketSpec(o,this._host):this._bucket=IE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=IE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wa(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new Qk(jw());{const u=rj(e,this._appId,i,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const DE="@firebase/storage",OE="0.14.0";const Qw="storage";function gp(s,e,n){return s=ot(s),jj(s,e,n)}function yp(s){return s=ot(s),Mj(s)}function kE(s){return s=ot(s),Vj(s)}function oc(s,e){return s=ot(s),zj(s,e)}function qj(s=ag(),e){s=ot(s);const i=Ed(s,Qw).getImmediate({identifier:e}),o=ax("storage");return o&&Hj(i,...o),i}function Hj(s,e,n,i={}){Bj(s,e,n,i)}function Fj(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new oy(n,i,o,e,Sa)}function Gj(){va(new Ti(Qw,Fj,"PUBLIC").setMultipleInstances(!0)),zs(DE,OE,""),zs(DE,OE,"esm2020")}Gj();const Kj={apiKey:"AIzaSyCoAdmx5m3jPuVg9VdQzBzhSv2GBQGdlyA",authDomain:"dacapo-toolbox.firebaseapp.com",projectId:"dacapo-toolbox",storageBucket:"dacapo-toolbox.firebasestorage.app",messagingSenderId:"544244716086",appId:"1:544244716086:web:1bff2cc13a3f95cf063e97"},ly=dx(Kj),hi=p2(ly),Lt=dk(ly),lc=qj(ly),Qj="kevlimpens@gmail.com",Ge={USER:"user",ADMIN:"admin",SUPERVISOR:"supervisor"},Yj={CREDITS_VIEW_OWN:[Ge.USER,Ge.ADMIN,Ge.SUPERVISOR],CREDITS_VIEW_ALL:[Ge.ADMIN,Ge.SUPERVISOR],CREDITS_MODIFY:[Ge.SUPERVISOR],ADMIN_DASHBOARD:[Ge.ADMIN,Ge.SUPERVISOR],MANAGE_TOOLS:[Ge.ADMIN,Ge.SUPERVISOR],MANAGE_LABELS:[Ge.ADMIN,Ge.SUPERVISOR],VIEW_STATS:[Ge.ADMIN,Ge.SUPERVISOR]},$j=["kevlimpens@gmail.com"],Xj=["kevlimpens@gmail.com"];function Wj(s,e){const n=Yj[e];return n?n.includes(s):!1}function Jj(s){const e=s?.toLowerCase();return e?$j.includes(e)?Ge.SUPERVISOR:Xj.includes(e)?Ge.ADMIN:Ge.USER:Ge.USER}function Zj(s,e){return s&&Object.values(Ge).includes(s)?s:Jj(e)}const Yw=L.createContext();function e4({children:s}){const[e,n]=L.useState(null),[i,o]=L.useState(null),[c,u]=L.useState(!0),[p,g]=L.useState(null),{setThemeFromPreference:y,getThemePreference:b}=tg(),x=Zj(i?.role,e?.email),T=x===Ge.ADMIN||x===Ge.SUPERVISOR,N=x===Ge.SUPERVISOR,R=C=>Wj(x,C);L.useEffect(()=>{const C=sI(hi,async S=>{if(n(S),S){const I=Dn(Lt,"users",S.uid),k=await qo(I);if(k.exists()){const D=k.data();o(D),y(D.themePreference||"light"),await hs(I,{lastLogin:new Date})}else{const D={email:S.email,displayName:S.displayName||S.email?.split("@")[0]||"",photoURL:S.photoURL||"",favorites:[],isAdmin:S.email?.toLowerCase()===Qj.toLowerCase(),createdAt:new Date,lastLogin:new Date};await Rw(I,D),o(D)}}else o(null);u(!1)});return()=>C()},[]);const V=async(C,S)=>{try{return g(null),(await eI(hi,C,S)).user.emailVerified?{success:!0}:{success:!1,message:"Verifieer eerst je email voordat je inlogt.",needsVerification:!0}}catch(I){console.error("Error signing in with email:",I);const k=kh(I.code);return g(k),{success:!1,message:k}}},j=async(C,S,I="")=>{try{g(null);const k=await ZC(hi,C,S);if(await p0(k.user),console.log("[Auth] Verification email sent to:",C),I){const D=Dn(Lt,"users",k.user.uid);await hs(D,{displayName:I})}return{success:!0,message:"Account aangemaakt! Controleer je email voor de verificatielink."}}catch(k){console.error("Error registering:",k);const D=kh(k.code);return g(D),{success:!1,message:D}}},H=async C=>{try{return g(null),await JC(hi,C),{success:!0,message:"Wachtwoord reset link is verstuurd naar je email."}}catch(S){console.error("Error sending password reset:",S);const I=kh(S.code);return g(I),{success:!1,message:I}}},$=async()=>{try{return hi.currentUser&&!hi.currentUser.emailVerified?(await p0(hi.currentUser),{success:!0,message:"Verificatie email opnieuw verstuurd!"}):{success:!1,message:"Geen gebruiker om te verifiren."}}catch(C){return console.error("Error resending verification:",C),{success:!1,message:kh(C.code)}}},X=async()=>{try{if(e){const C=Dn(Lt,"users",e.uid);await hs(C,{themePreference:b()})}await rI(hi)}catch(C){throw console.error("Error signing out:",C),C}},re=async C=>{if(!e)return;const S=Dn(Lt,"users",e.uid),I=i?.favorites?.includes(C);try{I?(await hs(S,{favorites:Ck(C)}),o(k=>({...k,favorites:k.favorites.filter(D=>D!==C)}))):(await hs(S,{favorites:Nk(C)}),o(k=>({...k,favorites:[...k.favorites||[],C]})))}catch(k){console.error("Error toggling favorite:",k)}},ae=C=>i?.favorites?.includes(C)||!1,ce=()=>g(null);return m.jsx(Yw.Provider,{value:{user:e,userData:i,loading:c,userRole:x,isAdmin:T,isSupervisor:N,hasPermission:R,authError:p,signInWithEmail:V,registerWithEmail:j,resetPassword:H,resendVerification:$,signOut:X,toggleFavorite:re,isFavorite:ae,clearError:ce},children:s})}function rn(){const s=L.useContext(Yw);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}function kh(s){return{"auth/email-already-in-use":"Dit emailadres is al in gebruik.","auth/invalid-email":"Ongeldig emailadres.","auth/operation-not-allowed":"Deze inlogmethode is niet toegestaan.","auth/weak-password":"Wachtwoord is te zwak. Gebruik minimaal 6 karakters.","auth/user-disabled":"Dit account is uitgeschakeld.","auth/user-not-found":"Geen account gevonden met dit emailadres.","auth/wrong-password":"Onjuist wachtwoord.","auth/invalid-credential":"Ongeldige inloggegevens.","auth/too-many-requests":"Te veel pogingen. Probeer het later opnieuw.","auth/network-request-failed":"Netwerkfout. Controleer je internetverbinding.","auth/popup-closed-by-user":"Login popup gesloten.","auth/cancelled-popup-request":"Login geannuleerd."}[s]||"Er ging iets mis. Probeer het opnieuw."}function Da(){const[s,e]=L.useState([]),[n,i]=L.useState(!0),[o,c]=L.useState(null);L.useEffect(()=>{const N=xk(pa(Lt,"tools"),Tk("name")),R=Rk(N,V=>{const j=V.docs.map(H=>({id:H.id,...H.data()}));e(j),i(!1)},V=>{console.error("Error fetching tools:",V),c(V),i(!1)});return()=>R()},[]);const u=s.filter(N=>N.isActive!==!1);return{tools:s,activeTools:u,loading:n,error:o,addTool:async N=>{try{return(await SE(pa(Lt,"tools"),{...N,slug:N.slug||"",shortDescription:N.shortDescription||N.description||"",fullDescription:N.fullDescription||"",tags:N.tags||[],status:N.status||"draft",isActive:!0,clickCount:0,favoriteCount:0,createdAt:To(),updatedAt:To()})).id}catch(R){throw console.error("Error adding tool:",R),R}},updateTool:async(N,R)=>{try{const V=Dn(Lt,"tools",N);await hs(V,{...R,updatedAt:To()})}catch(V){throw console.error("Error updating tool:",V),V}},deleteTool:async N=>{try{await Ak(Dn(Lt,"tools",N))}catch(R){throw console.error("Error deleting tool:",R),R}},updateFavoriteCount:async(N,R)=>{try{const V=Dn(Lt,"tools",N);await hs(V,{favoriteCount:AE(R)})}catch(V){console.error("Error updating favorite count:",V)}},trackToolClick:async(N,R="anonymous")=>{try{const V=Dn(Lt,"tools",N);await hs(V,{clickCount:AE(1),lastClickedAt:To()}),await SE(pa(Lt,"toolClicks"),{toolId:N,userId:R,clickedAt:To()}),console.log("[Tools] Click tracked for tool:",N)}catch(V){console.error("Error tracking tool click:",V)}},toggleToolActive:async(N,R)=>{try{const V=Dn(Lt,"tools",N);await hs(V,{isActive:R,updatedAt:To()})}catch(V){throw console.error("Error toggling tool active status:",V),V}}}}const kc=[{id:"lesgeven",name:"Lesgeven",icon:"school",color:"#2860E0"},{id:"toetsing",name:"Toetsing",icon:"quiz",color:"#22C55E"},{id:"leerlingbegeleiding",name:"Leerlingbegeleiding",icon:"support",color:"#A855F7"},{id:"administratie",name:"Administratie",icon:"folder",color:"#F97316"},{id:"planning",name:"Planning",icon:"calendar_month",color:"#14B8A6"},{id:"communicatie",name:"Communicatie",icon:"chat",color:"#EC4899"},{id:"ai-automatisering",name:"AI & Automatisering",icon:"smart_toy",color:"#6366F1"},{id:"overig",name:"Overig",icon:"more_horiz",color:"#6B7280"}],pr={id:"extern",name:"Extern",icon:"open_in_new",color:"#EF4444"},cy=[...kc,pr];function t4(s){return cy.find(e=>e.id===s)}function uy(s){return s?.includes("extern")||!1}function pd(s){return!s||s.length===0?null:s.find(e=>e!=="extern")||null}function $w(s){const e=pd(s);return e?t4(e):null}function n4(s){if(!s||s.length===0)return{valid:!1,error:"Een primair label is verplicht"};const e=pd(s);return e?kc.map(i=>i.id).includes(e)?s.length>2?{valid:!1,error:"Maximaal 2 labels toegestaan"}:s.length===2&&!s.includes("extern")?{valid:!1,error:"Alleen primair label + Extern toegestaan"}:{valid:!0}:{valid:!1,error:"Ongeldig primair label"}:{valid:!1,error:"Een primair label is verplicht (niet alleen Extern)"}}function Xw(){return{labels:cy,loading:!1,error:null,addLabel:async()=>{console.warn("Labels are now read-only")},updateLabel:async()=>{console.warn("Labels are now read-only")},deleteLabel:async()=>{console.warn("Labels are now read-only")}}}function s4({isOpen:s,onClose:e}){const{signInWithEmail:n,registerWithEmail:i,resetPassword:o,authError:c,clearError:u}=rn(),[p,g]=L.useState("login"),[y,b]=L.useState(""),[x,T]=L.useState(""),[N,R]=L.useState(""),[V,j]=L.useState(""),[H,$]=L.useState(!1),[X,re]=L.useState(null);if(!s)return null;const ae=()=>{g("login"),b(""),T(""),R(""),j(""),re(null),u(),e()},ce=async k=>{if(k.preventDefault(),!y||!x){re({type:"error",text:"Vul alle velden in."});return}$(!0),re(null);const D=await n(y,x);$(!1),D.success?ae():D.needsVerification?re({type:"warning",text:D.message}):re({type:"error",text:D.message})},C=async k=>{if(k.preventDefault(),!y||!x||!N){re({type:"error",text:"Vul alle velden in."});return}if(x!==N){re({type:"error",text:"Wachtwoorden komen niet overeen."});return}if(x.length<6){re({type:"error",text:"Wachtwoord moet minimaal 6 karakters zijn."});return}$(!0),re(null);const D=await i(y,x,V);$(!1),D.success?re({type:"success",text:D.message}):re({type:"error",text:D.message})},S=async k=>{if(k.preventDefault(),!y){re({type:"error",text:"Voer je emailadres in."});return}$(!0),re(null);const D=await o(y);$(!1),D.success?re({type:"success",text:D.message}):re({type:"error",text:D.message})},I=k=>{g(k),re(null),u()};return m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:m.jsxs("div",{className:"relative w-full max-w-md bg-card rounded-2xl border border-theme shadow-xl overflow-hidden",children:[m.jsx("button",{onClick:ae,className:"absolute top-4 right-4 size-10 flex items-center justify-center rounded-full hover:bg-gray-500/10 transition-colors z-10",children:m.jsx("span",{className:"material-symbols-outlined",children:"close"})}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col items-center mb-6",children:[m.jsx("div",{className:"size-14 bg-[#2860E0] rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg mb-3",children:"DC"}),m.jsxs("h2",{className:"text-xl font-bold",children:[p==="login"&&"Inloggen",p==="register"&&"Account aanmaken",p==="forgot"&&"Wachtwoord vergeten"]})]}),(X||c)&&m.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${X?.type==="success"?"bg-green-500/10 border border-green-500 text-green-600 dark:text-green-400":X?.type==="warning"?"bg-yellow-500/10 border border-yellow-500 text-yellow-600 dark:text-yellow-400":"bg-red-500/10 border border-red-500 text-red-600 dark:text-red-400"}`,children:X?.text||c}),p==="login"&&m.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),m.jsx("input",{type:"email",id:"email",value:y,onChange:k=>b(k.target.value),placeholder:"naam@dacapocollege.nl",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Wachtwoord"}),m.jsx("input",{type:"password",id:"password",value:x,onChange:k=>T(k.target.value),placeholder:"",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsx("button",{type:"button",onClick:()=>I("forgot"),className:"text-sm text-[#2860E0] hover:underline",children:"Wachtwoord vergeten?"}),m.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Inloggen"})]}),p==="register"&&m.jsxs("form",{onSubmit:C,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium mb-1",children:"Naam (optioneel)"}),m.jsx("input",{type:"text",id:"displayName",value:V,onChange:k=>j(k.target.value),placeholder:"Je naam",className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"regEmail",className:"block text-sm font-medium mb-1",children:"Email *"}),m.jsx("input",{type:"email",id:"regEmail",value:y,onChange:k=>b(k.target.value),placeholder:"naam@dacapocollege.nl",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"regPassword",className:"block text-sm font-medium mb-1",children:"Wachtwoord *"}),m.jsx("input",{type:"password",id:"regPassword",value:x,onChange:k=>T(k.target.value),placeholder:"Minimaal 6 karakters",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-1",children:"Bevestig wachtwoord *"}),m.jsx("input",{type:"password",id:"confirmPassword",value:N,onChange:k=>R(k.target.value),placeholder:"Herhaal wachtwoord",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Registreren"})]}),p==="forgot"&&m.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m.jsx("p",{className:"text-sm text-secondary mb-4",children:"Voer je emailadres in en we sturen je een link om je wachtwoord te resetten."}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"forgotEmail",className:"block text-sm font-medium mb-1",children:"Email"}),m.jsx("input",{type:"email",id:"forgotEmail",value:y,onChange:k=>b(k.target.value),placeholder:"naam@dacapocollege.nl",required:!0,className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-100 dark:bg-gray-700 focus:ring-2 focus:ring-[#2860E0] focus:border-transparent"})]}),m.jsx("button",{type:"submit",disabled:H,className:"w-full h-12 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:H?"Bezig...":"Verstuur reset link"}),m.jsx("button",{type:"button",onClick:()=>I("login"),className:"w-full text-sm text-[#2860E0] hover:underline",children:" Terug naar inloggen"})]}),p!=="forgot"&&m.jsx("p",{className:"text-center text-sm mt-6",children:p==="login"?m.jsxs(m.Fragment,{children:["Nog geen account?"," ",m.jsx("button",{onClick:()=>I("register"),className:"text-[#2860E0] font-medium hover:underline",children:"Registreer"})]}):m.jsxs(m.Fragment,{children:["Heb je al een account?"," ",m.jsx("button",{onClick:()=>I("login"),className:"text-[#2860E0] font-medium hover:underline",children:"Inloggen"})]})})]})]})})}function r4({onSearchClick:s}){const{isDarkMode:e,toggleTheme:n}=tg(),{user:i,userData:o,userRole:c,signOut:u}=rn(),[p,g]=L.useState(!1);return m.jsxs(m.Fragment,{children:[m.jsx("header",{className:"sticky top-0 z-50 w-full bg-card/95 backdrop-blur-md border-b border-theme shadow-sm transition-colors duration-200",children:m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsxs(Ls,{to:"/",className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-9 bg-[#2860E0] rounded-lg flex items-center justify-center text-white font-bold shadow-sm",children:"DC"}),m.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"DaCapo Tools"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:s,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-500/10 transition-colors","aria-label":"Zoeken",children:m.jsx("span",{className:"material-symbols-outlined",children:"search"})}),m.jsx("button",{onClick:n,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-500/10 transition-colors","aria-label":e?"Schakel naar light mode":"Schakel naar dark mode",children:m.jsx("span",{className:"material-symbols-outlined",children:e?"light_mode":"dark_mode"})}),c&&c!=="user"&&m.jsx(Ls,{to:"/admin",className:"flex items-center justify-center size-10 rounded-full bg-amber-500 text-white hover:bg-amber-600 transition-colors","aria-label":"Admin Dashboard",children:m.jsx("span",{className:"material-symbols-outlined",children:"admin_panel_settings"})}),i?m.jsxs("div",{className:"relative group",children:[m.jsx("button",{className:"size-9 rounded-full bg-[#2860E0] flex items-center justify-center text-white font-semibold text-sm border border-theme shadow-sm overflow-hidden",children:i.photoURL?m.jsx("img",{src:i.photoURL,alt:i.displayName||"Profiel",className:"w-full h-full object-cover"}):m.jsx("span",{children:(o?.displayName||i.email||"?").charAt(0).toUpperCase()})}),m.jsxs("div",{className:"absolute right-0 mt-2 w-48 max-w-[90vw] bg-card border border-theme rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 overflow-hidden",children:[m.jsxs("div",{className:"p-3 border-b border-theme",children:[m.jsx("p",{className:"font-medium truncate",children:o?.displayName||i.displayName||i.email?.split("@")[0]}),m.jsx("p",{className:"text-sm text-secondary truncate",children:i.email})]}),m.jsxs("button",{onClick:u,className:"w-full px-3 py-2 text-left hover:bg-gray-500/10 transition-colors flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"}),"Uitloggen"]})]})]}):m.jsx("button",{onClick:()=>g(!0),className:"flex items-center justify-center size-9 rounded-full bg-[#2860E0] text-white hover:bg-[#1C4DAB] transition-colors shadow-sm","aria-label":"Inloggen",children:m.jsx("span",{className:"material-symbols-outlined text-xl",children:"login"})})]})]})}),m.jsx(s4,{isOpen:p,onClose:()=>g(!1)})]})}function i4({value:s,onChange:e,placeholder:n="Zoek tools..."}){return m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-secondary",children:"search"}),m.jsx("input",{type:"text",value:s,onChange:i=>e(i.target.value),placeholder:n,className:"w-full h-11 pl-10 pr-4 rounded-lg border border-theme bg-card text-inherit placeholder:text-secondary focus:outline-none focus:ring-2 focus:ring-[#2860E0] focus:border-transparent transition-shadow"}),s&&m.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-secondary hover:text-inherit transition-colors","aria-label":"Wis zoekopdracht",children:m.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]})}function a4({labels:s,selectedLabels:e,onToggleLabel:n}){return m.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:[m.jsxs("button",{onClick:()=>n(null),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full pl-3 pr-4 shadow-sm transition-all ${e.length===0?"bg-[#2860E0] text-white":"bg-card text-inherit border border-theme hover:bg-gray-500/10"}`,children:[m.jsx("span",{className:"material-symbols-outlined text-lg",children:"apps"}),m.jsx("span",{className:"text-sm font-semibold",children:"Alles"})]}),s.map(i=>{const o=e.includes(i.id);return m.jsxs("button",{onClick:()=>n(i.id),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full pl-3 pr-4 shadow-sm transition-all ${o?"bg-[#2860E0] text-white":"bg-card text-inherit border border-theme hover:bg-gray-500/10"}`,children:[i.icon&&m.jsx("span",{className:"material-symbols-outlined text-lg",children:i.icon}),m.jsx("span",{className:"text-sm font-medium",children:i.name})]},i.id)})]})}function o4({tool:s}){const e=_d(),{user:n,isFavorite:i,toggleFavorite:o}=rn(),{updateFavoriteCount:c,trackToolClick:u}=Da(),p=L.useRef(null),g=L.useRef(null),[y,b]=L.useState(!1),[x,T]=L.useState(0),N=i(s.id),R=$w(s.labels),V=uy(s.labels);L.useEffect(()=>{const X=()=>{if(p.current&&g.current){const ae=p.current.scrollHeight,ce=g.current.clientHeight,C=ae-ce;T(Math.max(0,C))}},re=setTimeout(X,100);return window.addEventListener("resize",X),()=>{clearTimeout(re),window.removeEventListener("resize",X)}},[s.shortDescription,s.description]);const j=async X=>{X.preventDefault(),X.stopPropagation(),n&&(await o(s.id),await c(s.id,N?-1:1))},H=async()=>{const X=n?.uid||"anonymous";if(await u(s.id,X),V){const re=s.externalUrl||s.url;re&&window.open(re,"_blank","noopener,noreferrer")}else{const re=s.internalRoute||s.url||`/app/${s.id}`;e(re)}},$=s.shortDescription||s.description||"Geen beschrijving beschikbaar";return m.jsxs("div",{className:"group bg-card rounded-xl shadow-sm border border-theme overflow-hidden hover:shadow-lg hover:border-[#2860E0]/50 transition-all duration-300 cursor-pointer flex flex-col",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:H,children:[m.jsxs("div",{className:"w-full aspect-[16/9] relative overflow-hidden bg-gray-100 dark:bg-gray-700",children:[s.imageUrl?m.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-400",children:"apps"})}),V&&m.jsx("div",{className:"absolute top-2 left-2 size-8 bg-black/50 backdrop-blur-sm rounded-lg flex items-center justify-center text-white",title:"Opent in een nieuw tabblad",children:m.jsx("span",{className:"material-symbols-outlined text-lg",children:"open_in_new"})}),n&&m.jsx("button",{onClick:j,className:`absolute top-2 right-2 p-2 rounded-full bg-white/90 dark:bg-gray-800/90 shadow-sm transition-all ${N?"text-red-500":"text-gray-400 hover:text-red-500"}`,"aria-label":N?"Verwijder uit favorieten":"Voeg toe aan favorieten",children:m.jsx("span",{className:"material-symbols-outlined text-xl",style:N?{fontVariationSettings:"'FILL' 1"}:{},children:"favorite"})})]}),m.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[m.jsx("h3",{className:"font-semibold text-base mb-1 line-clamp-1 group-hover:text-[#2860E0] transition-colors",children:s.name}),m.jsx("div",{ref:g,className:"h-[3.75rem] overflow-hidden mb-4 flex-1",style:{maxHeight:"3.75rem"},children:m.jsx("p",{ref:p,className:"text-sm text-secondary transition-transform ease-linear",style:{transform:y&&x>0?`translateY(-${x}px)`:"translateY(0)",transitionDuration:y?`${Math.max(2,x*30)}ms`:"300ms"},children:$})}),m.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-theme",children:[R?m.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full text-white font-medium",style:{backgroundColor:R.color},children:[m.jsx("span",{className:"material-symbols-outlined text-[10px]",children:R.icon}),R.name]}):m.jsx("span",{}),m.jsx("span",{className:`material-symbols-outlined text-[#2860E0] transform transition-transform duration-300 ${y?"translate-x-1":""}`,children:V?"open_in_new":"arrow_forward"})]})]})]})}function l4({tools:s}){const{userData:e}=rn(),n=s.filter(i=>e?.favorites?.includes(i.id));return n.length===0?null:m.jsxs("section",{className:"mt-6 px-4",children:[m.jsx("h2",{className:"text-xl font-bold tracking-tight mb-3",children:"Jouw favorieten"}),m.jsx("div",{className:"flex overflow-x-auto no-scrollbar pb-4 gap-3 snap-x snap-mandatory",children:n.map(i=>m.jsx(c4,{tool:i},i.id))})]})}function c4({tool:s}){const e=()=>{s.link&&window.open(s.link,"_blank","noopener,noreferrer")},n=()=>{const i=["text-blue-600","text-purple-600","text-green-600","text-orange-600","text-pink-600","text-cyan-600"],o=s.name.charCodeAt(0)%i.length;return i[o]};return m.jsxs("button",{onClick:e,className:"snap-start shrink-0 size-20 rounded-xl bg-card shadow-sm border border-theme flex flex-col items-center justify-center p-2 text-center hover:shadow-md transition-all duration-300",children:[s.imageUrl?m.jsx("div",{className:"size-10 rounded-md bg-cover bg-center",style:{backgroundImage:`url('${s.imageUrl}')`}}):m.jsx("span",{className:`material-symbols-outlined text-3xl ${n()}`,children:s.icon||"apps"}),m.jsx("p",{className:"text-sm font-medium mt-1 text-secondary truncate w-full px-1",children:s.name})]})}function u4(){const{user:s,userData:e}=rn(),{activeTools:n,loading:i}=Da(),{labels:o,loading:c}=Xw(),[u,p]=L.useState(""),[g,y]=L.useState([]),[b,x]=L.useState(!1),T=V=>{y(V===null?[]:j=>j.includes(V)?j.filter(H=>H!==V):[...j,V])},N=L.useMemo(()=>n.filter(j=>j.status==="published"||!j.status).filter(j=>{if(u){const H=u.toLowerCase(),$=j.name?.toLowerCase().includes(H),X=j.description?.toLowerCase().includes(H),re=j.shortDescription?.toLowerCase().includes(H);if(!$&&!X&&!re)return!1}return!(g.length>0&&!j.labels?.some($=>g.includes($)))}),[n,u,g]),R=i||c;return m.jsxs("div",{className:"min-h-screen flex flex-col",children:[m.jsx(r4,{onSearchClick:()=>x(V=>!V)}),m.jsxs("main",{className:"flex-1 w-full pb-8",children:[b&&m.jsx("div",{className:"px-4 pt-4",children:m.jsx(i4,{value:u,onChange:p,placeholder:"Zoek op naam of beschrijving..."})}),s&&e?.favorites?.length>0&&m.jsx(l4,{tools:n}),m.jsxs("section",{className:"mt-4",children:[m.jsxs("div",{className:"px-4 mb-3 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Alle Tools"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:"flex items-center justify-center size-9 rounded-full bg-card border border-theme hover:bg-gray-500/10 transition-colors",children:m.jsx("span",{className:"material-symbols-outlined text-xl",children:"sort"})}),m.jsx("button",{onClick:()=>x(V=>!V),className:`flex items-center justify-center size-9 rounded-full border transition-colors ${b?"bg-[#2860E0] text-white border-[#2860E0]":"bg-card border-theme hover:bg-gray-500/10"}`,children:m.jsx("span",{className:"material-symbols-outlined text-xl",children:"filter_alt"})})]})]}),m.jsx("div",{className:"px-4 pb-4",children:m.jsx(a4,{labels:o,selectedLabels:g,onToggleLabel:T})}),m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 px-4 pb-24",children:R?[...Array(8)].map((V,j)=>m.jsxs("div",{className:"bg-card rounded-lg border border-theme overflow-hidden animate-pulse",children:[m.jsx("div",{className:"w-full h-20 bg-gray-200 dark:bg-gray-700"}),m.jsxs("div",{className:"p-3",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),m.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-3 w-full"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-full"})]})]},j)):N.length===0?m.jsxs("div",{className:"col-span-full text-center py-12 text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"search_off"}),m.jsx("p",{children:"Geen tools gevonden"}),u&&m.jsx("button",{onClick:()=>p(""),className:"mt-2 text-[#2860E0] hover:underline",children:"Wis zoekopdracht"})]}):N.map(V=>m.jsx(o4,{tool:V},V.id))})]})]})]})}const h4=[{label:"Overzicht",path:"/admin",icon:"dashboard",end:!0},{label:"Tools",path:"/admin/tools",icon:"construction"},{label:"Gebruikers",path:"/admin/users",icon:"group"},{label:"Credits",path:"/admin/credits",icon:"payments"},{label:"Kosten",path:"/admin/costs",icon:"euro"},{label:"Labels & Metadata",path:"/admin/labels",icon:"label"},{label:"Rapportages",path:"/admin/reports",icon:"description"}];function d4(){const{userRole:s,isSupervisor:e,userData:n}=rn();return m.jsxs("aside",{className:"w-48 md:w-64 bg-card border-r border-theme flex flex-col shrink-0 hidden sm:flex",children:[m.jsx("div",{className:"p-4 border-b border-theme",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-10 bg-amber-500 rounded-lg flex items-center justify-center text-white",children:m.jsx("span",{className:"material-symbols-outlined",children:"admin_panel_settings"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-bold text-lg",children:"Admin"}),m.jsx("p",{className:"text-xs text-secondary",children:"DaCapo Tools"})]})]})}),m.jsxs("div",{className:"px-4 py-3 border-b border-theme",children:[m.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${e?"bg-purple-500/10 text-purple-600 dark:text-purple-400":"bg-blue-500/10 text-blue-600 dark:text-blue-400"}`,children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:e?"shield_person":"verified_user"}),e?"Supervisor":"Admin"]}),!e&&m.jsx("p",{className:"text-xs text-secondary mt-2",children:"Alleen-lezen toegang"})]}),m.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:h4.map(i=>m.jsxs(ZE,{to:i.path,end:i.end,className:({isActive:o})=>`
                            flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors
                            ${o?"bg-[#2860E0] text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:i.icon}),m.jsx("span",{className:"font-medium",children:i.label})]},i.path))}),m.jsx("div",{className:"p-4 border-t border-theme",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-9 rounded-full bg-[#2860E0] flex items-center justify-center text-white text-sm font-medium",children:(n?.displayName||n?.email||"?").charAt(0).toUpperCase()}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium truncate",children:n?.displayName||"Gebruiker"}),m.jsx("p",{className:"text-xs text-secondary truncate",children:n?.email})]})]})})]})}const jE={"/admin":"Overzicht","/admin/tools":"Tools","/admin/tools/new":"Nieuwe Tool","/admin/users":"Gebruikers","/admin/credits":"Credits","/admin/costs":"Kosten","/admin/labels":"Labels & Metadata","/admin/reports":"Rapportages"};function f4(){const{isDarkMode:s,toggleTheme:e}=tg(),n=Ys(),i=()=>jE[n.pathname]?jE[n.pathname]:n.pathname.startsWith("/admin/tools/")?"Tool Bewerken":"Admin Dashboard";return m.jsx("header",{className:"sticky top-0 z-40 bg-card/95 backdrop-blur-md border-b border-theme",children:m.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-bold",children:i()}),m.jsx("p",{className:"text-xs text-secondary",children:"Admin Dashboard"})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{onClick:e,className:"flex items-center justify-center size-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":s?"Schakel naar light mode":"Schakel naar dark mode",children:m.jsx("span",{className:"material-symbols-outlined",children:s?"light_mode":"dark_mode"})})})]})})}function m4(){const{user:s,userRole:e,loading:n}=rn(),i=Ys();return n?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"text-center",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"}),m.jsx("p",{className:"mt-2 text-secondary",children:"Laden..."})]})}):s?e==="user"?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"text-center max-w-md px-4",children:[m.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500",children:"block"}),m.jsx("h1",{className:"text-2xl font-bold mt-4",children:"Geen toegang"}),m.jsx("p",{className:"text-secondary mt-2",children:"Je hebt geen rechten om het admin dashboard te bekijken."}),m.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 mt-6 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"home"}),"Terug naar home"]})]})}):m.jsxs("div",{className:"min-h-screen flex bg-gray-50 dark:bg-gray-900",children:[m.jsx(d4,{}),m.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[m.jsx(f4,{}),m.jsx("main",{className:"flex-1 p-6 overflow-auto",children:m.jsx(VR,{})})]})]}):m.jsx(MR,{to:"/",state:{from:i},replace:!0})}const xi={paco:{appId:"paco",appName:"Paco Generator",monthlyLimit:50,creditUnit:"afbeelding",creditUnitPlural:"afbeeldingen",description:"Genereer afbeeldingen met AI"},translate:{appId:"translate",appName:"Vertaler",monthlyLimit:1e3,creditUnit:"woord",creditUnitPlural:"woorden",description:"Vertaal teksten naar andere talen"}};function gd(s){return xi[s]||null}function jc(){return Object.keys(xi)}function p4(s){const e=gd(s);return e?{creditsRemaining:e.monthlyLimit,monthlyLimit:e.monthlyLimit,totalUsedThisMonth:0,lastResetAt:new Date,createdAt:new Date}:null}function g4(){const{isSupervisor:s}=rn(),{tools:e,loading:n}=Da(),i=jc(),o=L.useMemo(()=>{const u=e.filter(b=>b.isActive!==!1),p=e.filter(b=>b.status==="published"),g=e.reduce((b,x)=>b+(x.clickCount||0),0),y=e.reduce((b,x)=>b+(x.favoriteCount||0),0);return{totalTools:e.length,activeTools:u.length,publishedTools:p.length,totalClicks:g,totalFavorites:y,totalApps:i.length}},[e,i]),c=L.useMemo(()=>{const u=[],p=e.filter(b=>!b.imageUrl);p.length>0&&u.push({type:"warning",icon:"image_not_supported",message:`${p.length} tool(s) zonder afbeelding`,link:"/admin/tools"});const g=e.filter(b=>b.status==="draft");g.length>0&&u.push({type:"info",icon:"edit_note",message:`${g.length} tool(s) in concept`,link:"/admin/tools"});const y=e.filter(b=>b.isActive===!1);return y.length>0&&u.push({type:"info",icon:"visibility_off",message:`${y.length} tool(s) inactief`,link:"/admin/tools"}),u},[e]);return n?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Welkom terug! "}),m.jsx("p",{className:"text-secondary mt-1",children:"Hier is het overzicht van je DaCapo Tools platform."})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"construction"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:o.totalTools}),m.jsx("p",{className:"text-sm text-secondary",children:"Totaal Tools"})]})]})}),m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-green-500",children:"check_circle"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:o.publishedTools}),m.jsx("p",{className:"text-sm text-secondary",children:"Gepubliceerd"})]})]})}),m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"touch_app"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:o.totalClicks}),m.jsx("p",{className:"text-sm text-secondary",children:"Totaal Clicks"})]})]})}),m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-red-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-red-500 filled",children:"favorite"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),m.jsx("p",{className:"text-sm text-secondary",children:"Favorieten"})]})]})})]}),s&&m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Snelle Acties"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsxs(Ls,{to:"/admin/tools/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"Nieuwe Tool"]}),m.jsxs(Ls,{to:"/admin/labels",className:"inline-flex items-center gap-2 px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"label"}),"Labels Beheren"]}),m.jsxs(Ls,{to:"/admin/users",className:"inline-flex items-center gap-2 px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"group"}),"Gebruikers"]})]})]}),c.length>0&&m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"notifications"}),"Aandachtspunten"]}),m.jsx("div",{className:"space-y-3",children:c.map((u,p)=>m.jsxs(Ls,{to:u.link,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${u.type==="warning"?"bg-amber-500/10 hover:bg-amber-500/20":"bg-blue-500/10 hover:bg-blue-500/20"}`,children:[m.jsx("span",{className:`material-symbols-outlined ${u.type==="warning"?"text-amber-500":"text-blue-500"}`,children:u.icon}),m.jsx("span",{className:"flex-1",children:u.message}),m.jsx("span",{className:"material-symbols-outlined text-secondary",children:"chevron_right"})]},p))})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Gebruik per Tool"}),m.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:m.jsxs("div",{className:"text-center text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"bar_chart"}),m.jsx("p",{className:"text-sm",children:"Grafiek komt binnenkort"})]})})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Credits Overzicht"}),m.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:m.jsxs("div",{className:"text-center text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"pie_chart"}),m.jsx("p",{className:"text-sm",children:"Grafiek komt binnenkort"})]})})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Geregistreerde Apps"}),m.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4",children:i.map(u=>{const p=xi[u];return m.jsxs("div",{className:"p-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800/50",children:[m.jsx("h4",{className:"font-medium",children:p.appName}),m.jsx("p",{className:"text-sm text-secondary mt-1",children:p.description}),m.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"payments"}),p.monthlyLimit," ",p.creditUnitPlural,"/maand"]})]},u)})})]})]})}function y4(){const{isSupervisor:s}=rn(),{tools:e,deleteTool:n,loading:i}=Da(),{labels:o}=Xw(),[c,u]=L.useState(null),[p,g]=L.useState("all"),y=async R=>{await n(R),u(null)},b=R=>o.find(j=>j.id===R)?.name||R,x=R=>o.find(j=>j.id===R)?.color||"#2860E0",T=e.filter(R=>p==="all"?!0:p==="published"?R.status==="published":p==="draft"?R.status==="draft"||!R.status:p==="inactive"?R.isActive===!1:!0),N={all:e.length,published:e.filter(R=>R.status==="published").length,draft:e.filter(R=>R.status==="draft"||!R.status).length,inactive:e.filter(R=>R.isActive===!1).length};return i?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Tools"}),m.jsx("p",{className:"text-secondary mt-1",children:"Beheer alle tools in het platform"})]}),s&&m.jsxs(Ls,{to:"/admin/tools/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"Nieuwe Tool"]})]}),m.jsx("div",{className:"flex gap-2 border-b border-theme pb-4",children:[{key:"all",label:"Alles",count:N.all},{key:"published",label:"Gepubliceerd",count:N.published},{key:"draft",label:"Concept",count:N.draft},{key:"inactive",label:"Inactief",count:N.inactive}].map(R=>m.jsxs("button",{onClick:()=>g(R.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===R.key?"bg-[#2860E0] text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[R.label,m.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${p===R.key?"bg-white/20":"bg-gray-200 dark:bg-gray-700"}`,children:R.count})]},R.key))}),m.jsx("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:m.jsxs("tr",{children:[m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Tool"}),m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Status"}),m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Labels"}),m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Clicks"}),m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:m.jsx("span",{className:"material-symbols-outlined text-lg",children:"favorite"})}),s&&m.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),m.jsx("tbody",{children:T.length===0?m.jsx("tr",{children:m.jsxs("td",{colSpan:s?6:5,className:"px-4 py-12 text-center text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"inventory_2"}),m.jsx("p",{children:"Geen tools gevonden"})]})}):T.map(R=>m.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-cover bg-center border border-theme bg-gray-100 dark:bg-gray-700 flex items-center justify-center shrink-0",style:R.imageUrl?{backgroundImage:`url('${R.imageUrl}')`}:{},children:!R.imageUrl&&m.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"apps"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:R.name}),m.jsx("p",{className:"text-sm text-secondary truncate max-w-xs",children:R.shortDescription||R.description})]})]})}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${R.status==="published"?"bg-green-500/10 text-green-600":R.isActive===!1?"bg-gray-500/10 text-gray-600":"bg-yellow-500/10 text-yellow-600"}`,children:[m.jsx("span",{className:`size-2 rounded-full ${R.status==="published"?"bg-green-500":R.isActive===!1?"bg-gray-500":"bg-yellow-500"}`}),R.status==="published"?"Gepubliceerd":R.isActive===!1?"Inactief":"Concept"]})}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex flex-wrap gap-1",children:[R.labels?.slice(0,3).map(V=>m.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${x(V)}20`,color:x(V)},children:b(V)},V)),R.labels?.length>3&&m.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-200 dark:bg-gray-700",children:["+",R.labels.length-3]})]})}),m.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:R.clickCount||0}),m.jsx("td",{className:"px-4 py-3 text-center",children:m.jsxs("span",{className:"inline-flex items-center gap-1 text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-red-500 text-sm filled",children:"favorite"}),R.favoriteCount||0]})}),s&&m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex items-center justify-end gap-1",children:[m.jsx(Ls,{to:`/admin/tools/${R.id}`,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Bewerken",children:m.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),c===R.id?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>y(R.id),className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Bevestig verwijderen",children:m.jsx("span",{className:"material-symbols-outlined",children:"check"})}),m.jsx("button",{onClick:()=>u(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Annuleren",children:m.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}):m.jsx("button",{onClick:()=>u(R.id),className:"p-2 rounded-lg hover:bg-red-500/10 text-red-500 transition-colors",title:"Verwijderen",children:m.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})})]},R.id))})]})})]})}function _4(){const[s,e]=L.useState(!1),[n,i]=L.useState(0),[o,c]=L.useState(null),u=async(N,R="tools")=>{if(!N)throw new Error("No file provided");if(!N.type.startsWith("image/"))throw new Error("File must be an image");const V=5*1024*1024;if(N.size>V)throw new Error("File size must be less than 5MB");e(!0),i(0),c(null);try{const j=Date.now(),H=N.name.replace(/[^a-zA-Z0-9.]/g,"_"),$=`${R}/${j}_${H}`,X=oc(lc,$),re=gp(X,N);return new Promise((ae,ce)=>{re.on("state_changed",C=>{const S=C.bytesTransferred/C.totalBytes*100;i(Math.round(S))},C=>{console.error("Upload error:",C),c(C.message),e(!1),ce(C)},async()=>{const C=await yp(re.snapshot.ref);e(!1),i(100),console.log("[Storage] Image uploaded:",C),ae(C)})})}catch(j){throw console.error("Upload error:",j),c(j.message),e(!1),j}},p=async(N,R)=>{if(!N)throw new Error("No file provided");if(!R)throw new Error("Tool slug is required");if(!(N.type?.startsWith("image/")||N instanceof Blob))throw new Error("File must be an image");const j=5*1024*1024;if(N.size>j)throw new Error("File size must be less than 5MB");e(!0),i(0),c(null);try{const H=`tool-images/${R}/header.png`,$=oc(lc,H),X=gp($,N);return new Promise((re,ae)=>{X.on("state_changed",ce=>{const C=ce.bytesTransferred/ce.totalBytes*100;i(Math.round(C))},ce=>{console.error("Upload error:",ce),c(ce.message),e(!1),ae(ce)},async()=>{const ce=await yp(X.snapshot.ref);e(!1),i(100),console.log("[Storage] Tool image uploaded:",ce),re(ce)})})}catch(H){throw console.error("Upload error:",H),c(H.message),e(!1),H}};return{uploadImage:u,uploadToolImage:p,uploadFromUrl:async(N,R)=>{if(!N)throw new Error("No URL provided");if(!R)throw new Error("Tool slug is required");e(!0),i(0),c(null);try{i(10);const V=await fetch(N);if(!V.ok)throw new Error(`Failed to fetch image: ${V.status}`);if(!V.headers.get("content-type")?.startsWith("image/"))throw new Error("URL does not point to an image");i(30);const H=await V.blob(),$=5*1024*1024;if(H.size>$)throw new Error("Image size must be less than 5MB");i(50);const X=`tool-images/${R}/header.png`,re=oc(lc,X),ae=gp(re,H);return new Promise((ce,C)=>{ae.on("state_changed",S=>{const I=S.bytesTransferred/S.totalBytes*50;i(Math.round(50+I))},S=>{console.error("Upload error:",S),c(S.message),e(!1),C(S)},async()=>{const S=await yp(ae.snapshot.ref);e(!1),i(100),console.log("[Storage] Image from URL uploaded:",S),ce(S)})})}catch(V){throw console.error("Upload from URL error:",V),c(V.message),e(!1),V}},deleteImage:async N=>{if(N)try{const R=oc(lc,N);await kE(R),console.log("[Storage] Image deleted")}catch(R){if(R.code!=="storage/object-not-found")throw console.error("Delete error:",R),R}},deleteToolImage:async N=>{if(N)try{const R=`tool-images/${N}/header.png`,V=oc(lc,R);await kE(V),console.log("[Storage] Tool image deleted")}catch(R){if(R.code!=="storage/object-not-found")throw console.error("Delete error:",R),R}},handlePaste:async(N,R)=>{const V=N.clipboardData?.items;if(!V)return null;for(const j of V)if(j.type.startsWith("image/")){const H=j.getAsFile();if(H&&R)return await p(H,R);if(H)return await u(H,"tools")}return null},isValidImageUrl:N=>{if(!N)return!1;try{new URL(N);const R=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp"],V=N.toLowerCase();return R.some(j=>V.includes(j))||N.startsWith("data:image/")||N.includes("googleusercontent.com")||N.includes("firebasestorage.googleapis.com")}catch{return!1}},uploading:s,progress:n,error:o}}function v4({imageUrl:s,onCrop:e,onCancel:n,aspectRatio:i=16/9}){const o=L.useRef(null),c=L.useRef(null),[u,p]=L.useState({x:0,y:0}),[g,y]=L.useState(!1),[b,x]=L.useState({x:0,y:0}),[T,N]=L.useState({width:0,height:0}),[R,V]=L.useState(1),j=224,H=j/i,$=L.useCallback(C=>{const S=C.target,I=S.naturalWidth,k=S.naturalHeight,D=j/I,U=H/k,O=Math.max(D,U);V(O),N({width:I,height:k});const Ee=I*O,st=k*O;p({x:(j-Ee)/2,y:(H-st)/2})},[j,H]),X=C=>{C.preventDefault(),y(!0),x({x:C.clientX-u.x,y:C.clientY-u.y})},re=L.useCallback(C=>{if(!g)return;const S=T.width*R,I=T.height*R,k=Math.min(0,j-S),D=Math.max(0,j-S),U=Math.min(0,H-I),O=Math.max(0,H-I),Ee=Math.max(k,Math.min(D,C.clientX-b.x)),st=Math.max(U,Math.min(O,C.clientY-b.y));p({x:Ee,y:st})},[g,b,T,R,j,H]),ae=()=>{y(!1)},ce=async()=>{if(!c.current)return;const C=document.createElement("canvas");C.width=j,C.height=H;const S=C.getContext("2d"),I=-u.x/R,k=-u.y/R,D=j/R,U=H/R;S.drawImage(c.current,I,k,D,U,0,0,j,H),C.toBlob(async O=>{if(O){const Ee=new File([O],"cropped-image.png",{type:"image/png"});e(Ee)}},"image/png",.9)};return m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-6 max-w-lg w-full",children:[m.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined",children:"crop"}),"Afbeelding Positioneren"]}),m.jsx("p",{className:"text-sm text-secondary mb-4",children:"Sleep de afbeelding om het zichtbare gedeelte te kiezen."}),m.jsxs("div",{ref:o,className:"relative mx-auto overflow-hidden rounded-lg border-2 border-dashed border-[#2860E0] bg-gray-100 dark:bg-gray-800",style:{width:j,height:H},onMouseMove:re,onMouseUp:ae,onMouseLeave:ae,children:[m.jsx("img",{ref:c,src:s,alt:"Crop preview",className:"absolute cursor-move select-none",style:{transform:`translate(${u.x}px, ${u.y}px) scale(${R})`,transformOrigin:"top left",maxWidth:"none"},onLoad:$,onMouseDown:X,draggable:!1,crossOrigin:"anonymous"}),m.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-[#2860E0] pointer-events-none"}),m.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-[#2860E0] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-[#2860E0] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-[#2860E0] pointer-events-none"})]}),m.jsxs("p",{className:"text-xs text-secondary text-center mt-2",children:["16:9 formaat  ",j,"  ",Math.round(H)," pixels"]}),m.jsxs("div",{className:"flex gap-3 mt-6",children:[m.jsx("button",{onClick:n,className:"flex-1 py-3 px-4 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 font-medium rounded-lg transition-colors",children:"Annuleren"}),m.jsxs("button",{onClick:ce,className:"flex-1 py-3 px-4 bg-[#2860E0] hover:bg-[#1C4DAB] text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}),"Toepassen"]})]})]})})}function b4({tool:s}){const[e,n]=L.useState(!1),i=L.useRef(null),o=s?.name||"Tool Name",c=s?.shortDescription||s?.description||"Short description...",u=s?.fullDescription||c,p=s?.imageUrl||"",g=$w(s?.labels),y=uy(s?.labels);return m.jsxs("div",{className:"bg-card rounded-xl border border-theme overflow-hidden shadow-lg",children:[m.jsx("div",{className:"bg-[#2860E0]/10 px-3 py-1.5 border-b border-theme",children:m.jsx("span",{className:"text-xs font-semibold text-[#2860E0] uppercase tracking-wide",children:"Live Preview"})}),m.jsxs("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"group bg-card p-3 flex items-center justify-between gap-3 hover:shadow-md transition-all duration-300 cursor-pointer",children:[m.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[m.jsxs("div",{className:"size-10 rounded-md bg-cover bg-center shrink-0 border border-theme bg-gray-100 dark:bg-gray-700 flex items-center justify-center relative",style:p?{backgroundImage:`url('${p}')`}:{},children:[!p&&m.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"apps"}),y&&m.jsx("div",{className:"absolute -top-1 -right-1 size-4 bg-red-500 rounded-full flex items-center justify-center",title:"Opent in een nieuw tabblad",children:m.jsx("span",{className:"material-symbols-outlined text-white text-xs",children:"open_in_new"})})]}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h3",{className:"font-semibold text-base truncate",children:o}),y&&m.jsx("span",{className:"material-symbols-outlined text-red-500 text-sm",title:"Opent in een nieuw tabblad",children:"open_in_new"})]}),m.jsx("div",{ref:i,className:`text-xs text-secondary overflow-hidden transition-all duration-300 ${e?"max-h-24 overflow-y-auto":"max-h-5 truncate"}`,children:m.jsx("p",{className:e?"whitespace-pre-wrap":"truncate",children:e?u:c})})]})]}),m.jsx("button",{className:"shrink-0 p-1 rounded-full text-secondary hover:text-red-500 hover:bg-gray-500/10 transition-colors",onClick:b=>b.preventDefault(),children:m.jsx("span",{className:"material-symbols-outlined text-xl",children:"favorite"})})]}),g&&m.jsxs("div",{className:"px-3 pb-3 flex flex-wrap gap-1",children:[m.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full text-white",style:{backgroundColor:g.color},children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:g.icon}),g.name]}),y&&m.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-red-500 text-white",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"open_in_new"}),"Extern"]})]}),m.jsx("div",{className:"px-3 pb-3",children:m.jsxs("div",{className:`inline-flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full ${s?.status==="published"?"bg-green-500/10 text-green-600":"bg-yellow-500/10 text-yellow-600"}`,children:[m.jsx("span",{className:`size-2 rounded-full ${s?.status==="published"?"bg-green-500":"bg-yellow-500"}`}),s?.status==="published"?"Gepubliceerd":"Concept"]})}),m.jsx("div",{className:"px-3 pb-3 text-xs text-secondary italic",children:y?"Deze tool opent in een nieuw tabblad":"Hover over de kaart om de volledige beschrijving te zien"})]})}function ME(){const{id:s}=ER(),e=_d(),{isSupervisor:n}=rn(),{addTool:i,updateTool:o}=Da(),{uploadToolImage:c}=_4(),u=!!s,[p,g]=L.useState({name:"",description:"",shortDescription:"",labels:[],externalUrl:"",internalRoute:"",imageUrl:"",status:"draft",isActive:!0}),[y,b]=L.useState(u),[x,T]=L.useState(!1),[N,R]=L.useState(null),[V,j]=L.useState(!1),[H,$]=L.useState(null),X=L.useRef(null),re=pd(p.labels),ae=uy(p.labels);if(!n)return m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsxs("div",{className:"text-center",children:[m.jsx("span",{className:"material-symbols-outlined text-6xl text-yellow-500",children:"warning"}),m.jsx("h2",{className:"text-xl font-bold mt-4",children:"Alleen-lezen toegang"}),m.jsx("p",{className:"text-secondary mt-2",children:"Je hebt geen rechten om tools te bewerken."}),m.jsx("button",{onClick:()=>e("/admin/tools"),className:"mt-4 px-4 py-2 bg-[#2860E0] text-white rounded-lg",children:"Terug naar Tools"})]})});L.useEffect(()=>{u&&s&&(async()=>{try{const U=Dn(Lt,"tools",s),O=await qo(U);if(O.exists()){const Ee=O.data();g({name:Ee.name||"",description:Ee.description||"",shortDescription:Ee.shortDescription||"",labels:Ee.labels||[],externalUrl:Ee.externalUrl||Ee.url||"",internalRoute:Ee.internalRoute||"",imageUrl:Ee.imageUrl||"",status:Ee.status||"draft",isActive:Ee.isActive!==!1})}}catch(U){console.error("Error loading tool:",U),R("Fout bij laden van tool")}finally{b(!1)}})()},[s,u]);const ce=D=>{g(U=>{const Ee=U.labels.includes("extern")?[D,"extern"]:[D];return{...U,labels:Ee}})},C=()=>{g(D=>{const U=pd(D.labels);return U?D.labels.includes("extern")?{...D,labels:[U]}:{...D,labels:[U,"extern"]}:D})},S=async D=>{if(D.preventDefault(),R(null),!p.name.trim()){R("Naam is verplicht");return}const U=n4(p.labels);if(!U.valid){R(U.error);return}if(ae){if(!p.externalUrl.trim()){R("Externe URL is verplicht voor externe tools");return}}else if(!p.internalRoute.trim()){R("Interne route is verplicht voor native tools");return}try{T(!0);const O={...p,url:ae?p.externalUrl:p.internalRoute};u?await o(s,O):await i(O),e("/admin/tools")}catch(O){console.error("Error saving tool:",O),R("Fout bij opslaan")}finally{T(!1)}},I=D=>{const U=D.target.files?.[0];if(U){const O=new FileReader;O.onload=()=>{$(O.result),j(!0)},O.readAsDataURL(U)}},k=async D=>{try{const U=await c(D,p.name||"tool");g(O=>({...O,imageUrl:U})),j(!1),$(null)}catch(U){console.error("Error uploading image:",U),R("Fout bij uploaden afbeelding")}};return L.useEffect(()=>{const D=U=>{const O=U.clipboardData?.items;if(O){for(const Ee of O)if(Ee.type.indexOf("image")!==-1){const st=Ee.getAsFile(),W=new FileReader;W.onload=()=>{$(W.result),j(!0)},W.readAsDataURL(st),U.preventDefault();break}}};return window.addEventListener("paste",D),()=>window.removeEventListener("paste",D)},[]),y?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold",children:u?"Tool Bewerken":"Nieuwe Tool"}),m.jsx("p",{className:"text-secondary mt-1",children:u?"Bewerk de tool gegevens":"Voeg een nieuwe tool toe aan het platform"})]}),N&&m.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:N}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[m.jsx("div",{className:"lg:col-span-2 space-y-6",children:m.jsxs("form",{onSubmit:S,className:"space-y-6",children:[m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Basis Informatie"}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Naam *"}),m.jsx("input",{type:"text",value:p.name,onChange:D=>g(U=>({...U,name:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"Tool naam...",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Korte Beschrijving"}),m.jsx("input",{type:"text",value:p.shortDescription,onChange:D=>g(U=>({...U,shortDescription:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"Korte beschrijving (max 100 karakters)...",maxLength:100})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Beschrijving"}),m.jsx("textarea",{value:p.description,onChange:D=>g(U=>({...U,description:D.target.value})),className:"w-full h-32 px-4 py-3 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800 resize-none",placeholder:"Uitgebreide beschrijving..."})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Classificatie *"}),m.jsx("p",{className:"text-sm text-secondary",children:'Kies exact n primair label. Markeer als "Extern" indien de tool buiten DaCapoTools opent.'}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium mb-3",children:"Primair Label"}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:kc.map(D=>m.jsxs("button",{type:"button",onClick:()=>ce(D.id),className:`flex items-center gap-2 px-3 py-2.5 rounded-lg border transition-all ${re===D.id?"border-transparent text-white":"border-theme bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:re===D.id?{backgroundColor:D.color}:{},children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:D.icon}),m.jsx("span",{className:"text-sm font-medium truncate",children:D.name})]},D.id))}),!re&&m.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Selecteer een primair label"})]}),m.jsx("div",{className:"pt-4 border-t border-theme",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("button",{type:"button",onClick:C,disabled:!re,className:`relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2860E0] ${ae?"bg-red-500":"bg-gray-200 dark:bg-gray-700"} ${re?"":"opacity-50 cursor-not-allowed"}`,children:m.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${ae?"translate-x-5":"translate-x-0"}`})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"size-8 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:pr.color},children:m.jsx("span",{className:"material-symbols-outlined text-lg",children:pr.icon})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:pr.name}),m.jsx("p",{className:"text-xs text-secondary",children:"Opent in een nieuw tabblad"})]})]})]})})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:ae?"Externe URL *":"Interne Route *"}),ae?m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Externe URL",m.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),m.jsx("input",{type:"url",value:p.externalUrl,onChange:D=>g(U=>({...U,externalUrl:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"https://example.com",required:ae}),m.jsxs("p",{className:"text-xs text-secondary mt-2",children:[m.jsx("span",{className:"material-symbols-outlined text-sm align-middle mr-1",children:"open_in_new"}),"Deze link opent in een nieuw tabblad"]})]}):m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Interne Route",m.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),m.jsx("input",{type:"text",value:p.internalRoute,onChange:D=>g(U=>({...U,internalRoute:D.target.value})),className:"w-full h-12 px-4 rounded-lg border border-theme bg-gray-50 dark:bg-gray-800",placeholder:"/app/toolnaam",required:!ae}),m.jsx("p",{className:"text-xs text-secondary mt-2",children:"Route binnen DaCapoTools (bijv. /app/paco)"})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[m.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:["Afbeelding",m.jsx("span",{className:"text-xs font-normal text-secondary px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:"Ctrl+V ondersteund"})]}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"size-24 rounded-lg border-2 border-dashed border-theme flex items-center justify-center bg-gray-50 dark:bg-gray-800 overflow-hidden cursor-pointer shrink-0 transition-colors hover:border-[#2860E0]",onClick:()=>X.current?.click(),title:"Klik om te uploaden of plak een afbeelding",children:p.imageUrl?m.jsx("img",{src:p.imageUrl,alt:"Preview",className:"w-full h-full object-cover"}):m.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"add_photo_alternate"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("input",{ref:X,type:"file",accept:"image/*",onChange:I,className:"hidden"}),m.jsx("button",{type:"button",onClick:()=>X.current?.click(),className:"px-4 py-2 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 mb-2",children:"Kies Afbeelding"}),m.jsxs("p",{className:"text-xs text-secondary",children:["Sleep een afbeelding hierheen, ",m.jsx("span",{className:"text-[#2860E0] font-medium",children:"plak vanaf klembord (Ctrl+V)"}),", of klik om te kiezen."]}),m.jsx("p",{className:"text-xs text-secondary mt-1",children:"PNG, JPG of GIF. Max 5MB."})]})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5 space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Status"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"status",value:"draft",checked:p.status==="draft",onChange:D=>g(U=>({...U,status:D.target.value})),className:"text-[#2860E0]"}),m.jsx("span",{children:"Concept"})]}),m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"status",value:"published",checked:p.status==="published",onChange:D=>g(U=>({...U,status:D.target.value})),className:"text-[#2860E0]"}),m.jsx("span",{children:"Gepubliceerd"})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-4",children:[m.jsx("button",{type:"button",onClick:()=>e("/admin/tools"),className:"px-6 py-3 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:"Annuleren"}),m.jsx("button",{type:"submit",disabled:x||!re,className:"px-6 py-3 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] disabled:opacity-50 flex items-center gap-2",children:x?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"material-symbols-outlined animate-spin",children:"sync"}),"Opslaan..."]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"material-symbols-outlined",children:"save"}),u?"Opslaan":"Aanmaken"]})})]})]})}),m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"sticky top-20",children:[m.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined",children:"visibility"}),"Live Preview"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(b4,{tool:p}),m.jsxs("div",{className:"p-4 bg-blue-500/10 rounded-lg text-sm text-blue-600 dark:text-blue-400",children:[m.jsxs("p",{className:"font-medium flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-base",children:"info"}),"Tip"]}),m.jsx("p",{children:"Deze preview toont hoe de kaart er exact uit zal zien voor gebruikers. De beschrijving scrolt wanneer de gebruiker eroverheen muist."})]})]})]})})]}),V&&H&&m.jsx(v4,{imageUrl:H,onCrop:k,onCancel:()=>{j(!1),$(null)}})]})}function E4(){const{isSupervisor:s,user:e}=rn(),[n,i]=L.useState([]),[o,c]=L.useState(!0),[u,p]=L.useState(null),[g,y]=L.useState(!1);L.useEffect(()=>{(async()=>{try{c(!0);const N=pa(Lt,"users"),V=(await fd(N)).docs.map(j=>({id:j.id,...j.data()}));V.sort((j,H)=>(j.email||"").localeCompare(H.email||"")),i(V)}catch(N){console.error("Error fetching users:",N)}finally{c(!1)}})()},[]);const b=async(T,N)=>{try{y(!0);const R=Dn(Lt,"users",T);await hs(R,{role:N}),i(V=>V.map(j=>j.id===T?{...j,role:N}:j)),p(null)}catch(R){console.error("Error updating role:",R)}finally{y(!1)}},x=T=>{switch(T){case Ge.SUPERVISOR:return{label:"Supervisor",class:"bg-purple-500/10 text-purple-600 dark:text-purple-400"};case Ge.ADMIN:return{label:"Admin",class:"bg-blue-500/10 text-blue-600 dark:text-blue-400"};default:return{label:"Gebruiker",class:"bg-gray-500/10 text-gray-600 dark:text-gray-400"}}};return o?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Gebruikers"}),m.jsx("p",{className:"text-secondary mt-1",children:"Beheer alle gebruikers en hun rollen"})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:n.length}),m.jsx("p",{className:"text-sm text-secondary",children:"Totaal Gebruikers"})]})]})}),m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-purple-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"shield_person"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:n.filter(T=>T.role===Ge.SUPERVISOR||T.role===Ge.ADMIN).length}),m.jsx("p",{className:"text-sm text-secondary",children:"Beheerders"})]})]})}),m.jsx("div",{className:"bg-card rounded-xl border border-theme p-5",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-green-500",children:"schedule"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:n.filter(T=>{if(!T.lastLogin)return!1;const N=T.lastLogin.toDate?.()||new Date(T.lastLogin),R=new Date;return R.setDate(R.getDate()-7),N>R}).length}),m.jsx("p",{className:"text-sm text-secondary",children:"Actief (7 dagen)"})]})]})})]}),m.jsx("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:m.jsxs("tr",{children:[m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Rol"}),m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Laatste Login"}),m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Aangemaakt"}),s&&m.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),m.jsx("tbody",{children:n.length===0?m.jsx("tr",{children:m.jsxs("td",{colSpan:s?5:4,className:"px-4 py-12 text-center text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"group"}),m.jsx("p",{children:"Geen gebruikers gevonden"})]})}):n.map(T=>{const N=x(T.role),R=T.id===e?.uid;return m.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-10 rounded-full bg-[#2860E0] flex items-center justify-center text-white font-medium shrink-0",children:(T.displayName||T.email||"?").charAt(0).toUpperCase()}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium flex items-center gap-2",children:[T.displayName||"Onbekend",R&&m.jsx("span",{className:"text-xs text-secondary",children:"(jij)"})]}),m.jsx("p",{className:"text-sm text-secondary",children:T.email})]})]})}),m.jsx("td",{className:"px-4 py-3",children:u===T.id?m.jsxs("select",{value:T.role||Ge.USER,onChange:V=>b(T.id,V.target.value),disabled:g,className:"px-3 py-1.5 rounded-lg border border-theme bg-white dark:bg-gray-800 text-sm",children:[m.jsx("option",{value:Ge.USER,children:"Gebruiker"}),m.jsx("option",{value:Ge.ADMIN,children:"Admin"}),m.jsx("option",{value:Ge.SUPERVISOR,children:"Supervisor"})]}):m.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${N.class}`,children:N.label})}),m.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:T.lastLogin?new Date(T.lastLogin.toDate?.()||T.lastLogin).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),m.jsx("td",{className:"px-4 py-3 text-secondary text-sm",children:T.createdAt?new Date(T.createdAt.toDate?.()||T.createdAt).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"}):"-"}),s&&m.jsx("td",{className:"px-4 py-3",children:m.jsx("div",{className:"flex items-center justify-end gap-1",children:u===T.id?m.jsx("button",{onClick:()=>p(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Annuleren",children:m.jsx("span",{className:"material-symbols-outlined",children:"close"})}):m.jsx("button",{onClick:()=>p(T.id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Rol wijzigen",disabled:R,children:m.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})})]},T.id)})})]})}),!s&&m.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[m.jsx("span",{className:"material-symbols-outlined",children:"info"}),m.jsx("p",{className:"text-sm",children:"Als admin heb je alleen-lezen toegang. Neem contact op met een supervisor voor het wijzigen van gebruikersrollen."})]})]})}function hy(s,e){return Dn(Lt,"users",s,"apps",e)}async function x4(s,e){if(!gd(e))throw new Error(`Unknown app: ${e}`);const i=hy(s,e),o=await qo(i);if(o.exists())return o.data();const c=p4(e);return await Rw(i,c),console.log(`[CreditService] Initialized credits for user ${s}, app ${e}`),c}async function T4(s,e,n){const i=hy(s,e);(await qo(i)).exists()||await x4(s,e);const c={};return typeof n.creditsRemaining=="number"&&(c.creditsRemaining=Math.max(0,n.creditsRemaining)),typeof n.monthlyLimit=="number"&&(c.monthlyLimit=Math.max(1,n.monthlyLimit)),Object.keys(c).length>0&&(await hs(i,c),console.log(`[CreditService] Modified credits for user ${s}, app ${e}:`,c)),(await qo(i)).data()}async function w4(s){const e=pa(Lt,"users"),n=await fd(e),i=[];for(const o of n.docs){const c=o.id,u=o.data(),p=hy(c,s),g=await qo(p);g.exists()&&i.push({uid:c,email:u.email,displayName:u.displayName,...g.data()})}return i}function S4({appId:s}){const{userRole:e,isSupervisor:n}=rn(),[i,o]=L.useState(s||jc()[0]),[c,u]=L.useState([]),[p,g]=L.useState(!0),[y,b]=L.useState(null),[x,T]=L.useState(null),[N,R]=L.useState({creditsRemaining:0,monthlyLimit:0}),[V,j]=L.useState(!1),H=gd(i),$=jc();L.useEffect(()=>{i&&(async()=>{try{g(!0),b(null);const I=await w4(i);u(I)}catch(I){console.error("[AppCreditsOverview] Error:",I),b(I.message)}finally{g(!1)}})()},[i]);const X=S=>{T(S.uid),R({creditsRemaining:S.creditsRemaining,monthlyLimit:S.monthlyLimit})},re=()=>{T(null),R({creditsRemaining:0,monthlyLimit:0})},ae=async S=>{try{j(!0),await T4(S,i,N),u(I=>I.map(k=>k.uid===S?{...k,...N}:k)),T(null)}catch(I){console.error("[AppCreditsOverview] Save error:",I),b(I.message)}finally{j(!1)}},ce=c.reduce((S,I)=>S+(I.totalUsedThisMonth||0),0),C=c.reduce((S,I)=>S+(I.creditsRemaining||0),0);return m.jsxs("div",{className:"space-y-4",children:[!s&&$.length>1&&m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("label",{className:"text-sm font-medium",children:"App:"}),m.jsx("select",{value:i,onChange:S=>o(S.target.value),className:"h-10 px-3 rounded-lg border border-theme bg-card focus:ring-2 focus:ring-[#2860E0] focus:border-transparent",children:$.map(S=>{const I=gd(S);return m.jsx("option",{value:S,children:I?.appName||S},S)})})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[m.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[m.jsx("p",{className:"text-secondary text-sm",children:"Gebruikers"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:c.length})]}),m.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[m.jsx("p",{className:"text-secondary text-sm",children:"Totaal Gebruikt"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:ce}),m.jsx("p",{className:"text-xs text-secondary",children:H?.creditUnitPlural})]}),m.jsxs("div",{className:"bg-card rounded-lg border border-theme p-4",children:[m.jsx("p",{className:"text-secondary text-sm",children:"Totaal Resterend"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:C}),m.jsx("p",{className:"text-xs text-secondary",children:H?.creditUnitPlural})]})]}),y&&m.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:y}),m.jsx("div",{className:"bg-card rounded-lg border border-theme overflow-hidden",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800 border-b border-theme",children:m.jsxs("tr",{children:[m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Resterend"}),m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Limiet"}),m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Gebruikt"}),n&&m.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Acties"})]})}),m.jsx("tbody",{children:p?m.jsx("tr",{children:m.jsx("td",{colSpan:n?5:4,className:"px-4 py-8 text-center",children:m.jsx("span",{className:"material-symbols-outlined animate-spin text-2xl",children:"sync"})})}):c.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:n?5:4,className:"px-4 py-8 text-center text-secondary",children:"Geen gebruikers met credits voor deze app"})}):c.map(S=>m.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-500/5",children:[m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:S.displayName||"Onbekend"}),m.jsx("p",{className:"text-sm text-secondary",children:S.email})]})}),m.jsx("td",{className:"px-4 py-3 text-center",children:x===S.uid?m.jsx("input",{type:"number",value:N.creditsRemaining,onChange:I=>R(k=>({...k,creditsRemaining:parseInt(I.target.value)||0})),className:"w-20 h-8 px-2 text-center rounded border border-theme bg-gray-100 dark:bg-gray-700",min:"0"}):m.jsx("span",{className:S.creditsRemaining<=0?"text-red-500 font-medium":"",children:S.creditsRemaining})}),m.jsx("td",{className:"px-4 py-3 text-center",children:x===S.uid?m.jsx("input",{type:"number",value:N.monthlyLimit,onChange:I=>R(k=>({...k,monthlyLimit:parseInt(I.target.value)||1})),className:"w-20 h-8 px-2 text-center rounded border border-theme bg-gray-100 dark:bg-gray-700",min:"1"}):S.monthlyLimit}),m.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:S.totalUsedThisMonth||0}),n&&m.jsx("td",{className:"px-4 py-3",children:m.jsx("div",{className:"flex items-center justify-end gap-2",children:x===S.uid?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>ae(S.uid),disabled:V,className:"p-2 rounded-lg bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors",title:"Opslaan",children:m.jsx("span",{className:"material-symbols-outlined text-sm",children:V?"sync":"check"})}),m.jsx("button",{onClick:re,disabled:V,className:"p-2 rounded-lg hover:bg-gray-500/10 transition-colors",title:"Annuleren",children:m.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}):m.jsx("button",{onClick:()=>X(S),className:"p-2 rounded-lg hover:bg-gray-500/10 transition-colors",title:"Bewerken",children:m.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})})})})]},S.uid))})]})})]})}function A4(){const{isSupervisor:s}=rn();return m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Credits"}),m.jsx("p",{className:"text-secondary mt-1",children:s?"Beheer credits en limieten per gebruiker":"Bekijk credit gebruik per app en gebruiker"})]}),m.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${s?"bg-purple-500/10 text-purple-600 dark:text-purple-400":"bg-blue-500/10 text-blue-600 dark:text-blue-400"}`,children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:s?"edit":"visibility"}),s?"Volledig beheer":"Alleen-lezen"]})]}),m.jsx(S4,{}),!s&&m.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[m.jsx("span",{className:"material-symbols-outlined",children:"info"}),m.jsx("p",{className:"text-sm",children:"Als admin heb je alleen-lezen toegang. Neem contact op met een supervisor voor het wijzigen van credits."})]})]})}const jh={paco:.05,translate:.001};function R4(){const{isSupervisor:s}=rn(),[e,n]=L.useState([]),[i,o]=L.useState(!0),c=jc();L.useEffect(()=>{(async()=>{try{o(!0);const g=pa(Lt,"users"),y=await fd(g),b=[];for(const x of y.docs){const T=x.data(),N={uid:x.id,email:T.email,displayName:T.displayName,apps:{}},R=pa(Lt,"users",x.id,"apps");(await fd(R)).forEach(j=>{N.apps[j.id]=j.data()}),Object.keys(N.apps).length>0&&b.push(N)}n(b)}catch(g){console.error("Error fetching costs data:",g)}finally{o(!1)}})()},[]);const u=L.useMemo(()=>{const p={totalCost:0,costPerApp:{},costPerUser:[]};return c.forEach(g=>{p.costPerApp[g]={used:0,cost:0}}),e.forEach(g=>{let y=0;Object.entries(g.apps).forEach(([b,x])=>{const T=x.totalUsedThisMonth||0,N=jh[b]||.01,R=T*N;p.costPerApp[b]&&(p.costPerApp[b].used+=T,p.costPerApp[b].cost+=R),y+=R}),p.costPerUser.push({...g,totalCost:y}),p.totalCost+=y}),p.costPerUser.sort((g,y)=>y.totalCost-g.totalCost),p},[e,c]);return i?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx("span",{className:"material-symbols-outlined text-4xl animate-spin text-[#2860E0]",children:"sync"})}):m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Kosten"}),m.jsx("p",{className:"text-secondary mt-1",children:"Overzicht van platformkosten per app en gebruiker"})]}),m.jsxs("div",{className:"bg-gradient-to-br from-[#2860E0] to-[#1C4DAB] rounded-xl p-6 text-white",children:[m.jsx("p",{className:"text-white/70 text-sm",children:"Totale Kosten Deze Maand"}),m.jsxs("p",{className:"text-4xl font-bold mt-2",children:["",u.totalCost.toFixed(2)]}),m.jsxs("p",{className:"text-white/70 text-sm mt-2",children:["Gebaseerd op ",e.length," actieve gebruikers"]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Kosten per App"}),m.jsx("div",{className:"space-y-4",children:c.map(p=>{const g=xi[p],y=u.costPerApp[p],b=jh[p]||.01;return m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"size-12 rounded-lg bg-[#2860E0]/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-[#2860E0]",children:p==="paco"?"image":"translate"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:g.appName}),m.jsxs("p",{className:"text-sm text-secondary",children:[y.used," ",g.creditUnitPlural," gebruikt"]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"text-xl font-bold",children:["",y.cost.toFixed(2)]}),m.jsxs("p",{className:"text-xs text-secondary",children:["",b.toFixed(3)," per ",g.creditUnit]})]})]},p)})})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"settings"}),"Prijsconfiguratie",!s&&m.jsx("span",{className:"text-xs font-normal text-secondary ml-2",children:"(alleen-lezen)"})]}),m.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:c.map(p=>{const g=xi[p],y=jh[p]||.01;return m.jsxs("div",{className:"p-4 border border-theme rounded-lg",children:[m.jsx("p",{className:"font-medium mb-2",children:g.appName}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-secondary",children:""}),m.jsx("input",{type:"number",step:"0.001",defaultValue:y,className:"flex-1 px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800 disabled:opacity-60 disabled:cursor-not-allowed",disabled:!s,readOnly:!s}),m.jsxs("span",{className:"text-sm text-secondary",children:["per ",g.creditUnit]})]}),s&&m.jsx("p",{className:"text-xs text-secondary mt-2",children:"* Prijswijzigingen momenteel niet actief"})]},p)})})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme overflow-x-auto",children:[m.jsx("div",{className:"p-4 border-b border-theme",children:m.jsx("h3",{className:"font-semibold",children:"Kosten per Gebruiker"})}),m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-theme",children:m.jsxs("tr",{children:[m.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Gebruiker"}),c.map(p=>m.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:xi[p]?.appName},p)),m.jsx("th",{className:"text-right px-4 py-3 font-semibold",children:"Totaal"})]})}),m.jsx("tbody",{children:u.costPerUser.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:c.length+2,className:"px-4 py-8 text-center text-secondary",children:"Geen kosten geregistreerd"})}):u.costPerUser.slice(0,20).map(p=>m.jsxs("tr",{className:"border-b border-theme last:border-0 hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:p.displayName||"Onbekend"}),m.jsx("p",{className:"text-sm text-secondary",children:p.email})]})}),c.map(g=>{const b=p.apps[g]?.totalUsedThisMonth||0,x=b*(jh[g]||.01);return m.jsx("td",{className:"px-4 py-3 text-center text-secondary",children:b>0?`${x.toFixed(2)}`:"-"},g)}),m.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["",p.totalCost.toFixed(2)]})]},p.uid))})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Maandelijkse Trend"}),m.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg",children:m.jsxs("div",{className:"text-center text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"show_chart"}),m.jsx("p",{className:"text-sm",children:"Kostengrafiek komt binnenkort"})]})})]})]})}function N4(){const{isSupervisor:s}=rn(),{tools:e}=Da(),n=L.useMemo(()=>{const i={};return cy.forEach(o=>{i[o.id]=e.filter(c=>c.labels?.includes(o.id)).length}),i},[e]);return m.jsxs("div",{className:"space-y-6 max-w-3xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Labels & Metadata"}),m.jsx("p",{className:"text-secondary mt-1",children:"Voorgedefineerde labels voor tool classificatie"})]}),m.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-500/10 rounded-lg text-blue-600 dark:text-blue-400",children:[m.jsx("span",{className:"material-symbols-outlined mt-0.5",children:"info"}),m.jsxs("div",{className:"text-sm",children:[m.jsx("p",{className:"font-medium",children:"Labels zijn vooraf gedefinieerd"}),m.jsx("p",{className:"mt-1 opacity-80",children:'Elke tool moet exact n primair label hebben. Het label "Extern" kan optioneel worden toegevoegd voor tools die buiten DaCapoTools openen.'})]})]}),m.jsxs("section",{className:"bg-card rounded-xl border border-theme overflow-hidden",children:[m.jsxs("div",{className:"px-5 py-3 border-b border-theme flex items-center justify-between",children:[m.jsx("h3",{className:"font-semibold",children:"Primaire Labels"}),m.jsxs("span",{className:"text-sm text-secondary",children:[kc.length," labels"]})]}),m.jsx("div",{className:"divide-y divide-[var(--border-light)] dark:divide-[var(--border-dark)]",children:kc.map(i=>m.jsxs("div",{className:"p-4 flex items-center gap-3",children:[m.jsx("div",{className:"size-10 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:i.color},children:m.jsx("span",{className:"material-symbols-outlined",children:i.icon})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("span",{className:"font-medium",children:i.name}),m.jsxs("span",{className:"text-xs text-secondary ml-2",children:["(",n[i.id]||0," tools)"]})]}),m.jsx("span",{className:"text-xs text-secondary font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:i.id})]},i.id))})]}),m.jsxs("section",{className:"bg-card rounded-xl border border-theme overflow-hidden",children:[m.jsx("div",{className:"px-5 py-3 border-b border-theme",children:m.jsx("h3",{className:"font-semibold",children:"Secundair Label"})}),m.jsxs("div",{className:"p-4 flex items-center gap-3",children:[m.jsx("div",{className:"size-10 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:pr.color},children:m.jsx("span",{className:"material-symbols-outlined",children:pr.icon})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("span",{className:"font-medium",children:pr.name}),m.jsxs("span",{className:"text-xs text-secondary ml-2",children:["(",n[pr.id]||0," tools)"]}),m.jsx("p",{className:"text-sm text-secondary mt-1",children:"Markeert tools die in een nieuw tabblad openen"})]}),m.jsx("span",{className:"text-xs text-secondary font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:pr.id})]})]}),m.jsxs("section",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Regels"}),m.jsxs("ul",{className:"space-y-2 text-sm text-secondary",children:[m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),"Elke tool heeft exact n primair label"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),'"Extern" is optioneel en kan alleen samen met een primair label']}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"check_circle"}),"Maximaal 2 labels per tool"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-red-500 text-lg",children:"cancel"}),'"Extern" kan niet als enige label worden toegekend']})]})]})]})}function C4(){const{isSupervisor:s}=rn(),{tools:e}=Da(),[n,i]=L.useState(new Date().toISOString().slice(0,7)),[o,c]=L.useState("all"),[u,p]=L.useState(null),g=jc(),y=L.useMemo(()=>{const T=[],N=new Date;for(let R=0;R<12;R++){const V=new Date(N.getFullYear(),N.getMonth()-R,1);T.push({value:V.toISOString().slice(0,7),label:V.toLocaleDateString("nl-NL",{month:"long",year:"numeric"})})}return T},[]),b=L.useMemo(()=>({period:n,totalUsers:0,activeUsers:0,totalCreditsUsed:0,totalCosts:0,apps:g.map(T=>({appId:T,name:xi[T]?.appName,creditsUsed:0,cost:0}))}),[n,g]),x=async T=>{p(T),await new Promise(N=>setTimeout(N,1500)),alert(`${T.toUpperCase()} export functie komt binnenkort beschikbaar`),p(null)};return m.jsxs("div",{className:"space-y-6 max-w-7xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Rapportages"}),m.jsx("p",{className:"text-secondary mt-1",children:"Genereer en exporteer maandelijkse rapporten"})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Rapport Instellingen"}),m.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Periode"}),m.jsx("select",{value:n,onChange:T=>i(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800",children:y.map(T=>m.jsx("option",{value:T.value,children:T.label},T.value))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"App"}),m.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-theme bg-white dark:bg-gray-800",children:[m.jsx("option",{value:"all",children:"Alle Apps"}),g.map(T=>m.jsx("option",{value:T,children:xi[T]?.appName},T))]})]}),m.jsx("div",{className:"flex items-end",children:m.jsxs("button",{className:"w-full px-4 py-2 bg-[#2860E0] text-white rounded-lg hover:bg-[#1C4DAB] transition-colors flex items-center justify-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-xl",children:"refresh"}),"Genereer Rapport"]})})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"font-semibold",children:"Rapport Overzicht"}),m.jsx("p",{className:"text-sm text-secondary",children:y.find(T=>T.value===n)?.label})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-secondary",children:"Actieve Gebruikers"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:b.activeUsers})]}),m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-secondary",children:"Credits Gebruikt"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:b.totalCreditsUsed})]}),m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-secondary",children:"Totale Kosten"}),m.jsxs("p",{className:"text-2xl font-bold mt-1",children:["",b.totalCosts.toFixed(2)]})]}),m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-secondary",children:"Aantal Tools"}),m.jsx("p",{className:"text-2xl font-bold mt-1",children:e.length})]})]}),m.jsxs("div",{className:"border-t border-theme pt-4",children:[m.jsx("h4",{className:"font-medium mb-3",children:"Per App"}),m.jsx("div",{className:"space-y-2",children:b.apps.map(T=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[m.jsx("span",{className:"font-medium",children:T.name}),m.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[m.jsxs("span",{className:"text-secondary",children:[T.creditsUsed," credits"]}),m.jsxs("span",{className:"font-medium",children:["",T.cost.toFixed(2)]})]})]},T.appId))})]}),m.jsxs("div",{className:"mt-6 p-4 bg-blue-500/10 rounded-lg text-center",children:[m.jsx("span",{className:"material-symbols-outlined text-3xl text-blue-500 mb-2 block",children:"info"}),m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Rapportagedata wordt verzameld zodra het creditsysteem in gebruik is."})]})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Exporteren"}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsxs("button",{onClick:()=>x("pdf"),disabled:u==="pdf",className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:[u==="pdf"?m.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):m.jsx("span",{className:"material-symbols-outlined text-xl",children:"picture_as_pdf"}),"Exporteer als PDF"]}),m.jsxs("button",{onClick:()=>x("excel"),disabled:u==="excel",className:"inline-flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[u==="excel"?m.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):m.jsx("span",{className:"material-symbols-outlined text-xl",children:"table_chart"}),"Exporteer als Excel"]}),m.jsxs("button",{onClick:()=>x("csv"),disabled:u==="csv",className:"inline-flex items-center gap-2 px-6 py-3 border border-theme rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:[u==="csv"?m.jsx("span",{className:"material-symbols-outlined text-xl animate-spin",children:"sync"}):m.jsx("span",{className:"material-symbols-outlined text-xl",children:"csv"}),"Exporteer als CSV"]})]}),m.jsx("p",{className:"text-sm text-secondary mt-4",children:"Export functionaliteit wordt binnenkort toegevoegd."})]}),m.jsxs("div",{className:"bg-card rounded-xl border border-theme p-5",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Recente Rapporten"}),m.jsxs("div",{className:"text-center py-8 text-secondary",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"folder_open"}),m.jsx("p",{children:"Nog geen rapporten gegenereerd"})]})]})]})}function I4(){return m.jsx(l1,{children:m.jsx(y1,{children:m.jsx(e4,{children:m.jsxs(LR,{children:[m.jsx(Yn,{path:"/",element:m.jsx(u4,{})}),m.jsxs(Yn,{path:"/admin",element:m.jsx(m4,{}),children:[m.jsx(Yn,{index:!0,element:m.jsx(g4,{})}),m.jsx(Yn,{path:"tools",element:m.jsx(y4,{})}),m.jsx(Yn,{path:"tools/:id",element:m.jsx(ME,{})}),m.jsx(Yn,{path:"tools/new",element:m.jsx(ME,{})}),m.jsx(Yn,{path:"users",element:m.jsx(E4,{})}),m.jsx(Yn,{path:"credits",element:m.jsx(A4,{})}),m.jsx(Yn,{path:"costs",element:m.jsx(R4,{})}),m.jsx(Yn,{path:"labels",element:m.jsx(N4,{})}),m.jsx(Yn,{path:"reports",element:m.jsx(C4,{})})]})]})})})})}VA.createRoot(document.getElementById("root")).render(m.jsx(L.StrictMode,{children:m.jsx(I4,{})}));
